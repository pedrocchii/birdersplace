(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function n(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(l){if(l.ep)return;l.ep=!0;const h=n(l);fetch(l.href,h)}})();function xT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Km={exports:{}},cc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function M1(){if(Ov)return cc;Ov=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(o,l,h){var p=null;if(h!==void 0&&(p=""+h),l.key!==void 0&&(p=""+l.key),"key"in l){h={};for(var v in l)v!=="key"&&(h[v]=l[v])}else h=l;return l=h.ref,{$$typeof:r,type:o,key:p,ref:l!==void 0?l:null,props:h}}return cc.Fragment=t,cc.jsx=n,cc.jsxs=n,cc}var Dv;function O1(){return Dv||(Dv=1,Km.exports=M1()),Km.exports}var A=O1(),Xm={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function D1(){if(Nv)return ye;Nv=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),p=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),P=Symbol.iterator;function M(D){return D===null||typeof D!="object"?null:(D=P&&D[P]||D["@@iterator"],typeof D=="function"?D:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,et={};function lt(D,ut,wt){this.props=D,this.context=ut,this.refs=et,this.updater=wt||q}lt.prototype.isReactComponent={},lt.prototype.setState=function(D,ut){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,ut,"setState")},lt.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function Tt(){}Tt.prototype=lt.prototype;function ht(D,ut,wt){this.props=D,this.context=ut,this.refs=et,this.updater=wt||q}var yt=ht.prototype=new Tt;yt.constructor=ht,W(yt,lt.prototype),yt.isPureReactComponent=!0;var Ht=Array.isArray,Pt={H:null,A:null,T:null,S:null,V:null},zt=Object.prototype.hasOwnProperty;function V(D,ut,wt,rt,Et,xt){return wt=xt.ref,{$$typeof:r,type:D,key:ut,ref:wt!==void 0?wt:null,props:xt}}function O(D,ut){return V(D.type,ut,void 0,void 0,void 0,D.props)}function k(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function j(D){var ut={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(wt){return ut[wt]})}var B=/\/+/g;function H(D,ut){return typeof D=="object"&&D!==null&&D.key!=null?j(""+D.key):ut.toString(36)}function N(){}function ge(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(N,N):(D.status="pending",D.then(function(ut){D.status==="pending"&&(D.status="fulfilled",D.value=ut)},function(ut){D.status==="pending"&&(D.status="rejected",D.reason=ut)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function de(D,ut,wt,rt,Et){var xt=typeof D;(xt==="undefined"||xt==="boolean")&&(D=null);var St=!1;if(D===null)St=!0;else switch(xt){case"bigint":case"string":case"number":St=!0;break;case"object":switch(D.$$typeof){case r:case t:St=!0;break;case x:return St=D._init,de(St(D._payload),ut,wt,rt,Et)}}if(St)return Et=Et(D),St=rt===""?"."+H(D,0):rt,Ht(Et)?(wt="",St!=null&&(wt=St.replace(B,"$&/")+"/"),de(Et,ut,wt,"",function(je){return je})):Et!=null&&(k(Et)&&(Et=O(Et,wt+(Et.key==null||D&&D.key===Et.key?"":(""+Et.key).replace(B,"$&/")+"/")+St)),ut.push(Et)),1;St=0;var Ee=rt===""?".":rt+":";if(Ht(D))for(var ce=0;ce<D.length;ce++)rt=D[ce],xt=Ee+H(rt,ce),St+=de(rt,ut,wt,xt,Et);else if(ce=M(D),typeof ce=="function")for(D=ce.call(D),ce=0;!(rt=D.next()).done;)rt=rt.value,xt=Ee+H(rt,ce++),St+=de(rt,ut,wt,xt,Et);else if(xt==="object"){if(typeof D.then=="function")return de(ge(D),ut,wt,rt,Et);throw ut=String(D),Error("Objects are not valid as a React child (found: "+(ut==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":ut)+"). If you meant to render a collection of children, use an array instead.")}return St}function J(D,ut,wt){if(D==null)return D;var rt=[],Et=0;return de(D,rt,"","",function(xt){return ut.call(wt,xt,Et++)}),rt}function At(D){if(D._status===-1){var ut=D._result;ut=ut(),ut.then(function(wt){(D._status===0||D._status===-1)&&(D._status=1,D._result=wt)},function(wt){(D._status===0||D._status===-1)&&(D._status=2,D._result=wt)}),D._status===-1&&(D._status=0,D._result=ut)}if(D._status===1)return D._result.default;throw D._result}var ot=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ut=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(ut))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function te(){}return ye.Children={map:J,forEach:function(D,ut,wt){J(D,function(){ut.apply(this,arguments)},wt)},count:function(D){var ut=0;return J(D,function(){ut++}),ut},toArray:function(D){return J(D,function(ut){return ut})||[]},only:function(D){if(!k(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},ye.Component=lt,ye.Fragment=n,ye.Profiler=l,ye.PureComponent=ht,ye.StrictMode=o,ye.Suspense=y,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Pt,ye.__COMPILER_RUNTIME={__proto__:null,c:function(D){return Pt.H.useMemoCache(D)}},ye.cache=function(D){return function(){return D.apply(null,arguments)}},ye.cloneElement=function(D,ut,wt){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var rt=W({},D.props),Et=D.key,xt=void 0;if(ut!=null)for(St in ut.ref!==void 0&&(xt=void 0),ut.key!==void 0&&(Et=""+ut.key),ut)!zt.call(ut,St)||St==="key"||St==="__self"||St==="__source"||St==="ref"&&ut.ref===void 0||(rt[St]=ut[St]);var St=arguments.length-2;if(St===1)rt.children=wt;else if(1<St){for(var Ee=Array(St),ce=0;ce<St;ce++)Ee[ce]=arguments[ce+2];rt.children=Ee}return V(D.type,Et,void 0,void 0,xt,rt)},ye.createContext=function(D){return D={$$typeof:p,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:h,_context:D},D},ye.createElement=function(D,ut,wt){var rt,Et={},xt=null;if(ut!=null)for(rt in ut.key!==void 0&&(xt=""+ut.key),ut)zt.call(ut,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(Et[rt]=ut[rt]);var St=arguments.length-2;if(St===1)Et.children=wt;else if(1<St){for(var Ee=Array(St),ce=0;ce<St;ce++)Ee[ce]=arguments[ce+2];Et.children=Ee}if(D&&D.defaultProps)for(rt in St=D.defaultProps,St)Et[rt]===void 0&&(Et[rt]=St[rt]);return V(D,xt,void 0,void 0,null,Et)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(D){return{$$typeof:v,render:D}},ye.isValidElement=k,ye.lazy=function(D){return{$$typeof:x,_payload:{_status:-1,_result:D},_init:At}},ye.memo=function(D,ut){return{$$typeof:E,type:D,compare:ut===void 0?null:ut}},ye.startTransition=function(D){var ut=Pt.T,wt={};Pt.T=wt;try{var rt=D(),Et=Pt.S;Et!==null&&Et(wt,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(te,ot)}catch(xt){ot(xt)}finally{Pt.T=ut}},ye.unstable_useCacheRefresh=function(){return Pt.H.useCacheRefresh()},ye.use=function(D){return Pt.H.use(D)},ye.useActionState=function(D,ut,wt){return Pt.H.useActionState(D,ut,wt)},ye.useCallback=function(D,ut){return Pt.H.useCallback(D,ut)},ye.useContext=function(D){return Pt.H.useContext(D)},ye.useDebugValue=function(){},ye.useDeferredValue=function(D,ut){return Pt.H.useDeferredValue(D,ut)},ye.useEffect=function(D,ut,wt){var rt=Pt.H;if(typeof wt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return rt.useEffect(D,ut)},ye.useId=function(){return Pt.H.useId()},ye.useImperativeHandle=function(D,ut,wt){return Pt.H.useImperativeHandle(D,ut,wt)},ye.useInsertionEffect=function(D,ut){return Pt.H.useInsertionEffect(D,ut)},ye.useLayoutEffect=function(D,ut){return Pt.H.useLayoutEffect(D,ut)},ye.useMemo=function(D,ut){return Pt.H.useMemo(D,ut)},ye.useOptimistic=function(D,ut){return Pt.H.useOptimistic(D,ut)},ye.useReducer=function(D,ut,wt){return Pt.H.useReducer(D,ut,wt)},ye.useRef=function(D){return Pt.H.useRef(D)},ye.useState=function(D){return Pt.H.useState(D)},ye.useSyncExternalStore=function(D,ut,wt){return Pt.H.useSyncExternalStore(D,ut,wt)},ye.useTransition=function(){return Pt.H.useTransition()},ye.version="19.1.1",ye}var Lv;function jp(){return Lv||(Lv=1,Xm.exports=D1()),Xm.exports}var G=jp();const dp=xT(G);var $m={exports:{}},hc={},Jm={exports:{}},tp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv;function N1(){return kv||(kv=1,(function(r){function t(J,At){var ot=J.length;J.push(At);t:for(;0<ot;){var te=ot-1>>>1,D=J[te];if(0<l(D,At))J[te]=At,J[ot]=D,ot=te;else break t}}function n(J){return J.length===0?null:J[0]}function o(J){if(J.length===0)return null;var At=J[0],ot=J.pop();if(ot!==At){J[0]=ot;t:for(var te=0,D=J.length,ut=D>>>1;te<ut;){var wt=2*(te+1)-1,rt=J[wt],Et=wt+1,xt=J[Et];if(0>l(rt,ot))Et<D&&0>l(xt,rt)?(J[te]=xt,J[Et]=ot,te=Et):(J[te]=rt,J[wt]=ot,te=wt);else if(Et<D&&0>l(xt,ot))J[te]=xt,J[Et]=ot,te=Et;else break t}}return At}function l(J,At){var ot=J.sortIndex-At.sortIndex;return ot!==0?ot:J.id-At.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;r.unstable_now=function(){return h.now()}}else{var p=Date,v=p.now();r.unstable_now=function(){return p.now()-v}}var y=[],E=[],x=1,P=null,M=3,q=!1,W=!1,et=!1,lt=!1,Tt=typeof setTimeout=="function"?setTimeout:null,ht=typeof clearTimeout=="function"?clearTimeout:null,yt=typeof setImmediate<"u"?setImmediate:null;function Ht(J){for(var At=n(E);At!==null;){if(At.callback===null)o(E);else if(At.startTime<=J)o(E),At.sortIndex=At.expirationTime,t(y,At);else break;At=n(E)}}function Pt(J){if(et=!1,Ht(J),!W)if(n(y)!==null)W=!0,zt||(zt=!0,H());else{var At=n(E);At!==null&&de(Pt,At.startTime-J)}}var zt=!1,V=-1,O=5,k=-1;function j(){return lt?!0:!(r.unstable_now()-k<O)}function B(){if(lt=!1,zt){var J=r.unstable_now();k=J;var At=!0;try{t:{W=!1,et&&(et=!1,ht(V),V=-1),q=!0;var ot=M;try{e:{for(Ht(J),P=n(y);P!==null&&!(P.expirationTime>J&&j());){var te=P.callback;if(typeof te=="function"){P.callback=null,M=P.priorityLevel;var D=te(P.expirationTime<=J);if(J=r.unstable_now(),typeof D=="function"){P.callback=D,Ht(J),At=!0;break e}P===n(y)&&o(y),Ht(J)}else o(y);P=n(y)}if(P!==null)At=!0;else{var ut=n(E);ut!==null&&de(Pt,ut.startTime-J),At=!1}}break t}finally{P=null,M=ot,q=!1}At=void 0}}finally{At?H():zt=!1}}}var H;if(typeof yt=="function")H=function(){yt(B)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ge=N.port2;N.port1.onmessage=B,H=function(){ge.postMessage(null)}}else H=function(){Tt(B,0)};function de(J,At){V=Tt(function(){J(r.unstable_now())},At)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(J){J.callback=null},r.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<J?Math.floor(1e3/J):5},r.unstable_getCurrentPriorityLevel=function(){return M},r.unstable_next=function(J){switch(M){case 1:case 2:case 3:var At=3;break;default:At=M}var ot=M;M=At;try{return J()}finally{M=ot}},r.unstable_requestPaint=function(){lt=!0},r.unstable_runWithPriority=function(J,At){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ot=M;M=J;try{return At()}finally{M=ot}},r.unstable_scheduleCallback=function(J,At,ot){var te=r.unstable_now();switch(typeof ot=="object"&&ot!==null?(ot=ot.delay,ot=typeof ot=="number"&&0<ot?te+ot:te):ot=te,J){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ot+D,J={id:x++,callback:At,priorityLevel:J,startTime:ot,expirationTime:D,sortIndex:-1},ot>te?(J.sortIndex=ot,t(E,J),n(y)===null&&J===n(E)&&(et?(ht(V),V=-1):et=!0,de(Pt,ot-te))):(J.sortIndex=D,t(y,J),W||q||(W=!0,zt||(zt=!0,H()))),J},r.unstable_shouldYield=j,r.unstable_wrapCallback=function(J){var At=M;return function(){var ot=M;M=At;try{return J.apply(this,arguments)}finally{M=ot}}}})(tp)),tp}var Vv;function L1(){return Vv||(Vv=1,Jm.exports=N1()),Jm.exports}var ep={exports:{}},Ci={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function k1(){if(zv)return Ci;zv=1;var r=jp();function t(y){var E="https://react.dev/errors/"+y;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)E+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+y+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function h(y,E,x){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:P==null?null:""+P,children:y,containerInfo:E,implementation:x}}var p=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(y,E){if(y==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return Ci.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Ci.createPortal=function(y,E){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(t(299));return h(y,E,null,x)},Ci.flushSync=function(y){var E=p.T,x=o.p;try{if(p.T=null,o.p=2,y)return y()}finally{p.T=E,o.p=x,o.d.f()}},Ci.preconnect=function(y,E){typeof y=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,o.d.C(y,E))},Ci.prefetchDNS=function(y){typeof y=="string"&&o.d.D(y)},Ci.preinit=function(y,E){if(typeof y=="string"&&E&&typeof E.as=="string"){var x=E.as,P=v(x,E.crossOrigin),M=typeof E.integrity=="string"?E.integrity:void 0,q=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;x==="style"?o.d.S(y,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:P,integrity:M,fetchPriority:q}):x==="script"&&o.d.X(y,{crossOrigin:P,integrity:M,fetchPriority:q,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},Ci.preinitModule=function(y,E){if(typeof y=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var x=v(E.as,E.crossOrigin);o.d.M(y,{crossOrigin:x,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&o.d.M(y)},Ci.preload=function(y,E){if(typeof y=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var x=E.as,P=v(x,E.crossOrigin);o.d.L(y,x,{crossOrigin:P,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},Ci.preloadModule=function(y,E){if(typeof y=="string")if(E){var x=v(E.as,E.crossOrigin);o.d.m(y,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:x,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else o.d.m(y)},Ci.requestFormReset=function(y){o.d.r(y)},Ci.unstable_batchedUpdates=function(y,E){return y(E)},Ci.useFormState=function(y,E,x){return p.H.useFormState(y,E,x)},Ci.useFormStatus=function(){return p.H.useHostTransitionStatus()},Ci.version="19.1.1",Ci}var Uv;function RT(){if(Uv)return ep.exports;Uv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),ep.exports=k1(),ep.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function V1(){if(jv)return hc;jv=1;var r=L1(),t=jp(),n=RT();function o(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function p(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function v(e){if(h(e)!==e)throw Error(o(188))}function y(e){var i=e.alternate;if(!i){if(i=h(e),i===null)throw Error(o(188));return i!==e?null:e}for(var a=e,c=i;;){var m=a.return;if(m===null)break;var g=m.alternate;if(g===null){if(c=m.return,c!==null){a=c;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===a)return v(m),e;if(g===c)return v(m),i;g=g.sibling}throw Error(o(188))}if(a.return!==c.return)a=m,c=g;else{for(var S=!1,I=m.child;I;){if(I===a){S=!0,a=m,c=g;break}if(I===c){S=!0,c=m,a=g;break}I=I.sibling}if(!S){for(I=g.child;I;){if(I===a){S=!0,a=g,c=m;break}if(I===c){S=!0,c=g,a=m;break}I=I.sibling}if(!S)throw Error(o(189))}}if(a.alternate!==c)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:i}function E(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=E(e),i!==null)return i;e=e.sibling}return null}var x=Object.assign,P=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),et=Symbol.for("react.strict_mode"),lt=Symbol.for("react.profiler"),Tt=Symbol.for("react.provider"),ht=Symbol.for("react.consumer"),yt=Symbol.for("react.context"),Ht=Symbol.for("react.forward_ref"),Pt=Symbol.for("react.suspense"),zt=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function H(e){return e===null||typeof e!="object"?null:(e=B&&e[B]||e["@@iterator"],typeof e=="function"?e:null)}var N=Symbol.for("react.client.reference");function ge(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===N?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case lt:return"Profiler";case et:return"StrictMode";case Pt:return"Suspense";case zt:return"SuspenseList";case k:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case q:return"Portal";case yt:return(e.displayName||"Context")+".Provider";case ht:return(e._context.displayName||"Context")+".Consumer";case Ht:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V:return i=e.displayName||null,i!==null?i:ge(e.type)||"Memo";case O:i=e._payload,e=e._init;try{return ge(e(i))}catch{}}return null}var de=Array.isArray,J=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,At=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot={pending:!1,data:null,method:null,action:null},te=[],D=-1;function ut(e){return{current:e}}function wt(e){0>D||(e.current=te[D],te[D]=null,D--)}function rt(e,i){D++,te[D]=e.current,e.current=i}var Et=ut(null),xt=ut(null),St=ut(null),Ee=ut(null);function ce(e,i){switch(rt(St,i),rt(xt,e),rt(Et,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?ov(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=ov(i),e=av(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}wt(Et),rt(Et,e)}function je(){wt(Et),wt(xt),wt(St)}function Oe(e){e.memoizedState!==null&&rt(Ee,e);var i=Et.current,a=av(i,e.type);i!==a&&(rt(xt,e),rt(Et,a))}function Be(e){xt.current===e&&(wt(Et),wt(xt)),Ee.current===e&&(wt(Ee),sc._currentValue=ot)}var oe=Object.prototype.hasOwnProperty,nn=r.unstable_scheduleCallback,wn=r.unstable_cancelCallback,Hn=r.unstable_shouldYield,Ti=r.unstable_requestPaint,rn=r.unstable_now,Nn=r.unstable_getCurrentPriorityLevel,Kn=r.unstable_ImmediatePriority,Xn=r.unstable_UserBlockingPriority,sn=r.unstable_NormalPriority,Ei=r.unstable_LowPriority,De=r.unstable_IdlePriority,li=r.log,Zi=r.unstable_setDisableYieldValue,le=null,ve=null;function pn(e){if(typeof li=="function"&&Zi(e),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(le,e)}catch{}}var K=Math.clz32?Math.clz32:Nt,it=Math.log,bt=Math.LN2;function Nt(e){return e>>>=0,e===0?32:31-(it(e)/bt|0)|0}var kt=256,Rt=4194304;function Ot(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function me(e,i,a){var c=e.pendingLanes;if(c===0)return 0;var m=0,g=e.suspendedLanes,S=e.pingedLanes;e=e.warmLanes;var I=c&134217727;return I!==0?(c=I&~g,c!==0?m=Ot(c):(S&=I,S!==0?m=Ot(S):a||(a=I&~e,a!==0&&(m=Ot(a))))):(I=c&~g,I!==0?m=Ot(I):S!==0?m=Ot(S):a||(a=c&~e,a!==0&&(m=Ot(a)))),m===0?0:i!==0&&i!==m&&(i&g)===0&&(g=m&-m,a=i&-i,g>=a||g===32&&(a&4194048)!==0)?i:m}function pe(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function ct(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function It(){var e=kt;return kt<<=1,(kt&4194048)===0&&(kt=256),e}function _t(){var e=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),e}function Qt(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function $t(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ft(e,i,a,c,m,g){var S=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var I=e.entanglements,U=e.expirationTimes,$=e.hiddenUpdates;for(a=S&~a;0<a;){var dt=31-K(a),pt=1<<dt;I[dt]=0,U[dt]=-1;var tt=$[dt];if(tt!==null)for($[dt]=null,dt=0;dt<tt.length;dt++){var nt=tt[dt];nt!==null&&(nt.lane&=-536870913)}a&=~pt}c!==0&&Wt(e,c,0),g!==0&&m===0&&e.tag!==0&&(e.suspendedLanes|=g&~(S&~i))}function Wt(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var c=31-K(i);e.entangledLanes|=i,e.entanglements[c]=e.entanglements[c]|1073741824|a&4194090}function Fe(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var c=31-K(a),m=1<<c;m&i|e[c]&i&&(e[c]|=i),a&=~m}}function qn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function $n(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ni(){var e=At.p;return e!==0?e:(e=window.event,e===void 0?32:xv(e.type))}function or(e,i){var a=At.p;try{return At.p=e,i()}finally{At.p=a}}var Ge=Math.random().toString(36).slice(2),fn="__reactFiber$"+Ge,on="__reactProps$"+Ge,bi="__reactContainer$"+Ge,Fn="__reactEvents$"+Ge,Bt="__reactListeners$"+Ge,Wi="__reactHandles$"+Ge,Ds="__reactResources$"+Ge,Ar="__reactMarker$"+Ge;function Yi(e){delete e[fn],delete e[on],delete e[Fn],delete e[Bt],delete e[Wi]}function ui(e){var i=e[fn];if(i)return i;for(var a=e.parentNode;a;){if(i=a[bi]||a[fn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=hv(e);e!==null;){if(a=e[fn])return a;e=hv(e)}return i}e=a,a=e.parentNode}return null}function ci(e){if(e=e[fn]||e[bi]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function be(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(o(33))}function Sn(e){var i=e[Ds];return i||(i=e[Ds]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function an(e){e[Ar]=!0}var An=new Set,Qi={};function hi(e,i){wi(e,i),wi(e+"Capture",i)}function wi(e,i){for(Qi[e]=i,e=0;e<i.length;e++)An.add(i[e])}var as=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hr={},Ns={};function cl(e){return oe.call(Ns,e)?!0:oe.call(Hr,e)?!1:as.test(e)?Ns[e]=!0:(Hr[e]=!0,!1)}function ls(e,i,a){if(cl(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function xr(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Gn(e,i,a,c){if(c===null)e.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+c)}}var qr,us;function Rr(e){if(qr===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);qr=i&&i[1]||"",us=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qr+e+us}var Ls=!1;function Ir(e,i){if(!e||Ls)return"";Ls=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(nt){var tt=nt}Reflect.construct(e,[],pt)}else{try{pt.call()}catch(nt){tt=nt}e.call(pt.prototype)}}else{try{throw Error()}catch(nt){tt=nt}(pt=e())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(nt){if(nt&&tt&&typeof nt.stack=="string")return[nt.stack,tt.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),S=g[0],I=g[1];if(S&&I){var U=S.split(`
`),$=I.split(`
`);for(m=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;m<$.length&&!$[m].includes("DetermineComponentFrameRoot");)m++;if(c===U.length||m===$.length)for(c=U.length-1,m=$.length-1;1<=c&&0<=m&&U[c]!==$[m];)m--;for(;1<=c&&0<=m;c--,m--)if(U[c]!==$[m]){if(c!==1||m!==1)do if(c--,m--,0>m||U[c]!==$[m]){var dt=`
`+U[c].replace(" at new "," at ");return e.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",e.displayName)),dt}while(1<=c&&0<=m);break}}}finally{Ls=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Rr(a):""}function we(e){switch(e.tag){case 26:case 27:case 5:return Rr(e.type);case 16:return Rr("Lazy");case 13:return Rr("Suspense");case 19:return Rr("SuspenseList");case 0:case 15:return Ir(e.type,!1);case 11:return Ir(e.type.render,!1);case 1:return Ir(e.type,!0);case 31:return Rr("Activity");default:return""}}function He(e){try{var i="";do i+=we(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Ln(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Cr(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function cs(e){var i=Cr(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),c=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var m=a.get,g=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return m.call(this)},set:function(S){c=""+S,g.call(this,S)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(S){c=""+S},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function hs(e){e._valueTracker||(e._valueTracker=cs(e))}function he(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return e&&(c=Cr(e)?e.checked?"true":"false":e.value),e=c,e!==a?(i.setValue(e),!0):!1}function Ze(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var wa=/[\n"\\]/g;function dn(e){return e.replace(wa,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ln(e,i,a,c,m,g,S,I){e.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.type=S:e.removeAttribute("type"),i!=null?S==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Ln(i)):e.value!==""+Ln(i)&&(e.value=""+Ln(i)):S!=="submit"&&S!=="reset"||e.removeAttribute("value"),i!=null?ar(e,S,Ln(i)):a!=null?ar(e,S,Ln(a)):c!=null&&e.removeAttribute("value"),m==null&&g!=null&&(e.defaultChecked=!!g),m!=null&&(e.checked=m&&typeof m!="function"&&typeof m!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?e.name=""+Ln(I):e.removeAttribute("name")}function ks(e,i,a,c,m,g,S,I){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),i!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;a=a!=null?""+Ln(a):"",i=i!=null?""+Ln(i):a,I||i===e.value||(e.value=i),e.defaultValue=i}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=I?e.checked:!!c,e.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(e.name=S)}function ar(e,i,a){i==="number"&&Ze(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function fi(e,i,a,c){if(e=e.options,i){i={};for(var m=0;m<a.length;m++)i["$"+a[m]]=!0;for(a=0;a<e.length;a++)m=i.hasOwnProperty("$"+e[a].value),e[a].selected!==m&&(e[a].selected=m),m&&c&&(e[a].defaultSelected=!0)}else{for(a=""+Ln(a),i=null,m=0;m<e.length;m++){if(e[m].value===a){e[m].selected=!0,c&&(e[m].defaultSelected=!0);return}i!==null||e[m].disabled||(i=e[m])}i!==null&&(i.selected=!0)}}function ie(e,i,a){if(i!=null&&(i=""+Ln(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+Ln(a):""}function Li(e,i,a,c){if(i==null){if(c!=null){if(a!=null)throw Error(o(92));if(de(c)){if(1<c.length)throw Error(o(93));c=c[0]}a=c}a==null&&(a=""),i=a}a=Ln(i),e.defaultValue=a,c=e.textContent,c===a&&c!==""&&c!==null&&(e.value=c)}function Jn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var lr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function po(e,i,a){var c=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":c?e.setProperty(i,a):typeof a!="number"||a===0||lr.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function Fr(e,i,a){if(i!=null&&typeof i!="object")throw Error(o(62));if(e=e.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var m in i)c=i[m],i.hasOwnProperty(m)&&a[m]!==c&&po(e,m,c)}else for(var g in i)i.hasOwnProperty(g)&&po(e,g,i[g])}function Vs(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sa=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),go=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fs(e){return go.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var ur=null;function di(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pr=null,cr=null;function Aa(e){var i=ci(e);if(i&&(e=i.stateNode)){var a=e[on]||null;t:switch(e=i.stateNode,i.type){case"input":if(ln(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+dn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==e&&c.form===e.form){var m=c[on]||null;if(!m)throw Error(o(90));ln(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<a.length;i++)c=a[i],c.form===e.form&&he(c)}break t;case"textarea":ie(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&fi(e,!!a.multiple,i,!1)}}}var Kt=!1;function ki(e,i,a){if(Kt)return e(i,a);Kt=!0;try{var c=e(i);return c}finally{if(Kt=!1,(Pr!==null||cr!==null)&&(jh(),Pr&&(i=Pr,e=cr,cr=Pr=null,Aa(i),e)))for(i=0;i<e.length;i++)Aa(e[i])}}function Ne(e,i){var a=e.stateNode;if(a===null)return null;var c=a[on]||null;if(c===null)return null;a=c[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,i,typeof a));return a}var Ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Si=!1;if(Ki)try{var Gr={};Object.defineProperty(Gr,"passive",{get:function(){Si=!0}}),window.addEventListener("test",Gr,Gr),window.removeEventListener("test",Gr,Gr)}catch{Si=!1}var Xi=null,Ai=null,hr=null;function Zr(){if(hr)return hr;var e,i=Ai,a=i.length,c,m="value"in Xi?Xi.value:Xi.textContent,g=m.length;for(e=0;e<a&&i[e]===m[e];e++);var S=a-e;for(c=1;c<=S&&i[a-c]===m[g-c];c++);return hr=m.slice(e,1<c?1-c:void 0)}function Qe(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function ti(){return!0}function _o(){return!1}function In(e){function i(a,c,m,g,S){this._reactName=a,this._targetInst=m,this.type=c,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var I in e)e.hasOwnProperty(I)&&(a=e[I],this[I]=a?a(g):g[I]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ti:_o,this.isPropagationStopped=_o,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),i}var ze={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zs=In(ze),Wr=x({},ze,{view:0,detail:0}),hl=In(Wr),Us,_e,Mr,Zn=x({},Wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ms,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mr&&(Mr&&e.type==="mousemove"?(Us=e.screenX-Mr.screenX,_e=e.screenY-Mr.screenY):_e=Us=0,Mr=e),Us)},movementY:function(e){return"movementY"in e?e.movementY:_e}}),ei=In(Zn),xa=x({},Zn,{dataTransfer:0}),bu=In(xa),Yr=x({},Wr,{relatedTarget:0}),yo=In(Yr),vo=x({},ze,{animationName:0,elapsedTime:0,pseudoElement:0}),To=In(vo),fl=x({},ze,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ds=In(fl),wu=x({},ze,{data:0}),xi=In(wu),js={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ra={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eo(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=fr[e])?!!i[e]:!1}function ms(){return Eo}var bo=x({},Wr,{key:function(e){if(e.key){var i=js[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Qe(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ra[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ms,charCode:function(e){return e.type==="keypress"?Qe(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qe(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wo=In(bo),Ia=x({},Zn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),So=In(Ia),Qr=x({},Wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ms}),dl=In(Qr),Ao=x({},ze,{propertyName:0,elapsedTime:0,pseudoElement:0}),ml=In(Ao),Ca=x({},Zn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Bs=In(Ca),kn=x({},ze,{newState:0,oldState:0}),Or=In(kn),pl=[9,13,27,32],Ri=Ki&&"CompositionEvent"in window,f=null;Ki&&"documentMode"in document&&(f=document.documentMode);var T=Ki&&"TextEvent"in window&&!f,w=Ki&&(!Ri||f&&8<f&&11>=f),C=" ",Y=!1;function at(e,i){switch(e){case"keyup":return pl.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ct(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Re=!1;function xn(e,i){switch(e){case"compositionend":return Ct(i);case"keypress":return i.which!==32?null:(Y=!0,C);case"textInput":return e=i.data,e===C&&Y?null:e;default:return null}}function Ie(e,i){if(Re)return e==="compositionend"||!Ri&&at(e,i)?(e=Zr(),hr=Ai=Xi=null,Re=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return w&&i.locale!=="ko"?null:i.data;default:return null}}var qe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function un(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!qe[e.type]:i==="textarea"}function Kr(e,i,a,c){Pr?cr?cr.push(c):cr=[c]:Pr=c,i=Zh(i,"onChange"),0<i.length&&(a=new zs("onChange","change",null,a,c),e.push({event:a,listeners:i}))}var tn=null,Dr=null;function Nr(e){ev(e,0)}function gl(e){var i=be(e);if(he(i))return e}function xo(e,i){if(e==="change")return i}var Su=!1;if(Ki){var Ro;if(Ki){var Au="oninput"in document;if(!Au){var Xr=document.createElement("div");Xr.setAttribute("oninput","return;"),Au=typeof Xr.oninput=="function"}Ro=Au}else Ro=!1;Su=Ro&&(!document.documentMode||9<document.documentMode)}function Pa(){tn&&(tn.detachEvent("onpropertychange",sh),Dr=tn=null)}function sh(e){if(e.propertyName==="value"&&gl(Dr)){var i=[];Kr(i,Dr,e,di(e)),ki(Nr,i)}}function xu(e,i,a){e==="focusin"?(Pa(),tn=i,Dr=a,tn.attachEvent("onpropertychange",sh)):e==="focusout"&&Pa()}function Td(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gl(Dr)}function $r(e,i){if(e==="click")return gl(i)}function Ed(e,i){if(e==="input"||e==="change")return gl(i)}function Io(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Vi=typeof Object.is=="function"?Object.is:Io;function zi(e,i){if(Vi(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var m=a[c];if(!oe.call(i,m)||!Vi(e[m],i[m]))return!1}return!0}function Ma(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ru(e,i){var a=Ma(e);e=0;for(var c;a;){if(a.nodeType===3){if(c=e+a.textContent.length,e<=i&&c>=i)return{node:a,offset:i-e};e=c}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Ma(a)}}function _l(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?_l(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Oa(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Ze(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=Ze(e.document)}return i}function Da(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var yl=Ki&&"documentMode"in document&&11>=document.documentMode,dr=null,Co=null,Hs=null,vl=!1;function oh(e,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;vl||dr==null||dr!==Ze(c)||(c=dr,"selectionStart"in c&&Da(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Hs&&zi(Hs,c)||(Hs=c,c=Zh(Co,"onSelect"),0<c.length&&(i=new zs("onSelect","select",null,i,a),e.push({event:i,listeners:c}),i.target=dr)))}function Lr(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Po={animationend:Lr("Animation","AnimationEnd"),animationiteration:Lr("Animation","AnimationIteration"),animationstart:Lr("Animation","AnimationStart"),transitionrun:Lr("Transition","TransitionRun"),transitionstart:Lr("Transition","TransitionStart"),transitioncancel:Lr("Transition","TransitionCancel"),transitionend:Lr("Transition","TransitionEnd")},Tl={},ah={};Ki&&(ah=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function ps(e){if(Tl[e])return Tl[e];if(!Po[e])return e;var i=Po[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in ah)return Tl[e]=i[a];return e}var lh=ps("animationend"),mr=ps("animationiteration"),Na=ps("animationstart"),bd=ps("transitionrun"),El=ps("transitionstart"),wd=ps("transitioncancel"),Iu=ps("transitionend"),uh=new Map,qs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qs.push("scrollEnd");function pr(e,i){uh.set(e,i),hi(i,[e])}var Fs=new WeakMap;function Ui(e,i){if(typeof e=="object"&&e!==null){var a=Fs.get(e);return a!==void 0?a:(i={value:e,source:i,stack:He(i)},Fs.set(e,i),i)}return{value:e,source:i,stack:He(i)}}var ji=[],Mo=0,gr=0;function La(){for(var e=Mo,i=gr=Mo=0;i<e;){var a=ji[i];ji[i++]=null;var c=ji[i];ji[i++]=null;var m=ji[i];ji[i++]=null;var g=ji[i];if(ji[i++]=null,c!==null&&m!==null){var S=c.pending;S===null?m.next=m:(m.next=S.next,S.next=m),c.pending=m}g!==0&&Va(a,m,g)}}function ka(e,i,a,c){ji[Mo++]=e,ji[Mo++]=i,ji[Mo++]=a,ji[Mo++]=c,gr|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function Gs(e,i,a,c){return ka(e,i,a,c),gs(e)}function Oo(e,i){return ka(e,null,null,i),gs(e)}function Va(e,i,a){e.lanes|=a;var c=e.alternate;c!==null&&(c.lanes|=a);for(var m=!1,g=e.return;g!==null;)g.childLanes|=a,c=g.alternate,c!==null&&(c.childLanes|=a),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(m=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,m&&i!==null&&(m=31-K(a),e=g.hiddenUpdates,c=e[m],c===null?e[m]=[i]:c.push(i),i.lane=a|536870912),g):null}function gs(e){if(50<Xu)throw Xu=0,Tm=null,Error(o(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Zs={};function ch(e,i,a,c){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bi(e,i,a,c){return new ch(e,i,a,c)}function bl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function kr(e,i){var a=e.alternate;return a===null?(a=Bi(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Cu(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function za(e,i,a,c,m,g){var S=0;if(c=e,typeof e=="function")bl(e)&&(S=1);else if(typeof e=="string")S=y1(e,a,Et.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case k:return e=Bi(31,a,i,m),e.elementType=k,e.lanes=g,e;case W:return _s(a.children,m,g,i);case et:S=8,m|=24;break;case lt:return e=Bi(12,a,i,m|2),e.elementType=lt,e.lanes=g,e;case Pt:return e=Bi(13,a,i,m),e.elementType=Pt,e.lanes=g,e;case zt:return e=Bi(19,a,i,m),e.elementType=zt,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Tt:case yt:S=10;break t;case ht:S=9;break t;case Ht:S=11;break t;case V:S=14;break t;case O:S=16,c=null;break t}S=29,a=Error(o(130,e===null?"null":typeof e,"")),c=null}return i=Bi(S,a,i,m),i.elementType=e,i.type=c,i.lanes=g,i}function _s(e,i,a,c){return e=Bi(7,e,c,i),e.lanes=a,e}function Pu(e,i,a){return e=Bi(6,e,null,i),e.lanes=a,e}function wl(e,i,a){return i=Bi(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Ws=[],Do=0,s=null,u=0,d=[],_=0,b=null,R=1,z="";function Q(e,i){Ws[Do++]=u,Ws[Do++]=s,s=e,u=i}function st(e,i,a){d[_++]=R,d[_++]=z,d[_++]=b,b=e;var c=R;e=z;var m=32-K(c)-1;c&=~(1<<m),a+=1;var g=32-K(i)+m;if(30<g){var S=m-m%5;g=(c&(1<<S)-1).toString(32),c>>=S,m-=S,R=1<<32-K(i)+m|a<<m|c,z=g+e}else R=1<<g|a<<m|c,z=e}function vt(e){e.return!==null&&(Q(e,1),st(e,1,0))}function Lt(e){for(;e===s;)s=Ws[--Do],Ws[Do]=null,u=Ws[--Do],Ws[Do]=null;for(;e===b;)b=d[--_],d[_]=null,z=d[--_],d[_]=null,R=d[--_],d[_]=null}var Ut=null,qt=null,ue=!1,cn=null,yn=!1,ni=Error(o(519));function $i(e){var i=Error(o(418,""));throw Lo(Ui(i,e)),ni}function hh(e){var i=e.stateNode,a=e.type,c=e.memoizedProps;switch(i[fn]=e,i[on]=c,a){case"dialog":xe("cancel",i),xe("close",i);break;case"iframe":case"object":case"embed":xe("load",i);break;case"video":case"audio":for(a=0;a<Ju.length;a++)xe(Ju[a],i);break;case"source":xe("error",i);break;case"img":case"image":case"link":xe("error",i),xe("load",i);break;case"details":xe("toggle",i);break;case"input":xe("invalid",i),ks(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),hs(i);break;case"select":xe("invalid",i);break;case"textarea":xe("invalid",i),Li(i,c.value,c.defaultValue,c.children),hs(i)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||c.suppressHydrationWarning===!0||sv(i.textContent,a)?(c.popover!=null&&(xe("beforetoggle",i),xe("toggle",i)),c.onScroll!=null&&xe("scroll",i),c.onScrollEnd!=null&&xe("scrollend",i),c.onClick!=null&&(i.onclick=Wh),i=!0):i=!1,i||$i(e)}function fh(e){for(Ut=e.return;Ut;)switch(Ut.tag){case 5:case 13:yn=!1;return;case 27:case 3:yn=!0;return;default:Ut=Ut.return}}function Ua(e){if(e!==Ut)return!1;if(!ue)return fh(e),ue=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||km(e.type,e.memoizedProps)),a=!a),a&&qt&&$i(e),fh(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){qt=ns(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}qt=null}}else i===27?(i=qt,Ko(e.type)?(e=jm,jm=null,qt=e):qt=i):qt=Ut?ns(e.stateNode.nextSibling):null;return!0}function No(){qt=Ut=null,ue=!1}function dh(){var e=cn;return e!==null&&(er===null?er=e:er.push.apply(er,e),cn=null),e}function Lo(e){cn===null?cn=[e]:cn.push(e)}var gn=ut(null),Vr=null,Jr=null;function ys(e,i,a){rt(gn,i._currentValue),i._currentValue=a}function ts(e){e._currentValue=gn.current,wt(gn)}function ja(e,i,a){for(;e!==null;){var c=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),e===a)break;e=e.return}}function Sl(e,i,a,c){var m=e.child;for(m!==null&&(m.return=e);m!==null;){var g=m.dependencies;if(g!==null){var S=m.child;g=g.firstContext;t:for(;g!==null;){var I=g;g=m;for(var U=0;U<i.length;U++)if(I.context===i[U]){g.lanes|=a,I=g.alternate,I!==null&&(I.lanes|=a),ja(g.return,a,e),c||(S=null);break t}g=I.next}}else if(m.tag===18){if(S=m.return,S===null)throw Error(o(341));S.lanes|=a,g=S.alternate,g!==null&&(g.lanes|=a),ja(S,a,e),S=null}else S=m.child;if(S!==null)S.return=m;else for(S=m;S!==null;){if(S===e){S=null;break}if(m=S.sibling,m!==null){m.return=S.return,S=m;break}S=S.return}m=S}}function Ba(e,i,a,c){e=null;for(var m=i,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var S=m.alternate;if(S===null)throw Error(o(387));if(S=S.memoizedProps,S!==null){var I=m.type;Vi(m.pendingProps.value,S.value)||(e!==null?e.push(I):e=[I])}}else if(m===Ee.current){if(S=m.alternate,S===null)throw Error(o(387));S.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(e!==null?e.push(sc):e=[sc])}m=m.return}e!==null&&Sl(i,e,a,c),i.flags|=262144}function mh(e){for(e=e.firstContext;e!==null;){if(!Vi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ha(e){Vr=e,Jr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ii(e){return Gg(Vr,e)}function ph(e,i){return Vr===null&&Ha(e),Gg(e,i)}function Gg(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Jr===null){if(e===null)throw Error(o(308));Jr=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Jr=Jr.next=i;return a}var _w=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,c){e.push(c)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},yw=r.unstable_scheduleCallback,vw=r.unstable_NormalPriority,Wn={$$typeof:yt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sd(){return{controller:new _w,data:new Map,refCount:0}}function Mu(e){e.refCount--,e.refCount===0&&yw(vw,function(){e.controller.abort()})}var Ou=null,Ad=0,Al=0,xl=null;function Tw(e,i){if(Ou===null){var a=Ou=[];Ad=0,Al=Rm(),xl={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Ad++,i.then(Zg,Zg),i}function Zg(){if(--Ad===0&&Ou!==null){xl!==null&&(xl.status="fulfilled");var e=Ou;Ou=null,Al=0,xl=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Ew(e,i){var a=[],c={status:"pending",value:null,reason:null,then:function(m){a.push(m)}};return e.then(function(){c.status="fulfilled",c.value=i;for(var m=0;m<a.length;m++)(0,a[m])(i)},function(m){for(c.status="rejected",c.reason=m,m=0;m<a.length;m++)(0,a[m])(void 0)}),c}var Wg=J.S;J.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Tw(e,i),Wg!==null&&Wg(e,i)};var qa=ut(null);function xd(){var e=qa.current;return e!==null?e:hn.pooledCache}function gh(e,i){i===null?rt(qa,qa.current):rt(qa,i.pool)}function Yg(){var e=xd();return e===null?null:{parent:Wn._currentValue,pool:e}}var Du=Error(o(460)),Qg=Error(o(474)),_h=Error(o(542)),Rd={then:function(){}};function Kg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function yh(){}function Xg(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(yh,yh),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Jg(e),e;default:if(typeof i.status=="string")i.then(yh,yh);else{if(e=hn,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=i,e.status="pending",e.then(function(c){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=c}},function(c){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Jg(e),e}throw Nu=i,Du}}var Nu=null;function $g(){if(Nu===null)throw Error(o(459));var e=Nu;return Nu=null,e}function Jg(e){if(e===Du||e===_h)throw Error(o(483))}var ko=!1;function Id(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cd(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Vo(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function zo(e,i,a){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(We&2)!==0){var m=c.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),c.pending=i,i=gs(e),Va(e,null,a),i}return ka(e,c,i,a),gs(e)}function Lu(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var c=i.lanes;c&=e.pendingLanes,a|=c,i.lanes=a,Fe(e,a)}}function Pd(e,i){var a=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var m=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?m=g=S:g=g.next=S,a=a.next}while(a!==null);g===null?m=g=i:g=g.next=i}else m=g=i;a={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var Md=!1;function ku(){if(Md){var e=xl;if(e!==null)throw e}}function Vu(e,i,a,c){Md=!1;var m=e.updateQueue;ko=!1;var g=m.firstBaseUpdate,S=m.lastBaseUpdate,I=m.shared.pending;if(I!==null){m.shared.pending=null;var U=I,$=U.next;U.next=null,S===null?g=$:S.next=$,S=U;var dt=e.alternate;dt!==null&&(dt=dt.updateQueue,I=dt.lastBaseUpdate,I!==S&&(I===null?dt.firstBaseUpdate=$:I.next=$,dt.lastBaseUpdate=U))}if(g!==null){var pt=m.baseState;S=0,dt=$=U=null,I=g;do{var tt=I.lane&-536870913,nt=tt!==I.lane;if(nt?(Le&tt)===tt:(c&tt)===tt){tt!==0&&tt===Al&&(Md=!0),dt!==null&&(dt=dt.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});t:{var ae=e,ee=I;tt=i;var $e=a;switch(ee.tag){case 1:if(ae=ee.payload,typeof ae=="function"){pt=ae.call($e,pt,tt);break t}pt=ae;break t;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ee.payload,tt=typeof ae=="function"?ae.call($e,pt,tt):ae,tt==null)break t;pt=x({},pt,tt);break t;case 2:ko=!0}}tt=I.callback,tt!==null&&(e.flags|=64,nt&&(e.flags|=8192),nt=m.callbacks,nt===null?m.callbacks=[tt]:nt.push(tt))}else nt={lane:tt,tag:I.tag,payload:I.payload,callback:I.callback,next:null},dt===null?($=dt=nt,U=pt):dt=dt.next=nt,S|=tt;if(I=I.next,I===null){if(I=m.shared.pending,I===null)break;nt=I,I=nt.next,nt.next=null,m.lastBaseUpdate=nt,m.shared.pending=null}}while(!0);dt===null&&(U=pt),m.baseState=U,m.firstBaseUpdate=$,m.lastBaseUpdate=dt,g===null&&(m.shared.lanes=0),Zo|=S,e.lanes=S,e.memoizedState=pt}}function t_(e,i){if(typeof e!="function")throw Error(o(191,e));e.call(i)}function e_(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)t_(a[e],i)}var Rl=ut(null),vh=ut(0);function n_(e,i){e=to,rt(vh,e),rt(Rl,i),to=e|i.baseLanes}function Od(){rt(vh,to),rt(Rl,Rl.current)}function Dd(){to=vh.current,wt(Rl),wt(vh)}var Uo=0,Te=null,Ke=null,Vn=null,Th=!1,Il=!1,Fa=!1,Eh=0,zu=0,Cl=null,bw=0;function Cn(){throw Error(o(321))}function Nd(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!Vi(e[a],i[a]))return!1;return!0}function Ld(e,i,a,c,m,g){return Uo=g,Te=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,J.H=e===null||e.memoizedState===null?U_:j_,Fa=!1,g=a(c,m),Fa=!1,Il&&(g=r_(i,a,c,m)),i_(e),g}function i_(e){J.H=Rh;var i=Ke!==null&&Ke.next!==null;if(Uo=0,Vn=Ke=Te=null,Th=!1,zu=0,Cl=null,i)throw Error(o(300));e===null||ii||(e=e.dependencies,e!==null&&mh(e)&&(ii=!0))}function r_(e,i,a,c){Te=e;var m=0;do{if(Il&&(Cl=null),zu=0,Il=!1,25<=m)throw Error(o(301));if(m+=1,Vn=Ke=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}J.H=Cw,g=i(a,c)}while(Il);return g}function ww(){var e=J.H,i=e.useState()[0];return i=typeof i.then=="function"?Uu(i):i,e=e.useState()[0],(Ke!==null?Ke.memoizedState:null)!==e&&(Te.flags|=1024),i}function kd(){var e=Eh!==0;return Eh=0,e}function Vd(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function zd(e){if(Th){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Th=!1}Uo=0,Vn=Ke=Te=null,Il=!1,zu=Eh=0,Cl=null}function Ji(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?Te.memoizedState=Vn=e:Vn=Vn.next=e,Vn}function zn(){if(Ke===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Ke.next;var i=Vn===null?Te.memoizedState:Vn.next;if(i!==null)Vn=i,Ke=e;else{if(e===null)throw Te.alternate===null?Error(o(467)):Error(o(310));Ke=e,e={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Vn===null?Te.memoizedState=Vn=e:Vn=Vn.next=e}return Vn}function Ud(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uu(e){var i=zu;return zu+=1,Cl===null&&(Cl=[]),e=Xg(Cl,e,i),i=Te,(Vn===null?i.memoizedState:Vn.next)===null&&(i=i.alternate,J.H=i===null||i.memoizedState===null?U_:j_),e}function bh(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Uu(e);if(e.$$typeof===yt)return Ii(e)}throw Error(o(438,String(e)))}function jd(e){var i=null,a=Te.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var c=Te.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Ud(),Te.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),c=0;c<e;c++)a[c]=j;return i.index++,a}function Ys(e,i){return typeof i=="function"?i(e):i}function wh(e){var i=zn();return Bd(i,Ke,e)}function Bd(e,i,a){var c=e.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=a;var m=e.baseQueue,g=c.pending;if(g!==null){if(m!==null){var S=m.next;m.next=g.next,g.next=S}i.baseQueue=m=g,c.pending=null}if(g=e.baseState,m===null)e.memoizedState=g;else{i=m.next;var I=S=null,U=null,$=i,dt=!1;do{var pt=$.lane&-536870913;if(pt!==$.lane?(Le&pt)===pt:(Uo&pt)===pt){var tt=$.revertLane;if(tt===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),pt===Al&&(dt=!0);else if((Uo&tt)===tt){$=$.next,tt===Al&&(dt=!0);continue}else pt={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},U===null?(I=U=pt,S=g):U=U.next=pt,Te.lanes|=tt,Zo|=tt;pt=$.action,Fa&&a(g,pt),g=$.hasEagerState?$.eagerState:a(g,pt)}else tt={lane:pt,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},U===null?(I=U=tt,S=g):U=U.next=tt,Te.lanes|=pt,Zo|=pt;$=$.next}while($!==null&&$!==i);if(U===null?S=g:U.next=I,!Vi(g,e.memoizedState)&&(ii=!0,dt&&(a=xl,a!==null)))throw a;e.memoizedState=g,e.baseState=S,e.baseQueue=U,c.lastRenderedState=g}return m===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function Hd(e){var i=zn(),a=i.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var c=a.dispatch,m=a.pending,g=i.memoizedState;if(m!==null){a.pending=null;var S=m=m.next;do g=e(g,S.action),S=S.next;while(S!==m);Vi(g,i.memoizedState)||(ii=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,c]}function s_(e,i,a){var c=Te,m=zn(),g=ue;if(g){if(a===void 0)throw Error(o(407));a=a()}else a=i();var S=!Vi((Ke||m).memoizedState,a);S&&(m.memoizedState=a,ii=!0),m=m.queue;var I=l_.bind(null,c,m,e);if(ju(2048,8,I,[e]),m.getSnapshot!==i||S||Vn!==null&&Vn.memoizedState.tag&1){if(c.flags|=2048,Pl(9,Sh(),a_.bind(null,c,m,a,i),null),hn===null)throw Error(o(349));g||(Uo&124)!==0||o_(c,i,a)}return a}function o_(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Te.updateQueue,i===null?(i=Ud(),Te.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function a_(e,i,a,c){i.value=a,i.getSnapshot=c,u_(i)&&c_(e)}function l_(e,i,a){return a(function(){u_(i)&&c_(e)})}function u_(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!Vi(e,a)}catch{return!0}}function c_(e){var i=Oo(e,2);i!==null&&Er(i,e,2)}function qd(e){var i=Ji();if(typeof e=="function"){var a=e;if(e=a(),Fa){pn(!0);try{a()}finally{pn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:e},i}function h_(e,i,a,c){return e.baseState=a,Bd(e,Ke,typeof c=="function"?c:Ys)}function Sw(e,i,a,c,m){if(xh(e))throw Error(o(485));if(e=i.action,e!==null){var g={payload:m,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};J.T!==null?a(!0):g.isTransition=!1,c(g),a=i.pending,a===null?(g.next=i.pending=g,f_(i,g)):(g.next=a.next,i.pending=a.next=g)}}function f_(e,i){var a=i.action,c=i.payload,m=e.state;if(i.isTransition){var g=J.T,S={};J.T=S;try{var I=a(m,c),U=J.S;U!==null&&U(S,I),d_(e,i,I)}catch($){Fd(e,i,$)}finally{J.T=g}}else try{g=a(m,c),d_(e,i,g)}catch($){Fd(e,i,$)}}function d_(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){m_(e,i,c)},function(c){return Fd(e,i,c)}):m_(e,i,a)}function m_(e,i,a){i.status="fulfilled",i.value=a,p_(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,f_(e,a)))}function Fd(e,i,a){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=a,p_(i),i=i.next;while(i!==c)}e.action=null}function p_(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function g_(e,i){return i}function __(e,i){if(ue){var a=hn.formState;if(a!==null){t:{var c=Te;if(ue){if(qt){e:{for(var m=qt,g=yn;m.nodeType!==8;){if(!g){m=null;break e}if(m=ns(m.nextSibling),m===null){m=null;break e}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){qt=ns(m.nextSibling),c=m.data==="F!";break t}}$i(c)}c=!1}c&&(i=a[0])}}return a=Ji(),a.memoizedState=a.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:g_,lastRenderedState:i},a.queue=c,a=k_.bind(null,Te,c),c.dispatch=a,c=qd(!1),g=Qd.bind(null,Te,!1,c.queue),c=Ji(),m={state:i,dispatch:null,action:e,pending:null},c.queue=m,a=Sw.bind(null,Te,m,g,a),m.dispatch=a,c.memoizedState=e,[i,a,!1]}function y_(e){var i=zn();return v_(i,Ke,e)}function v_(e,i,a){if(i=Bd(e,i,g_)[0],e=wh(Ys)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Uu(i)}catch(S){throw S===Du?_h:S}else c=i;i=zn();var m=i.queue,g=m.dispatch;return a!==i.memoizedState&&(Te.flags|=2048,Pl(9,Sh(),Aw.bind(null,m,a),null)),[c,g,e]}function Aw(e,i){e.action=i}function T_(e){var i=zn(),a=Ke;if(a!==null)return v_(i,a,e);zn(),i=i.memoizedState,a=zn();var c=a.queue.dispatch;return a.memoizedState=e,[i,c,!1]}function Pl(e,i,a,c){return e={tag:e,create:a,deps:c,inst:i,next:null},i=Te.updateQueue,i===null&&(i=Ud(),Te.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(c=a.next,a.next=e,e.next=c,i.lastEffect=e),e}function Sh(){return{destroy:void 0,resource:void 0}}function E_(){return zn().memoizedState}function Ah(e,i,a,c){var m=Ji();c=c===void 0?null:c,Te.flags|=e,m.memoizedState=Pl(1|i,Sh(),a,c)}function ju(e,i,a,c){var m=zn();c=c===void 0?null:c;var g=m.memoizedState.inst;Ke!==null&&c!==null&&Nd(c,Ke.memoizedState.deps)?m.memoizedState=Pl(i,g,a,c):(Te.flags|=e,m.memoizedState=Pl(1|i,g,a,c))}function b_(e,i){Ah(8390656,8,e,i)}function w_(e,i){ju(2048,8,e,i)}function S_(e,i){return ju(4,2,e,i)}function A_(e,i){return ju(4,4,e,i)}function x_(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function R_(e,i,a){a=a!=null?a.concat([e]):null,ju(4,4,x_.bind(null,i,e),a)}function Gd(){}function I_(e,i){var a=zn();i=i===void 0?null:i;var c=a.memoizedState;return i!==null&&Nd(i,c[1])?c[0]:(a.memoizedState=[e,i],e)}function C_(e,i){var a=zn();i=i===void 0?null:i;var c=a.memoizedState;if(i!==null&&Nd(i,c[1]))return c[0];if(c=e(),Fa){pn(!0);try{e()}finally{pn(!1)}}return a.memoizedState=[c,i],c}function Zd(e,i,a){return a===void 0||(Uo&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=Oy(),Te.lanes|=e,Zo|=e,a)}function P_(e,i,a,c){return Vi(a,i)?a:Rl.current!==null?(e=Zd(e,a,c),Vi(e,i)||(ii=!0),e):(Uo&42)===0?(ii=!0,e.memoizedState=a):(e=Oy(),Te.lanes|=e,Zo|=e,i)}function M_(e,i,a,c,m){var g=At.p;At.p=g!==0&&8>g?g:8;var S=J.T,I={};J.T=I,Qd(e,!1,i,a);try{var U=m(),$=J.S;if($!==null&&$(I,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var dt=Ew(U,c);Bu(e,i,dt,Tr(e))}else Bu(e,i,c,Tr(e))}catch(pt){Bu(e,i,{then:function(){},status:"rejected",reason:pt},Tr())}finally{At.p=g,J.T=S}}function xw(){}function Wd(e,i,a,c){if(e.tag!==5)throw Error(o(476));var m=O_(e).queue;M_(e,m,i,ot,a===null?xw:function(){return D_(e),a(c)})}function O_(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ot,baseState:ot,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:ot},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function D_(e){var i=O_(e).next.queue;Bu(e,i,{},Tr())}function Yd(){return Ii(sc)}function N_(){return zn().memoizedState}function L_(){return zn().memoizedState}function Rw(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=Tr();e=Vo(a);var c=zo(i,e,a);c!==null&&(Er(c,i,a),Lu(c,i,a)),i={cache:Sd()},e.payload=i;return}i=i.return}}function Iw(e,i,a){var c=Tr();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},xh(e)?V_(i,a):(a=Gs(e,i,a,c),a!==null&&(Er(a,e,c),z_(a,i,c)))}function k_(e,i,a){var c=Tr();Bu(e,i,a,c)}function Bu(e,i,a,c){var m={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(xh(e))V_(i,m);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var S=i.lastRenderedState,I=g(S,a);if(m.hasEagerState=!0,m.eagerState=I,Vi(I,S))return ka(e,i,m,0),hn===null&&La(),!1}catch{}finally{}if(a=Gs(e,i,m,c),a!==null)return Er(a,e,c),z_(a,i,c),!0}return!1}function Qd(e,i,a,c){if(c={lane:2,revertLane:Rm(),action:c,hasEagerState:!1,eagerState:null,next:null},xh(e)){if(i)throw Error(o(479))}else i=Gs(e,a,c,2),i!==null&&Er(i,e,2)}function xh(e){var i=e.alternate;return e===Te||i!==null&&i===Te}function V_(e,i){Il=Th=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function z_(e,i,a){if((a&4194048)!==0){var c=i.lanes;c&=e.pendingLanes,a|=c,i.lanes=a,Fe(e,a)}}var Rh={readContext:Ii,use:bh,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useLayoutEffect:Cn,useInsertionEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useSyncExternalStore:Cn,useId:Cn,useHostTransitionStatus:Cn,useFormState:Cn,useActionState:Cn,useOptimistic:Cn,useMemoCache:Cn,useCacheRefresh:Cn},U_={readContext:Ii,use:bh,useCallback:function(e,i){return Ji().memoizedState=[e,i===void 0?null:i],e},useContext:Ii,useEffect:b_,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Ah(4194308,4,x_.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Ah(4194308,4,e,i)},useInsertionEffect:function(e,i){Ah(4,2,e,i)},useMemo:function(e,i){var a=Ji();i=i===void 0?null:i;var c=e();if(Fa){pn(!0);try{e()}finally{pn(!1)}}return a.memoizedState=[c,i],c},useReducer:function(e,i,a){var c=Ji();if(a!==void 0){var m=a(i);if(Fa){pn(!0);try{a(i)}finally{pn(!1)}}}else m=i;return c.memoizedState=c.baseState=m,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:m},c.queue=e,e=e.dispatch=Iw.bind(null,Te,e),[c.memoizedState,e]},useRef:function(e){var i=Ji();return e={current:e},i.memoizedState=e},useState:function(e){e=qd(e);var i=e.queue,a=k_.bind(null,Te,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Gd,useDeferredValue:function(e,i){var a=Ji();return Zd(a,e,i)},useTransition:function(){var e=qd(!1);return e=M_.bind(null,Te,e.queue,!0,!1),Ji().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var c=Te,m=Ji();if(ue){if(a===void 0)throw Error(o(407));a=a()}else{if(a=i(),hn===null)throw Error(o(349));(Le&124)!==0||o_(c,i,a)}m.memoizedState=a;var g={value:a,getSnapshot:i};return m.queue=g,b_(l_.bind(null,c,g,e),[e]),c.flags|=2048,Pl(9,Sh(),a_.bind(null,c,g,a,i),null),a},useId:function(){var e=Ji(),i=hn.identifierPrefix;if(ue){var a=z,c=R;a=(c&~(1<<32-K(c)-1)).toString(32)+a,i=""+i+"R"+a,a=Eh++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=bw++,i=""+i+"r"+a.toString(32)+"";return e.memoizedState=i},useHostTransitionStatus:Yd,useFormState:__,useActionState:__,useOptimistic:function(e){var i=Ji();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Qd.bind(null,Te,!0,a),a.dispatch=i,[e,i]},useMemoCache:jd,useCacheRefresh:function(){return Ji().memoizedState=Rw.bind(null,Te)}},j_={readContext:Ii,use:bh,useCallback:I_,useContext:Ii,useEffect:w_,useImperativeHandle:R_,useInsertionEffect:S_,useLayoutEffect:A_,useMemo:C_,useReducer:wh,useRef:E_,useState:function(){return wh(Ys)},useDebugValue:Gd,useDeferredValue:function(e,i){var a=zn();return P_(a,Ke.memoizedState,e,i)},useTransition:function(){var e=wh(Ys)[0],i=zn().memoizedState;return[typeof e=="boolean"?e:Uu(e),i]},useSyncExternalStore:s_,useId:N_,useHostTransitionStatus:Yd,useFormState:y_,useActionState:y_,useOptimistic:function(e,i){var a=zn();return h_(a,Ke,e,i)},useMemoCache:jd,useCacheRefresh:L_},Cw={readContext:Ii,use:bh,useCallback:I_,useContext:Ii,useEffect:w_,useImperativeHandle:R_,useInsertionEffect:S_,useLayoutEffect:A_,useMemo:C_,useReducer:Hd,useRef:E_,useState:function(){return Hd(Ys)},useDebugValue:Gd,useDeferredValue:function(e,i){var a=zn();return Ke===null?Zd(a,e,i):P_(a,Ke.memoizedState,e,i)},useTransition:function(){var e=Hd(Ys)[0],i=zn().memoizedState;return[typeof e=="boolean"?e:Uu(e),i]},useSyncExternalStore:s_,useId:N_,useHostTransitionStatus:Yd,useFormState:T_,useActionState:T_,useOptimistic:function(e,i){var a=zn();return Ke!==null?h_(a,Ke,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:jd,useCacheRefresh:L_},Ml=null,Hu=0;function Ih(e){var i=Hu;return Hu+=1,Ml===null&&(Ml=[]),Xg(Ml,e,i)}function qu(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Ch(e,i){throw i.$$typeof===P?Error(o(525)):(e=Object.prototype.toString.call(i),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function B_(e){var i=e._init;return i(e._payload)}function H_(e){function i(Z,F){if(e){var X=Z.deletions;X===null?(Z.deletions=[F],Z.flags|=16):X.push(F)}}function a(Z,F){if(!e)return null;for(;F!==null;)i(Z,F),F=F.sibling;return null}function c(Z){for(var F=new Map;Z!==null;)Z.key!==null?F.set(Z.key,Z):F.set(Z.index,Z),Z=Z.sibling;return F}function m(Z,F){return Z=kr(Z,F),Z.index=0,Z.sibling=null,Z}function g(Z,F,X){return Z.index=X,e?(X=Z.alternate,X!==null?(X=X.index,X<F?(Z.flags|=67108866,F):X):(Z.flags|=67108866,F)):(Z.flags|=1048576,F)}function S(Z){return e&&Z.alternate===null&&(Z.flags|=67108866),Z}function I(Z,F,X,mt){return F===null||F.tag!==6?(F=Pu(X,Z.mode,mt),F.return=Z,F):(F=m(F,X),F.return=Z,F)}function U(Z,F,X,mt){var jt=X.type;return jt===W?dt(Z,F,X.props.children,mt,X.key):F!==null&&(F.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===O&&B_(jt)===F.type)?(F=m(F,X.props),qu(F,X),F.return=Z,F):(F=za(X.type,X.key,X.props,null,Z.mode,mt),qu(F,X),F.return=Z,F)}function $(Z,F,X,mt){return F===null||F.tag!==4||F.stateNode.containerInfo!==X.containerInfo||F.stateNode.implementation!==X.implementation?(F=wl(X,Z.mode,mt),F.return=Z,F):(F=m(F,X.children||[]),F.return=Z,F)}function dt(Z,F,X,mt,jt){return F===null||F.tag!==7?(F=_s(X,Z.mode,mt,jt),F.return=Z,F):(F=m(F,X),F.return=Z,F)}function pt(Z,F,X){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Pu(""+F,Z.mode,X),F.return=Z,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case M:return X=za(F.type,F.key,F.props,null,Z.mode,X),qu(X,F),X.return=Z,X;case q:return F=wl(F,Z.mode,X),F.return=Z,F;case O:var mt=F._init;return F=mt(F._payload),pt(Z,F,X)}if(de(F)||H(F))return F=_s(F,Z.mode,X,null),F.return=Z,F;if(typeof F.then=="function")return pt(Z,Ih(F),X);if(F.$$typeof===yt)return pt(Z,ph(Z,F),X);Ch(Z,F)}return null}function tt(Z,F,X,mt){var jt=F!==null?F.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return jt!==null?null:I(Z,F,""+X,mt);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case M:return X.key===jt?U(Z,F,X,mt):null;case q:return X.key===jt?$(Z,F,X,mt):null;case O:return jt=X._init,X=jt(X._payload),tt(Z,F,X,mt)}if(de(X)||H(X))return jt!==null?null:dt(Z,F,X,mt,null);if(typeof X.then=="function")return tt(Z,F,Ih(X),mt);if(X.$$typeof===yt)return tt(Z,F,ph(Z,X),mt);Ch(Z,X)}return null}function nt(Z,F,X,mt,jt){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return Z=Z.get(X)||null,I(F,Z,""+mt,jt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case M:return Z=Z.get(mt.key===null?X:mt.key)||null,U(F,Z,mt,jt);case q:return Z=Z.get(mt.key===null?X:mt.key)||null,$(F,Z,mt,jt);case O:var Se=mt._init;return mt=Se(mt._payload),nt(Z,F,X,mt,jt)}if(de(mt)||H(mt))return Z=Z.get(X)||null,dt(F,Z,mt,jt,null);if(typeof mt.then=="function")return nt(Z,F,X,Ih(mt),jt);if(mt.$$typeof===yt)return nt(Z,F,X,ph(F,mt),jt);Ch(F,mt)}return null}function ae(Z,F,X,mt){for(var jt=null,Se=null,Gt=F,ne=F=0,si=null;Gt!==null&&ne<X.length;ne++){Gt.index>ne?(si=Gt,Gt=null):si=Gt.sibling;var Ue=tt(Z,Gt,X[ne],mt);if(Ue===null){Gt===null&&(Gt=si);break}e&&Gt&&Ue.alternate===null&&i(Z,Gt),F=g(Ue,F,ne),Se===null?jt=Ue:Se.sibling=Ue,Se=Ue,Gt=si}if(ne===X.length)return a(Z,Gt),ue&&Q(Z,ne),jt;if(Gt===null){for(;ne<X.length;ne++)Gt=pt(Z,X[ne],mt),Gt!==null&&(F=g(Gt,F,ne),Se===null?jt=Gt:Se.sibling=Gt,Se=Gt);return ue&&Q(Z,ne),jt}for(Gt=c(Gt);ne<X.length;ne++)si=nt(Gt,Z,ne,X[ne],mt),si!==null&&(e&&si.alternate!==null&&Gt.delete(si.key===null?ne:si.key),F=g(si,F,ne),Se===null?jt=si:Se.sibling=si,Se=si);return e&&Gt.forEach(function(ea){return i(Z,ea)}),ue&&Q(Z,ne),jt}function ee(Z,F,X,mt){if(X==null)throw Error(o(151));for(var jt=null,Se=null,Gt=F,ne=F=0,si=null,Ue=X.next();Gt!==null&&!Ue.done;ne++,Ue=X.next()){Gt.index>ne?(si=Gt,Gt=null):si=Gt.sibling;var ea=tt(Z,Gt,Ue.value,mt);if(ea===null){Gt===null&&(Gt=si);break}e&&Gt&&ea.alternate===null&&i(Z,Gt),F=g(ea,F,ne),Se===null?jt=ea:Se.sibling=ea,Se=ea,Gt=si}if(Ue.done)return a(Z,Gt),ue&&Q(Z,ne),jt;if(Gt===null){for(;!Ue.done;ne++,Ue=X.next())Ue=pt(Z,Ue.value,mt),Ue!==null&&(F=g(Ue,F,ne),Se===null?jt=Ue:Se.sibling=Ue,Se=Ue);return ue&&Q(Z,ne),jt}for(Gt=c(Gt);!Ue.done;ne++,Ue=X.next())Ue=nt(Gt,Z,ne,Ue.value,mt),Ue!==null&&(e&&Ue.alternate!==null&&Gt.delete(Ue.key===null?ne:Ue.key),F=g(Ue,F,ne),Se===null?jt=Ue:Se.sibling=Ue,Se=Ue);return e&&Gt.forEach(function(P1){return i(Z,P1)}),ue&&Q(Z,ne),jt}function $e(Z,F,X,mt){if(typeof X=="object"&&X!==null&&X.type===W&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case M:t:{for(var jt=X.key;F!==null;){if(F.key===jt){if(jt=X.type,jt===W){if(F.tag===7){a(Z,F.sibling),mt=m(F,X.props.children),mt.return=Z,Z=mt;break t}}else if(F.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===O&&B_(jt)===F.type){a(Z,F.sibling),mt=m(F,X.props),qu(mt,X),mt.return=Z,Z=mt;break t}a(Z,F);break}else i(Z,F);F=F.sibling}X.type===W?(mt=_s(X.props.children,Z.mode,mt,X.key),mt.return=Z,Z=mt):(mt=za(X.type,X.key,X.props,null,Z.mode,mt),qu(mt,X),mt.return=Z,Z=mt)}return S(Z);case q:t:{for(jt=X.key;F!==null;){if(F.key===jt)if(F.tag===4&&F.stateNode.containerInfo===X.containerInfo&&F.stateNode.implementation===X.implementation){a(Z,F.sibling),mt=m(F,X.children||[]),mt.return=Z,Z=mt;break t}else{a(Z,F);break}else i(Z,F);F=F.sibling}mt=wl(X,Z.mode,mt),mt.return=Z,Z=mt}return S(Z);case O:return jt=X._init,X=jt(X._payload),$e(Z,F,X,mt)}if(de(X))return ae(Z,F,X,mt);if(H(X)){if(jt=H(X),typeof jt!="function")throw Error(o(150));return X=jt.call(X),ee(Z,F,X,mt)}if(typeof X.then=="function")return $e(Z,F,Ih(X),mt);if(X.$$typeof===yt)return $e(Z,F,ph(Z,X),mt);Ch(Z,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,F!==null&&F.tag===6?(a(Z,F.sibling),mt=m(F,X),mt.return=Z,Z=mt):(a(Z,F),mt=Pu(X,Z.mode,mt),mt.return=Z,Z=mt),S(Z)):a(Z,F)}return function(Z,F,X,mt){try{Hu=0;var jt=$e(Z,F,X,mt);return Ml=null,jt}catch(Gt){if(Gt===Du||Gt===_h)throw Gt;var Se=Bi(29,Gt,null,Z.mode);return Se.lanes=mt,Se.return=Z,Se}finally{}}}var Ol=H_(!0),q_=H_(!1),zr=ut(null),vs=null;function jo(e){var i=e.alternate;rt(Yn,Yn.current&1),rt(zr,e),vs===null&&(i===null||Rl.current!==null||i.memoizedState!==null)&&(vs=e)}function F_(e){if(e.tag===22){if(rt(Yn,Yn.current),rt(zr,e),vs===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(vs=e)}}else Bo()}function Bo(){rt(Yn,Yn.current),rt(zr,zr.current)}function Qs(e){wt(zr),vs===e&&(vs=null),wt(Yn)}var Yn=ut(0);function Ph(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Um(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Kd(e,i,a,c){i=e.memoizedState,a=a(c,i),a=a==null?i:x({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Xd={enqueueSetState:function(e,i,a){e=e._reactInternals;var c=Tr(),m=Vo(c);m.payload=i,a!=null&&(m.callback=a),i=zo(e,m,c),i!==null&&(Er(i,e,c),Lu(i,e,c))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var c=Tr(),m=Vo(c);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=zo(e,m,c),i!==null&&(Er(i,e,c),Lu(i,e,c))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=Tr(),c=Vo(a);c.tag=2,i!=null&&(c.callback=i),i=zo(e,c,a),i!==null&&(Er(i,e,a),Lu(i,e,a))}};function G_(e,i,a,c,m,g,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,g,S):i.prototype&&i.prototype.isPureReactComponent?!zi(a,c)||!zi(m,g):!0}function Z_(e,i,a,c){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==e&&Xd.enqueueReplaceState(i,i.state,null)}function Ga(e,i){var a=i;if("ref"in i){a={};for(var c in i)c!=="ref"&&(a[c]=i[c])}if(e=e.defaultProps){a===i&&(a=x({},a));for(var m in e)a[m]===void 0&&(a[m]=e[m])}return a}var Mh=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function W_(e){Mh(e)}function Y_(e){console.error(e)}function Q_(e){Mh(e)}function Oh(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function K_(e,i,a){try{var c=e.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function $d(e,i,a){return a=Vo(a),a.tag=3,a.payload={element:null},a.callback=function(){Oh(e,i)},a}function X_(e){return e=Vo(e),e.tag=3,e}function $_(e,i,a,c){var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var g=c.value;e.payload=function(){return m(g)},e.callback=function(){K_(i,a,c)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(e.callback=function(){K_(i,a,c),typeof m!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function Pw(e,i,a,c,m){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=a.alternate,i!==null&&Ba(i,a,m,!0),a=zr.current,a!==null){switch(a.tag){case 13:return vs===null?bm():a.alternate===null&&Rn===0&&(Rn=3),a.flags&=-257,a.flags|=65536,a.lanes=m,c===Rd?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([c]):i.add(c),Sm(e,c,m)),!1;case 22:return a.flags|=65536,c===Rd?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([c]):a.add(c)),Sm(e,c,m)),!1}throw Error(o(435,a.tag))}return Sm(e,c,m),bm(),!1}if(ue)return i=zr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,c!==ni&&(e=Error(o(422),{cause:c}),Lo(Ui(e,a)))):(c!==ni&&(i=Error(o(423),{cause:c}),Lo(Ui(i,a))),e=e.current.alternate,e.flags|=65536,m&=-m,e.lanes|=m,c=Ui(c,a),m=$d(e.stateNode,c,m),Pd(e,m),Rn!==4&&(Rn=2)),!1;var g=Error(o(520),{cause:c});if(g=Ui(g,a),Ku===null?Ku=[g]:Ku.push(g),Rn!==4&&(Rn=2),i===null)return!0;c=Ui(c,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=m&-m,a.lanes|=e,e=$d(a.stateNode,c,e),Pd(a,e),!1;case 1:if(i=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Wo===null||!Wo.has(g))))return a.flags|=65536,m&=-m,a.lanes|=m,m=X_(m),$_(m,e,a,c),Pd(a,m),!1}a=a.return}while(a!==null);return!1}var J_=Error(o(461)),ii=!1;function mi(e,i,a,c){i.child=e===null?q_(i,null,a,c):Ol(i,e.child,a,c)}function ty(e,i,a,c,m){a=a.render;var g=i.ref;if("ref"in c){var S={};for(var I in c)I!=="ref"&&(S[I]=c[I])}else S=c;return Ha(i),c=Ld(e,i,a,S,g,m),I=kd(),e!==null&&!ii?(Vd(e,i,m),Ks(e,i,m)):(ue&&I&&vt(i),i.flags|=1,mi(e,i,c,m),i.child)}function ey(e,i,a,c,m){if(e===null){var g=a.type;return typeof g=="function"&&!bl(g)&&g.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=g,ny(e,i,g,c,m)):(e=za(a.type,null,c,i,i.mode,m),e.ref=i.ref,e.return=i,i.child=e)}if(g=e.child,!om(e,m)){var S=g.memoizedProps;if(a=a.compare,a=a!==null?a:zi,a(S,c)&&e.ref===i.ref)return Ks(e,i,m)}return i.flags|=1,e=kr(g,c),e.ref=i.ref,e.return=i,i.child=e}function ny(e,i,a,c,m){if(e!==null){var g=e.memoizedProps;if(zi(g,c)&&e.ref===i.ref)if(ii=!1,i.pendingProps=c=g,om(e,m))(e.flags&131072)!==0&&(ii=!0);else return i.lanes=e.lanes,Ks(e,i,m)}return Jd(e,i,a,c,m)}function iy(e,i,a){var c=i.pendingProps,m=c.children,g=e!==null?e.memoizedState:null;if(c.mode==="hidden"){if((i.flags&128)!==0){if(c=g!==null?g.baseLanes|a:a,e!==null){for(m=i.child=e.child,g=0;m!==null;)g=g|m.lanes|m.childLanes,m=m.sibling;i.childLanes=g&~c}else i.childLanes=0,i.child=null;return ry(e,i,c,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&gh(i,g!==null?g.cachePool:null),g!==null?n_(i,g):Od(),F_(i);else return i.lanes=i.childLanes=536870912,ry(e,i,g!==null?g.baseLanes|a:a,a)}else g!==null?(gh(i,g.cachePool),n_(i,g),Bo(),i.memoizedState=null):(e!==null&&gh(i,null),Od(),Bo());return mi(e,i,m,a),i.child}function ry(e,i,a,c){var m=xd();return m=m===null?null:{parent:Wn._currentValue,pool:m},i.memoizedState={baseLanes:a,cachePool:m},e!==null&&gh(i,null),Od(),F_(i),e!==null&&Ba(e,i,c,!0),null}function Dh(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Jd(e,i,a,c,m){return Ha(i),a=Ld(e,i,a,c,void 0,m),c=kd(),e!==null&&!ii?(Vd(e,i,m),Ks(e,i,m)):(ue&&c&&vt(i),i.flags|=1,mi(e,i,a,m),i.child)}function sy(e,i,a,c,m,g){return Ha(i),i.updateQueue=null,a=r_(i,c,a,m),i_(e),c=kd(),e!==null&&!ii?(Vd(e,i,g),Ks(e,i,g)):(ue&&c&&vt(i),i.flags|=1,mi(e,i,a,g),i.child)}function oy(e,i,a,c,m){if(Ha(i),i.stateNode===null){var g=Zs,S=a.contextType;typeof S=="object"&&S!==null&&(g=Ii(S)),g=new a(c,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Xd,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=c,g.state=i.memoizedState,g.refs={},Id(i),S=a.contextType,g.context=typeof S=="object"&&S!==null?Ii(S):Zs,g.state=i.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(Kd(i,a,S,c),g.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&Xd.enqueueReplaceState(g,g.state,null),Vu(i,c,g,m),ku(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(e===null){g=i.stateNode;var I=i.memoizedProps,U=Ga(a,I);g.props=U;var $=g.context,dt=a.contextType;S=Zs,typeof dt=="object"&&dt!==null&&(S=Ii(dt));var pt=a.getDerivedStateFromProps;dt=typeof pt=="function"||typeof g.getSnapshotBeforeUpdate=="function",I=i.pendingProps!==I,dt||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(I||$!==S)&&Z_(i,g,c,S),ko=!1;var tt=i.memoizedState;g.state=tt,Vu(i,c,g,m),ku(),$=i.memoizedState,I||tt!==$||ko?(typeof pt=="function"&&(Kd(i,a,pt,c),$=i.memoizedState),(U=ko||G_(i,a,U,c,tt,$,S))?(dt||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=$),g.props=c,g.state=$,g.context=S,c=U):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{g=i.stateNode,Cd(e,i),S=i.memoizedProps,dt=Ga(a,S),g.props=dt,pt=i.pendingProps,tt=g.context,$=a.contextType,U=Zs,typeof $=="object"&&$!==null&&(U=Ii($)),I=a.getDerivedStateFromProps,($=typeof I=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==pt||tt!==U)&&Z_(i,g,c,U),ko=!1,tt=i.memoizedState,g.state=tt,Vu(i,c,g,m),ku();var nt=i.memoizedState;S!==pt||tt!==nt||ko||e!==null&&e.dependencies!==null&&mh(e.dependencies)?(typeof I=="function"&&(Kd(i,a,I,c),nt=i.memoizedState),(dt=ko||G_(i,a,dt,c,tt,nt,U)||e!==null&&e.dependencies!==null&&mh(e.dependencies))?($||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,nt,U),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,nt,U)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===e.memoizedProps&&tt===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&tt===e.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=nt),g.props=c,g.state=nt,g.context=U,c=dt):(typeof g.componentDidUpdate!="function"||S===e.memoizedProps&&tt===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&tt===e.memoizedState||(i.flags|=1024),c=!1)}return g=c,Dh(e,i),c=(i.flags&128)!==0,g||c?(g=i.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,e!==null&&c?(i.child=Ol(i,e.child,null,m),i.child=Ol(i,null,a,m)):mi(e,i,a,m),i.memoizedState=g.state,e=i.child):e=Ks(e,i,m),e}function ay(e,i,a,c){return No(),i.flags|=256,mi(e,i,a,c),i.child}var tm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function em(e){return{baseLanes:e,cachePool:Yg()}}function nm(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Ur),e}function ly(e,i,a){var c=i.pendingProps,m=!1,g=(i.flags&128)!==0,S;if((S=g)||(S=e!==null&&e.memoizedState===null?!1:(Yn.current&2)!==0),S&&(m=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,e===null){if(ue){if(m?jo(i):Bo(),ue){var I=qt,U;if(U=I){t:{for(U=I,I=yn;U.nodeType!==8;){if(!I){I=null;break t}if(U=ns(U.nextSibling),U===null){I=null;break t}}I=U}I!==null?(i.memoizedState={dehydrated:I,treeContext:b!==null?{id:R,overflow:z}:null,retryLane:536870912,hydrationErrors:null},U=Bi(18,null,null,0),U.stateNode=I,U.return=i,i.child=U,Ut=i,qt=null,U=!0):U=!1}U||$i(i)}if(I=i.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return Um(I)?i.lanes=32:i.lanes=536870912,null;Qs(i)}return I=c.children,c=c.fallback,m?(Bo(),m=i.mode,I=Nh({mode:"hidden",children:I},m),c=_s(c,m,a,null),I.return=i,c.return=i,I.sibling=c,i.child=I,m=i.child,m.memoizedState=em(a),m.childLanes=nm(e,S,a),i.memoizedState=tm,c):(jo(i),im(i,I))}if(U=e.memoizedState,U!==null&&(I=U.dehydrated,I!==null)){if(g)i.flags&256?(jo(i),i.flags&=-257,i=rm(e,i,a)):i.memoizedState!==null?(Bo(),i.child=e.child,i.flags|=128,i=null):(Bo(),m=c.fallback,I=i.mode,c=Nh({mode:"visible",children:c.children},I),m=_s(m,I,a,null),m.flags|=2,c.return=i,m.return=i,c.sibling=m,i.child=c,Ol(i,e.child,null,a),c=i.child,c.memoizedState=em(a),c.childLanes=nm(e,S,a),i.memoizedState=tm,i=m);else if(jo(i),Um(I)){if(S=I.nextSibling&&I.nextSibling.dataset,S)var $=S.dgst;S=$,c=Error(o(419)),c.stack="",c.digest=S,Lo({value:c,source:null,stack:null}),i=rm(e,i,a)}else if(ii||Ba(e,i,a,!1),S=(a&e.childLanes)!==0,ii||S){if(S=hn,S!==null&&(c=a&-a,c=(c&42)!==0?1:qn(c),c=(c&(S.suspendedLanes|a))!==0?0:c,c!==0&&c!==U.retryLane))throw U.retryLane=c,Oo(e,c),Er(S,e,c),J_;I.data==="$?"||bm(),i=rm(e,i,a)}else I.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=U.treeContext,qt=ns(I.nextSibling),Ut=i,ue=!0,cn=null,yn=!1,e!==null&&(d[_++]=R,d[_++]=z,d[_++]=b,R=e.id,z=e.overflow,b=i),i=im(i,c.children),i.flags|=4096);return i}return m?(Bo(),m=c.fallback,I=i.mode,U=e.child,$=U.sibling,c=kr(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,$!==null?m=kr($,m):(m=_s(m,I,a,null),m.flags|=2),m.return=i,c.return=i,c.sibling=m,i.child=c,c=m,m=i.child,I=e.child.memoizedState,I===null?I=em(a):(U=I.cachePool,U!==null?($=Wn._currentValue,U=U.parent!==$?{parent:$,pool:$}:U):U=Yg(),I={baseLanes:I.baseLanes|a,cachePool:U}),m.memoizedState=I,m.childLanes=nm(e,S,a),i.memoizedState=tm,c):(jo(i),a=e.child,e=a.sibling,a=kr(a,{mode:"visible",children:c.children}),a.return=i,a.sibling=null,e!==null&&(S=i.deletions,S===null?(i.deletions=[e],i.flags|=16):S.push(e)),i.child=a,i.memoizedState=null,a)}function im(e,i){return i=Nh({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Nh(e,i){return e=Bi(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function rm(e,i,a){return Ol(i,e.child,null,a),e=im(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function uy(e,i,a){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i),ja(e.return,i,a)}function sm(e,i,a,c,m){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:m}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=m)}function cy(e,i,a){var c=i.pendingProps,m=c.revealOrder,g=c.tail;if(mi(e,i,c.children,a),c=Yn.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uy(e,a,i);else if(e.tag===19)uy(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}switch(rt(Yn,c),m){case"forwards":for(a=i.child,m=null;a!==null;)e=a.alternate,e!==null&&Ph(e)===null&&(m=a),a=a.sibling;a=m,a===null?(m=i.child,i.child=null):(m=a.sibling,a.sibling=null),sm(i,!1,m,a,g);break;case"backwards":for(a=null,m=i.child,i.child=null;m!==null;){if(e=m.alternate,e!==null&&Ph(e)===null){i.child=m;break}e=m.sibling,m.sibling=a,a=m,m=e}sm(i,!0,a,null,g);break;case"together":sm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ks(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Zo|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Ba(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(o(153));if(i.child!==null){for(e=i.child,a=kr(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=kr(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function om(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&mh(e)))}function Mw(e,i,a){switch(i.tag){case 3:ce(i,i.stateNode.containerInfo),ys(i,Wn,e.memoizedState.cache),No();break;case 27:case 5:Oe(i);break;case 4:ce(i,i.stateNode.containerInfo);break;case 10:ys(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(jo(i),i.flags|=128,null):(a&i.child.childLanes)!==0?ly(e,i,a):(jo(i),e=Ks(e,i,a),e!==null?e.sibling:null);jo(i);break;case 19:var m=(e.flags&128)!==0;if(c=(a&i.childLanes)!==0,c||(Ba(e,i,a,!1),c=(a&i.childLanes)!==0),m){if(c)return cy(e,i,a);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),rt(Yn,Yn.current),c)break;return null;case 22:case 23:return i.lanes=0,iy(e,i,a);case 24:ys(i,Wn,e.memoizedState.cache)}return Ks(e,i,a)}function hy(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)ii=!0;else{if(!om(e,a)&&(i.flags&128)===0)return ii=!1,Mw(e,i,a);ii=(e.flags&131072)!==0}else ii=!1,ue&&(i.flags&1048576)!==0&&st(i,u,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var c=i.elementType,m=c._init;if(c=m(c._payload),i.type=c,typeof c=="function")bl(c)?(e=Ga(c,e),i.tag=1,i=oy(null,i,c,e,a)):(i.tag=0,i=Jd(null,i,c,e,a));else{if(c!=null){if(m=c.$$typeof,m===Ht){i.tag=11,i=ty(null,i,c,e,a);break t}else if(m===V){i.tag=14,i=ey(null,i,c,e,a);break t}}throw i=ge(c)||c,Error(o(306,i,""))}}return i;case 0:return Jd(e,i,i.type,i.pendingProps,a);case 1:return c=i.type,m=Ga(c,i.pendingProps),oy(e,i,c,m,a);case 3:t:{if(ce(i,i.stateNode.containerInfo),e===null)throw Error(o(387));c=i.pendingProps;var g=i.memoizedState;m=g.element,Cd(e,i),Vu(i,c,null,a);var S=i.memoizedState;if(c=S.cache,ys(i,Wn,c),c!==g.cache&&Sl(i,[Wn],a,!0),ku(),c=S.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=ay(e,i,c,a);break t}else if(c!==m){m=Ui(Error(o(424)),i),Lo(m),i=ay(e,i,c,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(qt=ns(e.firstChild),Ut=i,ue=!0,cn=null,yn=!0,a=q_(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(No(),c===m){i=Ks(e,i,a);break t}mi(e,i,c,a)}i=i.child}return i;case 26:return Dh(e,i),e===null?(a=pv(i.type,null,i.pendingProps,null))?i.memoizedState=a:ue||(a=i.type,e=i.pendingProps,c=Yh(St.current).createElement(a),c[fn]=i,c[on]=e,gi(c,a,e),an(c),i.stateNode=c):i.memoizedState=pv(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Oe(i),e===null&&ue&&(c=i.stateNode=fv(i.type,i.pendingProps,St.current),Ut=i,yn=!0,m=qt,Ko(i.type)?(jm=m,qt=ns(c.firstChild)):qt=m),mi(e,i,i.pendingProps.children,a),Dh(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&ue&&((m=c=qt)&&(c=s1(c,i.type,i.pendingProps,yn),c!==null?(i.stateNode=c,Ut=i,qt=ns(c.firstChild),yn=!1,m=!0):m=!1),m||$i(i)),Oe(i),m=i.type,g=i.pendingProps,S=e!==null?e.memoizedProps:null,c=g.children,km(m,g)?c=null:S!==null&&km(m,S)&&(i.flags|=32),i.memoizedState!==null&&(m=Ld(e,i,ww,null,null,a),sc._currentValue=m),Dh(e,i),mi(e,i,c,a),i.child;case 6:return e===null&&ue&&((e=a=qt)&&(a=o1(a,i.pendingProps,yn),a!==null?(i.stateNode=a,Ut=i,qt=null,e=!0):e=!1),e||$i(i)),null;case 13:return ly(e,i,a);case 4:return ce(i,i.stateNode.containerInfo),c=i.pendingProps,e===null?i.child=Ol(i,null,c,a):mi(e,i,c,a),i.child;case 11:return ty(e,i,i.type,i.pendingProps,a);case 7:return mi(e,i,i.pendingProps,a),i.child;case 8:return mi(e,i,i.pendingProps.children,a),i.child;case 12:return mi(e,i,i.pendingProps.children,a),i.child;case 10:return c=i.pendingProps,ys(i,i.type,c.value),mi(e,i,c.children,a),i.child;case 9:return m=i.type._context,c=i.pendingProps.children,Ha(i),m=Ii(m),c=c(m),i.flags|=1,mi(e,i,c,a),i.child;case 14:return ey(e,i,i.type,i.pendingProps,a);case 15:return ny(e,i,i.type,i.pendingProps,a);case 19:return cy(e,i,a);case 31:return c=i.pendingProps,a=i.mode,c={mode:c.mode,children:c.children},e===null?(a=Nh(c,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=kr(e.child,c),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return iy(e,i,a);case 24:return Ha(i),c=Ii(Wn),e===null?(m=xd(),m===null&&(m=hn,g=Sd(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=a),m=g),i.memoizedState={parent:c,cache:m},Id(i),ys(i,Wn,m)):((e.lanes&a)!==0&&(Cd(e,i),Vu(i,null,null,a),ku()),m=e.memoizedState,g=i.memoizedState,m.parent!==c?(m={parent:c,cache:c},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),ys(i,Wn,c)):(c=g.cache,ys(i,Wn,c),c!==m.cache&&Sl(i,[Wn],a,!0))),mi(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(o(156,i.tag))}function Xs(e){e.flags|=4}function fy(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Tv(i)){if(i=zr.current,i!==null&&((Le&4194048)===Le?vs!==null:(Le&62914560)!==Le&&(Le&536870912)===0||i!==vs))throw Nu=Rd,Qg;e.flags|=8192}}function Lh(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?_t():536870912,e.lanes|=i,kl|=i)}function Fu(e,i){if(!ue)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function vn(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,c=0;if(i)for(var m=e.child;m!==null;)a|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=e,m=m.sibling;else for(m=e.child;m!==null;)a|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=e,m=m.sibling;return e.subtreeFlags|=c,e.childLanes=a,i}function Ow(e,i,a){var c=i.pendingProps;switch(Lt(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(i),null;case 1:return vn(i),null;case 3:return a=i.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),ts(Wn),je(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ua(i)?Xs(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,dh())),vn(i),null;case 26:return a=i.memoizedState,e===null?(Xs(i),a!==null?(vn(i),fy(i,a)):(vn(i),i.flags&=-16777217)):a?a!==e.memoizedState?(Xs(i),vn(i),fy(i,a)):(vn(i),i.flags&=-16777217):(e.memoizedProps!==c&&Xs(i),vn(i),i.flags&=-16777217),null;case 27:Be(i),a=St.current;var m=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==c&&Xs(i);else{if(!c){if(i.stateNode===null)throw Error(o(166));return vn(i),null}e=Et.current,Ua(i)?hh(i):(e=fv(m,c,a),i.stateNode=e,Xs(i))}return vn(i),null;case 5:if(Be(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&Xs(i);else{if(!c){if(i.stateNode===null)throw Error(o(166));return vn(i),null}if(e=Et.current,Ua(i))hh(i);else{switch(m=Yh(St.current),e){case 1:e=m.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=m.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=m.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=m.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof c.is=="string"?m.createElement("select",{is:c.is}):m.createElement("select"),c.multiple?e.multiple=!0:c.size&&(e.size=c.size);break;default:e=typeof c.is=="string"?m.createElement(a,{is:c.is}):m.createElement(a)}}e[fn]=i,e[on]=c;t:for(m=i.child;m!==null;){if(m.tag===5||m.tag===6)e.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===i)break t;for(;m.sibling===null;){if(m.return===null||m.return===i)break t;m=m.return}m.sibling.return=m.return,m=m.sibling}i.stateNode=e;t:switch(gi(e,a,c),a){case"button":case"input":case"select":case"textarea":e=!!c.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Xs(i)}}return vn(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==c&&Xs(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(o(166));if(e=St.current,Ua(i)){if(e=i.stateNode,a=i.memoizedProps,c=null,m=Ut,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}e[fn]=i,e=!!(e.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||sv(e.nodeValue,a)),e||$i(i)}else e=Yh(e).createTextNode(c),e[fn]=i,i.stateNode=e}return vn(i),null;case 13:if(c=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(m=Ua(i),c!==null&&c.dehydrated!==null){if(e===null){if(!m)throw Error(o(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(o(317));m[fn]=i}else No(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;vn(i),m=!1}else m=dh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(Qs(i),i):(Qs(i),null)}if(Qs(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=c!==null,e=e!==null&&e.memoizedState!==null,a){c=i.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==m&&(c.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),Lh(i,i.updateQueue),vn(i),null;case 4:return je(),e===null&&Mm(i.stateNode.containerInfo),vn(i),null;case 10:return ts(i.type),vn(i),null;case 19:if(wt(Yn),m=i.memoizedState,m===null)return vn(i),null;if(c=(i.flags&128)!==0,g=m.rendering,g===null)if(c)Fu(m,!1);else{if(Rn!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(g=Ph(e),g!==null){for(i.flags|=128,Fu(m,!1),e=g.updateQueue,i.updateQueue=e,Lh(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Cu(a,e),a=a.sibling;return rt(Yn,Yn.current&1|2),i.child}e=e.sibling}m.tail!==null&&rn()>zh&&(i.flags|=128,c=!0,Fu(m,!1),i.lanes=4194304)}else{if(!c)if(e=Ph(g),e!==null){if(i.flags|=128,c=!0,e=e.updateQueue,i.updateQueue=e,Lh(i,e),Fu(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!ue)return vn(i),null}else 2*rn()-m.renderingStartTime>zh&&a!==536870912&&(i.flags|=128,c=!0,Fu(m,!1),i.lanes=4194304);m.isBackwards?(g.sibling=i.child,i.child=g):(e=m.last,e!==null?e.sibling=g:i.child=g,m.last=g)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=rn(),i.sibling=null,e=Yn.current,rt(Yn,c?e&1|2:e&1),i):(vn(i),null);case 22:case 23:return Qs(i),Dd(),c=i.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(a&536870912)!==0&&(i.flags&128)===0&&(vn(i),i.subtreeFlags&6&&(i.flags|=8192)):vn(i),a=i.updateQueue,a!==null&&Lh(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==a&&(i.flags|=2048),e!==null&&wt(qa),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ts(Wn),vn(i),null;case 25:return null;case 30:return null}throw Error(o(156,i.tag))}function Dw(e,i){switch(Lt(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return ts(Wn),je(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Be(i),null;case 13:if(Qs(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(o(340));No()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return wt(Yn),null;case 4:return je(),null;case 10:return ts(i.type),null;case 22:case 23:return Qs(i),Dd(),e!==null&&wt(qa),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return ts(Wn),null;case 25:return null;default:return null}}function dy(e,i){switch(Lt(i),i.tag){case 3:ts(Wn),je();break;case 26:case 27:case 5:Be(i);break;case 4:je();break;case 13:Qs(i);break;case 19:wt(Yn);break;case 10:ts(i.type);break;case 22:case 23:Qs(i),Dd(),e!==null&&wt(qa);break;case 24:ts(Wn)}}function Gu(e,i){try{var a=i.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var m=c.next;a=m;do{if((a.tag&e)===e){c=void 0;var g=a.create,S=a.inst;c=g(),S.destroy=c}a=a.next}while(a!==m)}}catch(I){en(i,i.return,I)}}function Ho(e,i,a){try{var c=i.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var g=m.next;c=g;do{if((c.tag&e)===e){var S=c.inst,I=S.destroy;if(I!==void 0){S.destroy=void 0,m=i;var U=a,$=I;try{$()}catch(dt){en(m,U,dt)}}}c=c.next}while(c!==g)}}catch(dt){en(i,i.return,dt)}}function my(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{e_(i,a)}catch(c){en(e,e.return,c)}}}function py(e,i,a){a.props=Ga(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(c){en(e,i,c)}}function Zu(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof a=="function"?e.refCleanup=a(c):a.current=c}}catch(m){en(e,i,m)}}function Ts(e,i){var a=e.ref,c=e.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(m){en(e,i,m)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(m){en(e,i,m)}else a.current=null}function gy(e){var i=e.type,a=e.memoizedProps,c=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break t;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(m){en(e,e.return,m)}}function am(e,i,a){try{var c=e.stateNode;t1(c,e.type,a,i),c[on]=i}catch(m){en(e,e.return,m)}}function _y(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ko(e.type)||e.tag===4}function lm(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||_y(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ko(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function um(e,i,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Wh));else if(c!==4&&(c===27&&Ko(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(um(e,i,a),e=e.sibling;e!==null;)um(e,i,a),e=e.sibling}function kh(e,i,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(c!==4&&(c===27&&Ko(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(kh(e,i,a),e=e.sibling;e!==null;)kh(e,i,a),e=e.sibling}function yy(e){var i=e.stateNode,a=e.memoizedProps;try{for(var c=e.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);gi(i,c,a),i[fn]=e,i[on]=a}catch(g){en(e,e.return,g)}}var $s=!1,Pn=!1,cm=!1,vy=typeof WeakSet=="function"?WeakSet:Set,ri=null;function Nw(e,i){if(e=e.containerInfo,Nm=tf,e=Oa(e),Da(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var m=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break t}var S=0,I=-1,U=-1,$=0,dt=0,pt=e,tt=null;e:for(;;){for(var nt;pt!==a||m!==0&&pt.nodeType!==3||(I=S+m),pt!==g||c!==0&&pt.nodeType!==3||(U=S+c),pt.nodeType===3&&(S+=pt.nodeValue.length),(nt=pt.firstChild)!==null;)tt=pt,pt=nt;for(;;){if(pt===e)break e;if(tt===a&&++$===m&&(I=S),tt===g&&++dt===c&&(U=S),(nt=pt.nextSibling)!==null)break;pt=tt,tt=pt.parentNode}pt=nt}a=I===-1||U===-1?null:{start:I,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(Lm={focusedElem:e,selectionRange:a},tf=!1,ri=i;ri!==null;)if(i=ri,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,ri=e;else for(;ri!==null;){switch(i=ri,g=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,a=i,m=g.memoizedProps,g=g.memoizedState,c=a.stateNode;try{var ae=Ga(a.type,m,a.elementType===a.type);e=c.getSnapshotBeforeUpdate(ae,g),c.__reactInternalSnapshotBeforeUpdate=e}catch(ee){en(a,a.return,ee)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)zm(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":zm(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=i.sibling,e!==null){e.return=i.return,ri=e;break}ri=i.return}}function Ty(e,i,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:qo(e,a),c&4&&Gu(5,a);break;case 1:if(qo(e,a),c&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(S){en(a,a.return,S)}else{var m=Ga(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(m,i,e.__reactInternalSnapshotBeforeUpdate)}catch(S){en(a,a.return,S)}}c&64&&my(a),c&512&&Zu(a,a.return);break;case 3:if(qo(e,a),c&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{e_(e,i)}catch(S){en(a,a.return,S)}}break;case 27:i===null&&c&4&&yy(a);case 26:case 5:qo(e,a),i===null&&c&4&&gy(a),c&512&&Zu(a,a.return);break;case 12:qo(e,a);break;case 13:qo(e,a),c&4&&wy(e,a),c&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=qw.bind(null,a),a1(e,a))));break;case 22:if(c=a.memoizedState!==null||$s,!c){i=i!==null&&i.memoizedState!==null||Pn,m=$s;var g=Pn;$s=c,(Pn=i)&&!g?Fo(e,a,(a.subtreeFlags&8772)!==0):qo(e,a),$s=m,Pn=g}break;case 30:break;default:qo(e,a)}}function Ey(e){var i=e.alternate;i!==null&&(e.alternate=null,Ey(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Yi(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var _n=null,tr=!1;function Js(e,i,a){for(a=a.child;a!==null;)by(e,i,a),a=a.sibling}function by(e,i,a){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(le,a)}catch{}switch(a.tag){case 26:Pn||Ts(a,i),Js(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Pn||Ts(a,i);var c=_n,m=tr;Ko(a.type)&&(_n=a.stateNode,tr=!1),Js(e,i,a),ec(a.stateNode),_n=c,tr=m;break;case 5:Pn||Ts(a,i);case 6:if(c=_n,m=tr,_n=null,Js(e,i,a),_n=c,tr=m,_n!==null)if(tr)try{(_n.nodeType===9?_n.body:_n.nodeName==="HTML"?_n.ownerDocument.body:_n).removeChild(a.stateNode)}catch(g){en(a,i,g)}else try{_n.removeChild(a.stateNode)}catch(g){en(a,i,g)}break;case 18:_n!==null&&(tr?(e=_n,cv(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),uc(e)):cv(_n,a.stateNode));break;case 4:c=_n,m=tr,_n=a.stateNode.containerInfo,tr=!0,Js(e,i,a),_n=c,tr=m;break;case 0:case 11:case 14:case 15:Pn||Ho(2,a,i),Pn||Ho(4,a,i),Js(e,i,a);break;case 1:Pn||(Ts(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"&&py(a,i,c)),Js(e,i,a);break;case 21:Js(e,i,a);break;case 22:Pn=(c=Pn)||a.memoizedState!==null,Js(e,i,a),Pn=c;break;default:Js(e,i,a)}}function wy(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{uc(e)}catch(a){en(i,i.return,a)}}function Lw(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new vy),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new vy),i;default:throw Error(o(435,e.tag))}}function hm(e,i){var a=Lw(e);i.forEach(function(c){var m=Fw.bind(null,e,c);a.has(c)||(a.add(c),c.then(m,m))})}function _r(e,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var m=a[c],g=e,S=i,I=S;t:for(;I!==null;){switch(I.tag){case 27:if(Ko(I.type)){_n=I.stateNode,tr=!1;break t}break;case 5:_n=I.stateNode,tr=!1;break t;case 3:case 4:_n=I.stateNode.containerInfo,tr=!0;break t}I=I.return}if(_n===null)throw Error(o(160));by(g,S,m),_n=null,tr=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Sy(i,e),i=i.sibling}var es=null;function Sy(e,i){var a=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_r(i,e),yr(e),c&4&&(Ho(3,e,e.return),Gu(3,e),Ho(5,e,e.return));break;case 1:_r(i,e),yr(e),c&512&&(Pn||a===null||Ts(a,a.return)),c&64&&$s&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var m=es;if(_r(i,e),yr(e),c&512&&(Pn||a===null||Ts(a,a.return)),c&4){var g=a!==null?a.memoizedState:null;if(c=e.memoizedState,a===null)if(c===null)if(e.stateNode===null){t:{c=e.type,a=e.memoizedProps,m=m.ownerDocument||m;e:switch(c){case"title":g=m.getElementsByTagName("title")[0],(!g||g[Ar]||g[fn]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(c),m.head.insertBefore(g,m.querySelector("head > title"))),gi(g,c,a),g[fn]=e,an(g),c=g;break t;case"link":var S=yv("link","href",m).get(c+(a.href||""));if(S){for(var I=0;I<S.length;I++)if(g=S[I],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(I,1);break e}}g=m.createElement(c),gi(g,c,a),m.head.appendChild(g);break;case"meta":if(S=yv("meta","content",m).get(c+(a.content||""))){for(I=0;I<S.length;I++)if(g=S[I],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(I,1);break e}}g=m.createElement(c),gi(g,c,a),m.head.appendChild(g);break;default:throw Error(o(468,c))}g[fn]=e,an(g),c=g}e.stateNode=c}else vv(m,e.type,e.stateNode);else e.stateNode=_v(m,c,e.memoizedProps);else g!==c?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,c===null?vv(m,e.type,e.stateNode):_v(m,c,e.memoizedProps)):c===null&&e.stateNode!==null&&am(e,e.memoizedProps,a.memoizedProps)}break;case 27:_r(i,e),yr(e),c&512&&(Pn||a===null||Ts(a,a.return)),a!==null&&c&4&&am(e,e.memoizedProps,a.memoizedProps);break;case 5:if(_r(i,e),yr(e),c&512&&(Pn||a===null||Ts(a,a.return)),e.flags&32){m=e.stateNode;try{Jn(m,"")}catch(nt){en(e,e.return,nt)}}c&4&&e.stateNode!=null&&(m=e.memoizedProps,am(e,m,a!==null?a.memoizedProps:m)),c&1024&&(cm=!0);break;case 6:if(_r(i,e),yr(e),c&4){if(e.stateNode===null)throw Error(o(162));c=e.memoizedProps,a=e.stateNode;try{a.nodeValue=c}catch(nt){en(e,e.return,nt)}}break;case 3:if(Xh=null,m=es,es=Qh(i.containerInfo),_r(i,e),es=m,yr(e),c&4&&a!==null&&a.memoizedState.isDehydrated)try{uc(i.containerInfo)}catch(nt){en(e,e.return,nt)}cm&&(cm=!1,Ay(e));break;case 4:c=es,es=Qh(e.stateNode.containerInfo),_r(i,e),yr(e),es=c;break;case 12:_r(i,e),yr(e);break;case 13:_r(i,e),yr(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(_m=rn()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,hm(e,c)));break;case 22:m=e.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,$=$s,dt=Pn;if($s=$||m,Pn=dt||U,_r(i,e),Pn=dt,$s=$,yr(e),c&8192)t:for(i=e.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(a===null||U||$s||Pn||Za(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){U=a=i;try{if(g=U.stateNode,m)S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{I=U.stateNode;var pt=U.memoizedProps.style,tt=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;I.style.display=tt==null||typeof tt=="boolean"?"":(""+tt).trim()}}catch(nt){en(U,U.return,nt)}}}else if(i.tag===6){if(a===null){U=i;try{U.stateNode.nodeValue=m?"":U.memoizedProps}catch(nt){en(U,U.return,nt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=e.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,hm(e,a))));break;case 19:_r(i,e),yr(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,hm(e,c)));break;case 30:break;case 21:break;default:_r(i,e),yr(e)}}function yr(e){var i=e.flags;if(i&2){try{for(var a,c=e.return;c!==null;){if(_y(c)){a=c;break}c=c.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var m=a.stateNode,g=lm(e);kh(e,g,m);break;case 5:var S=a.stateNode;a.flags&32&&(Jn(S,""),a.flags&=-33);var I=lm(e);kh(e,I,S);break;case 3:case 4:var U=a.stateNode.containerInfo,$=lm(e);um(e,$,U);break;default:throw Error(o(161))}}catch(dt){en(e,e.return,dt)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Ay(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Ay(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function qo(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ty(e,i.alternate,i),i=i.sibling}function Za(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Ho(4,i,i.return),Za(i);break;case 1:Ts(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&py(i,i.return,a),Za(i);break;case 27:ec(i.stateNode);case 26:case 5:Ts(i,i.return),Za(i);break;case 22:i.memoizedState===null&&Za(i);break;case 30:Za(i);break;default:Za(i)}e=e.sibling}}function Fo(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,m=e,g=i,S=g.flags;switch(g.tag){case 0:case 11:case 15:Fo(m,g,a),Gu(4,g);break;case 1:if(Fo(m,g,a),c=g,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch($){en(c,c.return,$)}if(c=g,m=c.updateQueue,m!==null){var I=c.stateNode;try{var U=m.shared.hiddenCallbacks;if(U!==null)for(m.shared.hiddenCallbacks=null,m=0;m<U.length;m++)t_(U[m],I)}catch($){en(c,c.return,$)}}a&&S&64&&my(g),Zu(g,g.return);break;case 27:yy(g);case 26:case 5:Fo(m,g,a),a&&c===null&&S&4&&gy(g),Zu(g,g.return);break;case 12:Fo(m,g,a);break;case 13:Fo(m,g,a),a&&S&4&&wy(m,g);break;case 22:g.memoizedState===null&&Fo(m,g,a),Zu(g,g.return);break;case 30:break;default:Fo(m,g,a)}i=i.sibling}}function fm(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Mu(a))}function dm(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Mu(e))}function Es(e,i,a,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)xy(e,i,a,c),i=i.sibling}function xy(e,i,a,c){var m=i.flags;switch(i.tag){case 0:case 11:case 15:Es(e,i,a,c),m&2048&&Gu(9,i);break;case 1:Es(e,i,a,c);break;case 3:Es(e,i,a,c),m&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Mu(e)));break;case 12:if(m&2048){Es(e,i,a,c),e=i.stateNode;try{var g=i.memoizedProps,S=g.id,I=g.onPostCommit;typeof I=="function"&&I(S,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(U){en(i,i.return,U)}}else Es(e,i,a,c);break;case 13:Es(e,i,a,c);break;case 23:break;case 22:g=i.stateNode,S=i.alternate,i.memoizedState!==null?g._visibility&2?Es(e,i,a,c):Wu(e,i):g._visibility&2?Es(e,i,a,c):(g._visibility|=2,Dl(e,i,a,c,(i.subtreeFlags&10256)!==0)),m&2048&&fm(S,i);break;case 24:Es(e,i,a,c),m&2048&&dm(i.alternate,i);break;default:Es(e,i,a,c)}}function Dl(e,i,a,c,m){for(m=m&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=e,S=i,I=a,U=c,$=S.flags;switch(S.tag){case 0:case 11:case 15:Dl(g,S,I,U,m),Gu(8,S);break;case 23:break;case 22:var dt=S.stateNode;S.memoizedState!==null?dt._visibility&2?Dl(g,S,I,U,m):Wu(g,S):(dt._visibility|=2,Dl(g,S,I,U,m)),m&&$&2048&&fm(S.alternate,S);break;case 24:Dl(g,S,I,U,m),m&&$&2048&&dm(S.alternate,S);break;default:Dl(g,S,I,U,m)}i=i.sibling}}function Wu(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,c=i,m=c.flags;switch(c.tag){case 22:Wu(a,c),m&2048&&fm(c.alternate,c);break;case 24:Wu(a,c),m&2048&&dm(c.alternate,c);break;default:Wu(a,c)}i=i.sibling}}var Yu=8192;function Nl(e){if(e.subtreeFlags&Yu)for(e=e.child;e!==null;)Ry(e),e=e.sibling}function Ry(e){switch(e.tag){case 26:Nl(e),e.flags&Yu&&e.memoizedState!==null&&T1(es,e.memoizedState,e.memoizedProps);break;case 5:Nl(e);break;case 3:case 4:var i=es;es=Qh(e.stateNode.containerInfo),Nl(e),es=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Yu,Yu=16777216,Nl(e),Yu=i):Nl(e));break;default:Nl(e)}}function Iy(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Qu(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];ri=c,Py(c,e)}Iy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Cy(e),e=e.sibling}function Cy(e){switch(e.tag){case 0:case 11:case 15:Qu(e),e.flags&2048&&Ho(9,e,e.return);break;case 3:Qu(e);break;case 12:Qu(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Vh(e)):Qu(e);break;default:Qu(e)}}function Vh(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];ri=c,Py(c,e)}Iy(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Ho(8,i,i.return),Vh(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Vh(i));break;default:Vh(i)}e=e.sibling}}function Py(e,i){for(;ri!==null;){var a=ri;switch(a.tag){case 0:case 11:case 15:Ho(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Mu(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,ri=c;else t:for(a=e;ri!==null;){c=ri;var m=c.sibling,g=c.return;if(Ey(c),c===a){ri=null;break t}if(m!==null){m.return=g,ri=m;break t}ri=g}}}var kw={getCacheForType:function(e){var i=Ii(Wn),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},Vw=typeof WeakMap=="function"?WeakMap:Map,We=0,hn=null,Ae=null,Le=0,Ye=0,vr=null,Go=!1,Ll=!1,mm=!1,to=0,Rn=0,Zo=0,Wa=0,pm=0,Ur=0,kl=0,Ku=null,er=null,gm=!1,_m=0,zh=1/0,Uh=null,Wo=null,pi=0,Yo=null,Vl=null,zl=0,ym=0,vm=null,My=null,Xu=0,Tm=null;function Tr(){if((We&2)!==0&&Le!==0)return Le&-Le;if(J.T!==null){var e=Al;return e!==0?e:Rm()}return Ni()}function Oy(){Ur===0&&(Ur=(Le&536870912)===0||ue?It():536870912);var e=zr.current;return e!==null&&(e.flags|=32),Ur}function Er(e,i,a){(e===hn&&(Ye===2||Ye===9)||e.cancelPendingCommit!==null)&&(Ul(e,0),Qo(e,Le,Ur,!1)),$t(e,a),((We&2)===0||e!==hn)&&(e===hn&&((We&2)===0&&(Wa|=a),Rn===4&&Qo(e,Le,Ur,!1)),bs(e))}function Dy(e,i,a){if((We&6)!==0)throw Error(o(327));var c=!a&&(i&124)===0&&(i&e.expiredLanes)===0||pe(e,i),m=c?jw(e,i):wm(e,i,!0),g=c;do{if(m===0){Ll&&!c&&Qo(e,i,0,!1);break}else{if(a=e.current.alternate,g&&!zw(a)){m=wm(e,i,!1),g=!1;continue}if(m===2){if(g=i,e.errorRecoveryDisabledLanes&g)var S=0;else S=e.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;t:{var I=e;m=Ku;var U=I.current.memoizedState.isDehydrated;if(U&&(Ul(I,S).flags|=256),S=wm(I,S,!1),S!==2){if(mm&&!U){I.errorRecoveryDisabledLanes|=g,Wa|=g,m=4;break t}g=er,er=m,g!==null&&(er===null?er=g:er.push.apply(er,g))}m=S}if(g=!1,m!==2)continue}}if(m===1){Ul(e,0),Qo(e,i,0,!0);break}t:{switch(c=e,g=m,g){case 0:case 1:throw Error(o(345));case 4:if((i&4194048)!==i)break;case 6:Qo(c,i,Ur,!Go);break t;case 2:er=null;break;case 3:case 5:break;default:throw Error(o(329))}if((i&62914560)===i&&(m=_m+300-rn(),10<m)){if(Qo(c,i,Ur,!Go),me(c,0,!0)!==0)break t;c.timeoutHandle=lv(Ny.bind(null,c,a,er,Uh,gm,i,Ur,Wa,kl,Go,g,2,-0,0),m);break t}Ny(c,a,er,Uh,gm,i,Ur,Wa,kl,Go,g,0,-0,0)}}break}while(!0);bs(e)}function Ny(e,i,a,c,m,g,S,I,U,$,dt,pt,tt,nt){if(e.timeoutHandle=-1,pt=i.subtreeFlags,(pt&8192||(pt&16785408)===16785408)&&(rc={stylesheets:null,count:0,unsuspend:v1},Ry(i),pt=E1(),pt!==null)){e.cancelPendingCommit=pt(By.bind(null,e,i,g,a,c,m,S,I,U,dt,1,tt,nt)),Qo(e,g,S,!$);return}By(e,i,g,a,c,m,S,I,U)}function zw(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var m=a[c],g=m.getSnapshot;m=m.value;try{if(!Vi(g(),m))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Qo(e,i,a,c){i&=~pm,i&=~Wa,e.suspendedLanes|=i,e.pingedLanes&=~i,c&&(e.warmLanes|=i),c=e.expirationTimes;for(var m=i;0<m;){var g=31-K(m),S=1<<g;c[g]=-1,m&=~S}a!==0&&Wt(e,a,i)}function jh(){return(We&6)===0?($u(0),!1):!0}function Em(){if(Ae!==null){if(Ye===0)var e=Ae.return;else e=Ae,Jr=Vr=null,zd(e),Ml=null,Hu=0,e=Ae;for(;e!==null;)dy(e.alternate,e),e=e.return;Ae=null}}function Ul(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,n1(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Em(),hn=e,Ae=a=kr(e.current,null),Le=i,Ye=0,vr=null,Go=!1,Ll=pe(e,i),mm=!1,kl=Ur=pm=Wa=Zo=Rn=0,er=Ku=null,gm=!1,(i&8)!==0&&(i|=i&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=i;0<c;){var m=31-K(c),g=1<<m;i|=e[m],c&=~g}return to=i,La(),a}function Ly(e,i){Te=null,J.H=Rh,i===Du||i===_h?(i=$g(),Ye=3):i===Qg?(i=$g(),Ye=4):Ye=i===J_?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,vr=i,Ae===null&&(Rn=1,Oh(e,Ui(i,e.current)))}function ky(){var e=J.H;return J.H=Rh,e===null?Rh:e}function Vy(){var e=J.A;return J.A=kw,e}function bm(){Rn=4,Go||(Le&4194048)!==Le&&zr.current!==null||(Ll=!0),(Zo&134217727)===0&&(Wa&134217727)===0||hn===null||Qo(hn,Le,Ur,!1)}function wm(e,i,a){var c=We;We|=2;var m=ky(),g=Vy();(hn!==e||Le!==i)&&(Uh=null,Ul(e,i)),i=!1;var S=Rn;t:do try{if(Ye!==0&&Ae!==null){var I=Ae,U=vr;switch(Ye){case 8:Em(),S=6;break t;case 3:case 2:case 9:case 6:zr.current===null&&(i=!0);var $=Ye;if(Ye=0,vr=null,jl(e,I,U,$),a&&Ll){S=0;break t}break;default:$=Ye,Ye=0,vr=null,jl(e,I,U,$)}}Uw(),S=Rn;break}catch(dt){Ly(e,dt)}while(!0);return i&&e.shellSuspendCounter++,Jr=Vr=null,We=c,J.H=m,J.A=g,Ae===null&&(hn=null,Le=0,La()),S}function Uw(){for(;Ae!==null;)zy(Ae)}function jw(e,i){var a=We;We|=2;var c=ky(),m=Vy();hn!==e||Le!==i?(Uh=null,zh=rn()+500,Ul(e,i)):Ll=pe(e,i);t:do try{if(Ye!==0&&Ae!==null){i=Ae;var g=vr;e:switch(Ye){case 1:Ye=0,vr=null,jl(e,i,g,1);break;case 2:case 9:if(Kg(g)){Ye=0,vr=null,Uy(i);break}i=function(){Ye!==2&&Ye!==9||hn!==e||(Ye=7),bs(e)},g.then(i,i);break t;case 3:Ye=7;break t;case 4:Ye=5;break t;case 7:Kg(g)?(Ye=0,vr=null,Uy(i)):(Ye=0,vr=null,jl(e,i,g,7));break;case 5:var S=null;switch(Ae.tag){case 26:S=Ae.memoizedState;case 5:case 27:var I=Ae;if(!S||Tv(S)){Ye=0,vr=null;var U=I.sibling;if(U!==null)Ae=U;else{var $=I.return;$!==null?(Ae=$,Bh($)):Ae=null}break e}}Ye=0,vr=null,jl(e,i,g,5);break;case 6:Ye=0,vr=null,jl(e,i,g,6);break;case 8:Em(),Rn=6;break t;default:throw Error(o(462))}}Bw();break}catch(dt){Ly(e,dt)}while(!0);return Jr=Vr=null,J.H=c,J.A=m,We=a,Ae!==null?0:(hn=null,Le=0,La(),Rn)}function Bw(){for(;Ae!==null&&!Hn();)zy(Ae)}function zy(e){var i=hy(e.alternate,e,to);e.memoizedProps=e.pendingProps,i===null?Bh(e):Ae=i}function Uy(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=sy(a,i,i.pendingProps,i.type,void 0,Le);break;case 11:i=sy(a,i,i.pendingProps,i.type.render,i.ref,Le);break;case 5:zd(i);default:dy(a,i),i=Ae=Cu(i,to),i=hy(a,i,to)}e.memoizedProps=e.pendingProps,i===null?Bh(e):Ae=i}function jl(e,i,a,c){Jr=Vr=null,zd(i),Ml=null,Hu=0;var m=i.return;try{if(Pw(e,m,i,a,Le)){Rn=1,Oh(e,Ui(a,e.current)),Ae=null;return}}catch(g){if(m!==null)throw Ae=m,g;Rn=1,Oh(e,Ui(a,e.current)),Ae=null;return}i.flags&32768?(ue||c===1?e=!0:Ll||(Le&536870912)!==0?e=!1:(Go=e=!0,(c===2||c===9||c===3||c===6)&&(c=zr.current,c!==null&&c.tag===13&&(c.flags|=16384))),jy(i,e)):Bh(i)}function Bh(e){var i=e;do{if((i.flags&32768)!==0){jy(i,Go);return}e=i.return;var a=Ow(i.alternate,i,to);if(a!==null){Ae=a;return}if(i=i.sibling,i!==null){Ae=i;return}Ae=i=e}while(i!==null);Rn===0&&(Rn=5)}function jy(e,i){do{var a=Dw(e.alternate,e);if(a!==null){a.flags&=32767,Ae=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Ae=e;return}Ae=e=a}while(e!==null);Rn=6,Ae=null}function By(e,i,a,c,m,g,S,I,U){e.cancelPendingCommit=null;do Hh();while(pi!==0);if((We&6)!==0)throw Error(o(327));if(i!==null){if(i===e.current)throw Error(o(177));if(g=i.lanes|i.childLanes,g|=gr,Ft(e,a,g,S,I,U),e===hn&&(Ae=hn=null,Le=0),Vl=i,Yo=e,zl=a,ym=g,vm=m,My=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Gw(sn,function(){return Zy(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=J.T,J.T=null,m=At.p,At.p=2,S=We,We|=4;try{Nw(e,i,a)}finally{We=S,At.p=m,J.T=c}}pi=1,Hy(),qy(),Fy()}}function Hy(){if(pi===1){pi=0;var e=Yo,i=Vl,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=J.T,J.T=null;var c=At.p;At.p=2;var m=We;We|=4;try{Sy(i,e);var g=Lm,S=Oa(e.containerInfo),I=g.focusedElem,U=g.selectionRange;if(S!==I&&I&&I.ownerDocument&&_l(I.ownerDocument.documentElement,I)){if(U!==null&&Da(I)){var $=U.start,dt=U.end;if(dt===void 0&&(dt=$),"selectionStart"in I)I.selectionStart=$,I.selectionEnd=Math.min(dt,I.value.length);else{var pt=I.ownerDocument||document,tt=pt&&pt.defaultView||window;if(tt.getSelection){var nt=tt.getSelection(),ae=I.textContent.length,ee=Math.min(U.start,ae),$e=U.end===void 0?ee:Math.min(U.end,ae);!nt.extend&&ee>$e&&(S=$e,$e=ee,ee=S);var Z=Ru(I,ee),F=Ru(I,$e);if(Z&&F&&(nt.rangeCount!==1||nt.anchorNode!==Z.node||nt.anchorOffset!==Z.offset||nt.focusNode!==F.node||nt.focusOffset!==F.offset)){var X=pt.createRange();X.setStart(Z.node,Z.offset),nt.removeAllRanges(),ee>$e?(nt.addRange(X),nt.extend(F.node,F.offset)):(X.setEnd(F.node,F.offset),nt.addRange(X))}}}}for(pt=[],nt=I;nt=nt.parentNode;)nt.nodeType===1&&pt.push({element:nt,left:nt.scrollLeft,top:nt.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<pt.length;I++){var mt=pt[I];mt.element.scrollLeft=mt.left,mt.element.scrollTop=mt.top}}tf=!!Nm,Lm=Nm=null}finally{We=m,At.p=c,J.T=a}}e.current=i,pi=2}}function qy(){if(pi===2){pi=0;var e=Yo,i=Vl,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=J.T,J.T=null;var c=At.p;At.p=2;var m=We;We|=4;try{Ty(e,i.alternate,i)}finally{We=m,At.p=c,J.T=a}}pi=3}}function Fy(){if(pi===4||pi===3){pi=0,Ti();var e=Yo,i=Vl,a=zl,c=My;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?pi=5:(pi=0,Vl=Yo=null,Gy(e,e.pendingLanes));var m=e.pendingLanes;if(m===0&&(Wo=null),$n(a),i=i.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(le,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=J.T,m=At.p,At.p=2,J.T=null;try{for(var g=e.onRecoverableError,S=0;S<c.length;S++){var I=c[S];g(I.value,{componentStack:I.stack})}}finally{J.T=i,At.p=m}}(zl&3)!==0&&Hh(),bs(e),m=e.pendingLanes,(a&4194090)!==0&&(m&42)!==0?e===Tm?Xu++:(Xu=0,Tm=e):Xu=0,$u(0)}}function Gy(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Mu(i)))}function Hh(e){return Hy(),qy(),Fy(),Zy()}function Zy(){if(pi!==5)return!1;var e=Yo,i=ym;ym=0;var a=$n(zl),c=J.T,m=At.p;try{At.p=32>a?32:a,J.T=null,a=vm,vm=null;var g=Yo,S=zl;if(pi=0,Vl=Yo=null,zl=0,(We&6)!==0)throw Error(o(331));var I=We;if(We|=4,Cy(g.current),xy(g,g.current,S,a),We=I,$u(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(le,g)}catch{}return!0}finally{At.p=m,J.T=c,Gy(e,i)}}function Wy(e,i,a){i=Ui(a,i),i=$d(e.stateNode,i,2),e=zo(e,i,2),e!==null&&($t(e,2),bs(e))}function en(e,i,a){if(e.tag===3)Wy(e,e,a);else for(;i!==null;){if(i.tag===3){Wy(i,e,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Wo===null||!Wo.has(c))){e=Ui(a,e),a=X_(2),c=zo(i,a,2),c!==null&&($_(a,c,i,e),$t(c,2),bs(c));break}}i=i.return}}function Sm(e,i,a){var c=e.pingCache;if(c===null){c=e.pingCache=new Vw;var m=new Set;c.set(i,m)}else m=c.get(i),m===void 0&&(m=new Set,c.set(i,m));m.has(a)||(mm=!0,m.add(a),e=Hw.bind(null,e,i,a),i.then(e,e))}function Hw(e,i,a){var c=e.pingCache;c!==null&&c.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,hn===e&&(Le&a)===a&&(Rn===4||Rn===3&&(Le&62914560)===Le&&300>rn()-_m?(We&2)===0&&Ul(e,0):pm|=a,kl===Le&&(kl=0)),bs(e)}function Yy(e,i){i===0&&(i=_t()),e=Oo(e,i),e!==null&&($t(e,i),bs(e))}function qw(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Yy(e,a)}function Fw(e,i){var a=0;switch(e.tag){case 13:var c=e.stateNode,m=e.memoizedState;m!==null&&(a=m.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(i),Yy(e,a)}function Gw(e,i){return nn(e,i)}var qh=null,Bl=null,Am=!1,Fh=!1,xm=!1,Ya=0;function bs(e){e!==Bl&&e.next===null&&(Bl===null?qh=Bl=e:Bl=Bl.next=e),Fh=!0,Am||(Am=!0,Ww())}function $u(e,i){if(!xm&&Fh){xm=!0;do for(var a=!1,c=qh;c!==null;){if(e!==0){var m=c.pendingLanes;if(m===0)var g=0;else{var S=c.suspendedLanes,I=c.pingedLanes;g=(1<<31-K(42|e)+1)-1,g&=m&~(S&~I),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,$y(c,g))}else g=Le,g=me(c,c===hn?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||pe(c,g)||(a=!0,$y(c,g));c=c.next}while(a);xm=!1}}function Zw(){Qy()}function Qy(){Fh=Am=!1;var e=0;Ya!==0&&(e1()&&(e=Ya),Ya=0);for(var i=rn(),a=null,c=qh;c!==null;){var m=c.next,g=Ky(c,i);g===0?(c.next=null,a===null?qh=m:a.next=m,m===null&&(Bl=a)):(a=c,(e!==0||(g&3)!==0)&&(Fh=!0)),c=m}$u(e)}function Ky(e,i){for(var a=e.suspendedLanes,c=e.pingedLanes,m=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var S=31-K(g),I=1<<S,U=m[S];U===-1?((I&a)===0||(I&c)!==0)&&(m[S]=ct(I,i)):U<=i&&(e.expiredLanes|=I),g&=~I}if(i=hn,a=Le,a=me(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,a===0||e===i&&(Ye===2||Ye===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&wn(c),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||pe(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(c!==null&&wn(c),$n(a)){case 2:case 8:a=Xn;break;case 32:a=sn;break;case 268435456:a=De;break;default:a=sn}return c=Xy.bind(null,e),a=nn(a,c),e.callbackPriority=i,e.callbackNode=a,i}return c!==null&&c!==null&&wn(c),e.callbackPriority=2,e.callbackNode=null,2}function Xy(e,i){if(pi!==0&&pi!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Hh()&&e.callbackNode!==a)return null;var c=Le;return c=me(e,e===hn?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(Dy(e,c,i),Ky(e,rn()),e.callbackNode!=null&&e.callbackNode===a?Xy.bind(null,e):null)}function $y(e,i){if(Hh())return null;Dy(e,i,!0)}function Ww(){i1(function(){(We&6)!==0?nn(Kn,Zw):Qy()})}function Rm(){return Ya===0&&(Ya=It()),Ya}function Jy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:fs(""+e)}function tv(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function Yw(e,i,a,c,m){if(i==="submit"&&a&&a.stateNode===m){var g=Jy((m[on]||null).action),S=c.submitter;S&&(i=(i=S[on]||null)?Jy(i.formAction):S.getAttribute("formAction"),i!==null&&(g=i,S=null));var I=new zs("action","action",null,c,m);e.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ya!==0){var U=S?tv(m,S):new FormData(m);Wd(a,{pending:!0,data:U,method:m.method,action:g},null,U)}}else typeof g=="function"&&(I.preventDefault(),U=S?tv(m,S):new FormData(m),Wd(a,{pending:!0,data:U,method:m.method,action:g},g,U))},currentTarget:m}]})}}for(var Im=0;Im<qs.length;Im++){var Cm=qs[Im],Qw=Cm.toLowerCase(),Kw=Cm[0].toUpperCase()+Cm.slice(1);pr(Qw,"on"+Kw)}pr(lh,"onAnimationEnd"),pr(mr,"onAnimationIteration"),pr(Na,"onAnimationStart"),pr("dblclick","onDoubleClick"),pr("focusin","onFocus"),pr("focusout","onBlur"),pr(bd,"onTransitionRun"),pr(El,"onTransitionStart"),pr(wd,"onTransitionCancel"),pr(Iu,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hi("onBeforeInput",["compositionend","keypress","textInput","paste"]),hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ju));function ev(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var c=e[a],m=c.event;c=c.listeners;t:{var g=void 0;if(i)for(var S=c.length-1;0<=S;S--){var I=c[S],U=I.instance,$=I.currentTarget;if(I=I.listener,U!==g&&m.isPropagationStopped())break t;g=I,m.currentTarget=$;try{g(m)}catch(dt){Mh(dt)}m.currentTarget=null,g=U}else for(S=0;S<c.length;S++){if(I=c[S],U=I.instance,$=I.currentTarget,I=I.listener,U!==g&&m.isPropagationStopped())break t;g=I,m.currentTarget=$;try{g(m)}catch(dt){Mh(dt)}m.currentTarget=null,g=U}}}}function xe(e,i){var a=i[Fn];a===void 0&&(a=i[Fn]=new Set);var c=e+"__bubble";a.has(c)||(nv(i,e,2,!1),a.add(c))}function Pm(e,i,a){var c=0;i&&(c|=4),nv(a,e,c,i)}var Gh="_reactListening"+Math.random().toString(36).slice(2);function Mm(e){if(!e[Gh]){e[Gh]=!0,An.forEach(function(a){a!=="selectionchange"&&(Xw.has(a)||Pm(a,!1,e),Pm(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Gh]||(i[Gh]=!0,Pm("selectionchange",!1,i))}}function nv(e,i,a,c){switch(xv(i)){case 2:var m=S1;break;case 8:m=A1;break;default:m=Gm}a=m.bind(null,i,a,e),m=void 0,!Si||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),c?m!==void 0?e.addEventListener(i,a,{capture:!0,passive:m}):e.addEventListener(i,a,!0):m!==void 0?e.addEventListener(i,a,{passive:m}):e.addEventListener(i,a,!1)}function Om(e,i,a,c,m){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)t:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var I=c.stateNode.containerInfo;if(I===m)break;if(S===4)for(S=c.return;S!==null;){var U=S.tag;if((U===3||U===4)&&S.stateNode.containerInfo===m)return;S=S.return}for(;I!==null;){if(S=ui(I),S===null)return;if(U=S.tag,U===5||U===6||U===26||U===27){c=g=S;continue t}I=I.parentNode}}c=c.return}ki(function(){var $=g,dt=di(a),pt=[];t:{var tt=uh.get(e);if(tt!==void 0){var nt=zs,ae=e;switch(e){case"keypress":if(Qe(a)===0)break t;case"keydown":case"keyup":nt=wo;break;case"focusin":ae="focus",nt=yo;break;case"focusout":ae="blur",nt=yo;break;case"beforeblur":case"afterblur":nt=yo;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=ei;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=bu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=dl;break;case lh:case mr:case Na:nt=To;break;case Iu:nt=ml;break;case"scroll":case"scrollend":nt=hl;break;case"wheel":nt=Bs;break;case"copy":case"cut":case"paste":nt=ds;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=So;break;case"toggle":case"beforetoggle":nt=Or}var ee=(i&4)!==0,$e=!ee&&(e==="scroll"||e==="scrollend"),Z=ee?tt!==null?tt+"Capture":null:tt;ee=[];for(var F=$,X;F!==null;){var mt=F;if(X=mt.stateNode,mt=mt.tag,mt!==5&&mt!==26&&mt!==27||X===null||Z===null||(mt=Ne(F,Z),mt!=null&&ee.push(tc(F,mt,X))),$e)break;F=F.return}0<ee.length&&(tt=new nt(tt,ae,null,a,dt),pt.push({event:tt,listeners:ee}))}}if((i&7)===0){t:{if(tt=e==="mouseover"||e==="pointerover",nt=e==="mouseout"||e==="pointerout",tt&&a!==ur&&(ae=a.relatedTarget||a.fromElement)&&(ui(ae)||ae[bi]))break t;if((nt||tt)&&(tt=dt.window===dt?dt:(tt=dt.ownerDocument)?tt.defaultView||tt.parentWindow:window,nt?(ae=a.relatedTarget||a.toElement,nt=$,ae=ae?ui(ae):null,ae!==null&&($e=h(ae),ee=ae.tag,ae!==$e||ee!==5&&ee!==27&&ee!==6)&&(ae=null)):(nt=null,ae=$),nt!==ae)){if(ee=ei,mt="onMouseLeave",Z="onMouseEnter",F="mouse",(e==="pointerout"||e==="pointerover")&&(ee=So,mt="onPointerLeave",Z="onPointerEnter",F="pointer"),$e=nt==null?tt:be(nt),X=ae==null?tt:be(ae),tt=new ee(mt,F+"leave",nt,a,dt),tt.target=$e,tt.relatedTarget=X,mt=null,ui(dt)===$&&(ee=new ee(Z,F+"enter",ae,a,dt),ee.target=X,ee.relatedTarget=$e,mt=ee),$e=mt,nt&&ae)e:{for(ee=nt,Z=ae,F=0,X=ee;X;X=Hl(X))F++;for(X=0,mt=Z;mt;mt=Hl(mt))X++;for(;0<F-X;)ee=Hl(ee),F--;for(;0<X-F;)Z=Hl(Z),X--;for(;F--;){if(ee===Z||Z!==null&&ee===Z.alternate)break e;ee=Hl(ee),Z=Hl(Z)}ee=null}else ee=null;nt!==null&&iv(pt,tt,nt,ee,!1),ae!==null&&$e!==null&&iv(pt,$e,ae,ee,!0)}}t:{if(tt=$?be($):window,nt=tt.nodeName&&tt.nodeName.toLowerCase(),nt==="select"||nt==="input"&&tt.type==="file")var jt=xo;else if(un(tt))if(Su)jt=Ed;else{jt=Td;var Se=xu}else nt=tt.nodeName,!nt||nt.toLowerCase()!=="input"||tt.type!=="checkbox"&&tt.type!=="radio"?$&&Vs($.elementType)&&(jt=xo):jt=$r;if(jt&&(jt=jt(e,$))){Kr(pt,jt,a,dt);break t}Se&&Se(e,tt,$),e==="focusout"&&$&&tt.type==="number"&&$.memoizedProps.value!=null&&ar(tt,"number",tt.value)}switch(Se=$?be($):window,e){case"focusin":(un(Se)||Se.contentEditable==="true")&&(dr=Se,Co=$,Hs=null);break;case"focusout":Hs=Co=dr=null;break;case"mousedown":vl=!0;break;case"contextmenu":case"mouseup":case"dragend":vl=!1,oh(pt,a,dt);break;case"selectionchange":if(yl)break;case"keydown":case"keyup":oh(pt,a,dt)}var Gt;if(Ri)t:{switch(e){case"compositionstart":var ne="onCompositionStart";break t;case"compositionend":ne="onCompositionEnd";break t;case"compositionupdate":ne="onCompositionUpdate";break t}ne=void 0}else Re?at(e,a)&&(ne="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ne="onCompositionStart");ne&&(w&&a.locale!=="ko"&&(Re||ne!=="onCompositionStart"?ne==="onCompositionEnd"&&Re&&(Gt=Zr()):(Xi=dt,Ai="value"in Xi?Xi.value:Xi.textContent,Re=!0)),Se=Zh($,ne),0<Se.length&&(ne=new xi(ne,e,null,a,dt),pt.push({event:ne,listeners:Se}),Gt?ne.data=Gt:(Gt=Ct(a),Gt!==null&&(ne.data=Gt)))),(Gt=T?xn(e,a):Ie(e,a))&&(ne=Zh($,"onBeforeInput"),0<ne.length&&(Se=new xi("onBeforeInput","beforeinput",null,a,dt),pt.push({event:Se,listeners:ne}),Se.data=Gt)),Yw(pt,e,$,a,dt)}ev(pt,i)})}function tc(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Zh(e,i){for(var a=i+"Capture",c=[];e!==null;){var m=e,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=Ne(e,a),m!=null&&c.unshift(tc(e,m,g)),m=Ne(e,i),m!=null&&c.push(tc(e,m,g))),e.tag===3)return c;e=e.return}return[]}function Hl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function iv(e,i,a,c,m){for(var g=i._reactName,S=[];a!==null&&a!==c;){var I=a,U=I.alternate,$=I.stateNode;if(I=I.tag,U!==null&&U===c)break;I!==5&&I!==26&&I!==27||$===null||(U=$,m?($=Ne(a,g),$!=null&&S.unshift(tc(a,$,U))):m||($=Ne(a,g),$!=null&&S.push(tc(a,$,U)))),a=a.return}S.length!==0&&e.push({event:i,listeners:S})}var $w=/\r\n?/g,Jw=/\u0000|\uFFFD/g;function rv(e){return(typeof e=="string"?e:""+e).replace($w,`
`).replace(Jw,"")}function sv(e,i){return i=rv(i),rv(e)===i}function Wh(){}function Xe(e,i,a,c,m,g){switch(a){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Jn(e,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Jn(e,""+c);break;case"className":xr(e,"class",c);break;case"tabIndex":xr(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":xr(e,a,c);break;case"style":Fr(e,c,g);break;case"data":if(i!=="object"){xr(e,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=fs(""+c),e.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(i!=="input"&&Xe(e,i,"name",m.name,m,null),Xe(e,i,"formEncType",m.formEncType,m,null),Xe(e,i,"formMethod",m.formMethod,m,null),Xe(e,i,"formTarget",m.formTarget,m,null)):(Xe(e,i,"encType",m.encType,m,null),Xe(e,i,"method",m.method,m,null),Xe(e,i,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=fs(""+c),e.setAttribute(a,c);break;case"onClick":c!=null&&(e.onclick=Wh);break;case"onScroll":c!=null&&xe("scroll",e);break;case"onScrollEnd":c!=null&&xe("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(m.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}a=fs(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""+c):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":c===!0?e.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,c):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(a,c):e.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(a):e.setAttribute(a,c);break;case"popover":xe("beforetoggle",e),xe("toggle",e),ls(e,"popover",c);break;case"xlinkActuate":Gn(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Gn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Gn(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Gn(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Gn(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Gn(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Gn(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Gn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Gn(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ls(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Sa.get(a)||a,ls(e,a,c))}}function Dm(e,i,a,c,m,g){switch(a){case"style":Fr(e,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(m.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"children":typeof c=="string"?Jn(e,c):(typeof c=="number"||typeof c=="bigint")&&Jn(e,""+c);break;case"onScroll":c!=null&&xe("scroll",e);break;case"onScrollEnd":c!=null&&xe("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Wh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qi.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(m=a.endsWith("Capture"),i=a.slice(2,m?a.length-7:void 0),g=e[on]||null,g=g!=null?g[a]:null,typeof g=="function"&&e.removeEventListener(i,g,m),typeof c=="function")){typeof g!="function"&&g!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,c,m);break t}a in e?e[a]=c:c===!0?e.setAttribute(a,""):ls(e,a,c)}}}function gi(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xe("error",e),xe("load",e);var c=!1,m=!1,g;for(g in a)if(a.hasOwnProperty(g)){var S=a[g];if(S!=null)switch(g){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:Xe(e,i,g,S,a,null)}}m&&Xe(e,i,"srcSet",a.srcSet,a,null),c&&Xe(e,i,"src",a.src,a,null);return;case"input":xe("invalid",e);var I=g=S=m=null,U=null,$=null;for(c in a)if(a.hasOwnProperty(c)){var dt=a[c];if(dt!=null)switch(c){case"name":m=dt;break;case"type":S=dt;break;case"checked":U=dt;break;case"defaultChecked":$=dt;break;case"value":g=dt;break;case"defaultValue":I=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(o(137,i));break;default:Xe(e,i,c,dt,a,null)}}ks(e,g,I,U,$,S,m,!1),hs(e);return;case"select":xe("invalid",e),c=S=g=null;for(m in a)if(a.hasOwnProperty(m)&&(I=a[m],I!=null))switch(m){case"value":g=I;break;case"defaultValue":S=I;break;case"multiple":c=I;default:Xe(e,i,m,I,a,null)}i=g,a=S,e.multiple=!!c,i!=null?fi(e,!!c,i,!1):a!=null&&fi(e,!!c,a,!0);return;case"textarea":xe("invalid",e),g=m=c=null;for(S in a)if(a.hasOwnProperty(S)&&(I=a[S],I!=null))switch(S){case"value":c=I;break;case"defaultValue":m=I;break;case"children":g=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(o(91));break;default:Xe(e,i,S,I,a,null)}Li(e,c,m,g),hs(e);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(c=a[U],c!=null))switch(U){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Xe(e,i,U,c,a,null)}return;case"dialog":xe("beforetoggle",e),xe("toggle",e),xe("cancel",e),xe("close",e);break;case"iframe":case"object":xe("load",e);break;case"video":case"audio":for(c=0;c<Ju.length;c++)xe(Ju[c],e);break;case"image":xe("error",e),xe("load",e);break;case"details":xe("toggle",e);break;case"embed":case"source":case"link":xe("error",e),xe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(c=a[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:Xe(e,i,$,c,a,null)}return;default:if(Vs(i)){for(dt in a)a.hasOwnProperty(dt)&&(c=a[dt],c!==void 0&&Dm(e,i,dt,c,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(c=a[I],c!=null&&Xe(e,i,I,c,a,null))}function t1(e,i,a,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,S=null,I=null,U=null,$=null,dt=null;for(nt in a){var pt=a[nt];if(a.hasOwnProperty(nt)&&pt!=null)switch(nt){case"checked":break;case"value":break;case"defaultValue":U=pt;default:c.hasOwnProperty(nt)||Xe(e,i,nt,null,c,pt)}}for(var tt in c){var nt=c[tt];if(pt=a[tt],c.hasOwnProperty(tt)&&(nt!=null||pt!=null))switch(tt){case"type":g=nt;break;case"name":m=nt;break;case"checked":$=nt;break;case"defaultChecked":dt=nt;break;case"value":S=nt;break;case"defaultValue":I=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(o(137,i));break;default:nt!==pt&&Xe(e,i,tt,nt,c,pt)}}ln(e,S,I,U,$,dt,g,m);return;case"select":nt=S=I=tt=null;for(g in a)if(U=a[g],a.hasOwnProperty(g)&&U!=null)switch(g){case"value":break;case"multiple":nt=U;default:c.hasOwnProperty(g)||Xe(e,i,g,null,c,U)}for(m in c)if(g=c[m],U=a[m],c.hasOwnProperty(m)&&(g!=null||U!=null))switch(m){case"value":tt=g;break;case"defaultValue":I=g;break;case"multiple":S=g;default:g!==U&&Xe(e,i,m,g,c,U)}i=I,a=S,c=nt,tt!=null?fi(e,!!a,tt,!1):!!c!=!!a&&(i!=null?fi(e,!!a,i,!0):fi(e,!!a,a?[]:"",!1));return;case"textarea":nt=tt=null;for(I in a)if(m=a[I],a.hasOwnProperty(I)&&m!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Xe(e,i,I,null,c,m)}for(S in c)if(m=c[S],g=a[S],c.hasOwnProperty(S)&&(m!=null||g!=null))switch(S){case"value":tt=m;break;case"defaultValue":nt=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(o(91));break;default:m!==g&&Xe(e,i,S,m,c,g)}ie(e,tt,nt);return;case"option":for(var ae in a)if(tt=a[ae],a.hasOwnProperty(ae)&&tt!=null&&!c.hasOwnProperty(ae))switch(ae){case"selected":e.selected=!1;break;default:Xe(e,i,ae,null,c,tt)}for(U in c)if(tt=c[U],nt=a[U],c.hasOwnProperty(U)&&tt!==nt&&(tt!=null||nt!=null))switch(U){case"selected":e.selected=tt&&typeof tt!="function"&&typeof tt!="symbol";break;default:Xe(e,i,U,tt,c,nt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ee in a)tt=a[ee],a.hasOwnProperty(ee)&&tt!=null&&!c.hasOwnProperty(ee)&&Xe(e,i,ee,null,c,tt);for($ in c)if(tt=c[$],nt=a[$],c.hasOwnProperty($)&&tt!==nt&&(tt!=null||nt!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(o(137,i));break;default:Xe(e,i,$,tt,c,nt)}return;default:if(Vs(i)){for(var $e in a)tt=a[$e],a.hasOwnProperty($e)&&tt!==void 0&&!c.hasOwnProperty($e)&&Dm(e,i,$e,void 0,c,tt);for(dt in c)tt=c[dt],nt=a[dt],!c.hasOwnProperty(dt)||tt===nt||tt===void 0&&nt===void 0||Dm(e,i,dt,tt,c,nt);return}}for(var Z in a)tt=a[Z],a.hasOwnProperty(Z)&&tt!=null&&!c.hasOwnProperty(Z)&&Xe(e,i,Z,null,c,tt);for(pt in c)tt=c[pt],nt=a[pt],!c.hasOwnProperty(pt)||tt===nt||tt==null&&nt==null||Xe(e,i,pt,tt,c,nt)}var Nm=null,Lm=null;function Yh(e){return e.nodeType===9?e:e.ownerDocument}function ov(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function av(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function km(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Vm=null;function e1(){var e=window.event;return e&&e.type==="popstate"?e===Vm?!1:(Vm=e,!0):(Vm=null,!1)}var lv=typeof setTimeout=="function"?setTimeout:void 0,n1=typeof clearTimeout=="function"?clearTimeout:void 0,uv=typeof Promise=="function"?Promise:void 0,i1=typeof queueMicrotask=="function"?queueMicrotask:typeof uv<"u"?function(e){return uv.resolve(null).then(e).catch(r1)}:lv;function r1(e){setTimeout(function(){throw e})}function Ko(e){return e==="head"}function cv(e,i){var a=i,c=0,m=0;do{var g=a.nextSibling;if(e.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"){if(0<c&&8>c){a=c;var S=e.ownerDocument;if(a&1&&ec(S.documentElement),a&2&&ec(S.body),a&4)for(a=S.head,ec(a),S=a.firstChild;S;){var I=S.nextSibling,U=S.nodeName;S[Ar]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&S.rel.toLowerCase()==="stylesheet"||a.removeChild(S),S=I}}if(m===0){e.removeChild(g),uc(i);return}m--}else a==="$"||a==="$?"||a==="$!"?m++:c=a.charCodeAt(0)-48;else c=0;a=g}while(a);uc(i)}function zm(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":zm(a),Yi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function s1(e,i,a,c){for(;e.nodeType===1;){var m=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[Ar])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==m.rel||e.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||e.getAttribute("title")!==(m.title==null?null:m.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(m.src==null?null:m.src)||e.getAttribute("type")!==(m.type==null?null:m.type)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=ns(e.nextSibling),e===null)break}return null}function o1(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ns(e.nextSibling),e===null))return null;return e}function Um(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function a1(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var c=function(){i(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function ns(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var jm=null;function hv(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function fv(e,i,a){switch(i=Yh(a),e){case"html":if(e=i.documentElement,!e)throw Error(o(452));return e;case"head":if(e=i.head,!e)throw Error(o(453));return e;case"body":if(e=i.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function ec(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Yi(e)}var jr=new Map,dv=new Set;function Qh(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var eo=At.d;At.d={f:l1,r:u1,D:c1,C:h1,L:f1,m:d1,X:p1,S:m1,M:g1};function l1(){var e=eo.f(),i=jh();return e||i}function u1(e){var i=ci(e);i!==null&&i.tag===5&&i.type==="form"?D_(i):eo.r(e)}var ql=typeof document>"u"?null:document;function mv(e,i,a){var c=ql;if(c&&typeof i=="string"&&i){var m=dn(i);m='link[rel="'+e+'"][href="'+m+'"]',typeof a=="string"&&(m+='[crossorigin="'+a+'"]'),dv.has(m)||(dv.add(m),e={rel:e,crossOrigin:a,href:i},c.querySelector(m)===null&&(i=c.createElement("link"),gi(i,"link",e),an(i),c.head.appendChild(i)))}}function c1(e){eo.D(e),mv("dns-prefetch",e,null)}function h1(e,i){eo.C(e,i),mv("preconnect",e,i)}function f1(e,i,a){eo.L(e,i,a);var c=ql;if(c&&e&&i){var m='link[rel="preload"][as="'+dn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(m+='[imagesrcset="'+dn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(m+='[imagesizes="'+dn(a.imageSizes)+'"]')):m+='[href="'+dn(e)+'"]';var g=m;switch(i){case"style":g=Fl(e);break;case"script":g=Gl(e)}jr.has(g)||(e=x({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),jr.set(g,e),c.querySelector(m)!==null||i==="style"&&c.querySelector(nc(g))||i==="script"&&c.querySelector(ic(g))||(i=c.createElement("link"),gi(i,"link",e),an(i),c.head.appendChild(i)))}}function d1(e,i){eo.m(e,i);var a=ql;if(a&&e){var c=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+dn(c)+'"][href="'+dn(e)+'"]',g=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Gl(e)}if(!jr.has(g)&&(e=x({rel:"modulepreload",href:e},i),jr.set(g,e),a.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ic(g)))return}c=a.createElement("link"),gi(c,"link",e),an(c),a.head.appendChild(c)}}}function m1(e,i,a){eo.S(e,i,a);var c=ql;if(c&&e){var m=Sn(c).hoistableStyles,g=Fl(e);i=i||"default";var S=m.get(g);if(!S){var I={loading:0,preload:null};if(S=c.querySelector(nc(g)))I.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":i},a),(a=jr.get(g))&&Bm(e,a);var U=S=c.createElement("link");an(U),gi(U,"link",e),U._p=new Promise(function($,dt){U.onload=$,U.onerror=dt}),U.addEventListener("load",function(){I.loading|=1}),U.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Kh(S,i,c)}S={type:"stylesheet",instance:S,count:1,state:I},m.set(g,S)}}}function p1(e,i){eo.X(e,i);var a=ql;if(a&&e){var c=Sn(a).hoistableScripts,m=Gl(e),g=c.get(m);g||(g=a.querySelector(ic(m)),g||(e=x({src:e,async:!0},i),(i=jr.get(m))&&Hm(e,i),g=a.createElement("script"),an(g),gi(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function g1(e,i){eo.M(e,i);var a=ql;if(a&&e){var c=Sn(a).hoistableScripts,m=Gl(e),g=c.get(m);g||(g=a.querySelector(ic(m)),g||(e=x({src:e,async:!0,type:"module"},i),(i=jr.get(m))&&Hm(e,i),g=a.createElement("script"),an(g),gi(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function pv(e,i,a,c){var m=(m=St.current)?Qh(m):null;if(!m)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Fl(a.href),a=Sn(m).hoistableStyles,c=a.get(i),c||(c={type:"style",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Fl(a.href);var g=Sn(m).hoistableStyles,S=g.get(e);if(S||(m=m.ownerDocument||m,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,S),(g=m.querySelector(nc(e)))&&!g._p&&(S.instance=g,S.state.loading=5),jr.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},jr.set(e,a),g||_1(m,e,a,S.state))),i&&c===null)throw Error(o(528,""));return S}if(i&&c!==null)throw Error(o(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Gl(a),a=Sn(m).hoistableScripts,c=a.get(i),c||(c={type:"script",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Fl(e){return'href="'+dn(e)+'"'}function nc(e){return'link[rel="stylesheet"]['+e+"]"}function gv(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function _1(e,i,a,c){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=e.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),gi(i,"link",a),an(i),e.head.appendChild(i))}function Gl(e){return'[src="'+dn(e)+'"]'}function ic(e){return"script[async]"+e}function _v(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var c=e.querySelector('style[data-href~="'+dn(a.href)+'"]');if(c)return i.instance=c,an(c),c;var m=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),an(c),gi(c,"style",m),Kh(c,a.precedence,e),i.instance=c;case"stylesheet":m=Fl(a.href);var g=e.querySelector(nc(m));if(g)return i.state.loading|=4,i.instance=g,an(g),g;c=gv(a),(m=jr.get(m))&&Bm(c,m),g=(e.ownerDocument||e).createElement("link"),an(g);var S=g;return S._p=new Promise(function(I,U){S.onload=I,S.onerror=U}),gi(g,"link",c),i.state.loading|=4,Kh(g,a.precedence,e),i.instance=g;case"script":return g=Gl(a.src),(m=e.querySelector(ic(g)))?(i.instance=m,an(m),m):(c=a,(m=jr.get(g))&&(c=x({},a),Hm(c,m)),e=e.ownerDocument||e,m=e.createElement("script"),an(m),gi(m,"link",c),e.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(o(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Kh(c,a.precedence,e));return i.instance}function Kh(e,i,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,g=m,S=0;S<c.length;S++){var I=c[S];if(I.dataset.precedence===i)g=I;else if(g!==m)break}g?g.parentNode.insertBefore(e,g.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Bm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Hm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Xh=null;function yv(e,i,a){if(Xh===null){var c=new Map,m=Xh=new Map;m.set(a,c)}else m=Xh,c=m.get(a),c||(c=new Map,m.set(a,c));if(c.has(e))return c;for(c.set(e,null),a=a.getElementsByTagName(e),m=0;m<a.length;m++){var g=a[m];if(!(g[Ar]||g[fn]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(i)||"";S=e+S;var I=c.get(S);I?I.push(g):c.set(S,[g])}}return c}function vv(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function y1(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Tv(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var rc=null;function v1(){}function T1(e,i,a){if(rc===null)throw Error(o(475));var c=rc;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var m=Fl(a.href),g=e.querySelector(nc(m));if(g){e=g._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(c.count++,c=$h.bind(c),e.then(c,c)),i.state.loading|=4,i.instance=g,an(g);return}g=e.ownerDocument||e,a=gv(a),(m=jr.get(m))&&Bm(a,m),g=g.createElement("link"),an(g);var S=g;S._p=new Promise(function(I,U){S.onload=I,S.onerror=U}),gi(g,"link",a),i.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(c.count++,i=$h.bind(c),e.addEventListener("load",i),e.addEventListener("error",i))}}function E1(){if(rc===null)throw Error(o(475));var e=rc;return e.stylesheets&&e.count===0&&qm(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&qm(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function $h(){if(this.count--,this.count===0){if(this.stylesheets)qm(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Jh=null;function qm(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Jh=new Map,i.forEach(b1,e),Jh=null,$h.call(e))}function b1(e,i){if(!(i.state.loading&4)){var a=Jh.get(e);if(a)var c=a.get(null);else{a=new Map,Jh.set(e,a);for(var m=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var S=m[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),c=S)}c&&a.set(null,c)}m=i.instance,S=m.getAttribute("data-precedence"),g=a.get(S)||c,g===c&&a.set(null,m),a.set(S,m),this.count++,c=$h.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),g?g.parentNode.insertBefore(m,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(m,e.firstChild)),i.state.loading|=4}}var sc={$$typeof:yt,Provider:null,Consumer:null,_currentValue:ot,_currentValue2:ot,_threadCount:0};function w1(e,i,a,c,m,g,S,I){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qt(0),this.hiddenUpdates=Qt(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function Ev(e,i,a,c,m,g,S,I,U,$,dt,pt){return e=new w1(e,i,a,S,I,U,$,pt),i=1,g===!0&&(i|=24),g=Bi(3,null,null,i),e.current=g,g.stateNode=e,i=Sd(),i.refCount++,e.pooledCache=i,i.refCount++,g.memoizedState={element:c,isDehydrated:a,cache:i},Id(g),e}function bv(e){return e?(e=Zs,e):Zs}function wv(e,i,a,c,m,g){m=bv(m),c.context===null?c.context=m:c.pendingContext=m,c=Vo(i),c.payload={element:a},g=g===void 0?null:g,g!==null&&(c.callback=g),a=zo(e,c,i),a!==null&&(Er(a,e,i),Lu(a,e,i))}function Sv(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Fm(e,i){Sv(e,i),(e=e.alternate)&&Sv(e,i)}function Av(e){if(e.tag===13){var i=Oo(e,67108864);i!==null&&Er(i,e,67108864),Fm(e,67108864)}}var tf=!0;function S1(e,i,a,c){var m=J.T;J.T=null;var g=At.p;try{At.p=2,Gm(e,i,a,c)}finally{At.p=g,J.T=m}}function A1(e,i,a,c){var m=J.T;J.T=null;var g=At.p;try{At.p=8,Gm(e,i,a,c)}finally{At.p=g,J.T=m}}function Gm(e,i,a,c){if(tf){var m=Zm(c);if(m===null)Om(e,i,c,ef,a),Rv(e,c);else if(R1(m,e,i,a,c))c.stopPropagation();else if(Rv(e,c),i&4&&-1<x1.indexOf(e)){for(;m!==null;){var g=ci(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=Ot(g.pendingLanes);if(S!==0){var I=g;for(I.pendingLanes|=2,I.entangledLanes|=2;S;){var U=1<<31-K(S);I.entanglements[1]|=U,S&=~U}bs(g),(We&6)===0&&(zh=rn()+500,$u(0))}}break;case 13:I=Oo(g,2),I!==null&&Er(I,g,2),jh(),Fm(g,2)}if(g=Zm(c),g===null&&Om(e,i,c,ef,a),g===m)break;m=g}m!==null&&c.stopPropagation()}else Om(e,i,c,null,a)}}function Zm(e){return e=di(e),Wm(e)}var ef=null;function Wm(e){if(ef=null,e=ui(e),e!==null){var i=h(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=p(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return ef=e,null}function xv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nn()){case Kn:return 2;case Xn:return 8;case sn:case Ei:return 32;case De:return 268435456;default:return 32}default:return 32}}var Ym=!1,Xo=null,$o=null,Jo=null,oc=new Map,ac=new Map,ta=[],x1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rv(e,i){switch(e){case"focusin":case"focusout":Xo=null;break;case"dragenter":case"dragleave":$o=null;break;case"mouseover":case"mouseout":Jo=null;break;case"pointerover":case"pointerout":oc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ac.delete(i.pointerId)}}function lc(e,i,a,c,m,g){return e===null||e.nativeEvent!==g?(e={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[m]},i!==null&&(i=ci(i),i!==null&&Av(i)),e):(e.eventSystemFlags|=c,i=e.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),e)}function R1(e,i,a,c,m){switch(i){case"focusin":return Xo=lc(Xo,e,i,a,c,m),!0;case"dragenter":return $o=lc($o,e,i,a,c,m),!0;case"mouseover":return Jo=lc(Jo,e,i,a,c,m),!0;case"pointerover":var g=m.pointerId;return oc.set(g,lc(oc.get(g)||null,e,i,a,c,m)),!0;case"gotpointercapture":return g=m.pointerId,ac.set(g,lc(ac.get(g)||null,e,i,a,c,m)),!0}return!1}function Iv(e){var i=ui(e.target);if(i!==null){var a=h(i);if(a!==null){if(i=a.tag,i===13){if(i=p(a),i!==null){e.blockedOn=i,or(e.priority,function(){if(a.tag===13){var c=Tr();c=qn(c);var m=Oo(a,c);m!==null&&Er(m,a,c),Fm(a,c)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nf(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Zm(e.nativeEvent);if(a===null){a=e.nativeEvent;var c=new a.constructor(a.type,a);ur=c,a.target.dispatchEvent(c),ur=null}else return i=ci(a),i!==null&&Av(i),e.blockedOn=a,!1;i.shift()}return!0}function Cv(e,i,a){nf(e)&&a.delete(i)}function I1(){Ym=!1,Xo!==null&&nf(Xo)&&(Xo=null),$o!==null&&nf($o)&&($o=null),Jo!==null&&nf(Jo)&&(Jo=null),oc.forEach(Cv),ac.forEach(Cv)}function rf(e,i){e.blockedOn===i&&(e.blockedOn=null,Ym||(Ym=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,I1)))}var sf=null;function Pv(e){sf!==e&&(sf=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){sf===e&&(sf=null);for(var i=0;i<e.length;i+=3){var a=e[i],c=e[i+1],m=e[i+2];if(typeof c!="function"){if(Wm(c||a)===null)continue;break}var g=ci(a);g!==null&&(e.splice(i,3),i-=3,Wd(g,{pending:!0,data:m,method:a.method,action:c},c,m))}}))}function uc(e){function i(U){return rf(U,e)}Xo!==null&&rf(Xo,e),$o!==null&&rf($o,e),Jo!==null&&rf(Jo,e),oc.forEach(i),ac.forEach(i);for(var a=0;a<ta.length;a++){var c=ta[a];c.blockedOn===e&&(c.blockedOn=null)}for(;0<ta.length&&(a=ta[0],a.blockedOn===null);)Iv(a),a.blockedOn===null&&ta.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var m=a[c],g=a[c+1],S=m[on]||null;if(typeof g=="function")S||Pv(a);else if(S){var I=null;if(g&&g.hasAttribute("formAction")){if(m=g,S=g[on]||null)I=S.formAction;else if(Wm(m)!==null)continue}else I=S.action;typeof I=="function"?a[c+1]=I:(a.splice(c,3),c-=3),Pv(a)}}}function Qm(e){this._internalRoot=e}of.prototype.render=Qm.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(o(409));var a=i.current,c=Tr();wv(a,c,e,i,null,null)},of.prototype.unmount=Qm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;wv(e.current,2,null,e,null,null),jh(),i[bi]=null}};function of(e){this._internalRoot=e}of.prototype.unstable_scheduleHydration=function(e){if(e){var i=Ni();e={blockedOn:null,target:e,priority:i};for(var a=0;a<ta.length&&i!==0&&i<ta[a].priority;a++);ta.splice(a,0,e),a===0&&Iv(e)}};var Mv=t.version;if(Mv!=="19.1.1")throw Error(o(527,Mv,"19.1.1"));At.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=y(i),e=e!==null?E(e):null,e=e===null?null:e.stateNode,e};var C1={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!af.isDisabled&&af.supportsFiber)try{le=af.inject(C1),ve=af}catch{}}return hc.createRoot=function(e,i){if(!l(e))throw Error(o(299));var a=!1,c="",m=W_,g=Y_,S=Q_,I=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(I=i.unstable_transitionCallbacks)),i=Ev(e,1,!1,null,null,a,c,m,g,S,I,null),e[bi]=i.current,Mm(e),new Qm(i)},hc.hydrateRoot=function(e,i,a){if(!l(e))throw Error(o(299));var c=!1,m="",g=W_,S=Y_,I=Q_,U=null,$=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(U=a.unstable_transitionCallbacks),a.formState!==void 0&&($=a.formState)),i=Ev(e,1,!0,i,a??null,c,m,g,S,I,U,$),i.context=bv(null),a=i.current,c=Tr(),c=qn(c),m=Vo(c),m.callback=null,zo(a,m,c),a=c,i.current.lanes=a,$t(i,a),bs(i),e[bi]=i.current,Mm(e),new of(i)},hc.version="19.1.1",hc}var Bv;function z1(){if(Bv)return $m.exports;Bv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),$m.exports=V1(),$m.exports}var U1=z1();function IT(r,t){const n=G.useRef(t);G.useEffect(function(){t!==n.current&&r.attributionControl!=null&&(n.current!=null&&r.attributionControl.removeAttribution(n.current),t!=null&&r.attributionControl.addAttribution(t)),n.current=t},[r,t])}var j1=RT();const B1=1;function H1(r){return Object.freeze({__version:B1,map:r})}function CT(r,t){return Object.freeze({...r,...t})}const Bp=G.createContext(null);function Gf(){const r=G.use(Bp);if(r==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return r}function PT(r){function t(n,o){const{instance:l,context:h}=r(n).current;G.useImperativeHandle(o,()=>l);const{children:p}=n;return p==null?null:dp.createElement(Bp,{value:h},p)}return G.forwardRef(t)}function q1(r){function t(n,o){const[l,h]=G.useState(!1),{instance:p}=r(n,h).current;G.useImperativeHandle(o,()=>p),G.useEffect(function(){l&&p.update()},[p,l,n.children]);const v=p._contentNode;return v?j1.createPortal(n.children,v):null}return G.forwardRef(t)}function F1(r){function t(n,o){const{instance:l}=r(n).current;return G.useImperativeHandle(o,()=>l),null}return G.forwardRef(t)}function Hp(r,t){const n=G.useRef(void 0);G.useEffect(function(){return t!=null&&r.instance.on(t),n.current=t,function(){n.current!=null&&r.instance.off(n.current),n.current=null}},[r,t])}function Zf(r,t){const n=r.pane??t.pane;return n?{...r,pane:n}:r}function G1(r,t){return function(o,l){const h=Gf(),p=r(Zf(o,h),h);return IT(h.map,o.attribution),Hp(p.current,o.eventHandlers),t(p.current,h,o,l),p}}var fc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Z1=fc.exports,Hv;function W1(){return Hv||(Hv=1,(function(r,t){(function(n,o){o(t)})(Z1,(function(n){var o="1.9.4";function l(s){var u,d,_,b;for(d=1,_=arguments.length;d<_;d++){b=arguments[d];for(u in b)s[u]=b[u]}return s}var h=Object.create||(function(){function s(){}return function(u){return s.prototype=u,new s}})();function p(s,u){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var _=d.call(arguments,2);return function(){return s.apply(u,_.length?_.concat(d.call(arguments)):arguments)}}var v=0;function y(s){return"_leaflet_id"in s||(s._leaflet_id=++v),s._leaflet_id}function E(s,u,d){var _,b,R,z;return z=function(){_=!1,b&&(R.apply(d,b),b=!1)},R=function(){_?b=arguments:(s.apply(d,arguments),setTimeout(z,u),_=!0)},R}function x(s,u,d){var _=u[1],b=u[0],R=_-b;return s===_&&d?s:((s-b)%R+R)%R+b}function P(){return!1}function M(s,u){if(u===!1)return s;var d=Math.pow(10,u===void 0?6:u);return Math.round(s*d)/d}function q(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function W(s){return q(s).split(/\s+/)}function et(s,u){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?h(s.options):{});for(var d in u)s.options[d]=u[d];return s.options}function lt(s,u,d){var _=[];for(var b in s)_.push(encodeURIComponent(d?b.toUpperCase():b)+"="+encodeURIComponent(s[b]));return(!u||u.indexOf("?")===-1?"?":"&")+_.join("&")}var Tt=/\{ *([\w_ -]+) *\}/g;function ht(s,u){return s.replace(Tt,function(d,_){var b=u[_];if(b===void 0)throw new Error("No value provided for variable "+d);return typeof b=="function"&&(b=b(u)),b})}var yt=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function Ht(s,u){for(var d=0;d<s.length;d++)if(s[d]===u)return d;return-1}var Pt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function zt(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var V=0;function O(s){var u=+new Date,d=Math.max(0,16-(u-V));return V=u+d,window.setTimeout(s,d)}var k=window.requestAnimationFrame||zt("RequestAnimationFrame")||O,j=window.cancelAnimationFrame||zt("CancelAnimationFrame")||zt("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function B(s,u,d){if(d&&k===O)s.call(u);else return k.call(window,p(s,u))}function H(s){s&&j.call(window,s)}var N={__proto__:null,extend:l,create:h,bind:p,get lastId(){return v},stamp:y,throttle:E,wrapNum:x,falseFn:P,formatNum:M,trim:q,splitWords:W,setOptions:et,getParamString:lt,template:ht,isArray:yt,indexOf:Ht,emptyImageUrl:Pt,requestFn:k,cancelFn:j,requestAnimFrame:B,cancelAnimFrame:H};function ge(){}ge.extend=function(s){var u=function(){et(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=u.__super__=this.prototype,_=h(d);_.constructor=u,u.prototype=_;for(var b in this)Object.prototype.hasOwnProperty.call(this,b)&&b!=="prototype"&&b!=="__super__"&&(u[b]=this[b]);return s.statics&&l(u,s.statics),s.includes&&(de(s.includes),l.apply(null,[_].concat(s.includes))),l(_,s),delete _.statics,delete _.includes,_.options&&(_.options=d.options?h(d.options):{},l(_.options,s.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var R=0,z=_._initHooks.length;R<z;R++)_._initHooks[R].call(this)}},u},ge.include=function(s){var u=this.prototype.options;return l(this.prototype,s),s.options&&(this.prototype.options=u,this.mergeOptions(s.options)),this},ge.mergeOptions=function(s){return l(this.prototype.options,s),this},ge.addInitHook=function(s){var u=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function de(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=yt(s)?s:[s];for(var u=0;u<s.length;u++)s[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var J={on:function(s,u,d){if(typeof s=="object")for(var _ in s)this._on(_,s[_],u);else{s=W(s);for(var b=0,R=s.length;b<R;b++)this._on(s[b],u,d)}return this},off:function(s,u,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var _ in s)this._off(_,s[_],u);else{s=W(s);for(var b=arguments.length===1,R=0,z=s.length;R<z;R++)b?this._off(s[R]):this._off(s[R],u,d)}return this},_on:function(s,u,d,_){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(s,u,d)===!1){d===this&&(d=void 0);var b={fn:u,ctx:d};_&&(b.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(b)}},_off:function(s,u,d){var _,b,R;if(this._events&&(_=this._events[s],!!_)){if(arguments.length===1){if(this._firingCount)for(b=0,R=_.length;b<R;b++)_[b].fn=P;delete this._events[s];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var z=this._listens(s,u,d);if(z!==!1){var Q=_[z];this._firingCount&&(Q.fn=P,this._events[s]=_=_.slice()),_.splice(z,1)}}},fire:function(s,u,d){if(!this.listens(s,d))return this;var _=l({},u,{type:s,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var b=this._events[s];if(b){this._firingCount=this._firingCount+1||1;for(var R=0,z=b.length;R<z;R++){var Q=b[R],st=Q.fn;Q.once&&this.off(s,st,Q.ctx),st.call(Q.ctx||this,_)}this._firingCount--}}return d&&this._propagateEvent(_),this},listens:function(s,u,d,_){typeof s!="string"&&console.warn('"string" type argument expected');var b=u;typeof u!="function"&&(_=!!u,b=void 0,d=void 0);var R=this._events&&this._events[s];if(R&&R.length&&this._listens(s,b,d)!==!1)return!0;if(_){for(var z in this._eventParents)if(this._eventParents[z].listens(s,u,d,_))return!0}return!1},_listens:function(s,u,d){if(!this._events)return!1;var _=this._events[s]||[];if(!u)return!!_.length;d===this&&(d=void 0);for(var b=0,R=_.length;b<R;b++)if(_[b].fn===u&&_[b].ctx===d)return b;return!1},once:function(s,u,d){if(typeof s=="object")for(var _ in s)this._on(_,s[_],u,!0);else{s=W(s);for(var b=0,R=s.length;b<R;b++)this._on(s[b],u,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[y(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[y(s)],this},_propagateEvent:function(s){for(var u in this._eventParents)this._eventParents[u].fire(s.type,l({layer:s.target,propagatedFrom:s.target},s),!0)}};J.addEventListener=J.on,J.removeEventListener=J.clearAllEventListeners=J.off,J.addOneTimeEventListener=J.once,J.fireEvent=J.fire,J.hasEventListeners=J.listens;var At=ge.extend(J);function ot(s,u,d){this.x=d?Math.round(s):s,this.y=d?Math.round(u):u}var te=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};ot.prototype={clone:function(){return new ot(this.x,this.y)},add:function(s){return this.clone()._add(D(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(D(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new ot(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new ot(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=te(this.x),this.y=te(this.y),this},distanceTo:function(s){s=D(s);var u=s.x-this.x,d=s.y-this.y;return Math.sqrt(u*u+d*d)},equals:function(s){return s=D(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=D(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+M(this.x)+", "+M(this.y)+")"}};function D(s,u,d){return s instanceof ot?s:yt(s)?new ot(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new ot(s.x,s.y):new ot(s,u,d)}function ut(s,u){if(s)for(var d=u?[s,u]:s,_=0,b=d.length;_<b;_++)this.extend(d[_])}ut.prototype={extend:function(s){var u,d;if(!s)return this;if(s instanceof ot||typeof s[0]=="number"||"x"in s)u=d=D(s);else if(s=wt(s),u=s.min,d=s.max,!u||!d)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=d.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return D((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return D(this.min.x,this.max.y)},getTopRight:function(){return D(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var u,d;return typeof s[0]=="number"||s instanceof ot?s=D(s):s=wt(s),s instanceof ut?(u=s.min,d=s.max):u=d=s,u.x>=this.min.x&&d.x<=this.max.x&&u.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=wt(s);var u=this.min,d=this.max,_=s.min,b=s.max,R=b.x>=u.x&&_.x<=d.x,z=b.y>=u.y&&_.y<=d.y;return R&&z},overlaps:function(s){s=wt(s);var u=this.min,d=this.max,_=s.min,b=s.max,R=b.x>u.x&&_.x<d.x,z=b.y>u.y&&_.y<d.y;return R&&z},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var u=this.min,d=this.max,_=Math.abs(u.x-d.x)*s,b=Math.abs(u.y-d.y)*s;return wt(D(u.x-_,u.y-b),D(d.x+_,d.y+b))},equals:function(s){return s?(s=wt(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function wt(s,u){return!s||s instanceof ut?s:new ut(s,u)}function rt(s,u){if(s)for(var d=u?[s,u]:s,_=0,b=d.length;_<b;_++)this.extend(d[_])}rt.prototype={extend:function(s){var u=this._southWest,d=this._northEast,_,b;if(s instanceof xt)_=s,b=s;else if(s instanceof rt){if(_=s._southWest,b=s._northEast,!_||!b)return this}else return s?this.extend(St(s)||Et(s)):this;return!u&&!d?(this._southWest=new xt(_.lat,_.lng),this._northEast=new xt(b.lat,b.lng)):(u.lat=Math.min(_.lat,u.lat),u.lng=Math.min(_.lng,u.lng),d.lat=Math.max(b.lat,d.lat),d.lng=Math.max(b.lng,d.lng)),this},pad:function(s){var u=this._southWest,d=this._northEast,_=Math.abs(u.lat-d.lat)*s,b=Math.abs(u.lng-d.lng)*s;return new rt(new xt(u.lat-_,u.lng-b),new xt(d.lat+_,d.lng+b))},getCenter:function(){return new xt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xt(this.getNorth(),this.getWest())},getSouthEast:function(){return new xt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof xt||"lat"in s?s=St(s):s=Et(s);var u=this._southWest,d=this._northEast,_,b;return s instanceof rt?(_=s.getSouthWest(),b=s.getNorthEast()):_=b=s,_.lat>=u.lat&&b.lat<=d.lat&&_.lng>=u.lng&&b.lng<=d.lng},intersects:function(s){s=Et(s);var u=this._southWest,d=this._northEast,_=s.getSouthWest(),b=s.getNorthEast(),R=b.lat>=u.lat&&_.lat<=d.lat,z=b.lng>=u.lng&&_.lng<=d.lng;return R&&z},overlaps:function(s){s=Et(s);var u=this._southWest,d=this._northEast,_=s.getSouthWest(),b=s.getNorthEast(),R=b.lat>u.lat&&_.lat<d.lat,z=b.lng>u.lng&&_.lng<d.lng;return R&&z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,u){return s?(s=Et(s),this._southWest.equals(s.getSouthWest(),u)&&this._northEast.equals(s.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Et(s,u){return s instanceof rt?s:new rt(s,u)}function xt(s,u,d){if(isNaN(s)||isNaN(u))throw new Error("Invalid LatLng object: ("+s+", "+u+")");this.lat=+s,this.lng=+u,d!==void 0&&(this.alt=+d)}xt.prototype={equals:function(s,u){if(!s)return!1;s=St(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(u===void 0?1e-9:u)},toString:function(s){return"LatLng("+M(this.lat,s)+", "+M(this.lng,s)+")"},distanceTo:function(s){return ce.distance(this,St(s))},wrap:function(){return ce.wrapLatLng(this)},toBounds:function(s){var u=180*s/40075017,d=u/Math.cos(Math.PI/180*this.lat);return Et([this.lat-u,this.lng-d],[this.lat+u,this.lng+d])},clone:function(){return new xt(this.lat,this.lng,this.alt)}};function St(s,u,d){return s instanceof xt?s:yt(s)&&typeof s[0]!="object"?s.length===3?new xt(s[0],s[1],s[2]):s.length===2?new xt(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new xt(s.lat,"lng"in s?s.lng:s.lon,s.alt):u===void 0?null:new xt(s,u,d)}var Ee={latLngToPoint:function(s,u){var d=this.projection.project(s),_=this.scale(u);return this.transformation._transform(d,_)},pointToLatLng:function(s,u){var d=this.scale(u),_=this.transformation.untransform(s,d);return this.projection.unproject(_)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var u=this.projection.bounds,d=this.scale(s),_=this.transformation.transform(u.min,d),b=this.transformation.transform(u.max,d);return new ut(_,b)},infinite:!1,wrapLatLng:function(s){var u=this.wrapLng?x(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?x(s.lat,this.wrapLat,!0):s.lat,_=s.alt;return new xt(d,u,_)},wrapLatLngBounds:function(s){var u=s.getCenter(),d=this.wrapLatLng(u),_=u.lat-d.lat,b=u.lng-d.lng;if(_===0&&b===0)return s;var R=s.getSouthWest(),z=s.getNorthEast(),Q=new xt(R.lat-_,R.lng-b),st=new xt(z.lat-_,z.lng-b);return new rt(Q,st)}},ce=l({},Ee,{wrapLng:[-180,180],R:6371e3,distance:function(s,u){var d=Math.PI/180,_=s.lat*d,b=u.lat*d,R=Math.sin((u.lat-s.lat)*d/2),z=Math.sin((u.lng-s.lng)*d/2),Q=R*R+Math.cos(_)*Math.cos(b)*z*z,st=2*Math.atan2(Math.sqrt(Q),Math.sqrt(1-Q));return this.R*st}}),je=6378137,Oe={R:je,MAX_LATITUDE:85.0511287798,project:function(s){var u=Math.PI/180,d=this.MAX_LATITUDE,_=Math.max(Math.min(d,s.lat),-d),b=Math.sin(_*u);return new ot(this.R*s.lng*u,this.R*Math.log((1+b)/(1-b))/2)},unproject:function(s){var u=180/Math.PI;return new xt((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*u,s.x*u/this.R)},bounds:(function(){var s=je*Math.PI;return new ut([-s,-s],[s,s])})()};function Be(s,u,d,_){if(yt(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=u,this._c=d,this._d=_}Be.prototype={transform:function(s,u){return this._transform(s.clone(),u)},_transform:function(s,u){return u=u||1,s.x=u*(this._a*s.x+this._b),s.y=u*(this._c*s.y+this._d),s},untransform:function(s,u){return u=u||1,new ot((s.x/u-this._b)/this._a,(s.y/u-this._d)/this._c)}};function oe(s,u,d,_){return new Be(s,u,d,_)}var nn=l({},ce,{code:"EPSG:3857",projection:Oe,transformation:(function(){var s=.5/(Math.PI*Oe.R);return oe(s,.5,-s,.5)})()}),wn=l({},nn,{code:"EPSG:900913"});function Hn(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Ti(s,u){var d="",_,b,R,z,Q,st;for(_=0,R=s.length;_<R;_++){for(Q=s[_],b=0,z=Q.length;b<z;b++)st=Q[b],d+=(b?"L":"M")+st.x+" "+st.y;d+=u?Bt.svg?"z":"x":""}return d||"M0 0"}var rn=document.documentElement.style,Nn="ActiveXObject"in window,Kn=Nn&&!document.addEventListener,Xn="msLaunchUri"in navigator&&!("documentMode"in document),sn=Fn("webkit"),Ei=Fn("android"),De=Fn("android 2")||Fn("android 3"),li=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Zi=Ei&&Fn("Google")&&li<537&&!("AudioNode"in window),le=!!window.opera,ve=!Xn&&Fn("chrome"),pn=Fn("gecko")&&!sn&&!le&&!Nn,K=!ve&&Fn("safari"),it=Fn("phantom"),bt="OTransition"in rn,Nt=navigator.platform.indexOf("Win")===0,kt=Nn&&"transition"in rn,Rt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!De,Ot="MozPerspective"in rn,me=!window.L_DISABLE_3D&&(kt||Rt||Ot)&&!bt&&!it,pe=typeof orientation<"u"||Fn("mobile"),ct=pe&&sn,It=pe&&Rt,_t=!window.PointerEvent&&window.MSPointerEvent,Qt=!!(window.PointerEvent||_t),$t="ontouchstart"in window||!!window.TouchEvent,Ft=!window.L_NO_TOUCH&&($t||Qt),Wt=pe&&le,Fe=pe&&pn,qn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,$n=(function(){var s=!1;try{var u=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",P,u),window.removeEventListener("testPassiveEventSupport",P,u)}catch{}return s})(),Ni=(function(){return!!document.createElement("canvas").getContext})(),or=!!(document.createElementNS&&Hn("svg").createSVGRect),Ge=!!or&&(function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),fn=!or&&(function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var u=s.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}})(),on=navigator.platform.indexOf("Mac")===0,bi=navigator.platform.indexOf("Linux")===0;function Fn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var Bt={ie:Nn,ielt9:Kn,edge:Xn,webkit:sn,android:Ei,android23:De,androidStock:Zi,opera:le,chrome:ve,gecko:pn,safari:K,phantom:it,opera12:bt,win:Nt,ie3d:kt,webkit3d:Rt,gecko3d:Ot,any3d:me,mobile:pe,mobileWebkit:ct,mobileWebkit3d:It,msPointer:_t,pointer:Qt,touch:Ft,touchNative:$t,mobileOpera:Wt,mobileGecko:Fe,retina:qn,passiveEvents:$n,canvas:Ni,svg:or,vml:fn,inlineSvg:Ge,mac:on,linux:bi},Wi=Bt.msPointer?"MSPointerDown":"pointerdown",Ds=Bt.msPointer?"MSPointerMove":"pointermove",Ar=Bt.msPointer?"MSPointerUp":"pointerup",Yi=Bt.msPointer?"MSPointerCancel":"pointercancel",ui={touchstart:Wi,touchmove:Ds,touchend:Ar,touchcancel:Yi},ci={touchstart:Ns,touchmove:Hr,touchend:Hr,touchcancel:Hr},be={},Sn=!1;function an(s,u,d){return u==="touchstart"&&as(),ci[u]?(d=ci[u].bind(this,d),s.addEventListener(ui[u],d,!1),d):(console.warn("wrong event specified:",u),P)}function An(s,u,d){if(!ui[u]){console.warn("wrong event specified:",u);return}s.removeEventListener(ui[u],d,!1)}function Qi(s){be[s.pointerId]=s}function hi(s){be[s.pointerId]&&(be[s.pointerId]=s)}function wi(s){delete be[s.pointerId]}function as(){Sn||(document.addEventListener(Wi,Qi,!0),document.addEventListener(Ds,hi,!0),document.addEventListener(Ar,wi,!0),document.addEventListener(Yi,wi,!0),Sn=!0)}function Hr(s,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var d in be)u.touches.push(be[d]);u.changedTouches=[u],s(u)}}function Ns(s,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&Qe(u),Hr(s,u)}function cl(s){var u={},d,_;for(_ in s)d=s[_],u[_]=d&&d.bind?d.bind(s):d;return s=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var ls=200;function xr(s,u){s.addEventListener("dblclick",u);var d=0,_;function b(R){if(R.detail!==1){_=R.detail;return}if(!(R.pointerType==="mouse"||R.sourceCapabilities&&!R.sourceCapabilities.firesTouchEvents)){var z=_o(R);if(!(z.some(function(st){return st instanceof HTMLLabelElement&&st.attributes.for})&&!z.some(function(st){return st instanceof HTMLInputElement||st instanceof HTMLSelectElement}))){var Q=Date.now();Q-d<=ls?(_++,_===2&&u(cl(R))):_=1,d=Q}}}return s.addEventListener("click",b),{dblclick:u,simDblclick:b}}function Gn(s,u){s.removeEventListener("dblclick",u.dblclick),s.removeEventListener("click",u.simDblclick)}var qr=ar(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),us=ar(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Rr=us==="webkitTransition"||us==="OTransition"?us+"End":"transitionend";function Ls(s){return typeof s=="string"?document.getElementById(s):s}function Ir(s,u){var d=s.style[u]||s.currentStyle&&s.currentStyle[u];if((!d||d==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(s,null);d=_?_[u]:null}return d==="auto"?null:d}function we(s,u,d){var _=document.createElement(s);return _.className=u||"",d&&d.appendChild(_),_}function He(s){var u=s.parentNode;u&&u.removeChild(s)}function Ln(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Cr(s){var u=s.parentNode;u&&u.lastChild!==s&&u.appendChild(s)}function cs(s){var u=s.parentNode;u&&u.firstChild!==s&&u.insertBefore(s,u.firstChild)}function hs(s,u){if(s.classList!==void 0)return s.classList.contains(u);var d=dn(s);return d.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(d)}function he(s,u){if(s.classList!==void 0)for(var d=W(u),_=0,b=d.length;_<b;_++)s.classList.add(d[_]);else if(!hs(s,u)){var R=dn(s);wa(s,(R?R+" ":"")+u)}}function Ze(s,u){s.classList!==void 0?s.classList.remove(u):wa(s,q((" "+dn(s)+" ").replace(" "+u+" "," ")))}function wa(s,u){s.className.baseVal===void 0?s.className=u:s.className.baseVal=u}function dn(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function ln(s,u){"opacity"in s.style?s.style.opacity=u:"filter"in s.style&&ks(s,u)}function ks(s,u){var d=!1,_="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(_)}catch{if(u===1)return}u=Math.round(u*100),d?(d.Enabled=u!==100,d.Opacity=u):s.style.filter+=" progid:"+_+"(opacity="+u+")"}function ar(s){for(var u=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in u)return s[d];return!1}function fi(s,u,d){var _=u||new ot(0,0);s.style[qr]=(Bt.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(d?" scale("+d+")":"")}function ie(s,u){s._leaflet_pos=u,Bt.any3d?fi(s,u):(s.style.left=u.x+"px",s.style.top=u.y+"px")}function Li(s){return s._leaflet_pos||new ot(0,0)}var Jn,lr,po;if("onselectstart"in document)Jn=function(){Kt(window,"selectstart",Qe)},lr=function(){Ne(window,"selectstart",Qe)};else{var Fr=ar(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Jn=function(){if(Fr){var s=document.documentElement.style;po=s[Fr],s[Fr]="none"}},lr=function(){Fr&&(document.documentElement.style[Fr]=po,po=void 0)}}function Vs(){Kt(window,"dragstart",Qe)}function Sa(){Ne(window,"dragstart",Qe)}var go,fs;function ur(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(di(),go=s,fs=s.style.outlineStyle,s.style.outlineStyle="none",Kt(window,"keydown",di))}function di(){go&&(go.style.outlineStyle=fs,go=void 0,fs=void 0,Ne(window,"keydown",di))}function Pr(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function cr(s){var u=s.getBoundingClientRect();return{x:u.width/s.offsetWidth||1,y:u.height/s.offsetHeight||1,boundingClientRect:u}}var Aa={__proto__:null,TRANSFORM:qr,TRANSITION:us,TRANSITION_END:Rr,get:Ls,getStyle:Ir,create:we,remove:He,empty:Ln,toFront:Cr,toBack:cs,hasClass:hs,addClass:he,removeClass:Ze,setClass:wa,getClass:dn,setOpacity:ln,testProp:ar,setTransform:fi,setPosition:ie,getPosition:Li,get disableTextSelection(){return Jn},get enableTextSelection(){return lr},disableImageDrag:Vs,enableImageDrag:Sa,preventOutline:ur,restoreOutline:di,getSizedParentNode:Pr,getScale:cr};function Kt(s,u,d,_){if(u&&typeof u=="object")for(var b in u)Gr(s,b,u[b],d);else{u=W(u);for(var R=0,z=u.length;R<z;R++)Gr(s,u[R],d,_)}return this}var ki="_leaflet_events";function Ne(s,u,d,_){if(arguments.length===1)Ki(s),delete s[ki];else if(u&&typeof u=="object")for(var b in u)Xi(s,b,u[b],d);else if(u=W(u),arguments.length===2)Ki(s,function(Q){return Ht(u,Q)!==-1});else for(var R=0,z=u.length;R<z;R++)Xi(s,u[R],d,_);return this}function Ki(s,u){for(var d in s[ki]){var _=d.split(/\d/)[0];(!u||u(_))&&Xi(s,_,null,null,d)}}var Si={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Gr(s,u,d,_){var b=u+y(d)+(_?"_"+y(_):"");if(s[ki]&&s[ki][b])return this;var R=function(Q){return d.call(_||s,Q||window.event)},z=R;!Bt.touchNative&&Bt.pointer&&u.indexOf("touch")===0?R=an(s,u,R):Bt.touch&&u==="dblclick"?R=xr(s,R):"addEventListener"in s?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?s.addEventListener(Si[u]||u,R,Bt.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(R=function(Q){Q=Q||window.event,Wr(s,Q)&&z(Q)},s.addEventListener(Si[u],R,!1)):s.addEventListener(u,z,!1):s.attachEvent("on"+u,R),s[ki]=s[ki]||{},s[ki][b]=R}function Xi(s,u,d,_,b){b=b||u+y(d)+(_?"_"+y(_):"");var R=s[ki]&&s[ki][b];if(!R)return this;!Bt.touchNative&&Bt.pointer&&u.indexOf("touch")===0?An(s,u,R):Bt.touch&&u==="dblclick"?Gn(s,R):"removeEventListener"in s?s.removeEventListener(Si[u]||u,R,!1):s.detachEvent("on"+u,R),s[ki][b]=null}function Ai(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function hr(s){return Gr(s,"wheel",Ai),this}function Zr(s){return Kt(s,"mousedown touchstart dblclick contextmenu",Ai),s._leaflet_disable_click=!0,this}function Qe(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function ti(s){return Qe(s),Ai(s),this}function _o(s){if(s.composedPath)return s.composedPath();for(var u=[],d=s.target;d;)u.push(d),d=d.parentNode;return u}function In(s,u){if(!u)return new ot(s.clientX,s.clientY);var d=cr(u),_=d.boundingClientRect;return new ot((s.clientX-_.left)/d.x-u.clientLeft,(s.clientY-_.top)/d.y-u.clientTop)}var ze=Bt.linux&&Bt.chrome?window.devicePixelRatio:Bt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function zs(s){return Bt.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/ze:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Wr(s,u){var d=u.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var hl={__proto__:null,on:Kt,off:Ne,stopPropagation:Ai,disableScrollPropagation:hr,disableClickPropagation:Zr,preventDefault:Qe,stop:ti,getPropagationPath:_o,getMousePosition:In,getWheelDelta:zs,isExternalTarget:Wr,addListener:Kt,removeListener:Ne},Us=At.extend({run:function(s,u,d,_){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=Li(s),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=B(this._animate,this),this._step()},_step:function(s){var u=+new Date-this._startTime,d=this._duration*1e3;u<d?this._runFrame(this._easeOut(u/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,u){var d=this._startPos.add(this._offset.multiplyBy(s));u&&d._round(),ie(this._el,d),this.fire("step")},_complete:function(){H(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),_e=At.extend({options:{crs:nn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,u){u=et(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(St(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=us&&Bt.any3d&&!Bt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Kt(this._proxy,Rr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,u,d){if(u=u===void 0?this._zoom:this._limitZoom(u),s=this._limitCenter(St(s),u,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=l({animate:d.animate},d.zoom),d.pan=l({animate:d.animate,duration:d.duration},d.pan));var _=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,u,d.zoom):this._tryAnimatedPan(s,d.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(s,u,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,u){return this._loaded?this.setView(this.getCenter(),s,{zoom:u}):(this._zoom=s,this)},zoomIn:function(s,u){return s=s||(Bt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,u)},zoomOut:function(s,u){return s=s||(Bt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,u)},setZoomAround:function(s,u,d){var _=this.getZoomScale(u),b=this.getSize().divideBy(2),R=s instanceof ot?s:this.latLngToContainerPoint(s),z=R.subtract(b).multiplyBy(1-1/_),Q=this.containerPointToLatLng(b.add(z));return this.setView(Q,u,{zoom:d})},_getBoundsCenterZoom:function(s,u){u=u||{},s=s.getBounds?s.getBounds():Et(s);var d=D(u.paddingTopLeft||u.padding||[0,0]),_=D(u.paddingBottomRight||u.padding||[0,0]),b=this.getBoundsZoom(s,!1,d.add(_));if(b=typeof u.maxZoom=="number"?Math.min(u.maxZoom,b):b,b===1/0)return{center:s.getCenter(),zoom:b};var R=_.subtract(d).divideBy(2),z=this.project(s.getSouthWest(),b),Q=this.project(s.getNorthEast(),b),st=this.unproject(z.add(Q).divideBy(2).add(R),b);return{center:st,zoom:b}},fitBounds:function(s,u){if(s=Et(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,u);return this.setView(d.center,d.zoom,u)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,u){return this.setView(s,this._zoom,{pan:u})},panBy:function(s,u){if(s=D(s).round(),u=u||{},!s.x&&!s.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Us,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){he(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,u.duration||.25,u.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,u,d){if(d=d||{},d.animate===!1||!Bt.any3d)return this.setView(s,u,d);this._stop();var _=this.project(this.getCenter()),b=this.project(s),R=this.getSize(),z=this._zoom;s=St(s),u=u===void 0?z:u;var Q=Math.max(R.x,R.y),st=Q*this.getZoomScale(z,u),vt=b.distanceTo(_)||1,Lt=1.42,Ut=Lt*Lt;function qt(gn){var Vr=gn?-1:1,Jr=gn?st:Q,ys=st*st-Q*Q+Vr*Ut*Ut*vt*vt,ts=2*Jr*Ut*vt,ja=ys/ts,Sl=Math.sqrt(ja*ja+1)-ja,Ba=Sl<1e-9?-18:Math.log(Sl);return Ba}function ue(gn){return(Math.exp(gn)-Math.exp(-gn))/2}function cn(gn){return(Math.exp(gn)+Math.exp(-gn))/2}function yn(gn){return ue(gn)/cn(gn)}var ni=qt(0);function $i(gn){return Q*(cn(ni)/cn(ni+Lt*gn))}function hh(gn){return Q*(cn(ni)*yn(ni+Lt*gn)-ue(ni))/Ut}function fh(gn){return 1-Math.pow(1-gn,1.5)}var Ua=Date.now(),No=(qt(1)-ni)/Lt,dh=d.duration?1e3*d.duration:1e3*No*.8;function Lo(){var gn=(Date.now()-Ua)/dh,Vr=fh(gn)*No;gn<=1?(this._flyToFrame=B(Lo,this),this._move(this.unproject(_.add(b.subtract(_).multiplyBy(hh(Vr)/vt)),z),this.getScaleZoom(Q/$i(Vr),z),{flyTo:!0})):this._move(s,u)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),Lo.call(this),this},flyToBounds:function(s,u){var d=this._getBoundsCenterZoom(s,u);return this.flyTo(d.center,d.zoom,u)},setMaxBounds:function(s){return s=Et(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var u=this.options.minZoom;return this.options.minZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var u=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,u){this._enforcingBounds=!0;var d=this.getCenter(),_=this._limitCenter(d,this._zoom,Et(s));return d.equals(_)||this.panTo(_,u),this._enforcingBounds=!1,this},panInside:function(s,u){u=u||{};var d=D(u.paddingTopLeft||u.padding||[0,0]),_=D(u.paddingBottomRight||u.padding||[0,0]),b=this.project(this.getCenter()),R=this.project(s),z=this.getPixelBounds(),Q=wt([z.min.add(d),z.max.subtract(_)]),st=Q.getSize();if(!Q.contains(R)){this._enforcingBounds=!0;var vt=R.subtract(Q.getCenter()),Lt=Q.extend(R).getSize().subtract(st);b.x+=vt.x<0?-Lt.x:Lt.x,b.y+=vt.y<0?-Lt.y:Lt.y,this.panTo(this.unproject(b),u),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=l({animate:!1,pan:!0},s===!0?{animate:!0}:s);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),_=u.divideBy(2).round(),b=d.divideBy(2).round(),R=_.subtract(b);return!R.x&&!R.y?this:(s.animate&&s.pan?this.panBy(R):(s.pan&&this._rawPanBy(R),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=l({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=p(this._handleGeolocationResponse,this),d=p(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,d,s):navigator.geolocation.getCurrentPosition(u,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var u=s.code,d=s.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var u=s.coords.latitude,d=s.coords.longitude,_=new xt(u,d),b=_.toBounds(s.coords.accuracy*2),R=this._locateOptions;if(R.setView){var z=this.getBoundsZoom(b);this.setView(_,R.maxZoom?Math.min(z,R.maxZoom):z)}var Q={latlng:_,bounds:b,timestamp:s.timestamp};for(var st in s.coords)typeof s.coords[st]=="number"&&(Q[st]=s.coords[st]);this.fire("locationfound",Q)}},addHandler:function(s,u){if(!u)return this;var d=this[s]=new u(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),He(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(H(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)He(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,u){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),_=we("div",d,u||this._mapPane);return s&&(this._panes[s]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),u=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new rt(u,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,u,d){s=Et(s),d=D(d||[0,0]);var _=this.getZoom()||0,b=this.getMinZoom(),R=this.getMaxZoom(),z=s.getNorthWest(),Q=s.getSouthEast(),st=this.getSize().subtract(d),vt=wt(this.project(Q,_),this.project(z,_)).getSize(),Lt=Bt.any3d?this.options.zoomSnap:1,Ut=st.x/vt.x,qt=st.y/vt.y,ue=u?Math.max(Ut,qt):Math.min(Ut,qt);return _=this.getScaleZoom(ue,_),Lt&&(_=Math.round(_/(Lt/100))*(Lt/100),_=u?Math.ceil(_/Lt)*Lt:Math.floor(_/Lt)*Lt),Math.max(b,Math.min(R,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ot(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,u){var d=this._getTopLeftPoint(s,u);return new ut(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,u){var d=this.options.crs;return u=u===void 0?this._zoom:u,d.scale(s)/d.scale(u)},getScaleZoom:function(s,u){var d=this.options.crs;u=u===void 0?this._zoom:u;var _=d.zoom(s*d.scale(u));return isNaN(_)?1/0:_},project:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(St(s),u)},unproject:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(D(s),u)},layerPointToLatLng:function(s){var u=D(s).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(s){var u=this.project(St(s))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(St(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Et(s))},distance:function(s,u){return this.options.crs.distance(St(s),St(u))},containerPointToLayerPoint:function(s){return D(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return D(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var u=this.containerPointToLayerPoint(D(s));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(St(s)))},mouseEventToContainerPoint:function(s){return In(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var u=this._container=Ls(s);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Kt(u,"scroll",this._onScroll,this),this._containerId=y(u)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&Bt.any3d,he(s,"leaflet-container"+(Bt.touch?" leaflet-touch":"")+(Bt.retina?" leaflet-retina":"")+(Bt.ielt9?" leaflet-oldie":"")+(Bt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=Ir(s,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ie(this._mapPane,new ot(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(he(s.markerPane,"leaflet-zoom-hide"),he(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,u,d){ie(this._mapPane,new ot(0,0));var _=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var b=this._zoom!==u;this._moveStart(b,d)._move(s,u)._moveEnd(b),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(s,u){return s&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(s,u,d,_){u===void 0&&(u=this._zoom);var b=this._zoom!==u;return this._zoom=u,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),_?d&&d.pinch&&this.fire("zoom",d):((b||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return H(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){ie(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[y(this._container)]=this;var u=s?Ne:Kt;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Bt.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){H(this._resizeRequest),this._resizeRequest=B(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,u){for(var d=[],_,b=u==="mouseout"||u==="mouseover",R=s.target||s.srcElement,z=!1;R;){if(_=this._targets[y(R)],_&&(u==="click"||u==="preclick")&&this._draggableMoved(_)){z=!0;break}if(_&&_.listens(u,!0)&&(b&&!Wr(R,s)||(d.push(_),b))||R===this._container)break;R=R.parentNode}return!d.length&&!z&&!b&&this.listens(u,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var u=s.target||s.srcElement;if(!(!this._loaded||u._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(u))){var d=s.type;d==="mousedown"&&ur(u),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,u,d){if(s.type==="click"){var _=l({},s);_.type="preclick",this._fireDOMEvent(_,_.type,d)}var b=this._findEventTargets(s,u);if(d){for(var R=[],z=0;z<d.length;z++)d[z].listens(u,!0)&&R.push(d[z]);b=R.concat(b)}if(b.length){u==="contextmenu"&&Qe(s);var Q=b[0],st={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var vt=Q.getLatLng&&(!Q._radius||Q._radius<=10);st.containerPoint=vt?this.latLngToContainerPoint(Q.getLatLng()):this.mouseEventToContainerPoint(s),st.layerPoint=this.containerPointToLayerPoint(st.containerPoint),st.latlng=vt?Q.getLatLng():this.layerPointToLatLng(st.layerPoint)}for(z=0;z<b.length;z++)if(b[z].fire(u,st,!0),st.originalEvent._stopped||b[z].options.bubblingMouseEvents===!1&&Ht(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,u=this._handlers.length;s<u;s++)this._handlers[s].disable()},whenReady:function(s,u){return this._loaded?s.call(u||this,{target:this}):this.on("load",s,u),this},_getMapPanePos:function(){return Li(this._mapPane)||new ot(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,u){var d=s&&u!==void 0?this._getNewPixelOrigin(s,u):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,u){var d=this.getSize()._divideBy(2);return this.project(s,u)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,u,d){var _=this._getNewPixelOrigin(d,u);return this.project(s,u)._subtract(_)},_latLngBoundsToNewLayerBounds:function(s,u,d){var _=this._getNewPixelOrigin(d,u);return wt([this.project(s.getSouthWest(),u)._subtract(_),this.project(s.getNorthWest(),u)._subtract(_),this.project(s.getSouthEast(),u)._subtract(_),this.project(s.getNorthEast(),u)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,u,d){if(!d)return s;var _=this.project(s,u),b=this.getSize().divideBy(2),R=new ut(_.subtract(b),_.add(b)),z=this._getBoundsOffset(R,d,u);return Math.abs(z.x)<=1&&Math.abs(z.y)<=1?s:this.unproject(_.add(z),u)},_limitOffset:function(s,u){if(!u)return s;var d=this.getPixelBounds(),_=new ut(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(_,u))},_getBoundsOffset:function(s,u,d){var _=wt(this.project(u.getNorthEast(),d),this.project(u.getSouthWest(),d)),b=_.min.subtract(s.min),R=_.max.subtract(s.max),z=this._rebound(b.x,-R.x),Q=this._rebound(b.y,-R.y);return new ot(z,Q)},_rebound:function(s,u){return s+u>0?Math.round(s-u)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(u))},_limitZoom:function(s){var u=this.getMinZoom(),d=this.getMaxZoom(),_=Bt.any3d?this.options.zoomSnap:1;return _&&(s=Math.round(s/_)*_),Math.max(u,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,u){var d=this._getCenterOffset(s)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,u),!0)},_createAnimProxy:function(){var s=this._proxy=we("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(u){var d=qr,_=this._proxy.style[d];fi(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),_===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){He(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),u=this.getZoom();fi(this._proxy,this.project(s,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,u,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(u),b=this._getCenterOffset(s)._divideBy(1-1/_);return d.animate!==!0&&!this.getSize().contains(b)?!1:(B(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,u,!0)},this),!0)},_animateZoom:function(s,u,d,_){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=u,he(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:u,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Mr(s,u){return new _e(s,u)}var Zn=ge.extend({options:{position:"topright"},initialize:function(s){et(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var u=this._map;return u&&u.removeControl(this),this.options.position=s,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var u=this._container=this.onAdd(s),d=this.getPosition(),_=s._controlCorners[d];return he(u,"leaflet-control"),d.indexOf("bottom")!==-1?_.insertBefore(u,_.firstChild):_.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(He(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),ei=function(s){return new Zn(s)};_e.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},u="leaflet-",d=this._controlContainer=we("div",u+"control-container",this._container);function _(b,R){var z=u+b+" "+u+R;s[b+R]=we("div",z,d)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)He(this._controlCorners[s]);He(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var xa=Zn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,u,d,_){return d<_?-1:_<d?1:0}},initialize:function(s,u,d){et(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in s)this._addLayer(s[_],_);for(_ in u)this._addLayer(u[_],_,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Zn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,u){return this._addLayer(s,u),this._map?this._update():this},addOverlay:function(s,u){return this._addLayer(s,u,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var u=this._getLayer(y(s));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){he(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(he(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",u=this._container=we("div",s),d=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Zr(u),hr(u);var _=this._section=we("section",s+"-list");d&&(this._map.on("click",this.collapse,this),Kt(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var b=this._layersLink=we("a",s+"-toggle",u);b.href="#",b.title="Layers",b.setAttribute("role","button"),Kt(b,{keydown:function(R){R.keyCode===13&&this._expandSafely()},click:function(R){Qe(R),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=we("div",s+"-base",_),this._separator=we("div",s+"-separator",_),this._overlaysList=we("div",s+"-overlays",_),u.appendChild(_)},_getLayer:function(s){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&y(this._layers[u].layer)===s)return this._layers[u]},_addLayer:function(s,u,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:u,overlay:d}),this.options.sortLayers&&this._layers.sort(p(function(_,b){return this.options.sortFunction(_.layer,b.layer,_.name,b.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ln(this._baseLayersList),Ln(this._overlaysList),this._layerControlInputs=[];var s,u,d,_,b=0;for(d=0;d<this._layers.length;d++)_=this._layers[d],this._addItem(_),u=u||_.overlay,s=s||!_.overlay,b+=_.overlay?0:1;return this.options.hideSingleBase&&(s=s&&b>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=u&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var u=this._getLayer(y(s.target)),d=u.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,u)},_createRadioElement:function(s,u){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(u?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=d,_.firstChild},_addItem:function(s){var u=document.createElement("label"),d=this._map.hasLayer(s.layer),_;s.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=d):_=this._createRadioElement("leaflet-base-layers_"+y(this),d),this._layerControlInputs.push(_),_.layerId=y(s.layer),Kt(_,"click",this._onInputClick,this);var b=document.createElement("span");b.innerHTML=" "+s.name;var R=document.createElement("span");u.appendChild(R),R.appendChild(_),R.appendChild(b);var z=s.overlay?this._overlaysList:this._baseLayersList;return z.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,u,d,_=[],b=[];this._handlingClick=!0;for(var R=s.length-1;R>=0;R--)u=s[R],d=this._getLayer(u.layerId).layer,u.checked?_.push(d):u.checked||b.push(d);for(R=0;R<b.length;R++)this._map.hasLayer(b[R])&&this._map.removeLayer(b[R]);for(R=0;R<_.length;R++)this._map.hasLayer(_[R])||this._map.addLayer(_[R]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,u,d,_=this._map.getZoom(),b=s.length-1;b>=0;b--)u=s[b],d=this._getLayer(u.layerId).layer,u.disabled=d.options.minZoom!==void 0&&_<d.options.minZoom||d.options.maxZoom!==void 0&&_>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Kt(s,"click",Qe),this.expand();var u=this;setTimeout(function(){Ne(s,"click",Qe),u._preventClick=!1})}}),bu=function(s,u,d){return new xa(s,u,d)},Yr=Zn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var u="leaflet-control-zoom",d=we("div",u+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,u+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,u+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,u,d,_,b){var R=we("a",d,_);return R.innerHTML=s,R.href="#",R.title=u,R.setAttribute("role","button"),R.setAttribute("aria-label",u),Zr(R),Kt(R,"click",ti),Kt(R,"click",b,this),Kt(R,"click",this._refocusOnMap,this),R},_updateDisabled:function(){var s=this._map,u="leaflet-disabled";Ze(this._zoomInButton,u),Ze(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(he(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(he(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});_e.mergeOptions({zoomControl:!0}),_e.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Yr,this.addControl(this.zoomControl))});var yo=function(s){return new Yr(s)},vo=Zn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var u="leaflet-control-scale",d=we("div",u),_=this.options;return this._addScales(_,u+"-line",d),s.on(_.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,u,d){s.metric&&(this._mScale=we("div",u,d)),s.imperial&&(this._iScale=we("div",u,d))},_update:function(){var s=this._map,u=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,u]),s.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var u=this._getRoundNum(s),d=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,d,u/s)},_updateImperial:function(s){var u=s*3.2808399,d,_,b;u>5280?(d=u/5280,_=this._getRoundNum(d),this._updateScale(this._iScale,_+" mi",_/d)):(b=this._getRoundNum(u),this._updateScale(this._iScale,b+" ft",b/u))},_updateScale:function(s,u,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=u},_getRoundNum:function(s){var u=Math.pow(10,(Math.floor(s)+"").length-1),d=s/u;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,u*d}}),To=function(s){return new vo(s)},fl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ds=Zn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Bt.inlineSvg?fl+" ":"")+"Leaflet</a>"},initialize:function(s){et(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=we("div","leaflet-control-attribution"),Zr(this._container);for(var u in s._layers)s._layers[u].getAttribution&&this.addAttribution(s._layers[u].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var u in this._attributions)this._attributions[u]&&s.push(u);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});_e.mergeOptions({attributionControl:!0}),_e.addInitHook(function(){this.options.attributionControl&&new ds().addTo(this)});var wu=function(s){return new ds(s)};Zn.Layers=xa,Zn.Zoom=Yr,Zn.Scale=vo,Zn.Attribution=ds,ei.layers=bu,ei.zoom=yo,ei.scale=To,ei.attribution=wu;var xi=ge.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xi.addTo=function(s,u){return s.addHandler(u,this),this};var js={Events:J},Ra=Bt.touch?"touchstart mousedown":"mousedown",fr=At.extend({options:{clickTolerance:3},initialize:function(s,u,d,_){et(this,_),this._element=s,this._dragStartTarget=u||s,this._preventOutline=d},enable:function(){this._enabled||(Kt(this._dragStartTarget,Ra,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(fr._dragging===this&&this.finishDrag(!0),Ne(this._dragStartTarget,Ra,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!hs(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){fr._dragging===this&&this.finishDrag();return}if(!(fr._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(fr._dragging=this,this._preventOutline&&ur(this._element),Vs(),Jn(),!this._moving)){this.fire("down");var u=s.touches?s.touches[0]:s,d=Pr(this._element);this._startPoint=new ot(u.clientX,u.clientY),this._startPos=Li(this._element),this._parentScale=cr(d);var _=s.type==="mousedown";Kt(document,_?"mousemove":"touchmove",this._onMove,this),Kt(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var u=s.touches&&s.touches.length===1?s.touches[0]:s,d=new ot(u.clientX,u.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Qe(s),this._moved||(this.fire("dragstart"),this._moved=!0,he(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),he(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),ie(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ze(document.body,"leaflet-dragging"),this._lastTarget&&(Ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ne(document,"mousemove touchmove",this._onMove,this),Ne(document,"mouseup touchend touchcancel",this._onUp,this),Sa(),lr();var u=this._moved&&this._moving;this._moving=!1,fr._dragging=!1,u&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Eo(s,u,d){var _,b=[1,4,2,8],R,z,Q,st,vt,Lt,Ut,qt;for(R=0,Lt=s.length;R<Lt;R++)s[R]._code=Or(s[R],u);for(Q=0;Q<4;Q++){for(Ut=b[Q],_=[],R=0,Lt=s.length,z=Lt-1;R<Lt;z=R++)st=s[R],vt=s[z],st._code&Ut?vt._code&Ut||(qt=kn(vt,st,Ut,u,d),qt._code=Or(qt,u),_.push(qt)):(vt._code&Ut&&(qt=kn(vt,st,Ut,u,d),qt._code=Or(qt,u),_.push(qt)),_.push(st));s=_}return s}function ms(s,u){var d,_,b,R,z,Q,st,vt,Lt;if(!s||s.length===0)throw new Error("latlngs not passed");f(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Ut=St([0,0]),qt=Et(s),ue=qt.getNorthWest().distanceTo(qt.getSouthWest())*qt.getNorthEast().distanceTo(qt.getNorthWest());ue<1700&&(Ut=bo(s));var cn=s.length,yn=[];for(d=0;d<cn;d++){var ni=St(s[d]);yn.push(u.project(St([ni.lat-Ut.lat,ni.lng-Ut.lng])))}for(Q=st=vt=0,d=0,_=cn-1;d<cn;_=d++)b=yn[d],R=yn[_],z=b.y*R.x-R.y*b.x,st+=(b.x+R.x)*z,vt+=(b.y+R.y)*z,Q+=z*3;Q===0?Lt=yn[0]:Lt=[st/Q,vt/Q];var $i=u.unproject(D(Lt));return St([$i.lat+Ut.lat,$i.lng+Ut.lng])}function bo(s){for(var u=0,d=0,_=0,b=0;b<s.length;b++){var R=St(s[b]);u+=R.lat,d+=R.lng,_++}return St([u/_,d/_])}var wo={__proto__:null,clipPolygon:Eo,polygonCenter:ms,centroid:bo};function Ia(s,u){if(!u||!s.length)return s.slice();var d=u*u;return s=ml(s,d),s=dl(s,d),s}function So(s,u,d){return Math.sqrt(Ri(s,u,d,!0))}function Qr(s,u,d){return Ri(s,u,d)}function dl(s,u){var d=s.length,_=typeof Uint8Array<"u"?Uint8Array:Array,b=new _(d);b[0]=b[d-1]=1,Ao(s,b,u,0,d-1);var R,z=[];for(R=0;R<d;R++)b[R]&&z.push(s[R]);return z}function Ao(s,u,d,_,b){var R=0,z,Q,st;for(Q=_+1;Q<=b-1;Q++)st=Ri(s[Q],s[_],s[b],!0),st>R&&(z=Q,R=st);R>d&&(u[z]=1,Ao(s,u,d,_,z),Ao(s,u,d,z,b))}function ml(s,u){for(var d=[s[0]],_=1,b=0,R=s.length;_<R;_++)pl(s[_],s[b])>u&&(d.push(s[_]),b=_);return b<R-1&&d.push(s[R-1]),d}var Ca;function Bs(s,u,d,_,b){var R=_?Ca:Or(s,d),z=Or(u,d),Q,st,vt;for(Ca=z;;){if(!(R|z))return[s,u];if(R&z)return!1;Q=R||z,st=kn(s,u,Q,d,b),vt=Or(st,d),Q===R?(s=st,R=vt):(u=st,z=vt)}}function kn(s,u,d,_,b){var R=u.x-s.x,z=u.y-s.y,Q=_.min,st=_.max,vt,Lt;return d&8?(vt=s.x+R*(st.y-s.y)/z,Lt=st.y):d&4?(vt=s.x+R*(Q.y-s.y)/z,Lt=Q.y):d&2?(vt=st.x,Lt=s.y+z*(st.x-s.x)/R):d&1&&(vt=Q.x,Lt=s.y+z*(Q.x-s.x)/R),new ot(vt,Lt,b)}function Or(s,u){var d=0;return s.x<u.min.x?d|=1:s.x>u.max.x&&(d|=2),s.y<u.min.y?d|=4:s.y>u.max.y&&(d|=8),d}function pl(s,u){var d=u.x-s.x,_=u.y-s.y;return d*d+_*_}function Ri(s,u,d,_){var b=u.x,R=u.y,z=d.x-b,Q=d.y-R,st=z*z+Q*Q,vt;return st>0&&(vt=((s.x-b)*z+(s.y-R)*Q)/st,vt>1?(b=d.x,R=d.y):vt>0&&(b+=z*vt,R+=Q*vt)),z=s.x-b,Q=s.y-R,_?z*z+Q*Q:new ot(b,R)}function f(s){return!yt(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function T(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),f(s)}function w(s,u){var d,_,b,R,z,Q,st,vt;if(!s||s.length===0)throw new Error("latlngs not passed");f(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Lt=St([0,0]),Ut=Et(s),qt=Ut.getNorthWest().distanceTo(Ut.getSouthWest())*Ut.getNorthEast().distanceTo(Ut.getNorthWest());qt<1700&&(Lt=bo(s));var ue=s.length,cn=[];for(d=0;d<ue;d++){var yn=St(s[d]);cn.push(u.project(St([yn.lat-Lt.lat,yn.lng-Lt.lng])))}for(d=0,_=0;d<ue-1;d++)_+=cn[d].distanceTo(cn[d+1])/2;if(_===0)vt=cn[0];else for(d=0,R=0;d<ue-1;d++)if(z=cn[d],Q=cn[d+1],b=z.distanceTo(Q),R+=b,R>_){st=(R-_)/b,vt=[Q.x-st*(Q.x-z.x),Q.y-st*(Q.y-z.y)];break}var ni=u.unproject(D(vt));return St([ni.lat+Lt.lat,ni.lng+Lt.lng])}var C={__proto__:null,simplify:Ia,pointToSegmentDistance:So,closestPointOnSegment:Qr,clipSegment:Bs,_getEdgeIntersection:kn,_getBitCode:Or,_sqClosestPointOnSegment:Ri,isFlat:f,_flat:T,polylineCenter:w},Y={project:function(s){return new ot(s.lng,s.lat)},unproject:function(s){return new xt(s.y,s.x)},bounds:new ut([-180,-90],[180,90])},at={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ut([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var u=Math.PI/180,d=this.R,_=s.lat*u,b=this.R_MINOR/d,R=Math.sqrt(1-b*b),z=R*Math.sin(_),Q=Math.tan(Math.PI/4-_/2)/Math.pow((1-z)/(1+z),R/2);return _=-d*Math.log(Math.max(Q,1e-10)),new ot(s.lng*u*d,_)},unproject:function(s){for(var u=180/Math.PI,d=this.R,_=this.R_MINOR/d,b=Math.sqrt(1-_*_),R=Math.exp(-s.y/d),z=Math.PI/2-2*Math.atan(R),Q=0,st=.1,vt;Q<15&&Math.abs(st)>1e-7;Q++)vt=b*Math.sin(z),vt=Math.pow((1-vt)/(1+vt),b/2),st=Math.PI/2-2*Math.atan(R*vt)-z,z+=st;return new xt(z*u,s.x*u/d)}},Ct={__proto__:null,LonLat:Y,Mercator:at,SphericalMercator:Oe},Re=l({},ce,{code:"EPSG:3395",projection:at,transformation:(function(){var s=.5/(Math.PI*at.R);return oe(s,.5,-s,.5)})()}),xn=l({},ce,{code:"EPSG:4326",projection:Y,transformation:oe(1/180,1,-1/180,.5)}),Ie=l({},Ee,{projection:Y,transformation:oe(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,u){var d=u.lng-s.lng,_=u.lat-s.lat;return Math.sqrt(d*d+_*_)},infinite:!0});Ee.Earth=ce,Ee.EPSG3395=Re,Ee.EPSG3857=nn,Ee.EPSG900913=wn,Ee.EPSG4326=xn,Ee.Simple=Ie;var qe=At.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[y(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[y(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var u=s.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var d=this.getEvents();u.on(d,this),this.once("remove",function(){u.off(d,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});_e.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var u=y(s);return this._layers[u]?this:(this._layers[u]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var u=y(s);return this._layers[u]?(this._loaded&&s.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return y(s)in this._layers},eachLayer:function(s,u){for(var d in this._layers)s.call(u,this._layers[d]);return this},_addLayers:function(s){s=s?yt(s)?s:[s]:[];for(var u=0,d=s.length;u<d;u++)this.addLayer(s[u])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[y(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var u=y(s);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,u=-1/0,d=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var b=this._zoomBoundLayers[_].options;s=b.minZoom===void 0?s:Math.min(s,b.minZoom),u=b.maxZoom===void 0?u:Math.max(u,b.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var un=qe.extend({initialize:function(s,u){et(this,u),this._layers={};var d,_;if(s)for(d=0,_=s.length;d<_;d++)this.addLayer(s[d])},addLayer:function(s){var u=this.getLayerId(s);return this._layers[u]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var u=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(s){var u=typeof s=="number"?s:this.getLayerId(s);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var u=Array.prototype.slice.call(arguments,1),d,_;for(d in this._layers)_=this._layers[d],_[s]&&_[s].apply(_,u);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,u){for(var d in this._layers)s.call(u,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return y(s)}}),Kr=function(s,u){return new un(s,u)},tn=un.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),un.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),un.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new rt;for(var u in this._layers){var d=this._layers[u];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),Dr=function(s,u){return new tn(s,u)},Nr=ge.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){et(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,u){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(d,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(_,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(s,u){var d=this.options,_=d[u+"Size"];typeof _=="number"&&(_=[_,_]);var b=D(_),R=D(u==="shadow"&&d.shadowAnchor||d.iconAnchor||b&&b.divideBy(2,!0));s.className="leaflet-marker-"+u+" "+(d.className||""),R&&(s.style.marginLeft=-R.x+"px",s.style.marginTop=-R.y+"px"),b&&(s.style.width=b.x+"px",s.style.height=b.y+"px")},_createImg:function(s,u){return u=u||document.createElement("img"),u.src=s,u},_getIconUrl:function(s){return Bt.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function gl(s){return new Nr(s)}var xo=Nr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof xo.imagePath!="string"&&(xo.imagePath=this._detectIconPath()),(this.options.imagePath||xo.imagePath)+Nr.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var u=function(d,_,b){var R=_.exec(d);return R&&R[b]};return s=u(s,/^url\((['"])?(.+)\1\)$/,2),s&&u(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=we("div","leaflet-default-icon-path",document.body),u=Ir(s,"background-image")||Ir(s,"backgroundImage");if(document.body.removeChild(s),u=this._stripUrl(u),u)return u;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Su=xi.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new fr(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),he(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var u=this._marker,d=u._map,_=this._marker.options.autoPanSpeed,b=this._marker.options.autoPanPadding,R=Li(u._icon),z=d.getPixelBounds(),Q=d.getPixelOrigin(),st=wt(z.min._subtract(Q).add(b),z.max._subtract(Q).subtract(b));if(!st.contains(R)){var vt=D((Math.max(st.max.x,R.x)-st.max.x)/(z.max.x-st.max.x)-(Math.min(st.min.x,R.x)-st.min.x)/(z.min.x-st.min.x),(Math.max(st.max.y,R.y)-st.max.y)/(z.max.y-st.max.y)-(Math.min(st.min.y,R.y)-st.min.y)/(z.min.y-st.min.y)).multiplyBy(_);d.panBy(vt,{animate:!1}),this._draggable._newPos._add(vt),this._draggable._startPos._add(vt),ie(u._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=B(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(H(this._panRequest),this._panRequest=B(this._adjustPan.bind(this,s)))},_onDrag:function(s){var u=this._marker,d=u._shadow,_=Li(u._icon),b=u._map.layerPointToLatLng(_);d&&ie(d,_),u._latlng=b,s.latlng=b,s.oldLatLng=this._oldLatLng,u.fire("move",s).fire("drag",s)},_onDragEnd:function(s){H(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Ro=qe.extend({options:{icon:new xo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,u){et(this,u),this._latlng=St(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var u=this._latlng;return this._latlng=St(s),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),_=!1;d!==this._icon&&(this._icon&&this._removeIcon(),_=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),he(d,u),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Kt(d,"focus",this._panOnFocus,this);var b=s.icon.createShadow(this._shadow),R=!1;b!==this._shadow&&(this._removeShadow(),R=!0),b&&(he(b,u),b.alt=""),this._shadow=b,s.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),b&&R&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ne(this._icon,"focus",this._panOnFocus,this),He(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&He(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&ie(this._icon,s),this._shadow&&ie(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(he(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Su)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Su(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&ln(this._icon,s),this._shadow&&ln(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var u=this.options.icon.options,d=u.iconSize?D(u.iconSize):D(0,0),_=u.iconAnchor?D(u.iconAnchor):D(0,0);s.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:d.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Au(s,u){return new Ro(s,u)}var Xr=qe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return et(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Pa=Xr.extend({options:{fill:!0,radius:10},initialize:function(s,u){et(this,u),this._latlng=St(s),this._radius=this.options.radius},setLatLng:function(s){var u=this._latlng;return this._latlng=St(s),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var u=s&&s.radius||this._radius;return Xr.prototype.setStyle.call(this,s),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,u=this._radiusY||s,d=this._clickTolerance(),_=[s+d,u+d];this._pxBounds=new ut(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function sh(s,u){return new Pa(s,u)}var xu=Pa.extend({initialize:function(s,u,d){if(typeof u=="number"&&(u=l({},d,{radius:u})),et(this,u),this._latlng=St(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new rt(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Xr.prototype.setStyle,_project:function(){var s=this._latlng.lng,u=this._latlng.lat,d=this._map,_=d.options.crs;if(_.distance===ce.distance){var b=Math.PI/180,R=this._mRadius/ce.R/b,z=d.project([u+R,s]),Q=d.project([u-R,s]),st=z.add(Q).divideBy(2),vt=d.unproject(st).lat,Lt=Math.acos((Math.cos(R*b)-Math.sin(u*b)*Math.sin(vt*b))/(Math.cos(u*b)*Math.cos(vt*b)))/b;(isNaN(Lt)||Lt===0)&&(Lt=R/Math.cos(Math.PI/180*u)),this._point=st.subtract(d.getPixelOrigin()),this._radius=isNaN(Lt)?0:st.x-d.project([vt,s-Lt]).x,this._radiusY=st.y-z.y}else{var Ut=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(Ut).x}this._updateBounds()}});function Td(s,u,d){return new xu(s,u,d)}var $r=Xr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,u){et(this,u),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var u=1/0,d=null,_=Ri,b,R,z=0,Q=this._parts.length;z<Q;z++)for(var st=this._parts[z],vt=1,Lt=st.length;vt<Lt;vt++){b=st[vt-1],R=st[vt];var Ut=_(s,b,R,!0);Ut<u&&(u=Ut,d=_(s,b,R))}return d&&(d.distance=Math.sqrt(u)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return w(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,u){return u=u||this._defaultShape(),s=St(s),u.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new rt,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return f(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var u=[],d=f(s),_=0,b=s.length;_<b;_++)d?(u[_]=St(s[_]),this._bounds.extend(u[_])):u[_]=this._convertLatLngs(s[_]);return u},_project:function(){var s=new ut;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),u=new ot(s,s);this._rawPxBounds&&(this._pxBounds=new ut([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(s,u,d){var _=s[0]instanceof xt,b=s.length,R,z;if(_){for(z=[],R=0;R<b;R++)z[R]=this._map.latLngToLayerPoint(s[R]),d.extend(z[R]);u.push(z)}else for(R=0;R<b;R++)this._projectLatlngs(s[R],u,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,d,_,b,R,z,Q,st;for(d=0,b=0,R=this._rings.length;d<R;d++)for(st=this._rings[d],_=0,z=st.length;_<z-1;_++)Q=Bs(st[_],st[_+1],s,_,!0),Q&&(u[b]=u[b]||[],u[b].push(Q[0]),(Q[1]!==st[_+1]||_===z-2)&&(u[b].push(Q[1]),b++))}},_simplifyPoints:function(){for(var s=this._parts,u=this.options.smoothFactor,d=0,_=s.length;d<_;d++)s[d]=Ia(s[d],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,u){var d,_,b,R,z,Q,st=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,R=this._parts.length;d<R;d++)for(Q=this._parts[d],_=0,z=Q.length,b=z-1;_<z;b=_++)if(!(!u&&_===0)&&So(s,Q[b],Q[_])<=st)return!0;return!1}});function Ed(s,u){return new $r(s,u)}$r._flat=T;var Io=$r.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ms(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var u=$r.prototype._convertLatLngs.call(this,s),d=u.length;return d>=2&&u[0]instanceof xt&&u[0].equals(u[d-1])&&u.pop(),u},_setLatLngs:function(s){$r.prototype._setLatLngs.call(this,s),f(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return f(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,u=this.options.weight,d=new ot(u,u);if(s=new ut(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,b=this._rings.length,R;_<b;_++)R=Eo(this._rings[_],s,!0),R.length&&this._parts.push(R)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var u=!1,d,_,b,R,z,Q,st,vt;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(R=0,st=this._parts.length;R<st;R++)for(d=this._parts[R],z=0,vt=d.length,Q=vt-1;z<vt;Q=z++)_=d[z],b=d[Q],_.y>s.y!=b.y>s.y&&s.x<(b.x-_.x)*(s.y-_.y)/(b.y-_.y)+_.x&&(u=!u);return u||$r.prototype._containsPoint.call(this,s,!0)}});function Vi(s,u){return new Io(s,u)}var zi=tn.extend({initialize:function(s,u){et(this,u),this._layers={},s&&this.addData(s)},addData:function(s){var u=yt(s)?s:s.features,d,_,b;if(u){for(d=0,_=u.length;d<_;d++)b=u[d],(b.geometries||b.geometry||b.features||b.coordinates)&&this.addData(b);return this}var R=this.options;if(R.filter&&!R.filter(s))return this;var z=Ma(s,R);return z?(z.feature=Co(s),z.defaultOptions=z.options,this.resetStyle(z),R.onEachFeature&&R.onEachFeature(s,z),this.addLayer(z)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=l({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(u){this._setLayerStyle(u,s)},this)},_setLayerStyle:function(s,u){s.setStyle&&(typeof u=="function"&&(u=u(s.feature)),s.setStyle(u))}});function Ma(s,u){var d=s.type==="Feature"?s.geometry:s,_=d?d.coordinates:null,b=[],R=u&&u.pointToLayer,z=u&&u.coordsToLatLng||_l,Q,st,vt,Lt;if(!_&&!d)return null;switch(d.type){case"Point":return Q=z(_),Ru(R,s,Q,u);case"MultiPoint":for(vt=0,Lt=_.length;vt<Lt;vt++)Q=z(_[vt]),b.push(Ru(R,s,Q,u));return new tn(b);case"LineString":case"MultiLineString":return st=Oa(_,d.type==="LineString"?0:1,z),new $r(st,u);case"Polygon":case"MultiPolygon":return st=Oa(_,d.type==="Polygon"?1:2,z),new Io(st,u);case"GeometryCollection":for(vt=0,Lt=d.geometries.length;vt<Lt;vt++){var Ut=Ma({geometry:d.geometries[vt],type:"Feature",properties:s.properties},u);Ut&&b.push(Ut)}return new tn(b);case"FeatureCollection":for(vt=0,Lt=d.features.length;vt<Lt;vt++){var qt=Ma(d.features[vt],u);qt&&b.push(qt)}return new tn(b);default:throw new Error("Invalid GeoJSON object.")}}function Ru(s,u,d,_){return s?s(u,d):new Ro(d,_&&_.markersInheritOptions&&_)}function _l(s){return new xt(s[1],s[0],s[2])}function Oa(s,u,d){for(var _=[],b=0,R=s.length,z;b<R;b++)z=u?Oa(s[b],u-1,d):(d||_l)(s[b]),_.push(z);return _}function Da(s,u){return s=St(s),s.alt!==void 0?[M(s.lng,u),M(s.lat,u),M(s.alt,u)]:[M(s.lng,u),M(s.lat,u)]}function yl(s,u,d,_){for(var b=[],R=0,z=s.length;R<z;R++)b.push(u?yl(s[R],f(s[R])?0:u-1,d,_):Da(s[R],_));return!u&&d&&b.length>0&&b.push(b[0].slice()),b}function dr(s,u){return s.feature?l({},s.feature,{geometry:u}):Co(u)}function Co(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Hs={toGeoJSON:function(s){return dr(this,{type:"Point",coordinates:Da(this.getLatLng(),s)})}};Ro.include(Hs),xu.include(Hs),Pa.include(Hs),$r.include({toGeoJSON:function(s){var u=!f(this._latlngs),d=yl(this._latlngs,u?1:0,!1,s);return dr(this,{type:(u?"Multi":"")+"LineString",coordinates:d})}}),Io.include({toGeoJSON:function(s){var u=!f(this._latlngs),d=u&&!f(this._latlngs[0]),_=yl(this._latlngs,d?2:u?1:0,!0,s);return u||(_=[_]),dr(this,{type:(d?"Multi":"")+"Polygon",coordinates:_})}}),un.include({toMultiPoint:function(s){var u=[];return this.eachLayer(function(d){u.push(d.toGeoJSON(s).geometry.coordinates)}),dr(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(s){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(s);var d=u==="GeometryCollection",_=[];return this.eachLayer(function(b){if(b.toGeoJSON){var R=b.toGeoJSON(s);if(d)_.push(R.geometry);else{var z=Co(R);z.type==="FeatureCollection"?_.push.apply(_,z.features):_.push(z)}}}),d?dr(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function vl(s,u){return new zi(s,u)}var oh=vl,Lr=qe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,u,d){this._url=s,this._bounds=Et(u),et(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(he(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){He(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Cr(this._image),this},bringToBack:function(){return this._map&&cs(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Et(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",u=this._image=s?this._url:we("img");if(he(u,"leaflet-image-layer"),this._zoomAnimated&&he(u,"leaflet-zoom-animated"),this.options.className&&he(u,this.options.className),u.onselectstart=P,u.onmousemove=P,u.onload=p(this.fire,this,"load"),u.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(s){var u=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;fi(this._image,d,u)},_reset:function(){var s=this._image,u=new ut(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=u.getSize();ie(s,u.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){ln(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),Po=function(s,u,d){return new Lr(s,u,d)},Tl=Lr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",u=this._image=s?this._url:we("video");if(he(u,"leaflet-image-layer"),this._zoomAnimated&&he(u,"leaflet-zoom-animated"),this.options.className&&he(u,this.options.className),u.onselectstart=P,u.onmousemove=P,u.onloadeddata=p(this.fire,this,"load"),s){for(var d=u.getElementsByTagName("source"),_=[],b=0;b<d.length;b++)_.push(d[b].src);this._url=d.length>0?_:[u.src];return}yt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var R=0;R<this._url.length;R++){var z=we("source");z.src=this._url[R],u.appendChild(z)}}});function ah(s,u,d){return new Tl(s,u,d)}var ps=Lr.extend({_initImage:function(){var s=this._image=this._url;he(s,"leaflet-image-layer"),this._zoomAnimated&&he(s,"leaflet-zoom-animated"),this.options.className&&he(s,this.options.className),s.onselectstart=P,s.onmousemove=P}});function lh(s,u,d){return new ps(s,u,d)}var mr=qe.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,u){s&&(s instanceof xt||yt(s))?(this._latlng=St(s),et(this,u)):(et(this,s),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&ln(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&ln(this._container,1),this.bringToFront(),this.options.interactive&&(he(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(ln(this._container,0),this._removeTimeout=setTimeout(p(He,void 0,this._container),200)):He(this._container),this.options.interactive&&(Ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=St(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Cr(this._container),this},bringToBack:function(){return this._map&&cs(this._container),this},_prepareOpen:function(s){var u=this._source;if(!u._map)return!1;if(u instanceof tn){u=null;var d=this._source._layers;for(var _ in d)if(d[_]._map){u=d[_];break}if(!u)return!1;this._source=u}if(!s)if(u.getCenter)s=u.getCenter();else if(u.getLatLng)s=u.getLatLng();else if(u.getBounds)s=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")s.innerHTML=u;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),u=D(this.options.offset),d=this._getAnchor();this._zoomAnimated?ie(this._container,s.add(d)):u=u.add(s).add(d);var _=this._containerBottom=-u.y,b=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=_+"px",this._container.style.left=b+"px"}},_getAnchor:function(){return[0,0]}});_e.include({_initOverlay:function(s,u,d,_){var b=u;return b instanceof s||(b=new s(_).setContent(u)),d&&b.setLatLng(d),b}}),qe.include({_initOverlay:function(s,u,d,_){var b=d;return b instanceof s?(et(b,_),b._source=this):(b=u&&!_?u:new s(_,this),b.setContent(d)),b}});var Na=mr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,mr.prototype.openOn.call(this,s)},onAdd:function(s){mr.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Xr||this._source.on("preclick",Ai))},onRemove:function(s){mr.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Xr||this._source.off("preclick",Ai))},getEvents:function(){var s=mr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",u=this._container=we("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=we("div",s+"-content-wrapper",u);if(this._contentNode=we("div",s+"-content",d),Zr(u),hr(this._contentNode),Kt(u,"contextmenu",Ai),this._tipContainer=we("div",s+"-tip-container",u),this._tip=we("div",s+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=we("a",s+"-close-button",u);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',Kt(_,"click",function(b){Qe(b),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,u=s.style;u.width="",u.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),u.width=d+1+"px",u.whiteSpace="",u.height="";var _=s.offsetHeight,b=this.options.maxHeight,R="leaflet-popup-scrolled";b&&_>b?(u.height=b+"px",he(s,R)):Ze(s,R),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();ie(this._container,u.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,u=parseInt(Ir(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+u,_=this._containerWidth,b=new ot(this._containerLeft,-d-this._containerBottom);b._add(Li(this._container));var R=s.layerPointToContainerPoint(b),z=D(this.options.autoPanPadding),Q=D(this.options.autoPanPaddingTopLeft||z),st=D(this.options.autoPanPaddingBottomRight||z),vt=s.getSize(),Lt=0,Ut=0;R.x+_+st.x>vt.x&&(Lt=R.x+_-vt.x+st.x),R.x-Lt-Q.x<0&&(Lt=R.x-Q.x),R.y+d+st.y>vt.y&&(Ut=R.y+d-vt.y+st.y),R.y-Ut-Q.y<0&&(Ut=R.y-Q.y),(Lt||Ut)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([Lt,Ut]))}},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),bd=function(s,u){return new Na(s,u)};_e.mergeOptions({closePopupOnClick:!0}),_e.include({openPopup:function(s,u,d){return this._initOverlay(Na,s,u,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),qe.include({bindPopup:function(s,u){return this._popup=this._initOverlay(Na,this._popup,s,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof tn||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){ti(s);var u=s.layer||s.target;if(this._popup._source===u&&!(u instanceof Xr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=u,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var El=mr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){mr.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){mr.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=mr.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",u=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=we("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+y(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var u,d,_=this._map,b=this._container,R=_.latLngToContainerPoint(_.getCenter()),z=_.layerPointToContainerPoint(s),Q=this.options.direction,st=b.offsetWidth,vt=b.offsetHeight,Lt=D(this.options.offset),Ut=this._getAnchor();Q==="top"?(u=st/2,d=vt):Q==="bottom"?(u=st/2,d=0):Q==="center"?(u=st/2,d=vt/2):Q==="right"?(u=0,d=vt/2):Q==="left"?(u=st,d=vt/2):z.x<R.x?(Q="right",u=0,d=vt/2):(Q="left",u=st+(Lt.x+Ut.x)*2,d=vt/2),s=s.subtract(D(u,d,!0)).add(Lt).add(Ut),Ze(b,"leaflet-tooltip-right"),Ze(b,"leaflet-tooltip-left"),Ze(b,"leaflet-tooltip-top"),Ze(b,"leaflet-tooltip-bottom"),he(b,"leaflet-tooltip-"+Q),ie(b,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&ln(this._container,s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(u)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),wd=function(s,u){return new El(s,u)};_e.include({openTooltip:function(s,u,d){return this._initOverlay(El,s,u,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),qe.include({bindTooltip:function(s,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(El,this._tooltip,s,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var u=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[u](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof tn||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&(Kt(u,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Kt(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var u=s.latlng,d,_;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),_=this._map.containerPointToLayerPoint(d),u=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(u)}});var Iu=Nr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var u=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Ln(u),u.appendChild(d.html)):u.innerHTML=d.html!==!1?d.html:"",d.bgPos){var _=D(d.bgPos);u.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function uh(s){return new Iu(s)}Nr.Default=xo;var qs=qe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Bt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){et(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),He(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Cr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(cs(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=E(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof ot?s:new ot(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var u=this.getPane().children,d=-s(-1/0,1/0),_=0,b=u.length,R;_<b;_++)R=u[_].style.zIndex,u[_]!==this._container&&R&&(d=s(d,+R));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Bt.ielt9){ln(this._container,this.options.opacity);var s=+new Date,u=!1,d=!1;for(var _ in this._tiles){var b=this._tiles[_];if(!(!b.current||!b.loaded)){var R=Math.min(1,(s-b.loaded)/200);ln(b.el,R),R<1?u=!0:(b.active?d=!0:this._onOpaqueTile(b),b.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),u&&(H(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this))}},_onOpaqueTile:P,_initContainer:function(){this._container||(this._container=we("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,u=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=u-Math.abs(s-d),this._onUpdateLevel(d)):(He(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var _=this._levels[s],b=this._map;return _||(_=this._levels[s]={},_.el=we("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=u,_.origin=b.project(b.unproject(b.getPixelOrigin()),s).round(),_.zoom=s,this._setZoomTransform(_,b.getCenter(),b.getZoom()),P(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:P,_onRemoveLevel:P,_onCreateLevel:P,_pruneTiles:function(){if(this._map){var s,u,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)u=this._tiles[s],u.retain=u.current;for(s in this._tiles)if(u=this._tiles[s],u.current&&!u.active){var _=u.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var u in this._tiles)this._tiles[u].coords.z===s&&this._removeTile(u)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)He(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,u,d,_){var b=Math.floor(s/2),R=Math.floor(u/2),z=d-1,Q=new ot(+b,+R);Q.z=+z;var st=this._tileCoordsToKey(Q),vt=this._tiles[st];return vt&&vt.active?(vt.retain=!0,!0):(vt&&vt.loaded&&(vt.retain=!0),z>_?this._retainParent(b,R,z,_):!1)},_retainChildren:function(s,u,d,_){for(var b=2*s;b<2*s+2;b++)for(var R=2*u;R<2*u+2;R++){var z=new ot(b,R);z.z=d+1;var Q=this._tileCoordsToKey(z),st=this._tiles[Q];if(st&&st.active){st.retain=!0;continue}else st&&st.loaded&&(st.retain=!0);d+1<_&&this._retainChildren(b,R,d+1,_)}},_resetView:function(s){var u=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var u=this.options;return u.minNativeZoom!==void 0&&s<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<s?u.maxNativeZoom:s},_setView:function(s,u,d,_){var b=Math.round(u);this.options.maxZoom!==void 0&&b>this.options.maxZoom||this.options.minZoom!==void 0&&b<this.options.minZoom?b=void 0:b=this._clampZoom(b);var R=this.options.updateWhenZooming&&b!==this._tileZoom;(!_||R)&&(this._tileZoom=b,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),b!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,u)},_setZoomTransforms:function(s,u){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,u)},_setZoomTransform:function(s,u,d){var _=this._map.getZoomScale(d,s.zoom),b=s.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(u,d)).round();Bt.any3d?fi(s.el,b,_):ie(s.el,b)},_resetGrid:function(){var s=this._map,u=s.options.crs,d=this._tileSize=this.getTileSize(),_=this._tileZoom,b=this._map.getPixelWorldBounds(this._tileZoom);b&&(this._globalTileRange=this._pxBoundsToTileRange(b)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,u.wrapLng[0]],_).x/d.x),Math.ceil(s.project([0,u.wrapLng[1]],_).x/d.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([u.wrapLat[0],0],_).y/d.x),Math.ceil(s.project([u.wrapLat[1],0],_).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var u=this._map,d=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),_=u.getZoomScale(d,this._tileZoom),b=u.project(s,this._tileZoom).floor(),R=u.getSize().divideBy(_*2);return new ut(b.subtract(R),b.add(R))},_update:function(s){var u=this._map;if(u){var d=this._clampZoom(u.getZoom());if(s===void 0&&(s=u.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(s),b=this._pxBoundsToTileRange(_),R=b.getCenter(),z=[],Q=this.options.keepBuffer,st=new ut(b.getBottomLeft().subtract([Q,-Q]),b.getTopRight().add([Q,-Q]));if(!(isFinite(b.min.x)&&isFinite(b.min.y)&&isFinite(b.max.x)&&isFinite(b.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var vt in this._tiles){var Lt=this._tiles[vt].coords;(Lt.z!==this._tileZoom||!st.contains(new ot(Lt.x,Lt.y)))&&(this._tiles[vt].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var Ut=b.min.y;Ut<=b.max.y;Ut++)for(var qt=b.min.x;qt<=b.max.x;qt++){var ue=new ot(qt,Ut);if(ue.z=this._tileZoom,!!this._isValidTile(ue)){var cn=this._tiles[this._tileCoordsToKey(ue)];cn?cn.current=!0:z.push(ue)}}if(z.sort(function(ni,$i){return ni.distanceTo(R)-$i.distanceTo(R)}),z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yn=document.createDocumentFragment();for(qt=0;qt<z.length;qt++)this._addTile(z[qt],yn);this._level.el.appendChild(yn)}}}},_isValidTile:function(s){var u=this._map.options.crs;if(!u.infinite){var d=this._globalTileRange;if(!u.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!u.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(s);return Et(this.options.bounds).overlaps(_)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var u=this._map,d=this.getTileSize(),_=s.scaleBy(d),b=_.add(d),R=u.unproject(_,s.z),z=u.unproject(b,s.z);return[R,z]},_tileCoordsToBounds:function(s){var u=this._tileCoordsToNwSe(s),d=new rt(u[0],u[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var u=s.split(":"),d=new ot(+u[0],+u[1]);return d.z=+u[2],d},_removeTile:function(s){var u=this._tiles[s];u&&(He(u.el),delete this._tiles[s],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){he(s,"leaflet-tile");var u=this.getTileSize();s.style.width=u.x+"px",s.style.height=u.y+"px",s.onselectstart=P,s.onmousemove=P,Bt.ielt9&&this.options.opacity<1&&ln(s,this.options.opacity)},_addTile:function(s,u){var d=this._getTilePos(s),_=this._tileCoordsToKey(s),b=this.createTile(this._wrapCoords(s),p(this._tileReady,this,s));this._initTile(b),this.createTile.length<2&&B(p(this._tileReady,this,s,null,b)),ie(b,d),this._tiles[_]={el:b,coords:s,current:!0},u.appendChild(b),this.fire("tileloadstart",{tile:b,coords:s})},_tileReady:function(s,u,d){u&&this.fire("tileerror",{error:u,tile:d,coords:s});var _=this._tileCoordsToKey(s);d=this._tiles[_],d&&(d.loaded=+new Date,this._map._fadeAnimated?(ln(d.el,0),H(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),u||(he(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Bt.ielt9||!this._map._fadeAnimated?B(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var u=new ot(this._wrapX?x(s.x,this._wrapX):s.x,this._wrapY?x(s.y,this._wrapY):s.y);return u.z=s.z,u},_pxBoundsToTileRange:function(s){var u=this.getTileSize();return new ut(s.min.unscaleBy(u).floor(),s.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function pr(s){return new qs(s)}var Fs=qs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,u){this._url=s,u=et(this,u),u.detectRetina&&Bt.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,u){return this._url===s&&u===void 0&&(u=!0),this._url=s,u||this.redraw(),this},createTile:function(s,u){var d=document.createElement("img");return Kt(d,"load",p(this._tileOnLoad,this,u,d)),Kt(d,"error",p(this._tileOnError,this,u,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var u={r:Bt.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(u.y=d),u["-y"]=d}return ht(this._url,l(u,this.options))},_tileOnLoad:function(s,u){Bt.ielt9?setTimeout(p(s,this,null,u),0):s(null,u)},_tileOnError:function(s,u,d){var _=this.options.errorTileUrl;_&&u.getAttribute("src")!==_&&(u.src=_),s(d,u)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,u=this.options.maxZoom,d=this.options.zoomReverse,_=this.options.zoomOffset;return d&&(s=u-s),s+_},_getSubdomain:function(s){var u=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var s,u;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(u=this._tiles[s].el,u.onload=P,u.onerror=P,!u.complete)){u.src=Pt;var d=this._tiles[s].coords;He(u),delete this._tiles[s],this.fire("tileabort",{tile:u,coords:d})}},_removeTile:function(s){var u=this._tiles[s];if(u)return u.el.setAttribute("src",Pt),qs.prototype._removeTile.call(this,s)},_tileReady:function(s,u,d){if(!(!this._map||d&&d.getAttribute("src")===Pt))return qs.prototype._tileReady.call(this,s,u,d)}});function Ui(s,u){return new Fs(s,u)}var ji=Fs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,u){this._url=s;var d=l({},this.defaultWmsParams);for(var _ in u)_ in this.options||(d[_]=u[_]);u=et(this,u);var b=u.detectRetina&&Bt.retina?2:1,R=this.getTileSize();d.width=R.x*b,d.height=R.y*b,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Fs.prototype.onAdd.call(this,s)},getTileUrl:function(s){var u=this._tileCoordsToNwSe(s),d=this._crs,_=wt(d.project(u[0]),d.project(u[1])),b=_.min,R=_.max,z=(this._wmsVersion>=1.3&&this._crs===xn?[b.y,b.x,R.y,R.x]:[b.x,b.y,R.x,R.y]).join(","),Q=Fs.prototype.getTileUrl.call(this,s);return Q+lt(this.wmsParams,Q,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+z},setParams:function(s,u){return l(this.wmsParams,s),u||this.redraw(),this}});function Mo(s,u){return new ji(s,u)}Fs.WMS=ji,Ui.wms=Mo;var gr=qe.extend({options:{padding:.1},initialize:function(s){et(this,s),y(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),he(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,u){var d=this._map.getZoomScale(u,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),b=this._map.project(this._center,u),R=_.multiplyBy(-d).add(b).subtract(this._map._getNewPixelOrigin(s,u));Bt.any3d?fi(this._container,R,d):ie(this._container,R)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,u=this._map.getSize(),d=this._map.containerPointToLayerPoint(u.multiplyBy(-s)).round();this._bounds=new ut(d,d.add(u.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),La=gr.extend({options:{tolerance:0},getEvents:function(){var s=gr.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){gr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Kt(s,"mousemove",this._onMouseMove,this),Kt(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Kt(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){H(this._redrawRequest),delete this._ctx,He(this._container),Ne(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var u in this._layers)s=this._layers[u],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gr.prototype._update.call(this);var s=this._bounds,u=this._container,d=s.getSize(),_=Bt.retina?2:1;ie(u,s.min),u.width=_*d.x,u.height=_*d.y,u.style.width=d.x+"px",u.style.height=d.y+"px",Bt.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){gr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[y(s)]=s;var u=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var u=s._order,d=u.next,_=u.prev;d?d.prev=_:this._drawLast=_,_?_.next=d:this._drawFirst=d,delete s._order,delete this._layers[y(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var u=s.options.dashArray.split(/[, ]+/),d=[],_,b;for(b=0;b<u.length;b++){if(_=Number(u[b]),isNaN(_))return;d.push(_)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||B(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var u=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ut,this._redrawBounds.extend(s._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(s._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var u=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,u=this._redrawBounds;if(this._ctx.save(),u){var d=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)s=_.layer,(!u||s._pxBounds&&s._pxBounds.intersects(u))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,u){if(this._drawing){var d,_,b,R,z=s._parts,Q=z.length,st=this._ctx;if(Q){for(st.beginPath(),d=0;d<Q;d++){for(_=0,b=z[d].length;_<b;_++)R=z[d][_],st[_?"lineTo":"moveTo"](R.x,R.y);u&&st.closePath()}this._fillStroke(st,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var u=s._point,d=this._ctx,_=Math.max(Math.round(s._radius),1),b=(Math.max(Math.round(s._radiusY),1)||_)/_;b!==1&&(d.save(),d.scale(1,b)),d.beginPath(),d.arc(u.x,u.y/b,_,0,Math.PI*2,!1),b!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,u){var d=u.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(u.options&&u.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var u=this._map.mouseEventToLayerPoint(s),d,_,b=this._drawFirst;b;b=b.next)d=b.layer,d.options.interactive&&d._containsPoint(u)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(_=d);this._fireEvent(_?[_]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,u)}},_handleMouseOut:function(s){var u=this._hoveredLayer;u&&(Ze(this._container,"leaflet-interactive"),this._fireEvent([u],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,u){if(!this._mouseHoverThrottled){for(var d,_,b=this._drawFirst;b;b=b.next)d=b.layer,d.options.interactive&&d._containsPoint(u)&&(_=d);_!==this._hoveredLayer&&(this._handleMouseOut(s),_&&(he(this._container,"leaflet-interactive"),this._fireEvent([_],s,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,u,d){this._map._fireDOMEvent(u,d||u.type,s)},_bringToFront:function(s){var u=s._order;if(u){var d=u.next,_=u.prev;if(d)d.prev=_;else return;_?_.next=d:d&&(this._drawFirst=d),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(s)}},_bringToBack:function(s){var u=s._order;if(u){var d=u.next,_=u.prev;if(_)_.next=d;else return;d?d.prev=_:_&&(this._drawLast=_),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(s)}}});function ka(s){return Bt.canvas?new La(s):null}var Gs=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Oo={_initContainer:function(){this._container=we("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(gr.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var u=s._container=Gs("shape");he(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",s._path=Gs("path"),u.appendChild(s._path),this._updateStyle(s),this._layers[y(s)]=s},_addPath:function(s){var u=s._container;this._container.appendChild(u),s.options.interactive&&s.addInteractiveTarget(u)},_removePath:function(s){var u=s._container;He(u),s.removeInteractiveTarget(u),delete this._layers[y(s)]},_updateStyle:function(s){var u=s._stroke,d=s._fill,_=s.options,b=s._container;b.stroked=!!_.stroke,b.filled=!!_.fill,_.stroke?(u||(u=s._stroke=Gs("stroke")),b.appendChild(u),u.weight=_.weight+"px",u.color=_.color,u.opacity=_.opacity,_.dashArray?u.dashStyle=yt(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=_.lineCap.replace("butt","flat"),u.joinstyle=_.lineJoin):u&&(b.removeChild(u),s._stroke=null),_.fill?(d||(d=s._fill=Gs("fill")),b.appendChild(d),d.color=_.fillColor||_.color,d.opacity=_.fillOpacity):d&&(b.removeChild(d),s._fill=null)},_updateCircle:function(s){var u=s._point.round(),d=Math.round(s._radius),_=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+u.x+","+u.y+" "+d+","+_+" 0,"+65535*360)},_setPath:function(s,u){s._path.v=u},_bringToFront:function(s){Cr(s._container)},_bringToBack:function(s){cs(s._container)}},Va=Bt.vml?Gs:Hn,gs=gr.extend({_initContainer:function(){this._container=Va("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Va("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){He(this._container),Ne(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gr.prototype._update.call(this);var s=this._bounds,u=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,d.setAttribute("width",u.x),d.setAttribute("height",u.y)),ie(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(s){var u=s._path=Va("path");s.options.className&&he(u,s.options.className),s.options.interactive&&he(u,"leaflet-interactive"),this._updateStyle(s),this._layers[y(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){He(s._path),s.removeInteractiveTarget(s._path),delete this._layers[y(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var u=s._path,d=s.options;u&&(d.stroke?(u.setAttribute("stroke",d.color),u.setAttribute("stroke-opacity",d.opacity),u.setAttribute("stroke-width",d.weight),u.setAttribute("stroke-linecap",d.lineCap),u.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?u.setAttribute("stroke-dasharray",d.dashArray):u.removeAttribute("stroke-dasharray"),d.dashOffset?u.setAttribute("stroke-dashoffset",d.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),d.fill?(u.setAttribute("fill",d.fillColor||d.color),u.setAttribute("fill-opacity",d.fillOpacity),u.setAttribute("fill-rule",d.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(s,u){this._setPath(s,Ti(s._parts,u))},_updateCircle:function(s){var u=s._point,d=Math.max(Math.round(s._radius),1),_=Math.max(Math.round(s._radiusY),1)||d,b="a"+d+","+_+" 0 1,0 ",R=s._empty()?"M0 0":"M"+(u.x-d)+","+u.y+b+d*2+",0 "+b+-d*2+",0 ";this._setPath(s,R)},_setPath:function(s,u){s._path.setAttribute("d",u)},_bringToFront:function(s){Cr(s._path)},_bringToBack:function(s){cs(s._path)}});Bt.vml&&gs.include(Oo);function Zs(s){return Bt.svg||Bt.vml?new gs(s):null}_e.include({getRenderer:function(s){var u=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var u=this._paneRenderers[s];return u===void 0&&(u=this._createRenderer({pane:s}),this._paneRenderers[s]=u),u},_createRenderer:function(s){return this.options.preferCanvas&&ka(s)||Zs(s)}});var ch=Io.extend({initialize:function(s,u){Io.prototype.initialize.call(this,this._boundsToLatLngs(s),u)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Et(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function Bi(s,u){return new ch(s,u)}gs.create=Va,gs.pointsToPath=Ti,zi.geometryToLayer=Ma,zi.coordsToLatLng=_l,zi.coordsToLatLngs=Oa,zi.latLngToCoords=Da,zi.latLngsToCoords=yl,zi.getFeature=dr,zi.asFeature=Co,_e.mergeOptions({boxZoom:!0});var bl=xi.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Kt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ne(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){He(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Jn(),Vs(),this._startPoint=this._map.mouseEventToContainerPoint(s),Kt(document,{contextmenu:ti,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=we("div","leaflet-zoom-box",this._container),he(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var u=new ut(this._point,this._startPoint),d=u.getSize();ie(this._box,u.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(He(this._box),Ze(this._container,"leaflet-crosshair")),lr(),Sa(),Ne(document,{contextmenu:ti,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var u=new rt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});_e.addInitHook("addHandler","boxZoom",bl),_e.mergeOptions({doubleClickZoom:!0});var kr=xi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var u=this._map,d=u.getZoom(),_=u.options.zoomDelta,b=s.originalEvent.shiftKey?d-_:d+_;u.options.doubleClickZoom==="center"?u.setZoom(b):u.setZoomAround(s.containerPoint,b)}});_e.addInitHook("addHandler","doubleClickZoom",kr),_e.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Cu=xi.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new fr(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}he(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ze(this._map._container,"leaflet-grab"),Ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=Et(this._map.options.maxBounds);this._offsetLimit=wt(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var u=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(u),this._prunePositions(u)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,u){return s-(s-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;s.x<u.min.x&&(s.x=this._viscousLimit(s.x,u.min.x)),s.y<u.min.y&&(s.y=this._viscousLimit(s.y,u.min.y)),s.x>u.max.x&&(s.x=this._viscousLimit(s.x,u.max.x)),s.y>u.max.y&&(s.y=this._viscousLimit(s.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,u=Math.round(s/2),d=this._initialWorldOffset,_=this._draggable._newPos.x,b=(_-u+d)%s+u-d,R=(_+u+d)%s-u-d,z=Math.abs(b+d)<Math.abs(R+d)?b:R;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=z},_onDragEnd:function(s){var u=this._map,d=u.options,_=!d.inertia||s.noInertia||this._times.length<2;if(u.fire("dragend",s),_)u.fire("moveend");else{this._prunePositions(+new Date);var b=this._lastPos.subtract(this._positions[0]),R=(this._lastTime-this._times[0])/1e3,z=d.easeLinearity,Q=b.multiplyBy(z/R),st=Q.distanceTo([0,0]),vt=Math.min(d.inertiaMaxSpeed,st),Lt=Q.multiplyBy(vt/st),Ut=vt/(d.inertiaDeceleration*z),qt=Lt.multiplyBy(-Ut/2).round();!qt.x&&!qt.y?u.fire("moveend"):(qt=u._limitOffset(qt,u.options.maxBounds),B(function(){u.panBy(qt,{duration:Ut,easeLinearity:z,noMoveStart:!0,animate:!0})}))}}});_e.addInitHook("addHandler","dragging",Cu),_e.mergeOptions({keyboard:!0,keyboardPanDelta:80});var za=xi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Kt(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ne(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,u=document.documentElement,d=s.scrollTop||u.scrollTop,_=s.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(_,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var u=this._panKeys={},d=this.keyCodes,_,b;for(_=0,b=d.left.length;_<b;_++)u[d.left[_]]=[-1*s,0];for(_=0,b=d.right.length;_<b;_++)u[d.right[_]]=[s,0];for(_=0,b=d.down.length;_<b;_++)u[d.down[_]]=[0,s];for(_=0,b=d.up.length;_<b;_++)u[d.up[_]]=[0,-1*s]},_setZoomDelta:function(s){var u=this._zoomKeys={},d=this.keyCodes,_,b;for(_=0,b=d.zoomIn.length;_<b;_++)u[d.zoomIn[_]]=s;for(_=0,b=d.zoomOut.length;_<b;_++)u[d.zoomOut[_]]=-s},_addHooks:function(){Kt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ne(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var u=s.keyCode,d=this._map,_;if(u in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(_=this._panKeys[u],s.shiftKey&&(_=D(_).multiplyBy(3)),d.options.maxBounds&&(_=d._limitOffset(D(_),d.options.maxBounds)),d.options.worldCopyJump){var b=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(_)));d.panTo(b)}else d.panBy(_)}else if(u in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;ti(s)}}});_e.addInitHook("addHandler","keyboard",za),_e.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var _s=xi.extend({addHooks:function(){Kt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ne(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var u=zs(s),d=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var _=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),_),ti(s)},_performZoom:function(){var s=this._map,u=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),b=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,R=d?Math.ceil(b/d)*d:b,z=s._limitZoom(u+(this._delta>0?R:-R))-u;this._delta=0,this._startTime=null,z&&(s.options.scrollWheelZoom==="center"?s.setZoom(u+z):s.setZoomAround(this._lastMousePos,u+z))}});_e.addInitHook("addHandler","scrollWheelZoom",_s);var Pu=600;_e.mergeOptions({tapHold:Bt.touchNative&&Bt.safari&&Bt.mobile,tapTolerance:15});var wl=xi.extend({addHooks:function(){Kt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ne(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var u=s.touches[0];this._startPos=this._newPos=new ot(u.clientX,u.clientY),this._holdTimeout=setTimeout(p(function(){this._cancel(),this._isTapValid()&&(Kt(document,"touchend",Qe),Kt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),Pu),Kt(document,"touchend touchcancel contextmenu",this._cancel,this),Kt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Ne(document,"touchend",Qe),Ne(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Ne(document,"touchend touchcancel contextmenu",this._cancel,this),Ne(document,"touchmove",this._onMove,this)},_onMove:function(s){var u=s.touches[0];this._newPos=new ot(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,u){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});d._simulated=!0,u.target.dispatchEvent(d)}});_e.addInitHook("addHandler","tapHold",wl),_e.mergeOptions({touchZoom:Bt.touch,bounceAtZoomLimits:!0});var Ws=xi.extend({addHooks:function(){he(this._map._container,"leaflet-touch-zoom"),Kt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ze(this._map._container,"leaflet-touch-zoom"),Ne(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var u=this._map;if(!(!s.touches||s.touches.length!==2||u._animatingZoom||this._zooming)){var d=u.mouseEventToContainerPoint(s.touches[0]),_=u.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(d.add(_)._divideBy(2))),this._startDist=d.distanceTo(_),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),Kt(document,"touchmove",this._onTouchMove,this),Kt(document,"touchend touchcancel",this._onTouchEnd,this),Qe(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var u=this._map,d=u.mouseEventToContainerPoint(s.touches[0]),_=u.mouseEventToContainerPoint(s.touches[1]),b=d.distanceTo(_)/this._startDist;if(this._zoom=u.getScaleZoom(b,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&b<1||this._zoom>u.getMaxZoom()&&b>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,b===1)return}else{var R=d._add(_)._divideBy(2)._subtract(this._centerPoint);if(b===1&&R.x===0&&R.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(R),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),H(this._animRequest);var z=p(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=B(z,this,!0),Qe(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,H(this._animRequest),Ne(document,"touchmove",this._onTouchMove,this),Ne(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});_e.addInitHook("addHandler","touchZoom",Ws),_e.BoxZoom=bl,_e.DoubleClickZoom=kr,_e.Drag=Cu,_e.Keyboard=za,_e.ScrollWheelZoom=_s,_e.TapHold=wl,_e.TouchZoom=Ws,n.Bounds=ut,n.Browser=Bt,n.CRS=Ee,n.Canvas=La,n.Circle=xu,n.CircleMarker=Pa,n.Class=ge,n.Control=Zn,n.DivIcon=Iu,n.DivOverlay=mr,n.DomEvent=hl,n.DomUtil=Aa,n.Draggable=fr,n.Evented=At,n.FeatureGroup=tn,n.GeoJSON=zi,n.GridLayer=qs,n.Handler=xi,n.Icon=Nr,n.ImageOverlay=Lr,n.LatLng=xt,n.LatLngBounds=rt,n.Layer=qe,n.LayerGroup=un,n.LineUtil=C,n.Map=_e,n.Marker=Ro,n.Mixin=js,n.Path=Xr,n.Point=ot,n.PolyUtil=wo,n.Polygon=Io,n.Polyline=$r,n.Popup=Na,n.PosAnimation=Us,n.Projection=Ct,n.Rectangle=ch,n.Renderer=gr,n.SVG=gs,n.SVGOverlay=ps,n.TileLayer=Fs,n.Tooltip=El,n.Transformation=Be,n.Util=N,n.VideoOverlay=Tl,n.bind=p,n.bounds=wt,n.canvas=ka,n.circle=Td,n.circleMarker=sh,n.control=ei,n.divIcon=uh,n.extend=l,n.featureGroup=Dr,n.geoJSON=vl,n.geoJson=oh,n.gridLayer=pr,n.icon=gl,n.imageOverlay=Po,n.latLng=St,n.latLngBounds=Et,n.layerGroup=Kr,n.map=Mr,n.marker=Au,n.point=D,n.polygon=Vi,n.polyline=Ed,n.popup=bd,n.rectangle=Bi,n.setOptions=et,n.stamp=y,n.svg=Zs,n.svgOverlay=lh,n.tileLayer=Ui,n.tooltip=wd,n.transformation=oe,n.version=o,n.videoOverlay=ah;var Do=window.L;n.noConflict=function(){return window.L=Do,this},window.L=n}))})(fc,fc.exports)),fc.exports}var fu=W1();const so=xT(fu);function Wf(r,t,n){return Object.freeze({instance:r,context:t,container:n})}function Yf(r,t){return t==null?function(o,l){const h=G.useRef(void 0);return h.current||(h.current=r(o,l)),h}:function(o,l){const h=G.useRef(void 0);h.current||(h.current=r(o,l));const p=G.useRef(o),{instance:v}=h.current;return G.useEffect(function(){p.current!==o&&(t(v,o,p.current),p.current=o)},[v,o,t]),h}}function MT(r,t){G.useEffect(function(){return(t.layerContainer??t.map).addLayer(r.instance),function(){t.layerContainer?.removeLayer(r.instance),t.map.removeLayer(r.instance)}},[t,r])}function OT(r){return function(n){const o=Gf(),l=r(Zf(n,o),o);return IT(o.map,n.attribution),Hp(l.current,n.eventHandlers),MT(l.current,o),l}}function Y1(r,t){const n=G.useRef(void 0);G.useEffect(function(){if(t.pathOptions!==n.current){const l=t.pathOptions??{};r.instance.setStyle(l),n.current=l}},[r,t])}function Q1(r){return function(n){const o=Gf(),l=r(Zf(n,o),o);return Hp(l.current,n.eventHandlers),MT(l.current,o),Y1(l.current,n),l}}function K1(r,t){const n=Yf(r,t),o=OT(n);return PT(o)}function X1(r,t){const n=Yf(r),o=G1(n,t);return q1(o)}function $1(r,t){const n=Yf(r,t),o=Q1(n);return PT(o)}function J1(r,t){const n=Yf(r,t),o=OT(n);return F1(o)}function tS(r,t,n){const{opacity:o,zIndex:l}=t;o!=null&&o!==n.opacity&&r.setOpacity(o),l!=null&&l!==n.zIndex&&r.setZIndex(l)}function Hc(){return Gf().map}function qp(r){const t=Hc();return G.useEffect(function(){return t.on(r),function(){t.off(r)}},[t,r]),t}function eS({bounds:r,boundsOptions:t,center:n,children:o,className:l,id:h,placeholder:p,style:v,whenReady:y,zoom:E,...x},P){const[M]=G.useState({className:l,id:h,style:v}),[q,W]=G.useState(null),et=G.useRef(void 0);G.useImperativeHandle(P,()=>q?.map??null,[q]);const lt=G.useCallback(ht=>{if(ht!==null&&!et.current){const yt=new fu.Map(ht,x);et.current=yt,n!=null&&E!=null?yt.setView(n,E):r!=null&&yt.fitBounds(r,t),y!=null&&yt.whenReady(y),W(H1(yt))}},[]);G.useEffect(()=>()=>{q?.map.remove()},[q]);const Tt=q?dp.createElement(Bp,{value:q},o):p??null;return dp.createElement("div",{...M,ref:lt},Tt)}const xc=G.forwardRef(eS),is=K1(function({position:t,...n},o){const l=new fu.Marker(t,n);return Wf(l,CT(o,{overlayContainer:l}))},function(t,n,o){n.position!==o.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==o.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==o.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==o.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==o.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),nS=$1(function({positions:t,...n},o){const l=new fu.Polyline(t,n);return Wf(l,CT(o,{overlayContainer:l}))},function(t,n,o){n.positions!==o.positions&&t.setLatLngs(n.positions)}),Rc=J1(function({url:t,...n},o){const l=new fu.TileLayer(t,Zf(n,o));return Wf(l,o)},function(t,n,o){tS(t,n,o);const{url:l}=n;l!=null&&l!==o.url&&t.setUrl(l)}),Ic=X1(function(t,n){const o=new fu.Tooltip(t,n.overlayContainer);return Wf(o,n)},function(t,n,{position:o},l){G.useEffect(function(){const p=n.overlayContainer;if(p==null)return;const{instance:v}=t,y=x=>{x.tooltip===v&&(o!=null&&v.setLatLng(o),v.update(),l(!0))},E=x=>{x.tooltip===v&&l(!1)};return p.on({tooltipopen:y,tooltipclose:E}),p.bindTooltip(v),function(){p.off({tooltipopen:y,tooltipclose:E}),p._map!=null&&p.unbindTooltip()}},[t,n,l,o])}),qv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",Fp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";delete so.Icon.Default.prototype._getIconUrl;so.Icon.Default.mergeOptions({iconRetinaUrl:qv,iconUrl:qv,shadowUrl:Fp});const Gp=so.icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:Fp,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]}),iS=so.icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png",shadowUrl:Fp,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});function Cc(){const r=Hc();return G.useEffect(()=>{const t=()=>{try{r.invalidateSize()}catch{}};t();const n=setTimeout(t,0),o=setTimeout(t,250),l=()=>t();window.addEventListener("resize",l);const h=r.getContainer(),p=h?.parentElement,v=new ResizeObserver(()=>t());h&&v.observe(h),p&&v.observe(p);const y=so.latLngBounds(so.latLng(-90,-180),so.latLng(90,180)),E=()=>{try{const x=r.getBoundsZoom(y,!0),P=Math.max(0,x);r.setMinZoom(P),r.getZoom()<P&&r.setZoom(P)}catch{}};return E(),r.on("load",()=>{t(),E()}),()=>{clearTimeout(n),clearTimeout(o),window.removeEventListener("resize",l),r.off("load");try{v.disconnect()}catch{}}},[r]),null}function rS(r,t){const n=r>=0?"N":"S",o=t>=0?"E":"W",l=Math.abs(r).toFixed(1),h=Math.abs(t).toFixed(1);return`${l}${n}, ${h}${o}`}function sS(r,t,n,o){const h=E=>E*Math.PI/180,p=h(n-r),v=h(o-t),y=Math.sin(p/2)**2+Math.cos(h(r))*Math.cos(h(n))*Math.sin(v/2)**2;return 6371*2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y))}function Fv(r){return r==null||isNaN(r)?"":r<1?`${Math.round(r*1e3).toLocaleString()} m`:`${Math.round(r).toLocaleString()} km`}function oS(r,t=14916.862){if(r<=100)return 5e3;const n=5e3*Math.exp(-4*r/t);return Math.min(5e3,Math.max(0,Math.round(n)))}function aS({onBack:r}){const[t,n]=G.useState(null),[o,l]=G.useState([]),[h,p]=G.useState(null),[v,y]=G.useState(null),[E,x]=G.useState(null),[P,M]=G.useState(null),[q,W]=G.useState(!1),[et,lt]=G.useState(1),[Tt,ht]=G.useState(0),[yt,Ht]=G.useState(!1),[Pt,zt]=G.useState(0),[V,O]=G.useState(new Set),[k,j]=G.useState(new Set),[B,H]=G.useState([]),N=5;G.useEffect(()=>{t&&!q&&(y(null),x(null),M(null))},[t,q]),G.useEffect(()=>{if(q&&et===N){let rt;const xt=performance.now(),St=0,Ee=Tt,ce=Oe=>1-Math.pow(1-Oe,3),je=Oe=>{const Be=Math.min(1,(Oe-xt)/900),oe=ce(Be),nn=Math.round(St+(Ee-St)*oe);zt(nn),Be<1&&(rt=requestAnimationFrame(je))};return rt=requestAnimationFrame(je),()=>cancelAnimationFrame(rt)}},[q,et,Tt]);function ge(rt){return rt>=24e3?" Mister Birder":rt>=21e3?" Ornithology Legend":rt>=18e3?" Master Ornithologist":rt>=15e3?" Experto Observador":rt>=12e3?" Explorador de Aves":rt>=9e3?" Aprendiz con Talento":rt>=6e3?" Observador Amateur":rt>=3e3?" Novice Adventurer":" Adventurer in Training"}const de=[{name:"North America",bbox:[-170,5,-50,75],weight:.5},{name:"South America",bbox:[-82,-56,-34,12],weight:1},{name:"Europe",bbox:[-31,34,45,72],weight:.5},{name:"Africa",bbox:[-20,-35,52,37],weight:1},{name:"Asia",bbox:[25,-10,180,55],weight:1},{name:"Oceania",bbox:[110,-50,180,0],weight:.5}];function J(){const rt=de.reduce((xt,St)=>xt+St.weight,0);let Et=Math.random()*rt;for(const xt of de)if(Et-=xt.weight,Et<=0)return xt;return de[de.length-1]}async function At(){if(yt)return;Ht(!0),y(null),x(null),M(null),W(!1);const rt=15;let Et=0;for(;Et<rt;){Et++;try{const xt=J(),[St,Ee,ce,je]=xt.bbox,Be=`https://api.inaturalist.org/v1/observations?photos=true&quality_grade=research&order=desc&per_page=100&geo=true&geoprivacy=open&page=${Math.floor(Math.random()*200)}&swlat=${Ee}&swlng=${St}&nelat=${je}&nelng=${ce}&taxon_id=3&captive=false`,oe=await fetch(Be);if(oe.status===429){console.log(" Request limit, waiting 500ms..."),await new Promise(De=>setTimeout(De,500));continue}const nn=await oe.json();if(!nn.results||nn.results.length===0)continue;const wn=nn.results.filter(De=>De.photos&&De.photos.length&&De.geojson?.coordinates&&De.geojson.type==="Point");if(wn.length===0)continue;const Hn=wn[Math.floor(Math.random()*wn.length)],Ti=Hn.geojson.coordinates[1],rn=Hn.geojson.coordinates[0],Nn=rS(Ti,rn),Kn=`https://api.inaturalist.org/v1/observations?photos=true&quality_grade=research&order=desc&per_page=100&geo=true&geoprivacy=open&coordinates_obscured=false&lat=${Ti}&lng=${rn}&radius=50&taxon_id=3&captive=false`,Xn=await fetch(Kn);if(Xn.status===429){console.log(" Cluster request limit, waiting 500ms..."),await new Promise(De=>setTimeout(De,500));continue}const sn=await Xn.json();if(!sn.results||sn.results.length<8)continue;const Ei=sn.results.filter(De=>De.photos&&De.photos.length&&De.geojson?.coordinates&&De.geojson.type==="Point");if(Ei.length>=8){const De=new Map;Ei.forEach(le=>{const ve=le.taxon?.preferred_common_name||le.taxon?.name||"Unknown";De.has(ve)||De.set(ve,le)});let li;De.size>=8?li=[...Array.from(De.values())].sort(()=>Math.random()-.5).slice(0,8):li=[...Ei].sort(()=>Math.random()-.5).slice(0,8);const Zi=li.map(le=>({id:le.id,photo:le.photos[0].url.replace("square","large"),lat:le.geojson.coordinates[1],lon:le.geojson.coordinates[0],species:le.taxon?.preferred_common_name||le.taxon?.name,taxon_id:le.taxon?.id,hotspot:Nn}));l(Zi),requestAnimationFrame(()=>{Zi[0]&&n(Zi[0])}),Ht(!1);return}await new Promise(De=>setTimeout(De,200))}catch(xt){console.error(`Error en intento ${Et}:`,xt),await new Promise(St=>setTimeout(St,500))}}console.error(" No valid cluster found after several attempts"),Ht(!1)}function ot(){return qp({click(rt){q||y(rt.latlng)}}),null}function te(){const rt=Hc();return G.useEffect(()=>{if(!q||!v||!t)return;const Et=so.latLngBounds([v.lat,v.lng],[t.lat,t.lon]),xt=Number(E)||0,St=xt<=50?10:xt<=200?8:xt<=1e3?6:xt<=3e3?5:4;rt.flyToBounds(Et,{padding:[60,60],maxZoom:St,duration:.8})},[q,v,t,E,rt]),null}function D(){if(t&&v){const rt=sS(t.lat,t.lon,v.lat,v.lng);x(rt);const Et=oS(rt);M(Et),ht(xt=>xt+Et),W(!0)}}function ut(){et<N&&!yt&&(l([]),n(null),y(null),x(null),M(null),W(!1),lt(rt=>rt+1),At())}function wt(){yt||(lt(1),ht(0),y(null),x(null),M(null),W(!1),n(null),l([]),O(new Set),j(new Set),H([]),At())}return A.jsxs("div",{className:"container-narrow",style:{padding:"1rem",textAlign:"center"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[A.jsx("button",{onClick:r||(()=>window.history.back()),style:{padding:"0.5rem 1rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:" Back"}),A.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold",margin:0},children:"Birders Place"}),A.jsx("div",{style:{width:"80px"}})," "]}),A.jsx("button",{onClick:o.length===0?At:wt,disabled:yt,style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:yt?"#95a5a6":"#3498db",color:"white",border:"none",borderRadius:"8px",cursor:yt?"not-allowed":"pointer"},children:yt?"Loading...":o.length===0?"Load Observation":"Restart"}),o.length>0&&A.jsxs("div",{style:{marginTop:"1rem"},children:[A.jsx("div",{className:"gallery",children:o.map(rt=>A.jsxs("div",{className:`gallery-item ${t?.id===rt.id?"active":""}`,onClick:()=>{n(rt),p(rt.photo)},children:[A.jsx("img",{src:rt.photo}),q&&A.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0, 0, 0, 0.8)",color:"#fff",padding:"4px 6px",fontSize:"11px",fontWeight:"600",textAlign:"center",borderRadius:"0 0 8px 8px",backdropFilter:"blur(4px)",cursor:"pointer",transition:"background-color 0.2s ease"},onClick:Et=>{Et.stopPropagation();const xt=rt.taxon_id||"3";window.open(`https://www.inaturalist.org/observations?subview=map&taxon_id=${xt}&view=map`,"_blank")},onMouseEnter:Et=>{Et.target.style.backgroundColor="rgba(0, 0, 0, 0.9)"},onMouseLeave:Et=>{Et.target.style.backgroundColor="rgba(0, 0, 0, 0.8)"},children:rt.species})]},rt.id))}),A.jsx("div",{className:"map-wrapper",children:A.jsxs(xc,{center:[20,0],zoom:2,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,style:{height:"100%",width:"100%"},children:[A.jsx(Rc,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OSM</a>  <a href="https://carto.com/">CARTO</a>',noWrap:!0}),A.jsx(Cc,{}),A.jsx(ot,{}),v&&A.jsx(is,{position:[v.lat,v.lng],icon:iS}),q&&A.jsxs(A.Fragment,{children:[A.jsx(te,{}),A.jsx(is,{position:[t.lat,t.lon],icon:Gp}),v&&A.jsx(nS,{positions:[[v.lat,v.lng],[t.lat,t.lon]],pathOptions:{color:"#2ecc71",weight:3}}),v&&A.jsx(is,{position:[(v.lat+t.lat)/2,(v.lng+t.lon)/2],icon:so.divIcon({className:"no-icon",html:"",iconSize:[0,0]}),children:A.jsx(Ic,{permanent:!0,direction:"top",offset:[0,-4],className:"distance-tooltip",children:Fv(Number(E))})})]})]})}),!q&&A.jsx("button",{onClick:D,style:{marginTop:"18px",padding:"0.6rem 1.2rem",backgroundColor:"#27ae60",color:"white",border:"none",borderRadius:"10px",cursor:"pointer"},children:"Verify"}),h&&A.jsxs("div",{className:"lightbox-backdrop",onClick:()=>p(null),children:[A.jsx("button",{className:"lightbox-close",onClick:()=>p(null),children:"Cerrar"}),A.jsx("img",{className:"lightbox-img",src:h,alt:"Foto"})]}),q&&A.jsxs("div",{className:"result-panel",children:[A.jsxs("h3",{style:{margin:0},children:["Round ",et," / ",N]}),A.jsx("div",{style:{marginTop:6,fontSize:"22px",fontWeight:"bold",color:"#f1c40f"},children:`${Number(P).toLocaleString()} points`}),A.jsx("div",{className:"result-bar",title:"Closer  more points",style:{marginTop:8},children:A.jsx("span",{style:{width:`${Math.min(100,P/5e3*100)}%`}})}),A.jsxs("div",{style:{marginTop:10,color:"#ecf0f1"},children:["What you guessed was at",A.jsx("span",{style:{fontWeight:"bold",margin:"0 6px",padding:"2px 6px",background:"#2c3e50",borderRadius:"6px",color:"#f9f9f9"},children:Fv(Number(E)).toUpperCase()}),"from the correct location."]}),A.jsxs("div",{style:{marginTop:8},children:["Total score: ",A.jsx("span",{style:{fontWeight:"bold"},children:Number(Tt).toLocaleString()})]}),et<N?A.jsx("button",{onClick:ut,disabled:yt,style:{marginTop:"12px",padding:"0.6rem 1.2rem",backgroundColor:yt?"#95a5a6":"#8e44ad",color:"white",border:"none",borderRadius:"10px",cursor:yt?"not-allowed":"pointer"},children:yt?"Loading...":"Next round"}):A.jsxs("div",{style:{marginTop:"16px",padding:"14px 12px",background:"#111827",borderRadius:"12px",border:"1px solid #1f2937",color:"#ecf0f1"},children:[A.jsx("div",{style:{fontSize:"18px",opacity:.9,marginBottom:6},children:"Juego terminado!"}),A.jsxs("div",{style:{fontSize:"32px",fontWeight:"800",background:"linear-gradient(90deg,#f59e0b,#fbbf24)",WebkitBackgroundClip:"text",color:"transparent"},children:[Pt.toLocaleString()," points"]}),A.jsx("div",{style:{marginTop:6,fontWeight:"600"},children:ge(Tt)}),A.jsx("button",{onClick:wt,style:{marginTop:"14px",padding:"0.7rem 1.2rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",boxShadow:"0 6px 14px rgba(239,68,68,0.25)"},children:"Jugar de nuevo"})]})]})]}),A.jsxs("div",{style:{position:"fixed",bottom:10,right:10,fontSize:"10px",color:"#666",background:"rgba(255,255,255,0.9)",padding:"4px 8px",borderRadius:"4px",zIndex:1e3},children:["Images: ",A.jsx("a",{href:"https://inaturalist.org",target:"_blank",rel:"noopener noreferrer",style:{color:"#10b981"},children:"iNaturalist"})]})]})}const lS=()=>{};var Gv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=function(r){const t=[];let n=0;for(let o=0;o<r.length;o++){let l=r.charCodeAt(o);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&o+1<r.length&&(r.charCodeAt(o+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++o)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},uS=function(r){const t=[];let n=0,o=0;for(;n<r.length;){const l=r[n++];if(l<128)t[o++]=String.fromCharCode(l);else if(l>191&&l<224){const h=r[n++];t[o++]=String.fromCharCode((l&31)<<6|h&63)}else if(l>239&&l<365){const h=r[n++],p=r[n++],v=r[n++],y=((l&7)<<18|(h&63)<<12|(p&63)<<6|v&63)-65536;t[o++]=String.fromCharCode(55296+(y>>10)),t[o++]=String.fromCharCode(56320+(y&1023))}else{const h=r[n++],p=r[n++];t[o++]=String.fromCharCode((l&15)<<12|(h&63)<<6|p&63)}}return t.join("")},NT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let l=0;l<r.length;l+=3){const h=r[l],p=l+1<r.length,v=p?r[l+1]:0,y=l+2<r.length,E=y?r[l+2]:0,x=h>>2,P=(h&3)<<4|v>>4;let M=(v&15)<<2|E>>6,q=E&63;y||(q=64,p||(M=64)),o.push(n[x],n[P],n[M],n[q])}return o.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(DT(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):uS(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let l=0;l<r.length;){const h=n[r.charAt(l++)],v=l<r.length?n[r.charAt(l)]:0;++l;const E=l<r.length?n[r.charAt(l)]:64;++l;const P=l<r.length?n[r.charAt(l)]:64;if(++l,h==null||v==null||E==null||P==null)throw new cS;const M=h<<2|v>>4;if(o.push(M),E!==64){const q=v<<4&240|E>>2;if(o.push(q),P!==64){const W=E<<6&192|P;o.push(W)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class cS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hS=function(r){const t=DT(r);return NT.encodeByteArray(t,!0)},Sf=function(r){return hS(r).replace(/\./g,"")},LT=function(r){try{return NT.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=()=>fS().__FIREBASE_DEFAULTS__,mS=()=>{if(typeof process>"u"||typeof Gv>"u")return;const r=Gv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},pS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&LT(r[1]);return t&&JSON.parse(t)},Qf=()=>{try{return lS()||dS()||mS()||pS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},kT=r=>Qf()?.emulatorHosts?.[r],gS=r=>{const t=kT(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const o=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),o]:[t.substring(0,n),o]},VT=()=>Qf()?.config,zT=r=>Qf()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function UT(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=t||"demo-project",l=r.iat||0,h=r.sub||r.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${o}`,aud:o,iat:l,exp:l+3600,auth_time:l,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Sf(JSON.stringify(n)),Sf(JSON.stringify(p)),""].join(".")}const vc={};function vS(){const r={prod:[],emulator:[]};for(const t of Object.keys(vc))vc[t]?r.emulator.push(t):r.prod.push(t);return r}function TS(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let Zv=!1;function jT(r,t){if(typeof window>"u"||typeof document>"u"||!du(window.location.host)||vc[r]===t||vc[r]||Zv)return;vc[r]=t;function n(M){return`__firebase__banner__${M}`}const o="__firebase__banner",h=vS().prod.length>0;function p(){const M=document.getElementById(o);M&&M.remove()}function v(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function y(M,q){M.setAttribute("width","24"),M.setAttribute("id",q),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function E(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{Zv=!0,p()},M}function x(M,q){M.setAttribute("id",q),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function P(){const M=TS(o),q=n("text"),W=document.getElementById(q)||document.createElement("span"),et=n("learnmore"),lt=document.getElementById(et)||document.createElement("a"),Tt=n("preprendIcon"),ht=document.getElementById(Tt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const yt=M.element;v(yt),x(lt,et);const Ht=E();y(ht,Tt),yt.append(ht,W,lt,Ht),document.body.appendChild(yt)}h?(W.innerText="Preview backend disconnected.",ht.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ht.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",P):P()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ES(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Di())}function bS(){const r=Qf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function AS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xS(){const r=Di();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function RS(){return!bS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IS(){try{return typeof indexedDB=="object"}catch{return!1}}function CS(){return new Promise((r,t)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(o);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(o),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="FirebaseError";class ho extends Error{constructor(t,n,o){super(n),this.code=t,this.customData=o,this.name=PS,Object.setPrototypeOf(this,ho.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qc.prototype.create)}}class qc{constructor(t,n,o){this.service=t,this.serviceName=n,this.errors=o}create(t,...n){const o=n[0]||{},l=`${this.service}/${t}`,h=this.errors[t],p=h?MS(h,o):"Error",v=`${this.serviceName}: ${p} (${l}).`;return new ho(l,v,o)}}function MS(r,t){return r.replace(OS,(n,o)=>{const l=t[o];return l!=null?String(l):`<${o}?>`})}const OS=/\{\$([^}]+)}/g;function DS(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function tl(r,t){if(r===t)return!0;const n=Object.keys(r),o=Object.keys(t);for(const l of n){if(!o.includes(l))return!1;const h=r[l],p=t[l];if(Wv(h)&&Wv(p)){if(!tl(h,p))return!1}else if(h!==p)return!1}for(const l of o)if(!n.includes(l))return!1;return!0}function Wv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(r){const t=[];for(const[n,o]of Object.entries(r))Array.isArray(o)?o.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(o));return t.length?"&"+t.join("&"):""}function dc(r){const t={};return r.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[l,h]=o.split("=");t[decodeURIComponent(l)]=decodeURIComponent(h)}}),t}function mc(r){const t=r.indexOf("?");if(!t)return"";const n=r.indexOf("#",t);return r.substring(t,n>0?n:void 0)}function NS(r,t){const n=new LS(r,t);return n.subscribe.bind(n)}class LS{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(o=>{this.error(o)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,o){let l;if(t===void 0&&n===void 0&&o===void 0)throw new Error("Missing Observer.");kS(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:o},l.next===void 0&&(l.next=np),l.error===void 0&&(l.error=np),l.complete===void 0&&(l.complete=np);const h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),h}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kS(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function np(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(r){return r&&r._delegate?r._delegate:r}class el{constructor(t,n,o){this.name=t,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const o=new _S;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&o.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),o=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(US(t))try{this.getOrInitializeService({instanceIdentifier:Ka})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const h=this.getOrInitializeService({instanceIdentifier:l});o.resolve(h)}catch{}}}}clearInstance(t=Ka){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ka){return this.instances.has(t)}getOptions(t=Ka){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[h,p]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(h);o===v&&p.resolve(l)}return l}onInit(t,n){const o=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(o)??new Set;l.add(t),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&t(h,o),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const o=this.onInitCallbacks.get(n);if(o)for(const l of o)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let o=this.instances.get(t);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:zS(t),options:n}),this.instances.set(t,o),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(o,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,o)}catch{}return o||null}normalizeInstanceIdentifier(t=Ka){return this.component?this.component.multipleInstances?t:Ka:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zS(r){return r===Ka?void 0:r}function US(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new VS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ce||(Ce={}));const BS={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},HS=Ce.INFO,qS={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},FS=(r,t,...n)=>{if(t<r.logLevel)return;const o=new Date().toISOString(),l=qS[t];if(l)console[l](`[${o}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Zp{constructor(t){this.name=t,this._logLevel=HS,this._logHandler=FS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ce))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?BS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...t),this._logHandler(this,Ce.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...t),this._logHandler(this,Ce.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...t),this._logHandler(this,Ce.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...t),this._logHandler(this,Ce.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...t),this._logHandler(this,Ce.ERROR,...t)}}const GS=(r,t)=>t.some(n=>r instanceof n);let Yv,Qv;function ZS(){return Yv||(Yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WS(){return Qv||(Qv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const BT=new WeakMap,mp=new WeakMap,HT=new WeakMap,ip=new WeakMap,Wp=new WeakMap;function YS(r){const t=new Promise((n,o)=>{const l=()=>{r.removeEventListener("success",h),r.removeEventListener("error",p)},h=()=>{n(aa(r.result)),l()},p=()=>{o(r.error),l()};r.addEventListener("success",h),r.addEventListener("error",p)});return t.then(n=>{n instanceof IDBCursor&&BT.set(n,r)}).catch(()=>{}),Wp.set(t,r),t}function QS(r){if(mp.has(r))return;const t=new Promise((n,o)=>{const l=()=>{r.removeEventListener("complete",h),r.removeEventListener("error",p),r.removeEventListener("abort",p)},h=()=>{n(),l()},p=()=>{o(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",h),r.addEventListener("error",p),r.addEventListener("abort",p)});mp.set(r,t)}let pp={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return mp.get(r);if(t==="objectStoreNames")return r.objectStoreNames||HT.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return aa(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function KS(r){pp=r(pp)}function XS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const o=r.call(rp(this),t,...n);return HT.set(o,t.sort?t.sort():[t]),aa(o)}:WS().includes(r)?function(...t){return r.apply(rp(this),t),aa(BT.get(this))}:function(...t){return aa(r.apply(rp(this),t))}}function $S(r){return typeof r=="function"?XS(r):(r instanceof IDBTransaction&&QS(r),GS(r,ZS())?new Proxy(r,pp):r)}function aa(r){if(r instanceof IDBRequest)return YS(r);if(ip.has(r))return ip.get(r);const t=$S(r);return t!==r&&(ip.set(r,t),Wp.set(t,r)),t}const rp=r=>Wp.get(r);function JS(r,t,{blocked:n,upgrade:o,blocking:l,terminated:h}={}){const p=indexedDB.open(r,t),v=aa(p);return o&&p.addEventListener("upgradeneeded",y=>{o(aa(p.result),y.oldVersion,y.newVersion,aa(p.transaction),y)}),n&&p.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),v.then(y=>{h&&y.addEventListener("close",()=>h()),l&&y.addEventListener("versionchange",E=>l(E.oldVersion,E.newVersion,E))}).catch(()=>{}),v}const tA=["get","getKey","getAll","getAllKeys","count"],eA=["put","add","delete","clear"],sp=new Map;function Kv(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(sp.get(t))return sp.get(t);const n=t.replace(/FromIndex$/,""),o=t!==n,l=eA.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(l||tA.includes(n)))return;const h=async function(p,...v){const y=this.transaction(p,l?"readwrite":"readonly");let E=y.store;return o&&(E=E.index(v.shift())),(await Promise.all([E[n](...v),l&&y.done]))[0]};return sp.set(t,h),h}KS(r=>({...r,get:(t,n,o)=>Kv(t,n)||r.get(t,n,o),has:(t,n)=>!!Kv(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iA(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function iA(r){return r.getComponent()?.type==="VERSION"}const gp="@firebase/app",Xv="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=new Zp("@firebase/app"),rA="@firebase/app-compat",sA="@firebase/analytics-compat",oA="@firebase/analytics",aA="@firebase/app-check-compat",lA="@firebase/app-check",uA="@firebase/auth",cA="@firebase/auth-compat",hA="@firebase/database",fA="@firebase/data-connect",dA="@firebase/database-compat",mA="@firebase/functions",pA="@firebase/functions-compat",gA="@firebase/installations",_A="@firebase/installations-compat",yA="@firebase/messaging",vA="@firebase/messaging-compat",TA="@firebase/performance",EA="@firebase/performance-compat",bA="@firebase/remote-config",wA="@firebase/remote-config-compat",SA="@firebase/storage",AA="@firebase/storage-compat",xA="@firebase/firestore",RA="@firebase/ai",IA="@firebase/firestore-compat",CA="firebase",PA="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="[DEFAULT]",MA={[gp]:"fire-core",[rA]:"fire-core-compat",[oA]:"fire-analytics",[sA]:"fire-analytics-compat",[lA]:"fire-app-check",[aA]:"fire-app-check-compat",[uA]:"fire-auth",[cA]:"fire-auth-compat",[hA]:"fire-rtdb",[fA]:"fire-data-connect",[dA]:"fire-rtdb-compat",[mA]:"fire-fn",[pA]:"fire-fn-compat",[gA]:"fire-iid",[_A]:"fire-iid-compat",[yA]:"fire-fcm",[vA]:"fire-fcm-compat",[TA]:"fire-perf",[EA]:"fire-perf-compat",[bA]:"fire-rc",[wA]:"fire-rc-compat",[SA]:"fire-gcs",[AA]:"fire-gcs-compat",[xA]:"fire-fst",[IA]:"fire-fst-compat",[RA]:"fire-vertex","fire-js":"fire-js",[CA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new Map,OA=new Map,yp=new Map;function $v(r,t){try{r.container.addComponent(t)}catch(n){oo.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function iu(r){const t=r.name;if(yp.has(t))return oo.debug(`There were multiple attempts to register component ${t}.`),!1;yp.set(t,r);for(const n of Pc.values())$v(n,r);for(const n of OA.values())$v(n,r);return!0}function Yp(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function ir(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},la=new qc("app","Firebase",DA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(t,n,o){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new el("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw la.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=PA;function qT(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const o={name:_p,automaticDataCollectionEnabled:!0,...t},l=o.name;if(typeof l!="string"||!l)throw la.create("bad-app-name",{appName:String(l)});if(n||(n=VT()),!n)throw la.create("no-options");const h=Pc.get(l);if(h){if(tl(n,h.options)&&tl(o,h.config))return h;throw la.create("duplicate-app",{appName:l})}const p=new jS(l);for(const y of yp.values())p.addComponent(y);const v=new NA(n,o,p);return Pc.set(l,v),v}function FT(r=_p){const t=Pc.get(r);if(!t&&r===_p&&VT())return qT();if(!t)throw la.create("no-app",{appName:r});return t}function Jv(){return Array.from(Pc.values())}function ua(r,t,n){let o=MA[r]??r;n&&(o+=`-${n}`);const l=o.match(/\s|\//),h=t.match(/\s|\//);if(l||h){const p=[`Unable to register library "${o}" with version "${t}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&p.push("and"),h&&p.push(`version name "${t}" contains illegal characters (whitespace or "/")`),oo.warn(p.join(" "));return}iu(new el(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="firebase-heartbeat-database",kA=1,Mc="firebase-heartbeat-store";let op=null;function GT(){return op||(op=JS(LA,kA,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Mc)}catch(n){console.warn(n)}}}}).catch(r=>{throw la.create("idb-open",{originalErrorMessage:r.message})})),op}async function VA(r){try{const n=(await GT()).transaction(Mc),o=await n.objectStore(Mc).get(ZT(r));return await n.done,o}catch(t){if(t instanceof ho)oo.warn(t.message);else{const n=la.create("idb-get",{originalErrorMessage:t?.message});oo.warn(n.message)}}}async function t0(r,t){try{const o=(await GT()).transaction(Mc,"readwrite");await o.objectStore(Mc).put(t,ZT(r)),await o.done}catch(n){if(n instanceof ho)oo.warn(n.message);else{const o=la.create("idb-set",{originalErrorMessage:n?.message});oo.warn(o.message)}}}function ZT(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=1024,UA=30;class jA{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HA(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=e0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:n}),this._heartbeatsCache.heartbeats.length>UA){const l=qA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){oo.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=e0(),{heartbeatsToSend:n,unsentEntries:o}=BA(this._heartbeatsCache.heartbeats),l=Sf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return oo.warn(t),""}}}function e0(){return new Date().toISOString().substring(0,10)}function BA(r,t=zA){const n=[];let o=r.slice();for(const l of r){const h=n.find(p=>p.agent===l.agent);if(h){if(h.dates.push(l.date),n0(n)>t){h.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),n0(n)>t){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class HA{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IS()?CS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const o=await this.read();return t0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const o=await this.read();return t0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function n0(r){return Sf(JSON.stringify({version:2,heartbeats:r})).length}function qA(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let o=1;o<r.length;o++)r[o].date<n&&(n=r[o].date,t=o);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(r){iu(new el("platform-logger",t=>new nA(t),"PRIVATE")),iu(new el("heartbeat",t=>new jA(t),"PRIVATE")),ua(gp,Xv,r),ua(gp,Xv,"esm2020"),ua("fire-js","")}FA("");var GA="firebase",ZA="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ua(GA,ZA,"app");function WT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WA=WT,YT=new qc("auth","Firebase",WT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new Zp("@firebase/auth");function YA(r,...t){Af.logLevel<=Ce.WARN&&Af.warn(`Auth (${mu}): ${r}`,...t)}function mf(r,...t){Af.logLevel<=Ce.ERROR&&Af.error(`Auth (${mu}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(r,...t){throw Kp(r,...t)}function ss(r,...t){return Kp(r,...t)}function Qp(r,t,n){const o={...WA(),[t]:n};return new qc("auth","Firebase",o).create(t,{appName:r.name})}function As(r){return Qp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function QT(r,t,n){const o=n;if(!(t instanceof o))throw o.name!==t.constructor.name&&Br(r,"argument-error"),Qp(r,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kp(r,...t){if(typeof r!="string"){const n=t[0],o=[...t.slice(1)];return o[0]&&(o[0].appName=r.name),r._errorFactory.create(n,...o)}return YT.create(r,...t)}function se(r,t,...n){if(!r)throw Kp(t,...n)}function io(r){const t="INTERNAL ASSERTION FAILED: "+r;throw mf(t),new Error(t)}function ao(r,t){r||io(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(){return typeof self<"u"&&self.location?.href||""}function QA(){return i0()==="http:"||i0()==="https:"}function i0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QA()||SS()||"connection"in navigator)?navigator.onLine:!0}function XA(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(t,n){this.shortDelay=t,this.longDelay=n,ao(n>t,"Short delay should be less than long delay!"),this.isMobile=ES()||AS()}get(){return KA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(r,t){ao(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{static initialize(t,n,o){this.fetchImpl=t,n&&(this.headersImpl=n),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;io("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;io("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;io("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tx=new Gc(3e4,6e4);function va(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function Ta(r,t,n,o,l={}){return XT(r,l,async()=>{let h={},p={};o&&(t==="GET"?p=o:h={body:JSON.stringify(o)});const v=Fc({key:r.config.apiKey,...p}).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const E={method:t,headers:y,...h};return wS()||(E.referrerPolicy="no-referrer"),r.emulatorConfig&&du(r.emulatorConfig.host)&&(E.credentials="include"),KT.fetch()(await $T(r,r.config.apiHost,n,v),E)})}async function XT(r,t,n){r._canInitEmulator=!1;const o={...$A,...t};try{const l=new nx(r),h=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const p=await h.json();if("needConfirmation"in p)throw lf(r,"account-exists-with-different-credential",p);if(h.ok&&!("errorMessage"in p))return p;{const v=h.ok?p.errorMessage:p.error.message,[y,E]=v.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw lf(r,"credential-already-in-use",p);if(y==="EMAIL_EXISTS")throw lf(r,"email-already-in-use",p);if(y==="USER_DISABLED")throw lf(r,"user-disabled",p);const x=o[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw Qp(r,x,E);Br(r,x)}}catch(l){if(l instanceof ho)throw l;Br(r,"network-request-failed",{message:String(l)})}}async function Zc(r,t,n,o,l={}){const h=await Ta(r,t,n,o,l);return"mfaPendingCredential"in h&&Br(r,"multi-factor-auth-required",{_serverResponse:h}),h}async function $T(r,t,n,o){const l=`${t}${n}?${o}`,h=r,p=h.config.emulator?Xp(r.config,l):`${r.config.apiScheme}://${l}`;return JA.includes(n)&&(await h._persistenceManagerAvailable,h._getPersistenceType()==="COOKIE")?h._getPersistence()._getFinalTarget(p).toString():p}function ex(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,o)=>{this.timer=setTimeout(()=>o(ss(this.auth,"network-request-failed")),tx.get())})}}function lf(r,t,n){const o={appName:r.name};n.email&&(o.email=n.email),n.phoneNumber&&(o.phoneNumber=n.phoneNumber);const l=ss(r,t,o);return l.customData._tokenResponse=n,l}function r0(r){return r!==void 0&&r.enterprise!==void 0}class ix{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return ex(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rx(r,t){return Ta(r,"GET","/v2/recaptchaConfig",va(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sx(r,t){return Ta(r,"POST","/v1/accounts:delete",t)}async function xf(r,t){return Ta(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function ox(r,t=!1){const n=Dn(r),o=await n.getIdToken(t),l=$p(o);se(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const h=typeof l.firebase=="object"?l.firebase:void 0,p=h?.sign_in_provider;return{claims:l,token:o,authTime:Tc(ap(l.auth_time)),issuedAtTime:Tc(ap(l.iat)),expirationTime:Tc(ap(l.exp)),signInProvider:p||null,signInSecondFactor:h?.sign_in_second_factor||null}}function ap(r){return Number(r)*1e3}function $p(r){const[t,n,o]=r.split(".");if(t===void 0||n===void 0||o===void 0)return mf("JWT malformed, contained fewer than 3 sections"),null;try{const l=LT(n);return l?JSON.parse(l):(mf("Failed to decode base64 JWT payload"),null)}catch(l){return mf("Caught error parsing JWT payload as JSON",l?.toString()),null}}function s0(r){const t=$p(r);return se(t,"internal-error"),se(typeof t.exp<"u","internal-error"),se(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oc(r,t,n=!1){if(n)return t;try{return await t}catch(o){throw o instanceof ho&&ax(o)&&r.auth.currentUser===r&&await r.auth.signOut(),o}}function ax({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tc(this.lastLoginAt),this.creationTime=Tc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rf(r){const t=r.auth,n=await r.getIdToken(),o=await Oc(r,xf(t,{idToken:n}));se(o?.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=l.providerUserInfo?.length?JT(l.providerUserInfo):[],p=cx(r.providerData,h),v=r.isAnonymous,y=!(r.email&&l.passwordHash)&&!p?.length,E=v?y:!1,x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new Tp(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,x)}async function ux(r){const t=Dn(r);await Rf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function cx(r,t){return[...r.filter(o=>!t.some(l=>l.providerId===o.providerId)),...t]}function JT(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx(r,t){const n=await XT(r,{},async()=>{const o=Fc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:h}=r.config,p=await $T(r,l,"/v1/token",`key=${h}`),v=await r._getAdditionalHeaders();v["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:v,body:o};return r.emulatorConfig&&du(r.emulatorConfig.host)&&(y.credentials="include"),KT.fetch()(p,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fx(r,t){return Ta(r,"POST","/v2/accounts:revokeToken",va(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){se(t.idToken,"internal-error"),se(typeof t.idToken<"u","internal-error"),se(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):s0(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){se(t.length!==0,"internal-error");const n=s0(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:o,refreshToken:l,expiresIn:h}=await hx(t,n);this.updateTokensAndExpiration(o,l,Number(h))}updateTokensAndExpiration(t,n,o){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(t,n){const{refreshToken:o,accessToken:l,expirationTime:h}=n,p=new $l;return o&&(se(typeof o=="string","internal-error",{appName:t}),p.refreshToken=o),l&&(se(typeof l=="string","internal-error",{appName:t}),p.accessToken=l),h&&(se(typeof h=="number","internal-error",{appName:t}),p.expirationTime=h),p}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new $l,this.toJSON())}_performRefresh(){return io("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(r,t){se(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class rs{constructor({uid:t,auth:n,stsTokenManager:o,...l}){this.providerId="firebase",this.proactiveRefresh=new lx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Tp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await Oc(this,this.stsTokenManager.getToken(this.auth,t));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return ox(this,t)}reload(){return ux(this)}_assign(t){this!==t&&(se(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new rs({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let o=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),o=!0),n&&await Rf(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(As(this.auth));const t=await this.getIdToken();return await Oc(this,sx(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const o=n.displayName??void 0,l=n.email??void 0,h=n.phoneNumber??void 0,p=n.photoURL??void 0,v=n.tenantId??void 0,y=n._redirectEventId??void 0,E=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:P,emailVerified:M,isAnonymous:q,providerData:W,stsTokenManager:et}=n;se(P&&et,t,"internal-error");const lt=$l.fromJSON(this.name,et);se(typeof P=="string",t,"internal-error"),na(o,t.name),na(l,t.name),se(typeof M=="boolean",t,"internal-error"),se(typeof q=="boolean",t,"internal-error"),na(h,t.name),na(p,t.name),na(v,t.name),na(y,t.name),na(E,t.name),na(x,t.name);const Tt=new rs({uid:P,auth:t,email:l,emailVerified:M,displayName:o,isAnonymous:q,photoURL:p,phoneNumber:h,tenantId:v,stsTokenManager:lt,createdAt:E,lastLoginAt:x});return W&&Array.isArray(W)&&(Tt.providerData=W.map(ht=>({...ht}))),y&&(Tt._redirectEventId=y),Tt}static async _fromIdTokenResponse(t,n,o=!1){const l=new $l;l.updateFromServerResponse(n);const h=new rs({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:o});return await Rf(h),h}static async _fromGetAccountInfoResponse(t,n,o){const l=n.users[0];se(l.localId!==void 0,"internal-error");const h=l.providerUserInfo!==void 0?JT(l.providerUserInfo):[],p=!(l.email&&l.passwordHash)&&!h?.length,v=new $l;v.updateFromIdToken(o);const y=new rs({uid:l.localId,auth:t,stsTokenManager:v,isAnonymous:p}),E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Tp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!h?.length};return Object.assign(y,E),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=new Map;function ro(r){ao(r instanceof Function,"Expected a class definition");let t=o0.get(r);return t?(ao(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,o0.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}tE.type="NONE";const a0=tE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(r,t,n){return`firebase:${r}:${t}:${n}`}class Jl{constructor(t,n,o){this.persistence=t,this.auth=n,this.userKey=o;const{config:l,name:h}=this.auth;this.fullUserKey=pf(this.userKey,l.apiKey,h),this.fullPersistenceKey=pf("persistence",l.apiKey,h),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await xf(this.auth,{idToken:t}).catch(()=>{});return n?rs._fromGetAccountInfoResponse(this.auth,n,t):null}return rs._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,o="authUser"){if(!n.length)return new Jl(ro(a0),t,o);const l=(await Promise.all(n.map(async E=>{if(await E._isAvailable())return E}))).filter(E=>E);let h=l[0]||ro(a0);const p=pf(o,t.config.apiKey,t.name);let v=null;for(const E of n)try{const x=await E._get(p);if(x){let P;if(typeof x=="string"){const M=await xf(t,{idToken:x}).catch(()=>{});if(!M)break;P=await rs._fromGetAccountInfoResponse(t,M,x)}else P=rs._fromJSON(t,x);E!==h&&(v=P),h=E;break}}catch{}const y=l.filter(E=>E._shouldAllowMigration);return!h._shouldAllowMigration||!y.length?new Jl(h,t,o):(h=y[0],v&&await h._set(p,v.toJSON()),await Promise.all(n.map(async E=>{if(E!==h)try{await E._remove(p)}catch{}})),new Jl(h,t,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(rE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(eE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(oE(t))return"Blackberry";if(aE(t))return"Webos";if(nE(t))return"Safari";if((t.includes("chrome/")||iE(t))&&!t.includes("edge/"))return"Chrome";if(sE(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=r.match(n);if(o?.length===2)return o[1]}return"Other"}function eE(r=Di()){return/firefox\//i.test(r)}function nE(r=Di()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function iE(r=Di()){return/crios\//i.test(r)}function rE(r=Di()){return/iemobile/i.test(r)}function sE(r=Di()){return/android/i.test(r)}function oE(r=Di()){return/blackberry/i.test(r)}function aE(r=Di()){return/webos/i.test(r)}function Jp(r=Di()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function dx(r=Di()){return Jp(r)&&!!window.navigator?.standalone}function mx(){return xS()&&document.documentMode===10}function lE(r=Di()){return Jp(r)||sE(r)||aE(r)||oE(r)||/windows phone/i.test(r)||rE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(r,t=[]){let n;switch(r){case"Browser":n=l0(Di());break;case"Worker":n=`${l0(Di())}-${r}`;break;default:n=r}const o=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${mu}/${o}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const o=h=>new Promise((p,v)=>{try{const y=t(h);p(y)}catch(y){v(y)}});o.onAbort=n,this.queue.push(o);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const o of this.queue)await o(t),o.onAbort&&n.push(o.onAbort)}catch(o){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gx(r,t={}){return Ta(r,"GET","/v2/passwordPolicy",va(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=6;class yx{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??_x,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const o=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;o&&(n.meetsMinPasswordLength=t.length>=o),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let o;for(let l=0;l<t.length;l++)o=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(t,n,o,l,h){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(t,n,o,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=o,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new u0(this),this.idTokenSubscription=new u0(this),this.beforeStateQueue=new px(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(h=>this._resolvePersistenceManagerAvailable=h)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ro(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Jl.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await xf(this,{idToken:t}),o=await rs._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(o)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(ir(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let o=n,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=this.redirectUser?._redirectEventId,p=o?._redirectEventId,v=await this.tryRedirectSignIn(t);(!h||h===p)&&v?.user&&(o=v.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Rf(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=XA()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ir(this.app))return Promise.reject(As(this));const n=t?Dn(t):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&se(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(As(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ir(this.app)?Promise.reject(As(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ro(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await gx(this),n=new yx(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new qc("auth","Firebase",t())}onAuthStateChanged(t,n,o){return this.registerStateListener(this.authStateSubscription,t,n,o)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,o){return this.registerStateListener(this.idTokenSubscription,t,n,o)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const o=this.onAuthStateChanged(()=>{o(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(o.tenantId=this.tenantId),await fx(this,o)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const o=await this.getOrInitRedirectPersistenceManager(n);return t===null?o.removeCurrentUser():o.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ro(t)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await Jl.create(this,[ro(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,o,l){if(this._deleted)return()=>{};const h=typeof n=="function"?n:n.next.bind(n);let p=!1;const v=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(v,this,"internal-error"),v.then(()=>{p||h(this.currentUser)}),typeof n=="function"){const y=t.addObserver(n,o,l);return()=>{p=!0,y()}}else{const y=t.addObserver(n);return()=>{p=!0,y()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=uE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&YA(`Error while retrieving App Check token: ${t.error}`),t?.token}}function fo(r){return Dn(r)}class u0{constructor(t){this.auth=t,this.observer=null,this.addObserver=NS(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tx(r){Kf=r}function cE(r){return Kf.loadJS(r)}function Ex(){return Kf.recaptchaEnterpriseScript}function bx(){return Kf.gapiScript}function wx(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Sx{constructor(){this.enterprise=new Ax}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class Ax{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const xx="recaptcha-enterprise",hE="NO_RECAPTCHA";class Rx{constructor(t){this.type=xx,this.auth=fo(t)}async verify(t="verify",n=!1){async function o(h){if(!n){if(h.tenantId==null&&h._agentRecaptchaConfig!=null)return h._agentRecaptchaConfig.siteKey;if(h.tenantId!=null&&h._tenantRecaptchaConfigs[h.tenantId]!==void 0)return h._tenantRecaptchaConfigs[h.tenantId].siteKey}return new Promise(async(p,v)=>{rx(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)v(new Error("recaptcha Enterprise site key undefined"));else{const E=new ix(y);return h.tenantId==null?h._agentRecaptchaConfig=E:h._tenantRecaptchaConfigs[h.tenantId]=E,p(E.siteKey)}}).catch(y=>{v(y)})})}function l(h,p,v){const y=window.grecaptcha;r0(y)?y.enterprise.ready(()=>{y.enterprise.execute(h,{action:t}).then(E=>{p(E)}).catch(()=>{p(hE)})}):v(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Sx().execute("siteKey",{action:"verify"}):new Promise((h,p)=>{o(this.auth).then(v=>{if(!n&&r0(window.grecaptcha))l(v,h,p);else{if(typeof window>"u"){p(new Error("RecaptchaVerifier is only supported in browser"));return}let y=Ex();y.length!==0&&(y+=v),cE(y).then(()=>{l(v,h,p)}).catch(E=>{p(E)})}}).catch(v=>{p(v)})})}}async function c0(r,t,n,o=!1,l=!1){const h=new Rx(r);let p;if(l)p=hE;else try{p=await h.verify(n)}catch{p=await h.verify(n,!0)}const v={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in v){const y=v.phoneEnrollmentInfo.phoneNumber,E=v.phoneEnrollmentInfo.recaptchaToken;Object.assign(v,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:E,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in v){const y=v.phoneSignInInfo.recaptchaToken;Object.assign(v,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return v}return o?Object.assign(v,{captchaResp:p}):Object.assign(v,{captchaResponse:p}),Object.assign(v,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(v,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),v}async function Ep(r,t,n,o,l){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await c0(r,t,n,n==="getOobCode");return o(r,h)}else return o(r,t).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await c0(r,t,n,n==="getOobCode");return o(r,p)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(r,t){const n=Yp(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),h=n.getOptions();if(tl(h,t??{}))return l;Br(l,"already-initialized")}return n.initialize({options:t})}function Cx(r,t){const n=t?.persistence||[],o=(Array.isArray(n)?n:[n]).map(ro);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(o,t?.popupRedirectResolver)}function Px(r,t,n){const o=fo(r);se(/^https?:\/\//.test(t),o,"invalid-emulator-scheme");const l=!1,h=fE(t),{host:p,port:v}=Mx(t),y=v===null?"":`:${v}`,E={url:`${h}//${p}${y}/`},x=Object.freeze({host:p,port:v,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!o._canInitEmulator){se(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),se(tl(E,o.config.emulator)&&tl(x,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=E,o.emulatorConfig=x,o.settings.appVerificationDisabledForTesting=!0,du(p)?(UT(`${h}//${p}${y}`),jT("Auth",!0)):Ox()}function fE(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function Mx(r){const t=fE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const o=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(o);if(l){const h=l[1];return{host:h,port:h0(o.substr(h.length+1))}}else{const[h,p]=o.split(":");return{host:h,port:h0(p)}}}function h0(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function Ox(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return io("not implemented")}_getIdTokenResponse(t){return io("not implemented")}_linkToIdToken(t,n){return io("not implemented")}_getReauthenticationResolver(t){return io("not implemented")}}async function Dx(r,t){return Ta(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nx(r,t){return Zc(r,"POST","/v1/accounts:signInWithPassword",va(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(r,t){return Zc(r,"POST","/v1/accounts:signInWithEmailLink",va(r,t))}async function kx(r,t){return Zc(r,"POST","/v1/accounts:signInWithEmailLink",va(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends tg{constructor(t,n,o,l=null){super("password",o),this._email=t,this._password=n,this._tenantId=l}static _fromEmailAndPassword(t,n){return new Dc(t,n,"password")}static _fromEmailAndCode(t,n,o=null){return new Dc(t,n,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ep(t,n,"signInWithPassword",Nx);case"emailLink":return Lx(t,{email:this._email,oobCode:this._password});default:Br(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const o={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ep(t,o,"signUpPassword",Dx);case"emailLink":return kx(t,{idToken:n,email:this._email,oobCode:this._password});default:Br(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(r,t){return Zc(r,"POST","/v1/accounts:signInWithIdp",va(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="http://localhost";class nl extends tg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new nl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Br("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:o,signInMethod:l,...h}=n;if(!o||!l)return null;const p=new nl(o,l);return p.idToken=h.idToken||void 0,p.accessToken=h.accessToken||void 0,p.secret=h.secret,p.nonce=h.nonce,p.pendingToken=h.pendingToken||null,p}_getIdTokenResponse(t){const n=this.buildRequest();return tu(t,n)}_linkToIdToken(t,n){const o=this.buildRequest();return o.idToken=n,tu(t,o)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,tu(t,n)}buildRequest(){const t={requestUri:Vx,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Fc(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ux(r){const t=dc(mc(r)).link,n=t?dc(mc(t)).deep_link_id:null,o=dc(mc(r)).deep_link_id;return(o?dc(mc(o)).link:null)||o||n||t||r}class eg{constructor(t){const n=dc(mc(t)),o=n.apiKey??null,l=n.oobCode??null,h=zx(n.mode??null);se(o&&l&&h,"argument-error"),this.apiKey=o,this.operation=h,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=Ux(t);try{return new eg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(){this.providerId=pu.PROVIDER_ID}static credential(t,n){return Dc._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const o=eg.parseLink(n);return se(o,"argument-error"),Dc._fromEmailAndCode(t,o.code,o.tenantId)}}pu.PROVIDER_ID="password";pu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";pu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends Xf{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends Wc{constructor(){super("facebook.com")}static credential(t){return nl._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ia.credentialFromTaggedObject(t)}static credentialFromError(t){return ia.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ia.credential(t.oauthAccessToken)}catch{return null}}}ia.FACEBOOK_SIGN_IN_METHOD="facebook.com";ia.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends Wc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return nl._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return no.credentialFromTaggedObject(t)}static credentialFromError(t){return no.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:o}=t;if(!n&&!o)return null;try{return no.credential(n,o)}catch{return null}}}no.GOOGLE_SIGN_IN_METHOD="google.com";no.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends Wc{constructor(){super("github.com")}static credential(t){return nl._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ra.credentialFromTaggedObject(t)}static credentialFromError(t){return ra.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ra.credential(t.oauthAccessToken)}catch{return null}}}ra.GITHUB_SIGN_IN_METHOD="github.com";ra.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Wc{constructor(){super("twitter.com")}static credential(t,n){return nl._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return sa.credentialFromTaggedObject(t)}static credentialFromError(t){return sa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:o}=t;if(!n||!o)return null;try{return sa.credential(n,o)}catch{return null}}}sa.TWITTER_SIGN_IN_METHOD="twitter.com";sa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(r,t){return Zc(r,"POST","/v1/accounts:signUp",va(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,o,l=!1){const h=await rs._fromIdTokenResponse(t,o,l),p=f0(o);return new il({user:h,providerId:p,_tokenResponse:o,operationType:n})}static async _forOperation(t,n,o){await t._updateTokensIfNecessary(o,!0);const l=f0(o);return new il({user:t,providerId:l,_tokenResponse:o,operationType:n})}}function f0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends ho{constructor(t,n,o,l){super(n.code,n.message),this.operationType=o,this.user=l,Object.setPrototypeOf(this,If.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(t,n,o,l){return new If(t,n,o,l)}}function dE(r,t,n,o){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(h=>{throw h.code==="auth/multi-factor-auth-required"?If._fromErrorAndOperation(r,h,t,o):h})}async function Bx(r,t,n=!1){const o=await Oc(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return il._forOperation(r,"link",o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hx(r,t,n=!1){const{auth:o}=r;if(ir(o.app))return Promise.reject(As(o));const l="reauthenticate";try{const h=await Oc(r,dE(o,l,t,r),n);se(h.idToken,o,"internal-error");const p=$p(h.idToken);se(p,o,"internal-error");const{sub:v}=p;return se(r.uid===v,o,"user-mismatch"),il._forOperation(r,l,h)}catch(h){throw h?.code==="auth/user-not-found"&&Br(o,"user-mismatch"),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mE(r,t,n=!1){if(ir(r.app))return Promise.reject(As(r));const o="signIn",l=await dE(r,o,t),h=await il._fromIdTokenResponse(r,o,l);return n||await r._updateCurrentUser(h.user),h}async function qx(r,t){return mE(fo(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pE(r){const t=fo(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Fx(r,t,n){if(ir(r.app))return Promise.reject(As(r));const o=fo(r),p=await Ep(o,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jx).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&pE(r),y}),v=await il._fromIdTokenResponse(o,"signIn",p);return await o._updateCurrentUser(v.user),v}function Gx(r,t,n){return ir(r.app)?Promise.reject(As(r)):qx(Dn(r),pu.credential(t,n)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&pE(r),o})}function Zx(r,t,n,o){return Dn(r).onIdTokenChanged(t,n,o)}function Wx(r,t,n){return Dn(r).beforeAuthStateChanged(t,n)}function gu(r,t,n,o){return Dn(r).onAuthStateChanged(t,n,o)}function gE(r){return Dn(r).signOut()}const Cf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cf,"1"),this.storage.removeItem(Cf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=1e3,Qx=10;class yE extends _E{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const o=this.storage.getItem(n),l=this.localCache[n];o!==l&&t(n,l,o)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((p,v,y)=>{this.notifyListeners(p,y)});return}const o=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const p=this.storage.getItem(o);!n&&this.localCache[o]===p||this.notifyListeners(o,p)},h=this.storage.getItem(o);mx()&&h!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,Qx):l()}notifyListeners(t,n){this.localCache[t]=n;const o=this.listeners[t];if(o)for(const l of Array.from(o))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:o}),!0)})},Yx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}yE.type="LOCAL";const Kx=yE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE extends _E{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}vE.type="SESSION";const TE=vE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const o=new $f(t);return this.receivers.push(o),o}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:o,eventType:l,data:h}=n.data,p=this.handlersMap[l];if(!p?.size)return;n.ports[0].postMessage({status:"ack",eventId:o,eventType:l});const v=Array.from(p).map(async E=>E(n.origin,h)),y=await Xx(v);n.ports[0].postMessage({status:"done",eventId:o,eventType:l,response:y})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$f.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(r="",t=10){let n="";for(let o=0;o<t;o++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,o=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let h,p;return new Promise((v,y)=>{const E=ng("",20);l.port1.start();const x=setTimeout(()=>{y(new Error("unsupported_event"))},o);p={messageChannel:l,onMessage(P){const M=P;if(M.data.eventId===E)switch(M.data.status){case"ack":clearTimeout(x),h=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(h),v(M.data.response);break;default:clearTimeout(x),clearTimeout(h),y(new Error("invalid_response"));break}}},this.handlers.add(p),l.port1.addEventListener("message",p.onMessage),this.target.postMessage({eventType:t,eventId:E,data:n},[l.port2])}).finally(()=>{p&&this.removeMessageHandler(p)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(){return window}function Jx(r){xs().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(){return typeof xs().WorkerGlobalScope<"u"&&typeof xs().importScripts=="function"}async function tR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eR(){return navigator?.serviceWorker?.controller||null}function nR(){return EE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="firebaseLocalStorageDb",iR=1,Pf="firebaseLocalStorage",wE="fbase_key";class Yc{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jf(r,t){return r.transaction([Pf],t?"readwrite":"readonly").objectStore(Pf)}function rR(){const r=indexedDB.deleteDatabase(bE);return new Yc(r).toPromise()}function bp(){const r=indexedDB.open(bE,iR);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const o=r.result;try{o.createObjectStore(Pf,{keyPath:wE})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const o=r.result;o.objectStoreNames.contains(Pf)?t(o):(o.close(),await rR(),t(await bp()))})})}async function d0(r,t,n){const o=Jf(r,!0).put({[wE]:t,value:n});return new Yc(o).toPromise()}async function sR(r,t){const n=Jf(r,!1).get(t),o=await new Yc(n).toPromise();return o===void 0?null:o.value}function m0(r,t){const n=Jf(r,!0).delete(t);return new Yc(n).toPromise()}const oR=800,aR=3;class SE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bp(),this.db)}async _withRetries(t){let n=0;for(;;)try{const o=await this._openDb();return await t(o)}catch(o){if(n++>aR)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return EE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$f._getInstance(nR()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await tR(),!this.activeServiceWorker)return;this.sender=new $x(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||eR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await bp();return await d0(t,Cf,"1"),await m0(t,Cf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(o=>d0(o,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(o=>sR(o,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>m0(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const h=Jf(l,!1).getAll();return new Yc(h).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],o=new Set;if(t.length!==0)for(const{fbase_key:l,value:h}of t)o.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(h)&&(this.notifyListeners(l,h),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!o.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const o=this.listeners[t];if(o)for(const l of Array.from(o))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SE.type="LOCAL";const lR=SE;new Gc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(r,t){return t?ro(t):(se(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg extends tg{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return tu(t,this._buildIdpRequest())}_linkToIdToken(t,n){return tu(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return tu(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function uR(r){return mE(r.auth,new rg(r),r.bypassAuthState)}function cR(r){const{auth:t,user:n}=r;return se(n,t,"internal-error"),Hx(n,new rg(r),r.bypassAuthState)}async function hR(r){const{auth:t,user:n}=r;return se(n,t,"internal-error"),Bx(n,new rg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(t,n,o,l,h=!1){this.auth=t,this.resolver=o,this.user=l,this.bypassAuthState=h,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:o,postBody:l,tenantId:h,error:p,type:v}=t;if(p){this.reject(p);return}const y={auth:this.auth,requestUri:n,sessionId:o,tenantId:h||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(v)(y))}catch(E){this.reject(E)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return uR;case"linkViaPopup":case"linkViaRedirect":return hR;case"reauthViaPopup":case"reauthViaRedirect":return cR;default:Br(this.auth,"internal-error")}}resolve(t){ao(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ao(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=new Gc(2e3,1e4);async function dR(r,t,n){if(ir(r.app))return Promise.reject(ss(r,"operation-not-supported-in-this-environment"));const o=fo(r);QT(r,t,Xf);const l=ig(o,n);return new Xa(o,"signInViaPopup",t,l).executeNotNull()}class Xa extends AE{constructor(t,n,o,l,h){super(t,n,l,h),this.provider=o,this.authWindow=null,this.pollId=null,Xa.currentPopupAction&&Xa.currentPopupAction.cancel(),Xa.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return se(t,this.auth,"internal-error"),t}async onExecution(){ao(this.filter.length===1,"Popup operations only handle one event");const t=ng();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ss(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ss(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xa.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ss(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,fR.get())};t()}}Xa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="pendingRedirect",gf=new Map;class pR extends AE{constructor(t,n,o=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,o),this.eventId=null}async execute(){let t=gf.get(this.auth._key());if(!t){try{const o=await gR(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(o)}catch(n){t=()=>Promise.reject(n)}gf.set(this.auth._key(),t)}return this.bypassAuthState||gf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gR(r,t){const n=RE(t),o=xE(r);if(!await o._isAvailable())return!1;const l=await o._get(n)==="true";return await o._remove(n),l}async function _R(r,t){return xE(r)._set(RE(t),"true")}function yR(r,t){gf.set(r._key(),t)}function xE(r){return ro(r._redirectPersistence)}function RE(r){return pf(mR,r.config.apiKey,r.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(r,t,n){return TR(r,t,n)}async function TR(r,t,n){if(ir(r.app))return Promise.reject(As(r));const o=fo(r);QT(r,t,Xf),await o._initializationPromise;const l=ig(o,n);return await _R(l,o),l._openRedirect(o,t,"signInViaRedirect")}async function ER(r,t,n=!1){if(ir(r.app))return Promise.reject(As(r));const o=fo(r),l=ig(o,t),p=await new pR(o,l,n).execute();return p&&!n&&(delete p.user._redirectEventId,await o._persistUserIfCurrent(p.user),await o._setRedirectUser(null,t)),p}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=600*1e3;class wR{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(t,o)&&(n=!0,this.sendToConsumer(t,o),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!SR(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!IE(t)){const o=t.error.code?.split("auth/")[1]||"internal-error";n.onError(ss(this.auth,o))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const o=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&o}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=bR&&this.cachedEventUids.clear(),this.cachedEventUids.has(p0(t))}saveEventToCache(t){this.cachedEventUids.add(p0(t)),this.lastProcessedEventTime=Date.now()}}function p0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function IE({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function SR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(r,t={}){return Ta(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RR=/^https?/;async function IR(r){if(r.config.emulator)return;const{authorizedDomains:t}=await AR(r);for(const n of t)try{if(CR(n))return}catch{}Br(r,"unauthorized-domain")}function CR(r){const t=vp(),{protocol:n,hostname:o}=new URL(t);if(r.startsWith("chrome-extension://")){const p=new URL(r);return p.hostname===""&&o===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&p.hostname===o}if(!RR.test(n))return!1;if(xR.test(r))return o===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(o)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=new Gc(3e4,6e4);function g0(){const r=xs().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function MR(r){return new Promise((t,n)=>{function o(){g0(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{g0(),n(ss(r,"network-request-failed"))},timeout:PR.get()})}if(xs().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(xs().gapi?.load)o();else{const l=wx("iframefcb");return xs()[l]=()=>{gapi.load?o():n(ss(r,"network-request-failed"))},cE(`${bx()}?onload=${l}`).catch(h=>n(h))}}).catch(t=>{throw _f=null,t})}let _f=null;function OR(r){return _f=_f||MR(r),_f}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=new Gc(5e3,15e3),NR="__/auth/iframe",LR="emulator/auth/iframe",kR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zR(r){const t=r.config;se(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?Xp(t,LR):`https://${r.config.authDomain}/${NR}`,o={apiKey:t.apiKey,appName:r.name,v:mu},l=VR.get(r.config.apiHost);l&&(o.eid=l);const h=r._getFrameworks();return h.length&&(o.fw=h.join(",")),`${n}?${Fc(o).slice(1)}`}async function UR(r){const t=await OR(r),n=xs().gapi;return se(n,r,"internal-error"),t.open({where:document.body,url:zR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kR,dontclear:!0},o=>new Promise(async(l,h)=>{await o.restyle({setHideOnLeave:!1});const p=ss(r,"network-request-failed"),v=xs().setTimeout(()=>{h(p)},DR.get());function y(){xs().clearTimeout(v),l(o)}o.ping(y).then(y,()=>{h(p)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BR=500,HR=600,qR="_blank",FR="http://localhost";class _0{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GR(r,t,n,o=BR,l=HR){const h=Math.max((window.screen.availHeight-l)/2,0).toString(),p=Math.max((window.screen.availWidth-o)/2,0).toString();let v="";const y={...jR,width:o.toString(),height:l.toString(),top:h,left:p},E=Di().toLowerCase();n&&(v=iE(E)?qR:n),eE(E)&&(t=t||FR,y.scrollbars="yes");const x=Object.entries(y).reduce((M,[q,W])=>`${M}${q}=${W},`,"");if(dx(E)&&v!=="_self")return ZR(t||"",v),new _0(null);const P=window.open(t||"",v,x);se(P,r,"popup-blocked");try{P.focus()}catch{}return new _0(P)}function ZR(r,t){const n=document.createElement("a");n.href=r,n.target=t;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="__/auth/handler",YR="emulator/auth/handler",QR=encodeURIComponent("fac");async function y0(r,t,n,o,l,h){se(r.config.authDomain,r,"auth-domain-config-required"),se(r.config.apiKey,r,"invalid-api-key");const p={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:o,v:mu,eventId:l};if(t instanceof Xf){t.setDefaultLanguage(r.languageCode),p.providerId=t.providerId||"",DS(t.getCustomParameters())||(p.customParameters=JSON.stringify(t.getCustomParameters()));for(const[x,P]of Object.entries({}))p[x]=P}if(t instanceof Wc){const x=t.getScopes().filter(P=>P!=="");x.length>0&&(p.scopes=x.join(","))}r.tenantId&&(p.tid=r.tenantId);const v=p;for(const x of Object.keys(v))v[x]===void 0&&delete v[x];const y=await r._getAppCheckToken(),E=y?`#${QR}=${encodeURIComponent(y)}`:"";return`${KR(r)}?${Fc(v).slice(1)}${E}`}function KR({config:r}){return r.emulator?Xp(r,YR):`https://${r.authDomain}/${WR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="webStorageSupport";class XR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=TE,this._completeRedirectFn=ER,this._overrideRedirectResult=yR}async _openPopup(t,n,o,l){ao(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const h=await y0(t,n,o,vp(),l);return GR(t,h,ng())}async _openRedirect(t,n,o,l){await this._originValidation(t);const h=await y0(t,n,o,vp(),l);return Jx(h),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:h}=this.eventManagers[n];return l?Promise.resolve(l):(ao(h,"If manager is not set, promise should be"),h)}const o=this.initAndGetManager(t);return this.eventManagers[n]={promise:o},o.catch(()=>{delete this.eventManagers[n]}),o}async initAndGetManager(t){const n=await UR(t),o=new wR(t);return n.register("authEvent",l=>(se(l?.authEvent,t,"invalid-auth-event"),{status:o.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:o},this.iframes[t._key()]=n,o}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(lp,{type:lp},l=>{const h=l?.[0]?.[lp];h!==void 0&&n(!!h),Br(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=IR(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return lE()||nE()||Jp()}}const $R=XR;var v0="@firebase/auth",T0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(o=>{t(o?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eI(r){iu(new el("auth",(t,{options:n})=>{const o=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),h=t.getProvider("app-check-internal"),{apiKey:p,authDomain:v}=o.options;se(p&&!p.includes(":"),"invalid-api-key",{appName:o.name});const y={apiKey:p,authDomain:v,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uE(r)},E=new vx(o,l,h,y);return Cx(E,n),E},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,o)=>{t.getProvider("auth-internal").initialize()})),iu(new el("auth-internal",t=>{const n=fo(t.getProvider("auth").getImmediate());return(o=>new JR(o))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ua(v0,T0,tI(r)),ua(v0,T0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=300,iI=zT("authIdTokenMaxAge")||nI;let E0=null;const rI=r=>async t=>{const n=t&&await t.getIdTokenResult(),o=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(o&&o>iI)return;const l=n?.token;E0!==l&&(E0=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function sI(r=FT()){const t=Yp(r,"auth");if(t.isInitialized())return t.getImmediate();const n=Ix(r,{popupRedirectResolver:$R,persistence:[lR,Kx,TE]}),o=zT("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const h=new URL(o,location.origin);if(location.origin===h.origin){const p=rI(h.toString());Wx(n,p,()=>p(n.currentUser)),Zx(n,v=>p(v))}}const l=kT("auth");return l&&Px(n,`http://${l}`),n}function oI(){return document.getElementsByTagName("head")?.[0]??document}Tx({loadJS(r){return new Promise((t,n)=>{const o=document.createElement("script");o.setAttribute("src",r),o.onload=t,o.onerror=l=>{const h=ss("internal-error");h.customData=l,n(h)},o.type="text/javascript",o.charset="UTF-8",oI().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eI("Browser");var b0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ca,CE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(V,O){function k(){}k.prototype=O.prototype,V.D=O.prototype,V.prototype=new k,V.prototype.constructor=V,V.C=function(j,B,H){for(var N=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)N[ge-2]=arguments[ge];return O.prototype[B].apply(j,N)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(o,n),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(V,O,k){k||(k=0);var j=Array(16);if(typeof O=="string")for(var B=0;16>B;++B)j[B]=O.charCodeAt(k++)|O.charCodeAt(k++)<<8|O.charCodeAt(k++)<<16|O.charCodeAt(k++)<<24;else for(B=0;16>B;++B)j[B]=O[k++]|O[k++]<<8|O[k++]<<16|O[k++]<<24;O=V.g[0],k=V.g[1],B=V.g[2];var H=V.g[3],N=O+(H^k&(B^H))+j[0]+3614090360&4294967295;O=k+(N<<7&4294967295|N>>>25),N=H+(B^O&(k^B))+j[1]+3905402710&4294967295,H=O+(N<<12&4294967295|N>>>20),N=B+(k^H&(O^k))+j[2]+606105819&4294967295,B=H+(N<<17&4294967295|N>>>15),N=k+(O^B&(H^O))+j[3]+3250441966&4294967295,k=B+(N<<22&4294967295|N>>>10),N=O+(H^k&(B^H))+j[4]+4118548399&4294967295,O=k+(N<<7&4294967295|N>>>25),N=H+(B^O&(k^B))+j[5]+1200080426&4294967295,H=O+(N<<12&4294967295|N>>>20),N=B+(k^H&(O^k))+j[6]+2821735955&4294967295,B=H+(N<<17&4294967295|N>>>15),N=k+(O^B&(H^O))+j[7]+4249261313&4294967295,k=B+(N<<22&4294967295|N>>>10),N=O+(H^k&(B^H))+j[8]+1770035416&4294967295,O=k+(N<<7&4294967295|N>>>25),N=H+(B^O&(k^B))+j[9]+2336552879&4294967295,H=O+(N<<12&4294967295|N>>>20),N=B+(k^H&(O^k))+j[10]+4294925233&4294967295,B=H+(N<<17&4294967295|N>>>15),N=k+(O^B&(H^O))+j[11]+2304563134&4294967295,k=B+(N<<22&4294967295|N>>>10),N=O+(H^k&(B^H))+j[12]+1804603682&4294967295,O=k+(N<<7&4294967295|N>>>25),N=H+(B^O&(k^B))+j[13]+4254626195&4294967295,H=O+(N<<12&4294967295|N>>>20),N=B+(k^H&(O^k))+j[14]+2792965006&4294967295,B=H+(N<<17&4294967295|N>>>15),N=k+(O^B&(H^O))+j[15]+1236535329&4294967295,k=B+(N<<22&4294967295|N>>>10),N=O+(B^H&(k^B))+j[1]+4129170786&4294967295,O=k+(N<<5&4294967295|N>>>27),N=H+(k^B&(O^k))+j[6]+3225465664&4294967295,H=O+(N<<9&4294967295|N>>>23),N=B+(O^k&(H^O))+j[11]+643717713&4294967295,B=H+(N<<14&4294967295|N>>>18),N=k+(H^O&(B^H))+j[0]+3921069994&4294967295,k=B+(N<<20&4294967295|N>>>12),N=O+(B^H&(k^B))+j[5]+3593408605&4294967295,O=k+(N<<5&4294967295|N>>>27),N=H+(k^B&(O^k))+j[10]+38016083&4294967295,H=O+(N<<9&4294967295|N>>>23),N=B+(O^k&(H^O))+j[15]+3634488961&4294967295,B=H+(N<<14&4294967295|N>>>18),N=k+(H^O&(B^H))+j[4]+3889429448&4294967295,k=B+(N<<20&4294967295|N>>>12),N=O+(B^H&(k^B))+j[9]+568446438&4294967295,O=k+(N<<5&4294967295|N>>>27),N=H+(k^B&(O^k))+j[14]+3275163606&4294967295,H=O+(N<<9&4294967295|N>>>23),N=B+(O^k&(H^O))+j[3]+4107603335&4294967295,B=H+(N<<14&4294967295|N>>>18),N=k+(H^O&(B^H))+j[8]+1163531501&4294967295,k=B+(N<<20&4294967295|N>>>12),N=O+(B^H&(k^B))+j[13]+2850285829&4294967295,O=k+(N<<5&4294967295|N>>>27),N=H+(k^B&(O^k))+j[2]+4243563512&4294967295,H=O+(N<<9&4294967295|N>>>23),N=B+(O^k&(H^O))+j[7]+1735328473&4294967295,B=H+(N<<14&4294967295|N>>>18),N=k+(H^O&(B^H))+j[12]+2368359562&4294967295,k=B+(N<<20&4294967295|N>>>12),N=O+(k^B^H)+j[5]+4294588738&4294967295,O=k+(N<<4&4294967295|N>>>28),N=H+(O^k^B)+j[8]+2272392833&4294967295,H=O+(N<<11&4294967295|N>>>21),N=B+(H^O^k)+j[11]+1839030562&4294967295,B=H+(N<<16&4294967295|N>>>16),N=k+(B^H^O)+j[14]+4259657740&4294967295,k=B+(N<<23&4294967295|N>>>9),N=O+(k^B^H)+j[1]+2763975236&4294967295,O=k+(N<<4&4294967295|N>>>28),N=H+(O^k^B)+j[4]+1272893353&4294967295,H=O+(N<<11&4294967295|N>>>21),N=B+(H^O^k)+j[7]+4139469664&4294967295,B=H+(N<<16&4294967295|N>>>16),N=k+(B^H^O)+j[10]+3200236656&4294967295,k=B+(N<<23&4294967295|N>>>9),N=O+(k^B^H)+j[13]+681279174&4294967295,O=k+(N<<4&4294967295|N>>>28),N=H+(O^k^B)+j[0]+3936430074&4294967295,H=O+(N<<11&4294967295|N>>>21),N=B+(H^O^k)+j[3]+3572445317&4294967295,B=H+(N<<16&4294967295|N>>>16),N=k+(B^H^O)+j[6]+76029189&4294967295,k=B+(N<<23&4294967295|N>>>9),N=O+(k^B^H)+j[9]+3654602809&4294967295,O=k+(N<<4&4294967295|N>>>28),N=H+(O^k^B)+j[12]+3873151461&4294967295,H=O+(N<<11&4294967295|N>>>21),N=B+(H^O^k)+j[15]+530742520&4294967295,B=H+(N<<16&4294967295|N>>>16),N=k+(B^H^O)+j[2]+3299628645&4294967295,k=B+(N<<23&4294967295|N>>>9),N=O+(B^(k|~H))+j[0]+4096336452&4294967295,O=k+(N<<6&4294967295|N>>>26),N=H+(k^(O|~B))+j[7]+1126891415&4294967295,H=O+(N<<10&4294967295|N>>>22),N=B+(O^(H|~k))+j[14]+2878612391&4294967295,B=H+(N<<15&4294967295|N>>>17),N=k+(H^(B|~O))+j[5]+4237533241&4294967295,k=B+(N<<21&4294967295|N>>>11),N=O+(B^(k|~H))+j[12]+1700485571&4294967295,O=k+(N<<6&4294967295|N>>>26),N=H+(k^(O|~B))+j[3]+2399980690&4294967295,H=O+(N<<10&4294967295|N>>>22),N=B+(O^(H|~k))+j[10]+4293915773&4294967295,B=H+(N<<15&4294967295|N>>>17),N=k+(H^(B|~O))+j[1]+2240044497&4294967295,k=B+(N<<21&4294967295|N>>>11),N=O+(B^(k|~H))+j[8]+1873313359&4294967295,O=k+(N<<6&4294967295|N>>>26),N=H+(k^(O|~B))+j[15]+4264355552&4294967295,H=O+(N<<10&4294967295|N>>>22),N=B+(O^(H|~k))+j[6]+2734768916&4294967295,B=H+(N<<15&4294967295|N>>>17),N=k+(H^(B|~O))+j[13]+1309151649&4294967295,k=B+(N<<21&4294967295|N>>>11),N=O+(B^(k|~H))+j[4]+4149444226&4294967295,O=k+(N<<6&4294967295|N>>>26),N=H+(k^(O|~B))+j[11]+3174756917&4294967295,H=O+(N<<10&4294967295|N>>>22),N=B+(O^(H|~k))+j[2]+718787259&4294967295,B=H+(N<<15&4294967295|N>>>17),N=k+(H^(B|~O))+j[9]+3951481745&4294967295,V.g[0]=V.g[0]+O&4294967295,V.g[1]=V.g[1]+(B+(N<<21&4294967295|N>>>11))&4294967295,V.g[2]=V.g[2]+B&4294967295,V.g[3]=V.g[3]+H&4294967295}o.prototype.u=function(V,O){O===void 0&&(O=V.length);for(var k=O-this.blockSize,j=this.B,B=this.h,H=0;H<O;){if(B==0)for(;H<=k;)l(this,V,H),H+=this.blockSize;if(typeof V=="string"){for(;H<O;)if(j[B++]=V.charCodeAt(H++),B==this.blockSize){l(this,j),B=0;break}}else for(;H<O;)if(j[B++]=V[H++],B==this.blockSize){l(this,j),B=0;break}}this.h=B,this.o+=O},o.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var O=1;O<V.length-8;++O)V[O]=0;var k=8*this.o;for(O=V.length-8;O<V.length;++O)V[O]=k&255,k/=256;for(this.u(V),V=Array(16),O=k=0;4>O;++O)for(var j=0;32>j;j+=8)V[k++]=this.g[O]>>>j&255;return V};function h(V,O){var k=v;return Object.prototype.hasOwnProperty.call(k,V)?k[V]:k[V]=O(V)}function p(V,O){this.h=O;for(var k=[],j=!0,B=V.length-1;0<=B;B--){var H=V[B]|0;j&&H==O||(k[B]=H,j=!1)}this.g=k}var v={};function y(V){return-128<=V&&128>V?h(V,function(O){return new p([O|0],0>O?-1:0)}):new p([V|0],0>V?-1:0)}function E(V){if(isNaN(V)||!isFinite(V))return P;if(0>V)return lt(E(-V));for(var O=[],k=1,j=0;V>=k;j++)O[j]=V/k|0,k*=4294967296;return new p(O,0)}function x(V,O){if(V.length==0)throw Error("number format error: empty string");if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(V.charAt(0)=="-")return lt(x(V.substring(1),O));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=E(Math.pow(O,8)),j=P,B=0;B<V.length;B+=8){var H=Math.min(8,V.length-B),N=parseInt(V.substring(B,B+H),O);8>H?(H=E(Math.pow(O,H)),j=j.j(H).add(E(N))):(j=j.j(k),j=j.add(E(N)))}return j}var P=y(0),M=y(1),q=y(16777216);r=p.prototype,r.m=function(){if(et(this))return-lt(this).m();for(var V=0,O=1,k=0;k<this.g.length;k++){var j=this.i(k);V+=(0<=j?j:4294967296+j)*O,O*=4294967296}return V},r.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(W(this))return"0";if(et(this))return"-"+lt(this).toString(V);for(var O=E(Math.pow(V,6)),k=this,j="";;){var B=Ht(k,O).g;k=Tt(k,B.j(O));var H=((0<k.g.length?k.g[0]:k.h)>>>0).toString(V);if(k=B,W(k))return H+j;for(;6>H.length;)H="0"+H;j=H+j}},r.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function W(V){if(V.h!=0)return!1;for(var O=0;O<V.g.length;O++)if(V.g[O]!=0)return!1;return!0}function et(V){return V.h==-1}r.l=function(V){return V=Tt(this,V),et(V)?-1:W(V)?0:1};function lt(V){for(var O=V.g.length,k=[],j=0;j<O;j++)k[j]=~V.g[j];return new p(k,~V.h).add(M)}r.abs=function(){return et(this)?lt(this):this},r.add=function(V){for(var O=Math.max(this.g.length,V.g.length),k=[],j=0,B=0;B<=O;B++){var H=j+(this.i(B)&65535)+(V.i(B)&65535),N=(H>>>16)+(this.i(B)>>>16)+(V.i(B)>>>16);j=N>>>16,H&=65535,N&=65535,k[B]=N<<16|H}return new p(k,k[k.length-1]&-2147483648?-1:0)};function Tt(V,O){return V.add(lt(O))}r.j=function(V){if(W(this)||W(V))return P;if(et(this))return et(V)?lt(this).j(lt(V)):lt(lt(this).j(V));if(et(V))return lt(this.j(lt(V)));if(0>this.l(q)&&0>V.l(q))return E(this.m()*V.m());for(var O=this.g.length+V.g.length,k=[],j=0;j<2*O;j++)k[j]=0;for(j=0;j<this.g.length;j++)for(var B=0;B<V.g.length;B++){var H=this.i(j)>>>16,N=this.i(j)&65535,ge=V.i(B)>>>16,de=V.i(B)&65535;k[2*j+2*B]+=N*de,ht(k,2*j+2*B),k[2*j+2*B+1]+=H*de,ht(k,2*j+2*B+1),k[2*j+2*B+1]+=N*ge,ht(k,2*j+2*B+1),k[2*j+2*B+2]+=H*ge,ht(k,2*j+2*B+2)}for(j=0;j<O;j++)k[j]=k[2*j+1]<<16|k[2*j];for(j=O;j<2*O;j++)k[j]=0;return new p(k,0)};function ht(V,O){for(;(V[O]&65535)!=V[O];)V[O+1]+=V[O]>>>16,V[O]&=65535,O++}function yt(V,O){this.g=V,this.h=O}function Ht(V,O){if(W(O))throw Error("division by zero");if(W(V))return new yt(P,P);if(et(V))return O=Ht(lt(V),O),new yt(lt(O.g),lt(O.h));if(et(O))return O=Ht(V,lt(O)),new yt(lt(O.g),O.h);if(30<V.g.length){if(et(V)||et(O))throw Error("slowDivide_ only works with positive integers.");for(var k=M,j=O;0>=j.l(V);)k=Pt(k),j=Pt(j);var B=zt(k,1),H=zt(j,1);for(j=zt(j,2),k=zt(k,2);!W(j);){var N=H.add(j);0>=N.l(V)&&(B=B.add(k),H=N),j=zt(j,1),k=zt(k,1)}return O=Tt(V,B.j(O)),new yt(B,O)}for(B=P;0<=V.l(O);){for(k=Math.max(1,Math.floor(V.m()/O.m())),j=Math.ceil(Math.log(k)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),H=E(k),N=H.j(O);et(N)||0<N.l(V);)k-=j,H=E(k),N=H.j(O);W(H)&&(H=M),B=B.add(H),V=Tt(V,N)}return new yt(B,V)}r.A=function(V){return Ht(this,V).h},r.and=function(V){for(var O=Math.max(this.g.length,V.g.length),k=[],j=0;j<O;j++)k[j]=this.i(j)&V.i(j);return new p(k,this.h&V.h)},r.or=function(V){for(var O=Math.max(this.g.length,V.g.length),k=[],j=0;j<O;j++)k[j]=this.i(j)|V.i(j);return new p(k,this.h|V.h)},r.xor=function(V){for(var O=Math.max(this.g.length,V.g.length),k=[],j=0;j<O;j++)k[j]=this.i(j)^V.i(j);return new p(k,this.h^V.h)};function Pt(V){for(var O=V.g.length+1,k=[],j=0;j<O;j++)k[j]=V.i(j)<<1|V.i(j-1)>>>31;return new p(k,V.h)}function zt(V,O){var k=O>>5;O%=32;for(var j=V.g.length-k,B=[],H=0;H<j;H++)B[H]=0<O?V.i(H+k)>>>O|V.i(H+k+1)<<32-O:V.i(H+k);return new p(B,V.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,CE=o,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.A,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=E,p.fromString=x,ca=p}).apply(typeof b0<"u"?b0:typeof self<"u"?self:typeof window<"u"?window:{});var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PE,pc,ME,yf,wp,OE,DE,NE;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,T,w){return f==Array.prototype||f==Object.prototype||(f[T]=w.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof uf=="object"&&uf];for(var T=0;T<f.length;++T){var w=f[T];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var o=n(this);function l(f,T){if(T)t:{var w=o;f=f.split(".");for(var C=0;C<f.length-1;C++){var Y=f[C];if(!(Y in w))break t;w=w[Y]}f=f[f.length-1],C=w[f],T=T(C),T!=C&&T!=null&&t(w,f,{configurable:!0,writable:!0,value:T})}}function h(f,T){f instanceof String&&(f+="");var w=0,C=!1,Y={next:function(){if(!C&&w<f.length){var at=w++;return{value:T(at,f[at]),done:!1}}return C=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}l("Array.prototype.values",function(f){return f||function(){return h(this,function(T,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var p=p||{},v=this||self;function y(f){var T=typeof f;return T=T!="object"?T:f?Array.isArray(f)?"array":T:"null",T=="array"||T=="object"&&typeof f.length=="number"}function E(f){var T=typeof f;return T=="object"&&f!=null||T=="function"}function x(f,T,w){return f.call.apply(f.bind,arguments)}function P(f,T,w){if(!f)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,C),f.apply(T,Y)}}return function(){return f.apply(T,arguments)}}function M(f,T,w){return M=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:P,M.apply(null,arguments)}function q(f,T){var w=Array.prototype.slice.call(arguments,1);return function(){var C=w.slice();return C.push.apply(C,arguments),f.apply(this,C)}}function W(f,T){function w(){}w.prototype=T.prototype,f.aa=T.prototype,f.prototype=new w,f.prototype.constructor=f,f.Qb=function(C,Y,at){for(var Ct=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)Ct[Re-2]=arguments[Re];return T.prototype[Y].apply(C,Ct)}}function et(f){const T=f.length;if(0<T){const w=Array(T);for(let C=0;C<T;C++)w[C]=f[C];return w}return[]}function lt(f,T){for(let w=1;w<arguments.length;w++){const C=arguments[w];if(y(C)){const Y=f.length||0,at=C.length||0;f.length=Y+at;for(let Ct=0;Ct<at;Ct++)f[Y+Ct]=C[Ct]}else f.push(C)}}class Tt{constructor(T,w){this.i=T,this.j=w,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function ht(f){return/^[\s\xa0]*$/.test(f)}function yt(){var f=v.navigator;return f&&(f=f.userAgent)?f:""}function Ht(f){return Ht[" "](f),f}Ht[" "]=function(){};var Pt=yt().indexOf("Gecko")!=-1&&!(yt().toLowerCase().indexOf("webkit")!=-1&&yt().indexOf("Edge")==-1)&&!(yt().indexOf("Trident")!=-1||yt().indexOf("MSIE")!=-1)&&yt().indexOf("Edge")==-1;function zt(f,T,w){for(const C in f)T.call(w,f[C],C,f)}function V(f,T){for(const w in f)T.call(void 0,f[w],w,f)}function O(f){const T={};for(const w in f)T[w]=f[w];return T}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(f,T){let w,C;for(let Y=1;Y<arguments.length;Y++){C=arguments[Y];for(w in C)f[w]=C[w];for(let at=0;at<k.length;at++)w=k[at],Object.prototype.hasOwnProperty.call(C,w)&&(f[w]=C[w])}}function B(f){var T=1;f=f.split(":");const w=[];for(;0<T&&f.length;)w.push(f.shift()),T--;return f.length&&w.push(f.join(":")),w}function H(f){v.setTimeout(()=>{throw f},0)}function N(){var f=te;let T=null;return f.g&&(T=f.g,f.g=f.g.next,f.g||(f.h=null),T.next=null),T}class ge{constructor(){this.h=this.g=null}add(T,w){const C=de.get();C.set(T,w),this.h?this.h.next=C:this.g=C,this.h=C}}var de=new Tt(()=>new J,f=>f.reset());class J{constructor(){this.next=this.g=this.h=null}set(T,w){this.h=T,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let At,ot=!1,te=new ge,D=()=>{const f=v.Promise.resolve(void 0);At=()=>{f.then(ut)}};var ut=()=>{for(var f;f=N();){try{f.h.call(f.g)}catch(w){H(w)}var T=de;T.j(f),100>T.h&&(T.h++,f.next=T.g,T.g=f)}ot=!1};function wt(){this.s=this.s,this.C=this.C}wt.prototype.s=!1,wt.prototype.ma=function(){this.s||(this.s=!0,this.N())},wt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(f,T){this.type=f,this.g=this.target=T,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var Et=(function(){if(!v.addEventListener||!Object.defineProperty)return!1;var f=!1,T=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const w=()=>{};v.addEventListener("test",w,T),v.removeEventListener("test",w,T)}catch{}return f})();function xt(f,T){if(rt.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var w=this.type=f.type,C=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=T,T=f.relatedTarget){if(Pt){t:{try{Ht(T.nodeName);var Y=!0;break t}catch{}Y=!1}Y||(T=null)}}else w=="mouseover"?T=f.fromElement:w=="mouseout"&&(T=f.toElement);this.relatedTarget=T,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:St[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&xt.aa.h.call(this)}}W(xt,rt);var St={2:"touch",3:"pen",4:"mouse"};xt.prototype.h=function(){xt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),ce=0;function je(f,T,w,C,Y){this.listener=f,this.proxy=null,this.src=T,this.type=w,this.capture=!!C,this.ha=Y,this.key=++ce,this.da=this.fa=!1}function Oe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Be(f){this.src=f,this.g={},this.h=0}Be.prototype.add=function(f,T,w,C,Y){var at=f.toString();f=this.g[at],f||(f=this.g[at]=[],this.h++);var Ct=nn(f,T,C,Y);return-1<Ct?(T=f[Ct],w||(T.fa=!1)):(T=new je(T,this.src,at,!!C,Y),T.fa=w,f.push(T)),T};function oe(f,T){var w=T.type;if(w in f.g){var C=f.g[w],Y=Array.prototype.indexOf.call(C,T,void 0),at;(at=0<=Y)&&Array.prototype.splice.call(C,Y,1),at&&(Oe(T),f.g[w].length==0&&(delete f.g[w],f.h--))}}function nn(f,T,w,C){for(var Y=0;Y<f.length;++Y){var at=f[Y];if(!at.da&&at.listener==T&&at.capture==!!w&&at.ha==C)return Y}return-1}var wn="closure_lm_"+(1e6*Math.random()|0),Hn={};function Ti(f,T,w,C,Y){if(Array.isArray(T)){for(var at=0;at<T.length;at++)Ti(f,T[at],w,C,Y);return null}return w=Zi(w),f&&f[Ee]?f.K(T,w,E(C)?!!C.capture:!1,Y):rn(f,T,w,!1,C,Y)}function rn(f,T,w,C,Y,at){if(!T)throw Error("Invalid event type");var Ct=E(Y)?!!Y.capture:!!Y,Re=De(f);if(Re||(f[wn]=Re=new Be(f)),w=Re.add(T,w,C,Ct,at),w.proxy)return w;if(C=Nn(),w.proxy=C,C.src=f,C.listener=w,f.addEventListener)Et||(Y=Ct),Y===void 0&&(Y=!1),f.addEventListener(T.toString(),C,Y);else if(f.attachEvent)f.attachEvent(sn(T.toString()),C);else if(f.addListener&&f.removeListener)f.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Nn(){function f(w){return T.call(f.src,f.listener,w)}const T=Ei;return f}function Kn(f,T,w,C,Y){if(Array.isArray(T))for(var at=0;at<T.length;at++)Kn(f,T[at],w,C,Y);else C=E(C)?!!C.capture:!!C,w=Zi(w),f&&f[Ee]?(f=f.i,T=String(T).toString(),T in f.g&&(at=f.g[T],w=nn(at,w,C,Y),-1<w&&(Oe(at[w]),Array.prototype.splice.call(at,w,1),at.length==0&&(delete f.g[T],f.h--)))):f&&(f=De(f))&&(T=f.g[T.toString()],f=-1,T&&(f=nn(T,w,C,Y)),(w=-1<f?T[f]:null)&&Xn(w))}function Xn(f){if(typeof f!="number"&&f&&!f.da){var T=f.src;if(T&&T[Ee])oe(T.i,f);else{var w=f.type,C=f.proxy;T.removeEventListener?T.removeEventListener(w,C,f.capture):T.detachEvent?T.detachEvent(sn(w),C):T.addListener&&T.removeListener&&T.removeListener(C),(w=De(T))?(oe(w,f),w.h==0&&(w.src=null,T[wn]=null)):Oe(f)}}}function sn(f){return f in Hn?Hn[f]:Hn[f]="on"+f}function Ei(f,T){if(f.da)f=!0;else{T=new xt(T,this);var w=f.listener,C=f.ha||f.src;f.fa&&Xn(f),f=w.call(C,T)}return f}function De(f){return f=f[wn],f instanceof Be?f:null}var li="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zi(f){return typeof f=="function"?f:(f[li]||(f[li]=function(T){return f.handleEvent(T)}),f[li])}function le(){wt.call(this),this.i=new Be(this),this.M=this,this.F=null}W(le,wt),le.prototype[Ee]=!0,le.prototype.removeEventListener=function(f,T,w,C){Kn(this,f,T,w,C)};function ve(f,T){var w,C=f.F;if(C)for(w=[];C;C=C.F)w.push(C);if(f=f.M,C=T.type||T,typeof T=="string")T=new rt(T,f);else if(T instanceof rt)T.target=T.target||f;else{var Y=T;T=new rt(C,f),j(T,Y)}if(Y=!0,w)for(var at=w.length-1;0<=at;at--){var Ct=T.g=w[at];Y=pn(Ct,C,!0,T)&&Y}if(Ct=T.g=f,Y=pn(Ct,C,!0,T)&&Y,Y=pn(Ct,C,!1,T)&&Y,w)for(at=0;at<w.length;at++)Ct=T.g=w[at],Y=pn(Ct,C,!1,T)&&Y}le.prototype.N=function(){if(le.aa.N.call(this),this.i){var f=this.i,T;for(T in f.g){for(var w=f.g[T],C=0;C<w.length;C++)Oe(w[C]);delete f.g[T],f.h--}}this.F=null},le.prototype.K=function(f,T,w,C){return this.i.add(String(f),T,!1,w,C)},le.prototype.L=function(f,T,w,C){return this.i.add(String(f),T,!0,w,C)};function pn(f,T,w,C){if(T=f.i.g[String(T)],!T)return!0;T=T.concat();for(var Y=!0,at=0;at<T.length;++at){var Ct=T[at];if(Ct&&!Ct.da&&Ct.capture==w){var Re=Ct.listener,xn=Ct.ha||Ct.src;Ct.fa&&oe(f.i,Ct),Y=Re.call(xn,C)!==!1&&Y}}return Y&&!C.defaultPrevented}function K(f,T,w){if(typeof f=="function")w&&(f=M(f,w));else if(f&&typeof f.handleEvent=="function")f=M(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:v.setTimeout(f,T||0)}function it(f){f.g=K(()=>{f.g=null,f.i&&(f.i=!1,it(f))},f.l);const T=f.h;f.h=null,f.m.apply(null,T)}class bt extends wt{constructor(T,w){super(),this.m=T,this.l=w,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:it(this)}N(){super.N(),this.g&&(v.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nt(f){wt.call(this),this.h=f,this.g={}}W(Nt,wt);var kt=[];function Rt(f){zt(f.g,function(T,w){this.g.hasOwnProperty(w)&&Xn(T)},f),f.g={}}Nt.prototype.N=function(){Nt.aa.N.call(this),Rt(this)},Nt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ot=v.JSON.stringify,me=v.JSON.parse,pe=class{stringify(f){return v.JSON.stringify(f,void 0)}parse(f){return v.JSON.parse(f,void 0)}};function ct(){}ct.prototype.h=null;function It(f){return f.h||(f.h=f.i())}function _t(){}var Qt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $t(){rt.call(this,"d")}W($t,rt);function Ft(){rt.call(this,"c")}W(Ft,rt);var Wt={},Fe=null;function qn(){return Fe=Fe||new le}Wt.La="serverreachability";function $n(f){rt.call(this,Wt.La,f)}W($n,rt);function Ni(f){const T=qn();ve(T,new $n(T))}Wt.STAT_EVENT="statevent";function or(f,T){rt.call(this,Wt.STAT_EVENT,f),this.stat=T}W(or,rt);function Ge(f){const T=qn();ve(T,new or(T,f))}Wt.Ma="timingevent";function fn(f,T){rt.call(this,Wt.Ma,f),this.size=T}W(fn,rt);function on(f,T){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return v.setTimeout(function(){f()},T)}function bi(){this.g=!0}bi.prototype.xa=function(){this.g=!1};function Fn(f,T,w,C,Y,at){f.info(function(){if(f.g)if(at)for(var Ct="",Re=at.split("&"),xn=0;xn<Re.length;xn++){var Ie=Re[xn].split("=");if(1<Ie.length){var qe=Ie[0];Ie=Ie[1];var un=qe.split("_");Ct=2<=un.length&&un[1]=="type"?Ct+(qe+"="+Ie+"&"):Ct+(qe+"=redacted&")}}else Ct=null;else Ct=at;return"XMLHTTP REQ ("+C+") [attempt "+Y+"]: "+T+`
`+w+`
`+Ct})}function Bt(f,T,w,C,Y,at,Ct){f.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+Y+"]: "+T+`
`+w+`
`+at+" "+Ct})}function Wi(f,T,w,C){f.info(function(){return"XMLHTTP TEXT ("+T+"): "+Ar(f,w)+(C?" "+C:"")})}function Ds(f,T){f.info(function(){return"TIMEOUT: "+T})}bi.prototype.info=function(){};function Ar(f,T){if(!f.g)return T;if(!T)return null;try{var w=JSON.parse(T);if(w){for(f=0;f<w.length;f++)if(Array.isArray(w[f])){var C=w[f];if(!(2>C.length)){var Y=C[1];if(Array.isArray(Y)&&!(1>Y.length)){var at=Y[0];if(at!="noop"&&at!="stop"&&at!="close")for(var Ct=1;Ct<Y.length;Ct++)Y[Ct]=""}}}}return Ot(w)}catch{return T}}var Yi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ui={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ci;function be(){}W(be,ct),be.prototype.g=function(){return new XMLHttpRequest},be.prototype.i=function(){return{}},ci=new be;function Sn(f,T,w,C){this.j=f,this.i=T,this.l=w,this.R=C||1,this.U=new Nt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new an}function an(){this.i=null,this.g="",this.h=!1}var An={},Qi={};function hi(f,T,w){f.L=1,f.v=Li(ln(T)),f.m=w,f.P=!0,wi(f,null)}function wi(f,T){f.F=Date.now(),Ns(f),f.A=ln(f.v);var w=f.A,C=f.R;Array.isArray(C)||(C=[String(C)]),Aa(w.i,"t",C),f.C=0,w=f.j.J,f.h=new an,f.g=ml(f.j,w?T:null,!f.m),0<f.O&&(f.M=new bt(M(f.Y,f,f.g),f.O)),T=f.U,w=f.g,C=f.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(kt[0]=Y.toString()),Y=kt);for(var at=0;at<Y.length;at++){var Ct=Ti(w,Y[at],C||T.handleEvent,!1,T.h||T);if(!Ct)break;T.g[Ct.key]=Ct}T=f.H?O(f.H):{},f.m?(f.u||(f.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,T)):(f.u="GET",f.g.ea(f.A,f.u,null,T)),Ni(),Fn(f.i,f.u,f.A,f.l,f.R,f.m)}Sn.prototype.ca=function(f){f=f.target;const T=this.M;T&&ei(f)==3?T.j():this.Y(f)},Sn.prototype.Y=function(f){try{if(f==this.g)t:{const un=ei(this.g);var T=this.g.Ba();const Kr=this.g.Z();if(!(3>un)&&(un!=3||this.g&&(this.h.h||this.g.oa()||xa(this.g)))){this.J||un!=4||T==7||(T==8||0>=Kr?Ni(3):Ni(2)),ls(this);var w=this.g.Z();this.X=w;e:if(as(this)){var C=xa(this.g);f="";var Y=C.length,at=ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gn(this),xr(this);var Ct="";break e}this.h.i=new v.TextDecoder}for(T=0;T<Y;T++)this.h.h=!0,f+=this.h.i.decode(C[T],{stream:!(at&&T==Y-1)});C.length=0,this.h.g+=f,this.C=0,Ct=this.h.g}else Ct=this.g.oa();if(this.o=w==200,Bt(this.i,this.u,this.A,this.l,this.R,un,w),this.o){if(this.T&&!this.K){e:{if(this.g){var Re,xn=this.g;if((Re=xn.g?xn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ht(Re)){var Ie=Re;break e}}Ie=null}if(w=Ie)Wi(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qr(this,w);else{this.o=!1,this.s=3,Ge(12),Gn(this),xr(this);break t}}if(this.P){w=!0;let tn;for(;!this.J&&this.C<Ct.length;)if(tn=Hr(this,Ct),tn==Qi){un==4&&(this.s=4,Ge(14),w=!1),Wi(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==An){this.s=4,Ge(15),Wi(this.i,this.l,Ct,"[Invalid Chunk]"),w=!1;break}else Wi(this.i,this.l,tn,null),qr(this,tn);if(as(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),un!=4||Ct.length!=0||this.h.h||(this.s=1,Ge(16),w=!1),this.o=this.o&&w,!w)Wi(this.i,this.l,Ct,"[Invalid Chunked Response]"),Gn(this),xr(this);else if(0<Ct.length&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.ba&&!qe.M&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+Ct.length),ms(qe),qe.M=!0,Ge(11))}}else Wi(this.i,this.l,Ct,null),qr(this,Ct);un==4&&Gn(this),this.o&&!this.J&&(un==4?Ia(this.j,this):(this.o=!1,Ns(this)))}else bu(this.g),w==400&&0<Ct.indexOf("Unknown SID")?(this.s=3,Ge(12)):(this.s=0,Ge(13)),Gn(this),xr(this)}}}catch{}finally{}};function as(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Hr(f,T){var w=f.C,C=T.indexOf(`
`,w);return C==-1?Qi:(w=Number(T.substring(w,C)),isNaN(w)?An:(C+=1,C+w>T.length?Qi:(T=T.slice(C,C+w),f.C=C+w,T)))}Sn.prototype.cancel=function(){this.J=!0,Gn(this)};function Ns(f){f.S=Date.now()+f.I,cl(f,f.I)}function cl(f,T){if(f.B!=null)throw Error("WatchDog timer not null");f.B=on(M(f.ba,f),T)}function ls(f){f.B&&(v.clearTimeout(f.B),f.B=null)}Sn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Ds(this.i,this.A),this.L!=2&&(Ni(),Ge(17)),Gn(this),this.s=2,xr(this)):cl(this,this.S-f)};function xr(f){f.j.G==0||f.J||Ia(f.j,f)}function Gn(f){ls(f);var T=f.M;T&&typeof T.ma=="function"&&T.ma(),f.M=null,Rt(f.U),f.g&&(T=f.g,f.g=null,T.abort(),T.ma())}function qr(f,T){try{var w=f.j;if(w.G!=0&&(w.g==f||we(w.h,f))){if(!f.K&&we(w.h,f)&&w.G==3){try{var C=w.Da.g.parse(T)}catch{C=null}if(Array.isArray(C)&&C.length==3){var Y=C;if(Y[0]==0){t:if(!w.u){if(w.g)if(w.g.F+3e3<f.F)wo(w),To(w);else break t;Eo(w),Ge(18)}}else w.za=Y[1],0<w.za-w.T&&37500>Y[2]&&w.F&&w.v==0&&!w.C&&(w.C=on(M(w.Za,w),6e3));if(1>=Ir(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Qr(w,11)}else if((f.K||w.g==f)&&wo(w),!ht(T))for(Y=w.Da.g.parse(T),T=0;T<Y.length;T++){let Ie=Y[T];if(w.T=Ie[0],Ie=Ie[1],w.G==2)if(Ie[0]=="c"){w.K=Ie[1],w.ia=Ie[2];const qe=Ie[3];qe!=null&&(w.la=qe,w.j.info("VER="+w.la));const un=Ie[4];un!=null&&(w.Aa=un,w.j.info("SVER="+w.Aa));const Kr=Ie[5];Kr!=null&&typeof Kr=="number"&&0<Kr&&(C=1.5*Kr,w.L=C,w.j.info("backChannelRequestTimeoutMs_="+C)),C=w;const tn=f.g;if(tn){const Dr=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dr){var at=C.h;at.g||Dr.indexOf("spdy")==-1&&Dr.indexOf("quic")==-1&&Dr.indexOf("h2")==-1||(at.j=at.l,at.g=new Set,at.h&&(He(at,at.h),at.h=null))}if(C.D){const Nr=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Nr&&(C.ya=Nr,ie(C.I,C.D,Nr))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-f.F,w.j.info("Handshake RTT: "+w.R+"ms")),C=w;var Ct=f;if(C.qa=Ao(C,C.J?C.ia:null,C.W),Ct.K){Ln(C.h,Ct);var Re=Ct,xn=C.L;xn&&(Re.I=xn),Re.B&&(ls(Re),Ns(Re)),C.g=Ct}else fr(C);0<w.i.length&&ds(w)}else Ie[0]!="stop"&&Ie[0]!="close"||Qr(w,7);else w.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?Qr(w,7):vo(w):Ie[0]!="noop"&&w.l&&w.l.ta(Ie),w.v=0)}}Ni(4)}catch{}}var us=class{constructor(f,T){this.g=f,this.map=T}};function Rr(f){this.l=f||10,v.PerformanceNavigationTiming?(f=v.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(v.chrome&&v.chrome.loadTimes&&v.chrome.loadTimes()&&v.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ls(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ir(f){return f.h?1:f.g?f.g.size:0}function we(f,T){return f.h?f.h==T:f.g?f.g.has(T):!1}function He(f,T){f.g?f.g.add(T):f.h=T}function Ln(f,T){f.h&&f.h==T?f.h=null:f.g&&f.g.has(T)&&f.g.delete(T)}Rr.prototype.cancel=function(){if(this.i=Cr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Cr(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let T=f.i;for(const w of f.g.values())T=T.concat(w.D);return T}return et(f.i)}function cs(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(y(f)){for(var T=[],w=f.length,C=0;C<w;C++)T.push(f[C]);return T}T=[],w=0;for(C in f)T[w++]=f[C];return T}function hs(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(y(f)||typeof f=="string"){var T=[];f=f.length;for(var w=0;w<f;w++)T.push(w);return T}T=[],w=0;for(const C in f)T[w++]=C;return T}}}function he(f,T){if(f.forEach&&typeof f.forEach=="function")f.forEach(T,void 0);else if(y(f)||typeof f=="string")Array.prototype.forEach.call(f,T,void 0);else for(var w=hs(f),C=cs(f),Y=C.length,at=0;at<Y;at++)T.call(void 0,C[at],w&&w[at],f)}var Ze=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wa(f,T){if(f){f=f.split("&");for(var w=0;w<f.length;w++){var C=f[w].indexOf("="),Y=null;if(0<=C){var at=f[w].substring(0,C);Y=f[w].substring(C+1)}else at=f[w];T(at,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function dn(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof dn){this.h=f.h,ks(this,f.j),this.o=f.o,this.g=f.g,ar(this,f.s),this.l=f.l;var T=f.i,w=new ur;w.i=T.i,T.g&&(w.g=new Map(T.g),w.h=T.h),fi(this,w),this.m=f.m}else f&&(T=String(f).match(Ze))?(this.h=!1,ks(this,T[1]||"",!0),this.o=Jn(T[2]||""),this.g=Jn(T[3]||"",!0),ar(this,T[4]),this.l=Jn(T[5]||"",!0),fi(this,T[6]||"",!0),this.m=Jn(T[7]||"")):(this.h=!1,this.i=new ur(null,this.h))}dn.prototype.toString=function(){var f=[],T=this.j;T&&f.push(lr(T,Fr,!0),":");var w=this.g;return(w||T=="file")&&(f.push("//"),(T=this.o)&&f.push(lr(T,Fr,!0),"@"),f.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&f.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&f.push("/"),f.push(lr(w,w.charAt(0)=="/"?Sa:Vs,!0))),(w=this.i.toString())&&f.push("?",w),(w=this.m)&&f.push("#",lr(w,fs)),f.join("")};function ln(f){return new dn(f)}function ks(f,T,w){f.j=w?Jn(T,!0):T,f.j&&(f.j=f.j.replace(/:$/,""))}function ar(f,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);f.s=T}else f.s=null}function fi(f,T,w){T instanceof ur?(f.i=T,ki(f.i,f.h)):(w||(T=lr(T,go)),f.i=new ur(T,f.h))}function ie(f,T,w){f.i.set(T,w)}function Li(f){return ie(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Jn(f,T){return f?T?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function lr(f,T,w){return typeof f=="string"?(f=encodeURI(f).replace(T,po),w&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function po(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Fr=/[#\/\?@]/g,Vs=/[#\?:]/g,Sa=/[#\?]/g,go=/[#\?@]/g,fs=/#/g;function ur(f,T){this.h=this.g=null,this.i=f||null,this.j=!!T}function di(f){f.g||(f.g=new Map,f.h=0,f.i&&wa(f.i,function(T,w){f.add(decodeURIComponent(T.replace(/\+/g," ")),w)}))}r=ur.prototype,r.add=function(f,T){di(this),this.i=null,f=Kt(this,f);var w=this.g.get(f);return w||this.g.set(f,w=[]),w.push(T),this.h+=1,this};function Pr(f,T){di(f),T=Kt(f,T),f.g.has(T)&&(f.i=null,f.h-=f.g.get(T).length,f.g.delete(T))}function cr(f,T){return di(f),T=Kt(f,T),f.g.has(T)}r.forEach=function(f,T){di(this),this.g.forEach(function(w,C){w.forEach(function(Y){f.call(T,Y,C,this)},this)},this)},r.na=function(){di(this);const f=Array.from(this.g.values()),T=Array.from(this.g.keys()),w=[];for(let C=0;C<T.length;C++){const Y=f[C];for(let at=0;at<Y.length;at++)w.push(T[C])}return w},r.V=function(f){di(this);let T=[];if(typeof f=="string")cr(this,f)&&(T=T.concat(this.g.get(Kt(this,f))));else{f=Array.from(this.g.values());for(let w=0;w<f.length;w++)T=T.concat(f[w])}return T},r.set=function(f,T){return di(this),this.i=null,f=Kt(this,f),cr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[T]),this.h+=1,this},r.get=function(f,T){return f?(f=this.V(f),0<f.length?String(f[0]):T):T};function Aa(f,T,w){Pr(f,T),0<w.length&&(f.i=null,f.g.set(Kt(f,T),et(w)),f.h+=w.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],T=Array.from(this.g.keys());for(var w=0;w<T.length;w++){var C=T[w];const at=encodeURIComponent(String(C)),Ct=this.V(C);for(C=0;C<Ct.length;C++){var Y=at;Ct[C]!==""&&(Y+="="+encodeURIComponent(String(Ct[C]))),f.push(Y)}}return this.i=f.join("&")};function Kt(f,T){return T=String(T),f.j&&(T=T.toLowerCase()),T}function ki(f,T){T&&!f.j&&(di(f),f.i=null,f.g.forEach(function(w,C){var Y=C.toLowerCase();C!=Y&&(Pr(this,C),Aa(this,Y,w))},f)),f.j=T}function Ne(f,T){const w=new bi;if(v.Image){const C=new Image;C.onload=q(Si,w,"TestLoadImage: loaded",!0,T,C),C.onerror=q(Si,w,"TestLoadImage: error",!1,T,C),C.onabort=q(Si,w,"TestLoadImage: abort",!1,T,C),C.ontimeout=q(Si,w,"TestLoadImage: timeout",!1,T,C),v.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=f}else T(!1)}function Ki(f,T){const w=new bi,C=new AbortController,Y=setTimeout(()=>{C.abort(),Si(w,"TestPingServer: timeout",!1,T)},1e4);fetch(f,{signal:C.signal}).then(at=>{clearTimeout(Y),at.ok?Si(w,"TestPingServer: ok",!0,T):Si(w,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(Y),Si(w,"TestPingServer: error",!1,T)})}function Si(f,T,w,C,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),C(w)}catch{}}function Gr(){this.g=new pe}function Xi(f,T,w){const C=w||"";try{he(f,function(Y,at){let Ct=Y;E(Y)&&(Ct=Ot(Y)),T.push(C+at+"="+encodeURIComponent(Ct))})}catch(Y){throw T.push(C+"type="+encodeURIComponent("_badmap")),Y}}function Ai(f){this.l=f.Ub||null,this.j=f.eb||!1}W(Ai,ct),Ai.prototype.g=function(){return new hr(this.l,this.j)},Ai.prototype.i=(function(f){return function(){return f}})({});function hr(f,T){le.call(this),this.D=f,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}W(hr,le),r=hr.prototype,r.open=function(f,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=T,this.readyState=1,ti(this)},r.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(T.body=f),(this.D||v).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qe(this)),this.readyState=0},r.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof v.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zr(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zr(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}r.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var T=f.value?f.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!f.done}))&&(this.response=this.responseText+=T)}f.done?Qe(this):ti(this),this.readyState==3&&Zr(this)}},r.Ra=function(f){this.g&&(this.response=this.responseText=f,Qe(this))},r.Qa=function(f){this.g&&(this.response=f,Qe(this))},r.ga=function(){this.g&&Qe(this)};function Qe(f){f.readyState=4,f.l=null,f.j=null,f.v=null,ti(f)}r.setRequestHeader=function(f,T){this.u.append(f,T)},r.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],T=this.h.entries();for(var w=T.next();!w.done;)w=w.value,f.push(w[0]+": "+w[1]),w=T.next();return f.join(`\r
`)};function ti(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(hr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function _o(f){let T="";return zt(f,function(w,C){T+=C,T+=":",T+=w,T+=`\r
`}),T}function In(f,T,w){t:{for(C in w){var C=!1;break t}C=!0}C||(w=_o(w),typeof f=="string"?w!=null&&encodeURIComponent(String(w)):ie(f,T,w))}function ze(f){le.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}W(ze,le);var zs=/^https?$/i,Wr=["POST","PUT"];r=ze.prototype,r.Ha=function(f){this.J=f},r.ea=function(f,T,w,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);T=T?T.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ci.g(),this.v=this.o?It(this.o):It(ci),this.g.onreadystatechange=M(this.Ea,this);try{this.B=!0,this.g.open(T,String(f),!0),this.B=!1}catch(at){hl(this,at);return}if(f=w||"",w=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var Y in C)w.set(Y,C[Y]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const at of C.keys())w.set(at,C.get(at));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(w.keys()).find(at=>at.toLowerCase()=="content-type"),Y=v.FormData&&f instanceof v.FormData,!(0<=Array.prototype.indexOf.call(Wr,T,void 0))||C||Y||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[at,Ct]of w)this.g.setRequestHeader(at,Ct);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zn(this),this.u=!0,this.g.send(f),this.u=!1}catch(at){hl(this,at)}};function hl(f,T){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=T,f.m=5,Us(f),Mr(f)}function Us(f){f.A||(f.A=!0,ve(f,"complete"),ve(f,"error"))}r.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,ve(this,"complete"),ve(this,"abort"),Mr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mr(this,!0)),ze.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?_e(this):this.bb())},r.bb=function(){_e(this)};function _e(f){if(f.h&&typeof p<"u"&&(!f.v[1]||ei(f)!=4||f.Z()!=2)){if(f.u&&ei(f)==4)K(f.Ea,0,f);else if(ve(f,"readystatechange"),ei(f)==4){f.h=!1;try{const Ct=f.Z();t:switch(Ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break t;default:T=!1}var w;if(!(w=T)){var C;if(C=Ct===0){var Y=String(f.D).match(Ze)[1]||null;!Y&&v.self&&v.self.location&&(Y=v.self.location.protocol.slice(0,-1)),C=!zs.test(Y?Y.toLowerCase():"")}w=C}if(w)ve(f,"complete"),ve(f,"success");else{f.m=6;try{var at=2<ei(f)?f.g.statusText:""}catch{at=""}f.l=at+" ["+f.Z()+"]",Us(f)}}finally{Mr(f)}}}}function Mr(f,T){if(f.g){Zn(f);const w=f.g,C=f.v[0]?()=>{}:null;f.g=null,f.v=null,T||ve(f,"ready");try{w.onreadystatechange=C}catch{}}}function Zn(f){f.I&&(v.clearTimeout(f.I),f.I=null)}r.isActive=function(){return!!this.g};function ei(f){return f.g?f.g.readyState:0}r.Z=function(){try{return 2<ei(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(f){if(this.g){var T=this.g.responseText;return f&&T.indexOf(f)==0&&(T=T.substring(f.length)),me(T)}};function xa(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function bu(f){const T={};f=(f.g&&2<=ei(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<f.length;C++){if(ht(f[C]))continue;var w=B(f[C]);const Y=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const at=T[Y]||[];T[Y]=at,at.push(w)}V(T,function(C){return C.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yr(f,T,w){return w&&w.internalChannelParams&&w.internalChannelParams[f]||T}function yo(f){this.Aa=0,this.i=[],this.j=new bi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yr("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yr("baseRetryDelayMs",5e3,f),this.cb=Yr("retryDelaySeedMs",1e4,f),this.Wa=Yr("forwardChannelMaxRetries",2,f),this.wa=Yr("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Rr(f&&f.concurrentRequestLimit),this.Da=new Gr,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=yo.prototype,r.la=8,r.G=1,r.connect=function(f,T,w,C){Ge(0),this.W=f,this.H=T||{},w&&C!==void 0&&(this.H.OSID=w,this.H.OAID=C),this.F=this.X,this.I=Ao(this,null,this.W),ds(this)};function vo(f){if(fl(f),f.G==3){var T=f.U++,w=ln(f.I);if(ie(w,"SID",f.K),ie(w,"RID",T),ie(w,"TYPE","terminate"),js(f,w),T=new Sn(f,f.j,T),T.L=2,T.v=Li(ln(w)),w=!1,v.navigator&&v.navigator.sendBeacon)try{w=v.navigator.sendBeacon(T.v.toString(),"")}catch{}!w&&v.Image&&(new Image().src=T.v,w=!0),w||(T.g=ml(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Ns(T)}dl(f)}function To(f){f.g&&(ms(f),f.g.cancel(),f.g=null)}function fl(f){To(f),f.u&&(v.clearTimeout(f.u),f.u=null),wo(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&v.clearTimeout(f.s),f.s=null)}function ds(f){if(!Ls(f.h)&&!f.s){f.s=!0;var T=f.Ga;At||D(),ot||(At(),ot=!0),te.add(T,f),f.B=0}}function wu(f,T){return Ir(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=T.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=on(M(f.Ga,f,T),So(f,f.B)),f.B++,!0)}r.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const Y=new Sn(this,this.j,f);let at=this.o;if(this.S&&(at?(at=O(at),j(at,this.S)):at=this.S),this.m!==null||this.O||(Y.H=at,at=null),this.P)t:{for(var T=0,w=0;w<this.i.length;w++){e:{var C=this.i[w];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break e}C=void 0}if(C===void 0)break;if(T+=C,4096<T){T=w;break t}if(T===4096||w===this.i.length-1){T=w+1;break t}}T=1e3}else T=1e3;T=Ra(this,Y,T),w=ln(this.I),ie(w,"RID",f),ie(w,"CVER",22),this.D&&ie(w,"X-HTTP-Session-Id",this.D),js(this,w),at&&(this.O?T="headers="+encodeURIComponent(String(_o(at)))+"&"+T:this.m&&In(w,this.m,at)),He(this.h,Y),this.Ua&&ie(w,"TYPE","init"),this.P?(ie(w,"$req",T),ie(w,"SID","null"),Y.T=!0,hi(Y,w,null)):hi(Y,w,T),this.G=2}}else this.G==3&&(f?xi(this,f):this.i.length==0||Ls(this.h)||xi(this))};function xi(f,T){var w;T?w=T.l:w=f.U++;const C=ln(f.I);ie(C,"SID",f.K),ie(C,"RID",w),ie(C,"AID",f.T),js(f,C),f.m&&f.o&&In(C,f.m,f.o),w=new Sn(f,f.j,w,f.B+1),f.m===null&&(w.H=f.o),T&&(f.i=T.D.concat(f.i)),T=Ra(f,w,1e3),w.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),He(f.h,w),hi(w,C,T)}function js(f,T){f.H&&zt(f.H,function(w,C){ie(T,C,w)}),f.l&&he({},function(w,C){ie(T,C,w)})}function Ra(f,T,w){w=Math.min(f.i.length,w);var C=f.l?M(f.l.Na,f.l,f):null;t:{var Y=f.i;let at=-1;for(;;){const Ct=["count="+w];at==-1?0<w?(at=Y[0].g,Ct.push("ofs="+at)):at=0:Ct.push("ofs="+at);let Re=!0;for(let xn=0;xn<w;xn++){let Ie=Y[xn].g;const qe=Y[xn].map;if(Ie-=at,0>Ie)at=Math.max(0,Y[xn].g-100),Re=!1;else try{Xi(qe,Ct,"req"+Ie+"_")}catch{C&&C(qe)}}if(Re){C=Ct.join("&");break t}}}return f=f.i.splice(0,w),T.D=f,C}function fr(f){if(!f.g&&!f.u){f.Y=1;var T=f.Fa;At||D(),ot||(At(),ot=!0),te.add(T,f),f.v=0}}function Eo(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=on(M(f.Fa,f),So(f,f.v)),f.v++,!0)}r.Fa=function(){if(this.u=null,bo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=on(M(this.ab,this),f)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ge(10),To(this),bo(this))};function ms(f){f.A!=null&&(v.clearTimeout(f.A),f.A=null)}function bo(f){f.g=new Sn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var T=ln(f.qa);ie(T,"RID","rpc"),ie(T,"SID",f.K),ie(T,"AID",f.T),ie(T,"CI",f.F?"0":"1"),!f.F&&f.ja&&ie(T,"TO",f.ja),ie(T,"TYPE","xmlhttp"),js(f,T),f.m&&f.o&&In(T,f.m,f.o),f.L&&(f.g.I=f.L);var w=f.g;f=f.ia,w.L=1,w.v=Li(ln(T)),w.m=null,w.P=!0,wi(w,f)}r.Za=function(){this.C!=null&&(this.C=null,To(this),Eo(this),Ge(19))};function wo(f){f.C!=null&&(v.clearTimeout(f.C),f.C=null)}function Ia(f,T){var w=null;if(f.g==T){wo(f),ms(f),f.g=null;var C=2}else if(we(f.h,T))w=T.D,Ln(f.h,T),C=1;else return;if(f.G!=0){if(T.o)if(C==1){w=T.m?T.m.length:0,T=Date.now()-T.F;var Y=f.B;C=qn(),ve(C,new fn(C,w)),ds(f)}else fr(f);else if(Y=T.s,Y==3||Y==0&&0<T.X||!(C==1&&wu(f,T)||C==2&&Eo(f)))switch(w&&0<w.length&&(T=f.h,T.i=T.i.concat(w)),Y){case 1:Qr(f,5);break;case 4:Qr(f,10);break;case 3:Qr(f,6);break;default:Qr(f,2)}}}function So(f,T){let w=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(w*=2),w*T}function Qr(f,T){if(f.j.info("Error code "+T),T==2){var w=M(f.fb,f),C=f.Xa;const Y=!C;C=new dn(C||"//www.google.com/images/cleardot.gif"),v.location&&v.location.protocol=="http"||ks(C,"https"),Li(C),Y?Ne(C.toString(),w):Ki(C.toString(),w)}else Ge(2);f.G=0,f.l&&f.l.sa(T),dl(f),fl(f)}r.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ge(2)):(this.j.info("Failed to ping google.com"),Ge(1))};function dl(f){if(f.G=0,f.ka=[],f.l){const T=Cr(f.h);(T.length!=0||f.i.length!=0)&&(lt(f.ka,T),lt(f.ka,f.i),f.h.i.length=0,et(f.i),f.i.length=0),f.l.ra()}}function Ao(f,T,w){var C=w instanceof dn?ln(w):new dn(w);if(C.g!="")T&&(C.g=T+"."+C.g),ar(C,C.s);else{var Y=v.location;C=Y.protocol,T=T?T+"."+Y.hostname:Y.hostname,Y=+Y.port;var at=new dn(null);C&&ks(at,C),T&&(at.g=T),Y&&ar(at,Y),w&&(at.l=w),C=at}return w=f.D,T=f.ya,w&&T&&ie(C,w,T),ie(C,"VER",f.la),js(f,C),C}function ml(f,T,w){if(T&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=f.Ca&&!f.pa?new ze(new Ai({eb:w})):new ze(f.pa),T.Ha(f.J),T}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ca(){}r=Ca.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Bs(){}Bs.prototype.g=function(f,T){return new kn(f,T)};function kn(f,T){le.call(this),this.g=new yo(T),this.l=f,this.h=T&&T.messageUrlParams||null,f=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(f?f["X-WebChannel-Content-Type"]=T.messageContentType:f={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(f?f["X-WebChannel-Client-Profile"]=T.va:f={"X-WebChannel-Client-Profile":T.va}),this.g.S=f,(f=T&&T.Sb)&&!ht(f)&&(this.g.m=f),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!ht(T)&&(this.g.D=T,f=this.h,f!==null&&T in f&&(f=this.h,T in f&&delete f[T])),this.j=new Ri(this)}W(kn,le),kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){vo(this.g)},kn.prototype.o=function(f){var T=this.g;if(typeof f=="string"){var w={};w.__data__=f,f=w}else this.u&&(w={},w.__data__=Ot(f),f=w);T.i.push(new us(T.Ya++,f)),T.G==3&&ds(T)},kn.prototype.N=function(){this.g.l=null,delete this.j,vo(this.g),delete this.g,kn.aa.N.call(this)};function Or(f){$t.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var T=f.__sm__;if(T){t:{for(const w in T){f=w;break t}f=void 0}(this.i=f)&&(f=this.i,T=T!==null&&f in T?T[f]:void 0),this.data=T}else this.data=f}W(Or,$t);function pl(){Ft.call(this),this.status=1}W(pl,Ft);function Ri(f){this.g=f}W(Ri,Ca),Ri.prototype.ua=function(){ve(this.g,"a")},Ri.prototype.ta=function(f){ve(this.g,new Or(f))},Ri.prototype.sa=function(f){ve(this.g,new pl)},Ri.prototype.ra=function(){ve(this.g,"b")},Bs.prototype.createWebChannel=Bs.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,NE=function(){return new Bs},DE=function(){return qn()},OE=Wt,wp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yi.NO_ERROR=0,Yi.TIMEOUT=8,Yi.HTTP_ERROR=6,yf=Yi,ui.COMPLETE="complete",ME=ui,_t.EventType=Qt,Qt.OPEN="a",Qt.CLOSE="b",Qt.ERROR="c",Qt.MESSAGE="d",le.prototype.listen=le.prototype.K,pc=_t,ze.prototype.listenOnce=ze.prototype.L,ze.prototype.getLastError=ze.prototype.Ka,ze.prototype.getLastErrorCode=ze.prototype.Ba,ze.prototype.getStatus=ze.prototype.Z,ze.prototype.getResponseJson=ze.prototype.Oa,ze.prototype.getResponseText=ze.prototype.oa,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Ha,PE=ze}).apply(typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{});const w0="@firebase/firestore",S0="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Mi.UNAUTHENTICATED=new Mi(null),Mi.GOOGLE_CREDENTIALS=new Mi("google-credentials-uid"),Mi.FIRST_PARTY=new Mi("first-party-uid"),Mi.MOCK_USER=new Mi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _u="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=new Zp("@firebase/firestore");function Wl(){return rl.logLevel}function Vt(r,...t){if(rl.logLevel<=Ce.DEBUG){const n=t.map(sg);rl.debug(`Firestore (${_u}): ${r}`,...n)}}function lo(r,...t){if(rl.logLevel<=Ce.ERROR){const n=t.map(sg);rl.error(`Firestore (${_u}): ${r}`,...n)}}function ru(r,...t){if(rl.logLevel<=Ce.WARN){const n=t.map(sg);rl.warn(`Firestore (${_u}): ${r}`,...n)}}function sg(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(r,t,n){let o="Unexpected state";typeof t=="string"?o=t:n=t,LE(r,o,n)}function LE(r,t,n){let o=`FIRESTORE (${_u}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{o+=" CONTEXT: "+JSON.stringify(n)}catch{o+=" CONTEXT: "+n}throw lo(o),new Error(o)}function Ve(r,t,n,o){let l="Unexpected state";typeof n=="string"?l=n:o=n,r||LE(t,l,o)}function fe(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Mt extends ho{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class aI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Mi.UNAUTHENTICATED)))}shutdown(){}}class lI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class uI{constructor(t){this.t=t,this.currentUser=Mi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ve(this.o===void 0,42304);let o=this.i;const l=y=>this.i!==o?(o=this.i,n(y)):Promise.resolve();let h=new Rs;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Rs,t.enqueueRetryable((()=>l(this.currentUser)))};const p=()=>{const y=h;t.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},v=y=>{Vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((y=>v(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?v(y):(Vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Rs)}}),0),p()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==t?(Vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Ve(typeof o.accessToken=="string",31837,{l:o}),new kE(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ve(t===null||typeof t=="string",2055,{h:t}),new Mi(t)}}class cI{constructor(t,n,o){this.P=t,this.T=n,this.I=o,this.type="FirstParty",this.user=Mi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class hI{constructor(t,n,o){this.P=t,this.T=n,this.I=o}getToken(){return Promise.resolve(new cI(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Mi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class A0{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fI{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ir(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ve(this.o===void 0,3512);const o=h=>{h.error!=null&&Vt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const p=h.token!==this.m;return this.m=h.token,Vt("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?n(h.token):Promise.resolve()};this.o=h=>{t.enqueueRetryable((()=>o(h)))};const l=h=>{Vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>l(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?l(h):Vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new A0(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new A0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let o=0;o<r;o++)n[o]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const l=dI(40);for(let h=0;h<l.length;++h)o.length<20&&l[h]<n&&(o+=t.charAt(l[h]%62))}return o}}function Pe(r,t){return r<t?-1:r>t?1:0}function Sp(r,t){const n=Math.min(r.length,t.length);for(let o=0;o<n;o++){const l=r.charAt(o),h=t.charAt(o);if(l!==h)return up(l)===up(h)?Pe(l,h):up(l)?1:-1}return Pe(r.length,t.length)}const mI=55296,pI=57343;function up(r){const t=r.charCodeAt(0);return t>=mI&&t<=pI}function su(r,t,n){return r.length===t.length&&r.every(((o,l)=>n(o,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="__name__";class Ss{constructor(t,n,o){n===void 0?n=0:n>t.length&&Xt(637,{offset:n,range:t.length}),o===void 0?o=t.length-n:o>t.length-n&&Xt(1746,{length:o,range:t.length-n}),this.segments=t,this.offset=n,this.len=o}get length(){return this.len}isEqual(t){return Ss.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Ss?t.forEach((o=>{n.push(o)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,o=this.limit();n<o;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const o=Math.min(t.length,n.length);for(let l=0;l<o;l++){const h=Ss.compareSegments(t.get(l),n.get(l));if(h!==0)return h}return Pe(t.length,n.length)}static compareSegments(t,n){const o=Ss.isNumericId(t),l=Ss.isNumericId(n);return o&&!l?-1:!o&&l?1:o&&l?Ss.extractNumericId(t).compare(Ss.extractNumericId(n)):Sp(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ca.fromString(t.substring(4,t.length-2))}}class Je extends Ss{construct(t,n,o){return new Je(t,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const o of t){if(o.indexOf("//")>=0)throw new Mt(ft.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((l=>l.length>0)))}return new Je(n)}static emptyPath(){return new Je([])}}const gI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yi extends Ss{construct(t,n,o){return new yi(t,n,o)}static isValidIdentifier(t){return gI.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yi.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===x0}static keyField(){return new yi([x0])}static fromServerFormat(t){const n=[];let o="",l=0;const h=()=>{if(o.length===0)throw new Mt(ft.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let p=!1;for(;l<t.length;){const v=t[l];if(v==="\\"){if(l+1===t.length)throw new Mt(ft.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new Mt(ft.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=y,l+=2}else v==="`"?(p=!p,l++):v!=="."||p?(o+=v,l++):(h(),l++)}if(h(),p)throw new Mt(ft.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new yi(n)}static emptyPath(){return new yi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.path=t}static fromPath(t){return new Zt(Je.fromString(t))}static fromName(t){return new Zt(Je.fromString(t).popFirst(5))}static empty(){return new Zt(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Je.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Je.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Zt(new Je(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(r,t,n){if(!n)throw new Mt(ft.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function _I(r,t,n,o){if(t===!0&&o===!0)throw new Mt(ft.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function R0(r){if(!Zt.isDocumentKey(r))throw new Mt(ft.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function I0(r){if(Zt.isDocumentKey(r))throw new Mt(ft.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function zE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function td(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(o){return o.constructor?o.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Xt(12329,{type:typeof r})}function rr(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new Mt(ft.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=td(r);throw new Mt(ft.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}function yI(r,t){if(t<=0)throw new Mt(ft.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(r,t){const n={typeString:r};return t&&(n.value=t),n}function Qc(r,t){if(!zE(r))throw new Mt(ft.INVALID_ARGUMENT,"JSON must be an object");let n;for(const o in t)if(t[o]){const l=t[o].typeString,h="value"in t[o]?{value:t[o].value}:void 0;if(!(o in r)){n=`JSON missing required field: '${o}'`;break}const p=r[o];if(l&&typeof p!==l){n=`JSON field '${o}' must be a ${l}.`;break}if(h!==void 0&&p!==h.value){n=`Expected '${o}' field to equal '${h.value}'`;break}}if(n)throw new Mt(ft.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=-62135596800,P0=1e6;class mn{static now(){return mn.fromMillis(Date.now())}static fromDate(t){return mn.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),o=Math.floor((t-1e3*n)*P0);return new mn(n,o)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Mt(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Mt(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<C0)throw new Mt(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Mt(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/P0}_compareTo(t){return this.seconds===t.seconds?Pe(this.nanoseconds,t.nanoseconds):Pe(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Qc(t,mn._jsonSchema))return new mn(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-C0;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mn._jsonSchemaVersion="firestore/timestamp/1.0",mn._jsonSchema={type:Bn("string",mn._jsonSchemaVersion),seconds:Bn("number"),nanoseconds:Bn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(t){return new re(t)}static min(){return new re(new mn(0,0))}static max(){return new re(new mn(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=-1;function vI(r,t){const n=r.toTimestamp().seconds,o=r.toTimestamp().nanoseconds+1,l=re.fromTimestamp(o===1e9?new mn(n+1,0):new mn(n,o));return new da(l,Zt.empty(),t)}function TI(r){return new da(r.readTime,r.key,Nc)}class da{constructor(t,n,o){this.readTime=t,this.documentKey=n,this.largestBatchId=o}static min(){return new da(re.min(),Zt.empty(),Nc)}static max(){return new da(re.max(),Zt.empty(),Nc)}}function EI(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=Zt.comparator(r.documentKey,t.documentKey),n!==0?n:Pe(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yu(r){if(r.code!==ft.FAILED_PRECONDITION||r.message!==bI)throw r;Vt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Xt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new gt(((o,l)=>{this.nextCallback=h=>{this.wrapSuccess(t,h).next(o,l)},this.catchCallback=h=>{this.wrapFailure(n,h).next(o,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof gt?n:gt.resolve(n)}catch(n){return gt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):gt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):gt.reject(n)}static resolve(t){return new gt(((n,o)=>{n(t)}))}static reject(t){return new gt(((n,o)=>{o(t)}))}static waitFor(t){return new gt(((n,o)=>{let l=0,h=0,p=!1;t.forEach((v=>{++l,v.next((()=>{++h,p&&h===l&&n()}),(y=>o(y)))})),p=!0,h===l&&n()}))}static or(t){let n=gt.resolve(!1);for(const o of t)n=n.next((l=>l?gt.resolve(l):o()));return n}static forEach(t,n){const o=[];return t.forEach(((l,h)=>{o.push(n.call(this,l,h))})),this.waitFor(o)}static mapArray(t,n){return new gt(((o,l)=>{const h=t.length,p=new Array(h);let v=0;for(let y=0;y<h;y++){const E=y;n(t[E]).next((x=>{p[E]=x,++v,v===h&&o(p)}),(x=>l(x)))}}))}static doWhile(t,n){return new gt(((o,l)=>{const h=()=>{t()===!0?n().next((()=>{h()}),l):o()};h()}))}}function SI(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vu(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>n.writeSequenceNumber(o))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}ed.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=-1;function Kc(r){return r==null}function Mf(r){return r===0&&1/r==-1/0}function AI(r){return typeof r=="number"&&Number.isInteger(r)&&!Mf(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="";function xI(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=M0(t)),t=RI(r.get(n),t);return M0(t)}function RI(r,t){let n=t;const o=r.length;for(let l=0;l<o;l++){const h=r.charAt(l);switch(h){case"\0":n+="";break;case UE:n+="";break;default:n+=h}}return n}function M0(r){return r+UE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function Ea(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function jE(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(t,n){this.comparator=t,this.root=n||_i.EMPTY}insert(t,n){return new bn(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,_i.BLACK,null,null))}remove(t){return new bn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,_i.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(t,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(t){let n=0,o=this.root;for(;!o.isEmpty();){const l=this.comparator(t,o.key);if(l===0)return n+o.left.size;l<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,o)=>(t(n,o),!1)))}toString(){const t=[];return this.inorderTraversal(((n,o)=>(t.push(`${n}:${o}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new cf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new cf(this.root,t,this.comparator,!1)}getReverseIterator(){return new cf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new cf(this.root,t,this.comparator,!0)}}class cf{constructor(t,n,o,l){this.isReverse=l,this.nodeStack=[];let h=1;for(;!t.isEmpty();)if(h=n?o(t.key,n):1,n&&l&&(h*=-1),h<0)t=this.isReverse?t.left:t.right;else{if(h===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class _i{constructor(t,n,o,l,h){this.key=t,this.value=n,this.color=o??_i.RED,this.left=l??_i.EMPTY,this.right=h??_i.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,o,l,h){return new _i(t??this.key,n??this.value,o??this.color,l??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,o){let l=this;const h=o(t,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(t,n,o),null):h===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,o)),l.fixUp()}removeMin(){if(this.left.isEmpty())return _i.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let o,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return _i.EMPTY;o=l.right.min(),l=l.copy(o.key,o.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,_i.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,_i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Xt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Xt(27949);return t+(this.isRed()?0:1)}}_i.EMPTY=null,_i.RED=!0,_i.BLACK=!1;_i.EMPTY=new class{constructor(){this.size=0}get key(){throw Xt(57766)}get value(){throw Xt(16141)}get color(){throw Xt(16727)}get left(){throw Xt(29726)}get right(){throw Xt(36894)}copy(t,n,o,l,h){return this}insert(t,n,o){return new _i(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(t){this.comparator=t,this.data=new bn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,o)=>(t(n),!1)))}forEachInRange(t,n){const o=this.data.getIteratorFrom(t[0]);for(;o.hasNext();){const l=o.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new D0(this.data.getIterator())}getIteratorFrom(t){return new D0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((o=>{n=n.add(o)})),n}isEqual(t){if(!(t instanceof Qn)||this.size!==t.size)return!1;const n=this.data.getIterator(),o=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,h=o.getNext().key;if(this.comparator(l,h)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Qn(this.comparator);return n.data=t,n}}class D0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(t){this.fields=t,t.sort(yi.comparator)}static empty(){return new wr([])}unionWith(t){let n=new Qn(yi.comparator);for(const o of this.fields)n=n.add(o);for(const o of t)n=n.add(o);return new wr(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return su(this.fields,t.fields,((n,o)=>n.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new BE("Invalid base64 string: "+h):h}})(t);return new vi(n)}static fromUint8Array(t){const n=(function(l){let h="";for(let p=0;p<l.length;++p)h+=String.fromCharCode(l[p]);return h})(t);return new vi(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let l=0;l<n.length;l++)o[l]=n.charCodeAt(l);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Pe(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}vi.EMPTY_BYTE_STRING=new vi("");const II=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ma(r){if(Ve(!!r,39018),typeof r=="string"){let t=0;const n=II.exec(r);if(Ve(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const o=new Date(r);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:On(r.seconds),nanos:On(r.nanos)}}function On(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function pa(r){return typeof r=="string"?vi.fromBase64String(r):vi.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="server_timestamp",qE="__type__",FE="__previous_value__",GE="__local_write_time__";function lg(r){return(r?.mapValue?.fields||{})[qE]?.stringValue===HE}function nd(r){const t=r.mapValue.fields[FE];return lg(t)?nd(t):t}function Lc(r){const t=ma(r.mapValue.fields[GE].timestampValue);return new mn(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(t,n,o,l,h,p,v,y,E,x){this.databaseId=t,this.appId=n,this.persistenceKey=o,this.host=l,this.ssl=h,this.forceLongPolling=p,this.autoDetectLongPolling=v,this.longPollingOptions=y,this.useFetchStreams=E,this.isUsingEmulator=x}}const Of="(default)";class kc{constructor(t,n){this.projectId=t,this.database=n||Of}static empty(){return new kc("","")}get isDefaultDatabase(){return this.database===Of}isEqual(t){return t instanceof kc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="__type__",PI="__max__",hf={mapValue:{}},WE="__vector__",Df="value";function ga(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?lg(r)?4:OI(r)?9007199254740991:MI(r)?10:11:Xt(28295,{value:r})}function Ms(r,t){if(r===t)return!0;const n=ga(r);if(n!==ga(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Lc(r).isEqual(Lc(t));case 3:return(function(l,h){if(typeof l.timestampValue=="string"&&typeof h.timestampValue=="string"&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const p=ma(l.timestampValue),v=ma(h.timestampValue);return p.seconds===v.seconds&&p.nanos===v.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,h){return pa(l.bytesValue).isEqual(pa(h.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,h){return On(l.geoPointValue.latitude)===On(h.geoPointValue.latitude)&&On(l.geoPointValue.longitude)===On(h.geoPointValue.longitude)})(r,t);case 2:return(function(l,h){if("integerValue"in l&&"integerValue"in h)return On(l.integerValue)===On(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const p=On(l.doubleValue),v=On(h.doubleValue);return p===v?Mf(p)===Mf(v):isNaN(p)&&isNaN(v)}return!1})(r,t);case 9:return su(r.arrayValue.values||[],t.arrayValue.values||[],Ms);case 10:case 11:return(function(l,h){const p=l.mapValue.fields||{},v=h.mapValue.fields||{};if(O0(p)!==O0(v))return!1;for(const y in p)if(p.hasOwnProperty(y)&&(v[y]===void 0||!Ms(p[y],v[y])))return!1;return!0})(r,t);default:return Xt(52216,{left:r})}}function Vc(r,t){return(r.values||[]).find((n=>Ms(n,t)))!==void 0}function ou(r,t){if(r===t)return 0;const n=ga(r),o=ga(t);if(n!==o)return Pe(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(r.booleanValue,t.booleanValue);case 2:return(function(h,p){const v=On(h.integerValue||h.doubleValue),y=On(p.integerValue||p.doubleValue);return v<y?-1:v>y?1:v===y?0:isNaN(v)?isNaN(y)?0:-1:1})(r,t);case 3:return N0(r.timestampValue,t.timestampValue);case 4:return N0(Lc(r),Lc(t));case 5:return Sp(r.stringValue,t.stringValue);case 6:return(function(h,p){const v=pa(h),y=pa(p);return v.compareTo(y)})(r.bytesValue,t.bytesValue);case 7:return(function(h,p){const v=h.split("/"),y=p.split("/");for(let E=0;E<v.length&&E<y.length;E++){const x=Pe(v[E],y[E]);if(x!==0)return x}return Pe(v.length,y.length)})(r.referenceValue,t.referenceValue);case 8:return(function(h,p){const v=Pe(On(h.latitude),On(p.latitude));return v!==0?v:Pe(On(h.longitude),On(p.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return L0(r.arrayValue,t.arrayValue);case 10:return(function(h,p){const v=h.fields||{},y=p.fields||{},E=v[Df]?.arrayValue,x=y[Df]?.arrayValue,P=Pe(E?.values?.length||0,x?.values?.length||0);return P!==0?P:L0(E,x)})(r.mapValue,t.mapValue);case 11:return(function(h,p){if(h===hf.mapValue&&p===hf.mapValue)return 0;if(h===hf.mapValue)return 1;if(p===hf.mapValue)return-1;const v=h.fields||{},y=Object.keys(v),E=p.fields||{},x=Object.keys(E);y.sort(),x.sort();for(let P=0;P<y.length&&P<x.length;++P){const M=Sp(y[P],x[P]);if(M!==0)return M;const q=ou(v[y[P]],E[x[P]]);if(q!==0)return q}return Pe(y.length,x.length)})(r.mapValue,t.mapValue);default:throw Xt(23264,{he:n})}}function N0(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Pe(r,t);const n=ma(r),o=ma(t),l=Pe(n.seconds,o.seconds);return l!==0?l:Pe(n.nanos,o.nanos)}function L0(r,t){const n=r.values||[],o=t.values||[];for(let l=0;l<n.length&&l<o.length;++l){const h=ou(n[l],o[l]);if(h)return h}return Pe(n.length,o.length)}function au(r){return Ap(r)}function Ap(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const o=ma(n);return`time(${o.seconds},${o.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return pa(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Zt.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let o="[",l=!0;for(const h of n.values||[])l?l=!1:o+=",",o+=Ap(h);return o+"]"})(r.arrayValue):"mapValue"in r?(function(n){const o=Object.keys(n.fields||{}).sort();let l="{",h=!0;for(const p of o)h?h=!1:l+=",",l+=`${p}:${Ap(n.fields[p])}`;return l+"}"})(r.mapValue):Xt(61005,{value:r})}function vf(r){switch(ga(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=nd(r);return t?16+vf(t):16;case 5:return 2*r.stringValue.length;case 6:return pa(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((l,h)=>l+vf(h)),0)})(r.arrayValue);case 10:case 11:return(function(o){let l=0;return Ea(o.fields,((h,p)=>{l+=h.length+vf(p)})),l})(r.mapValue);default:throw Xt(13486,{value:r})}}function k0(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function xp(r){return!!r&&"integerValue"in r}function ug(r){return!!r&&"arrayValue"in r}function V0(r){return!!r&&"nullValue"in r}function z0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Tf(r){return!!r&&"mapValue"in r}function MI(r){return(r?.mapValue?.fields||{})[ZE]?.stringValue===WE}function Ec(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Ea(r.mapValue.fields,((n,o)=>t.mapValue.fields[n]=Ec(o))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ec(r.arrayValue.values[n]);return t}return{...r}}function OI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===PI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(t){this.value=t}static empty(){return new Fi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let o=0;o<t.length-1;++o)if(n=(n.mapValue.fields||{})[t.get(o)],!Tf(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ec(n)}setAll(t){let n=yi.emptyPath(),o={},l=[];t.forEach(((p,v)=>{if(!n.isImmediateParentOf(v)){const y=this.getFieldsMap(n);this.applyChanges(y,o,l),o={},l=[],n=v.popLast()}p?o[v.lastSegment()]=Ec(p):l.push(v.lastSegment())}));const h=this.getFieldsMap(n);this.applyChanges(h,o,l)}delete(t){const n=this.field(t.popLast());Tf(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ms(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<t.length;++o){let l=n.mapValue.fields[t.get(o)];Tf(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(o)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,o){Ea(n,((l,h)=>t[l]=h));for(const l of o)delete t[l]}clone(){return new Fi(Ec(this.value))}}function YE(r){const t=[];return Ea(r.fields,((n,o)=>{const l=new yi([n]);if(Tf(o)){const h=YE(o.mapValue).fields;if(h.length===0)t.push(l);else for(const p of h)t.push(l.child(p))}else t.push(l)})),new wr(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(t,n,o,l,h,p,v){this.key=t,this.documentType=n,this.version=o,this.readTime=l,this.createTime=h,this.data=p,this.documentState=v}static newInvalidDocument(t){return new ai(t,0,re.min(),re.min(),re.min(),Fi.empty(),0)}static newFoundDocument(t,n,o,l){return new ai(t,1,n,re.min(),o,l,0)}static newNoDocument(t,n){return new ai(t,2,n,re.min(),re.min(),Fi.empty(),0)}static newUnknownDocument(t,n){return new ai(t,3,n,re.min(),re.min(),Fi.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Fi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ai&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ai(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(t,n){this.position=t,this.inclusive=n}}function U0(r,t,n){let o=0;for(let l=0;l<r.position.length;l++){const h=t[l],p=r.position[l];if(h.field.isKeyField()?o=Zt.comparator(Zt.fromName(p.referenceValue),n.key):o=ou(p,n.data.field(h.field)),h.dir==="desc"&&(o*=-1),o!==0)break}return o}function j0(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Ms(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(t,n="asc"){this.field=t,this.dir=n}}function DI(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{}class jn extends QE{constructor(t,n,o){super(),this.field=t,this.op=n,this.value=o}static create(t,n,o){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,o):new LI(t,n,o):n==="array-contains"?new zI(t,o):n==="in"?new UI(t,o):n==="not-in"?new jI(t,o):n==="array-contains-any"?new BI(t,o):new jn(t,n,o)}static createKeyFieldInFilter(t,n,o){return n==="in"?new kI(t,o):new VI(t,o)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ou(n,this.value)):n!==null&&ga(this.value)===ga(n)&&this.matchesComparison(ou(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Xt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class os extends QE{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new os(t,n)}matches(t){return KE(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function KE(r){return r.op==="and"}function XE(r){return NI(r)&&KE(r)}function NI(r){for(const t of r.filters)if(t instanceof os)return!1;return!0}function Rp(r){if(r instanceof jn)return r.field.canonicalString()+r.op.toString()+au(r.value);if(XE(r))return r.filters.map((t=>Rp(t))).join(",");{const t=r.filters.map((n=>Rp(n))).join(",");return`${r.op}(${t})`}}function $E(r,t){return r instanceof jn?(function(o,l){return l instanceof jn&&o.op===l.op&&o.field.isEqual(l.field)&&Ms(o.value,l.value)})(r,t):r instanceof os?(function(o,l){return l instanceof os&&o.op===l.op&&o.filters.length===l.filters.length?o.filters.reduce(((h,p,v)=>h&&$E(p,l.filters[v])),!0):!1})(r,t):void Xt(19439)}function JE(r){return r instanceof jn?(function(n){return`${n.field.canonicalString()} ${n.op} ${au(n.value)}`})(r):r instanceof os?(function(n){return n.op.toString()+" {"+n.getFilters().map(JE).join(" ,")+"}"})(r):"Filter"}class LI extends jn{constructor(t,n,o){super(t,n,o),this.key=Zt.fromName(o.referenceValue)}matches(t){const n=Zt.comparator(t.key,this.key);return this.matchesComparison(n)}}class kI extends jn{constructor(t,n){super(t,"in",n),this.keys=tb("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class VI extends jn{constructor(t,n){super(t,"not-in",n),this.keys=tb("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function tb(r,t){return(t.arrayValue?.values||[]).map((n=>Zt.fromName(n.referenceValue)))}class zI extends jn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return ug(n)&&Vc(n.arrayValue,this.value)}}class UI extends jn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Vc(this.value.arrayValue,n)}}class jI extends jn{constructor(t,n){super(t,"not-in",n)}matches(t){if(Vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Vc(this.value.arrayValue,n)}}class BI extends jn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!ug(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>Vc(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(t,n=null,o=[],l=[],h=null,p=null,v=null){this.path=t,this.collectionGroup=n,this.orderBy=o,this.filters=l,this.limit=h,this.startAt=p,this.endAt=v,this.Te=null}}function B0(r,t=null,n=[],o=[],l=null,h=null,p=null){return new HI(r,t,n,o,l,h,p)}function cg(r){const t=fe(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((o=>Rp(o))).join(","),n+="|ob:",n+=t.orderBy.map((o=>(function(h){return h.field.canonicalString()+h.dir})(o))).join(","),Kc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((o=>au(o))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((o=>au(o))).join(",")),t.Te=n}return t.Te}function hg(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!DI(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!$E(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!j0(r.startAt,t.startAt)&&j0(r.endAt,t.endAt)}function Ip(r){return Zt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(t,n=null,o=[],l=[],h=null,p="F",v=null,y=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=l,this.limit=h,this.limitType=p,this.startAt=v,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function qI(r,t,n,o,l,h,p,v){return new Tu(r,t,n,o,l,h,p,v)}function id(r){return new Tu(r)}function H0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function eb(r){return r.collectionGroup!==null}function bc(r){const t=fe(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const h of t.explicitOrderBy)t.Ie.push(h),n.add(h.field.canonicalString());const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(p){let v=new Qn(yi.comparator);return p.filters.forEach((y=>{y.getFlattenedFilters().forEach((E=>{E.isInequality()&&(v=v.add(E.field))}))})),v})(t).forEach((h=>{n.has(h.canonicalString())||h.isKeyField()||t.Ie.push(new zc(h,o))})),n.has(yi.keyField().canonicalString())||t.Ie.push(new zc(yi.keyField(),o))}return t.Ie}function Is(r){const t=fe(r);return t.Ee||(t.Ee=FI(t,bc(r))),t.Ee}function FI(r,t){if(r.limitType==="F")return B0(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const h=l.dir==="desc"?"asc":"desc";return new zc(l.field,h)}));const n=r.endAt?new Nf(r.endAt.position,r.endAt.inclusive):null,o=r.startAt?new Nf(r.startAt.position,r.startAt.inclusive):null;return B0(r.path,r.collectionGroup,t,r.filters,r.limit,n,o)}}function Cp(r,t){const n=r.filters.concat([t]);return new Tu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Lf(r,t,n){return new Tu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function rd(r,t){return hg(Is(r),Is(t))&&r.limitType===t.limitType}function nb(r){return`${cg(Is(r))}|lt:${r.limitType}`}function Yl(r){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((l=>JE(l))).join(", ")}]`),Kc(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((l=>(function(p){return`${p.field.canonicalString()} (${p.dir})`})(l))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((l=>au(l))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((l=>au(l))).join(",")),`Target(${o})`})(Is(r))}; limitType=${r.limitType})`}function sd(r,t){return t.isFoundDocument()&&(function(o,l){const h=l.key.path;return o.collectionGroup!==null?l.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(h):Zt.isDocumentKey(o.path)?o.path.isEqual(h):o.path.isImmediateParentOf(h)})(r,t)&&(function(o,l){for(const h of bc(o))if(!h.field.isKeyField()&&l.data.field(h.field)===null)return!1;return!0})(r,t)&&(function(o,l){for(const h of o.filters)if(!h.matches(l))return!1;return!0})(r,t)&&(function(o,l){return!(o.startAt&&!(function(p,v,y){const E=U0(p,v,y);return p.inclusive?E<=0:E<0})(o.startAt,bc(o),l)||o.endAt&&!(function(p,v,y){const E=U0(p,v,y);return p.inclusive?E>=0:E>0})(o.endAt,bc(o),l))})(r,t)}function GI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ib(r){return(t,n)=>{let o=!1;for(const l of bc(r)){const h=ZI(l,t,n);if(h!==0)return h;o=o||l.field.isKeyField()}return 0}}function ZI(r,t,n){const o=r.field.isKeyField()?Zt.comparator(t.key,n.key):(function(h,p,v){const y=p.data.field(h),E=v.data.field(h);return y!==null&&E!==null?ou(y,E):Xt(42886)})(r.field,t,n);switch(r.dir){case"asc":return o;case"desc":return-1*o;default:return Xt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),o=this.inner[n];if(o!==void 0){for(const[l,h]of o)if(this.equalsFn(l,t))return h}}has(t){return this.get(t)!==void 0}set(t,n){const o=this.mapKeyFn(t),l=this.inner[o];if(l===void 0)return this.inner[o]=[[t,n]],void this.innerSize++;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],t))return void(l[h]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),o=this.inner[n];if(o===void 0)return!1;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],t))return o.length===1?delete this.inner[n]:o.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Ea(this.inner,((n,o)=>{for(const[l,h]of o)t(l,h)}))}isEmpty(){return jE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=new bn(Zt.comparator);function uo(){return WI}const rb=new bn(Zt.comparator);function gc(...r){let t=rb;for(const n of r)t=t.insert(n.key,n);return t}function sb(r){let t=rb;return r.forEach(((n,o)=>t=t.insert(n,o.overlayedDocument))),t}function $a(){return wc()}function ob(){return wc()}function wc(){return new al((r=>r.toString()),((r,t)=>r.isEqual(t)))}const YI=new bn(Zt.comparator),QI=new Qn(Zt.comparator);function Me(...r){let t=QI;for(const n of r)t=t.add(n);return t}const KI=new Qn(Pe);function XI(){return KI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mf(t)?"-0":t}}function ab(r){return{integerValue:""+r}}function $I(r,t){return AI(t)?ab(t):fg(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(){this._=void 0}}function JI(r,t,n){return r instanceof Uc?(function(l,h){const p={fields:{[qE]:{stringValue:HE},[GE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&lg(h)&&(h=nd(h)),h&&(p.fields[FE]=h),{mapValue:p}})(n,t):r instanceof jc?ub(r,t):r instanceof Bc?cb(r,t):(function(l,h){const p=lb(l,h),v=q0(p)+q0(l.Ae);return xp(p)&&xp(l.Ae)?ab(v):fg(l.serializer,v)})(r,t)}function tC(r,t,n){return r instanceof jc?ub(r,t):r instanceof Bc?cb(r,t):n}function lb(r,t){return r instanceof kf?(function(o){return xp(o)||(function(h){return!!h&&"doubleValue"in h})(o)})(t)?t:{integerValue:0}:null}class Uc extends od{}class jc extends od{constructor(t){super(),this.elements=t}}function ub(r,t){const n=hb(t);for(const o of r.elements)n.some((l=>Ms(l,o)))||n.push(o);return{arrayValue:{values:n}}}class Bc extends od{constructor(t){super(),this.elements=t}}function cb(r,t){let n=hb(t);for(const o of r.elements)n=n.filter((l=>!Ms(l,o)));return{arrayValue:{values:n}}}class kf extends od{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function q0(r){return On(r.integerValue||r.doubleValue)}function hb(r){return ug(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(t,n){this.field=t,this.transform=n}}function nC(r,t){return r.field.isEqual(t.field)&&(function(o,l){return o instanceof jc&&l instanceof jc||o instanceof Bc&&l instanceof Bc?su(o.elements,l.elements,Ms):o instanceof kf&&l instanceof kf?Ms(o.Ae,l.Ae):o instanceof Uc&&l instanceof Uc})(r.transform,t.transform)}class iC{constructor(t,n){this.version=t,this.transformResults=n}}class Oi{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Oi}static exists(t){return new Oi(void 0,t)}static updateTime(t){return new Oi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ef(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class ad{}function fb(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new ld(r.key,Oi.none()):new Xc(r.key,r.data,Oi.none());{const n=r.data,o=Fi.empty();let l=new Qn(yi.comparator);for(let h of t.fields)if(!l.has(h)){let p=n.field(h);p===null&&h.length>1&&(h=h.popLast(),p=n.field(h)),p===null?o.delete(h):o.set(h,p),l=l.add(h)}return new ba(r.key,o,new wr(l.toArray()),Oi.none())}}function rC(r,t,n){r instanceof Xc?(function(l,h,p){const v=l.value.clone(),y=G0(l.fieldTransforms,h,p.transformResults);v.setAll(y),h.convertToFoundDocument(p.version,v).setHasCommittedMutations()})(r,t,n):r instanceof ba?(function(l,h,p){if(!Ef(l.precondition,h))return void h.convertToUnknownDocument(p.version);const v=G0(l.fieldTransforms,h,p.transformResults),y=h.data;y.setAll(db(l)),y.setAll(v),h.convertToFoundDocument(p.version,y).setHasCommittedMutations()})(r,t,n):(function(l,h,p){h.convertToNoDocument(p.version).setHasCommittedMutations()})(0,t,n)}function Sc(r,t,n,o){return r instanceof Xc?(function(h,p,v,y){if(!Ef(h.precondition,p))return v;const E=h.value.clone(),x=Z0(h.fieldTransforms,y,p);return E.setAll(x),p.convertToFoundDocument(p.version,E).setHasLocalMutations(),null})(r,t,n,o):r instanceof ba?(function(h,p,v,y){if(!Ef(h.precondition,p))return v;const E=Z0(h.fieldTransforms,y,p),x=p.data;return x.setAll(db(h)),x.setAll(E),p.convertToFoundDocument(p.version,x).setHasLocalMutations(),v===null?null:v.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((P=>P.field)))})(r,t,n,o):(function(h,p,v){return Ef(h.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):v})(r,t,n)}function sC(r,t){let n=null;for(const o of r.fieldTransforms){const l=t.data.field(o.field),h=lb(o.transform,l||null);h!=null&&(n===null&&(n=Fi.empty()),n.set(o.field,h))}return n||null}function F0(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(o,l){return o===void 0&&l===void 0||!(!o||!l)&&su(o,l,((h,p)=>nC(h,p)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Xc extends ad{constructor(t,n,o,l=[]){super(),this.key=t,this.value=n,this.precondition=o,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ba extends ad{constructor(t,n,o,l,h=[]){super(),this.key=t,this.data=n,this.fieldMask=o,this.precondition=l,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function db(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=r.data.field(n);t.set(n,o)}})),t}function G0(r,t,n){const o=new Map;Ve(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const h=r[l],p=h.transform,v=t.data.field(h.field);o.set(h.field,tC(p,v,n[l]))}return o}function Z0(r,t,n){const o=new Map;for(const l of r){const h=l.transform,p=n.data.field(l.field);o.set(l.field,JI(h,p,t))}return o}class ld extends ad{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mb extends ad{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(t,n,o,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=o,this.mutations=l}applyToRemoteDocument(t,n){const o=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const h=this.mutations[l];h.key.isEqual(t.key)&&rC(h,t,o[l])}}applyToLocalView(t,n){for(const o of this.baseMutations)o.key.isEqual(t.key)&&(n=Sc(o,t,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(t.key)&&(n=Sc(o,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const o=ob();return this.mutations.forEach((l=>{const h=t.get(l.key),p=h.overlayedDocument;let v=this.applyToLocalView(p,h.mutatedFields);v=n.has(l.key)?null:v;const y=fb(p,v);y!==null&&o.set(l.key,y),p.isValidDocument()||p.convertToNoDocument(re.min())})),o}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Me())}isEqual(t){return this.batchId===t.batchId&&su(this.mutations,t.mutations,((n,o)=>F0(n,o)))&&su(this.baseMutations,t.baseMutations,((n,o)=>F0(n,o)))}}class dg{constructor(t,n,o,l){this.batch=t,this.commitVersion=n,this.mutationResults=o,this.docVersions=l}static from(t,n,o){Ve(t.mutations.length===o.length,58842,{me:t.mutations.length,fe:o.length});let l=(function(){return YI})();const h=t.mutations;for(let p=0;p<h.length;p++)l=l.insert(h[p].key,o[p].version);return new dg(t,n,o,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Un,ke;function pb(r){switch(r){case ft.OK:return Xt(64938);case ft.CANCELLED:case ft.UNKNOWN:case ft.DEADLINE_EXCEEDED:case ft.RESOURCE_EXHAUSTED:case ft.INTERNAL:case ft.UNAVAILABLE:case ft.UNAUTHENTICATED:return!1;case ft.INVALID_ARGUMENT:case ft.NOT_FOUND:case ft.ALREADY_EXISTS:case ft.PERMISSION_DENIED:case ft.FAILED_PRECONDITION:case ft.ABORTED:case ft.OUT_OF_RANGE:case ft.UNIMPLEMENTED:case ft.DATA_LOSS:return!0;default:return Xt(15467,{code:r})}}function gb(r){if(r===void 0)return lo("GRPC error has no .code"),ft.UNKNOWN;switch(r){case Un.OK:return ft.OK;case Un.CANCELLED:return ft.CANCELLED;case Un.UNKNOWN:return ft.UNKNOWN;case Un.DEADLINE_EXCEEDED:return ft.DEADLINE_EXCEEDED;case Un.RESOURCE_EXHAUSTED:return ft.RESOURCE_EXHAUSTED;case Un.INTERNAL:return ft.INTERNAL;case Un.UNAVAILABLE:return ft.UNAVAILABLE;case Un.UNAUTHENTICATED:return ft.UNAUTHENTICATED;case Un.INVALID_ARGUMENT:return ft.INVALID_ARGUMENT;case Un.NOT_FOUND:return ft.NOT_FOUND;case Un.ALREADY_EXISTS:return ft.ALREADY_EXISTS;case Un.PERMISSION_DENIED:return ft.PERMISSION_DENIED;case Un.FAILED_PRECONDITION:return ft.FAILED_PRECONDITION;case Un.ABORTED:return ft.ABORTED;case Un.OUT_OF_RANGE:return ft.OUT_OF_RANGE;case Un.UNIMPLEMENTED:return ft.UNIMPLEMENTED;case Un.DATA_LOSS:return ft.DATA_LOSS;default:return Xt(39323,{code:r})}}(ke=Un||(Un={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new ca([4294967295,4294967295],0);function W0(r){const t=uC().encode(r),n=new CE;return n.update(t),new Uint8Array(n.digest())}function Y0(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),o=t.getUint32(4,!0),l=t.getUint32(8,!0),h=t.getUint32(12,!0);return[new ca([n,o],0),new ca([l,h],0)]}class mg{constructor(t,n,o){if(this.bitmap=t,this.padding=n,this.hashCount=o,n<0||n>=8)throw new _c(`Invalid padding: ${n}`);if(o<0)throw new _c(`Invalid hash count: ${o}`);if(t.length>0&&this.hashCount===0)throw new _c(`Invalid hash count: ${o}`);if(t.length===0&&n!==0)throw new _c(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=ca.fromNumber(this.ge)}ye(t,n,o){let l=t.add(n.multiply(ca.fromNumber(o)));return l.compare(cC)===1&&(l=new ca([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=W0(t),[o,l]=Y0(n);for(let h=0;h<this.hashCount;h++){const p=this.ye(o,l,h);if(!this.we(p))return!1}return!0}static create(t,n,o){const l=t%8==0?0:8-t%8,h=new Uint8Array(Math.ceil(t/8)),p=new mg(h,l,n);return o.forEach((v=>p.insert(v))),p}insert(t){if(this.ge===0)return;const n=W0(t),[o,l]=Y0(n);for(let h=0;h<this.hashCount;h++){const p=this.ye(o,l,h);this.Se(p)}}Se(t){const n=Math.floor(t/8),o=t%8;this.bitmap[n]|=1<<o}}class _c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(t,n,o,l,h){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=l,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(t,n,o){const l=new Map;return l.set(t,$c.createSynthesizedTargetChangeForCurrentChange(t,n,o)),new ud(re.min(),l,new bn(Pe),uo(),Me())}}class $c{constructor(t,n,o,l,h){this.resumeToken=t,this.current=n,this.addedDocuments=o,this.modifiedDocuments=l,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(t,n,o){return new $c(o,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(t,n,o,l){this.be=t,this.removedTargetIds=n,this.key=o,this.De=l}}class _b{constructor(t,n){this.targetId=t,this.Ce=n}}class yb{constructor(t,n,o=vi.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=o,this.cause=l}}class Q0{constructor(){this.ve=0,this.Fe=K0(),this.Me=vi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Me(),n=Me(),o=Me();return this.Fe.forEach(((l,h)=>{switch(h){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:o=o.add(l);break;default:Xt(38017,{changeType:h})}})),new $c(this.Me,this.xe,t,n,o)}qe(){this.Oe=!1,this.Fe=K0()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class hC{constructor(t){this.Ge=t,this.ze=new Map,this.je=uo(),this.Je=ff(),this.He=ff(),this.Ye=new bn(Pe)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const o=this.nt(n);switch(t.state){case 0:this.rt(n)&&o.Le(t.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(t.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(o.We(),o.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),o.Le(t.resumeToken));break;default:Xt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((o,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,o=t.Ce.count,l=this.ot(n);if(l){const h=l.target;if(Ip(h))if(o===0){const p=new Zt(h.path);this.et(n,p,ai.newNoDocument(p,re.min()))}else Ve(o===1,20013,{expectedCount:o});else{const p=this._t(n);if(p!==o){const v=this.ut(t),y=v?this.ct(v,t,p):1;if(y!==0){this.it(n);const E=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,E)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:l=0},hashCount:h=0}=n;let p,v;try{p=pa(o).toUint8Array()}catch(y){if(y instanceof BE)return ru("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{v=new mg(p,l,h)}catch(y){return ru(y instanceof _c?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return v.ge===0?null:v}ct(t,n,o){return n.Ce.count===o-this.Pt(t,n.targetId)?0:2}Pt(t,n){const o=this.Ge.getRemoteKeysForTarget(n);let l=0;return o.forEach((h=>{const p=this.Ge.ht(),v=`projects/${p.projectId}/databases/${p.database}/documents/${h.path.canonicalString()}`;t.mightContain(v)||(this.et(n,h,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((h,p)=>{const v=this.ot(p);if(v){if(h.current&&Ip(v.target)){const y=new Zt(v.target.path);this.It(y).has(p)||this.Et(p,y)||this.et(p,y,ai.newNoDocument(y,t))}h.Be&&(n.set(p,h.ke()),h.qe())}}));let o=Me();this.He.forEach(((h,p)=>{let v=!0;p.forEachWhile((y=>{const E=this.ot(y);return!E||E.purpose==="TargetPurposeLimboResolution"||(v=!1,!1)})),v&&(o=o.add(h))})),this.je.forEach(((h,p)=>p.setReadTime(t)));const l=new ud(t,n,this.Ye,this.je,o);return this.je=uo(),this.Je=ff(),this.He=ff(),this.Ye=new bn(Pe),l}Xe(t,n){if(!this.rt(t))return;const o=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,o),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,o){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),o&&(this.je=this.je.insert(n,o))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Q0,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Qn(Pe),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Qn(Pe),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||Vt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Q0),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function ff(){return new bn(Zt.comparator)}function K0(){return new bn(Zt.comparator)}const fC={asc:"ASCENDING",desc:"DESCENDING"},dC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mC={and:"AND",or:"OR"};class pC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Pp(r,t){return r.useProto3Json||Kc(t)?t:{value:t}}function Vf(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function vb(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function gC(r,t){return Vf(r,t.toTimestamp())}function Sr(r){return Ve(!!r,49232),re.fromTimestamp((function(n){const o=ma(n);return new mn(o.seconds,o.nanos)})(r))}function pg(r,t){return Mp(r,t).canonicalString()}function Mp(r,t){const n=(function(l){return new Je(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?n:n.child(t)}function Tb(r){const t=Je.fromString(r);return Ve(xb(t),10190,{key:t.toString()}),t}function zf(r,t){return pg(r.databaseId,t.path)}function Ac(r,t){const n=Tb(t);if(n.get(1)!==r.databaseId.projectId)throw new Mt(ft.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new Mt(ft.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Zt(bb(n))}function Eb(r,t){return pg(r.databaseId,t)}function _C(r){const t=Tb(r);return t.length===4?Je.emptyPath():bb(t)}function Op(r){return new Je(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function bb(r){return Ve(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function X0(r,t,n){return{name:zf(r,t),fields:n.value.mapValue.fields}}function yC(r,t){return"found"in t?(function(o,l){Ve(!!l.found,43571),l.found.name,l.found.updateTime;const h=Ac(o,l.found.name),p=Sr(l.found.updateTime),v=l.found.createTime?Sr(l.found.createTime):re.min(),y=new Fi({mapValue:{fields:l.found.fields}});return ai.newFoundDocument(h,p,v,y)})(r,t):"missing"in t?(function(o,l){Ve(!!l.missing,3894),Ve(!!l.readTime,22933);const h=Ac(o,l.missing),p=Sr(l.readTime);return ai.newNoDocument(h,p)})(r,t):Xt(7234,{result:t})}function vC(r,t){let n;if("targetChange"in t){t.targetChange;const o=(function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:Xt(39313,{state:E})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],h=(function(E,x){return E.useProto3Json?(Ve(x===void 0||typeof x=="string",58123),vi.fromBase64String(x||"")):(Ve(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),vi.fromUint8Array(x||new Uint8Array))})(r,t.targetChange.resumeToken),p=t.targetChange.cause,v=p&&(function(E){const x=E.code===void 0?ft.UNKNOWN:gb(E.code);return new Mt(x,E.message||"")})(p);n=new yb(o,l,h,v||null)}else if("documentChange"in t){t.documentChange;const o=t.documentChange;o.document,o.document.name,o.document.updateTime;const l=Ac(r,o.document.name),h=Sr(o.document.updateTime),p=o.document.createTime?Sr(o.document.createTime):re.min(),v=new Fi({mapValue:{fields:o.document.fields}}),y=ai.newFoundDocument(l,h,p,v),E=o.targetIds||[],x=o.removedTargetIds||[];n=new bf(E,x,y.key,y)}else if("documentDelete"in t){t.documentDelete;const o=t.documentDelete;o.document;const l=Ac(r,o.document),h=o.readTime?Sr(o.readTime):re.min(),p=ai.newNoDocument(l,h),v=o.removedTargetIds||[];n=new bf([],v,p.key,p)}else if("documentRemove"in t){t.documentRemove;const o=t.documentRemove;o.document;const l=Ac(r,o.document),h=o.removedTargetIds||[];n=new bf([],h,l,null)}else{if(!("filter"in t))return Xt(11601,{Rt:t});{t.filter;const o=t.filter;o.targetId;const{count:l=0,unchangedNames:h}=o,p=new lC(l,h),v=o.targetId;n=new _b(v,p)}}return n}function wb(r,t){let n;if(t instanceof Xc)n={update:X0(r,t.key,t.value)};else if(t instanceof ld)n={delete:zf(r,t.key)};else if(t instanceof ba)n={update:X0(r,t.key,t.data),updateMask:IC(t.fieldMask)};else{if(!(t instanceof mb))return Xt(16599,{Vt:t.type});n={verify:zf(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((o=>(function(h,p){const v=p.transform;if(v instanceof Uc)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof jc)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof Bc)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof kf)return{fieldPath:p.field.canonicalString(),increment:v.Ae};throw Xt(20930,{transform:p.transform})})(0,o)))),t.precondition.isNone||(n.currentDocument=(function(l,h){return h.updateTime!==void 0?{updateTime:gC(l,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:Xt(27497)})(r,t.precondition)),n}function TC(r,t){return r&&r.length>0?(Ve(t!==void 0,14353),r.map((n=>(function(l,h){let p=l.updateTime?Sr(l.updateTime):Sr(h);return p.isEqual(re.min())&&(p=Sr(h)),new iC(p,l.transformResults||[])})(n,t)))):[]}function EC(r,t){return{documents:[Eb(r,t.path)]}}function bC(r,t){const n={structuredQuery:{}},o=t.path;let l;t.collectionGroup!==null?(l=o,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=Eb(r,l);const h=(function(E){if(E.length!==0)return Ab(os.create(E,"and"))})(t.filters);h&&(n.structuredQuery.where=h);const p=(function(E){if(E.length!==0)return E.map((x=>(function(M){return{field:Ql(M.field),direction:AC(M.dir)}})(x)))})(t.orderBy);p&&(n.structuredQuery.orderBy=p);const v=Pp(r,t.limit);return v!==null&&(n.structuredQuery.limit=v),t.startAt&&(n.structuredQuery.startAt=(function(E){return{before:E.inclusive,values:E.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(E){return{before:!E.inclusive,values:E.position}})(t.endAt)),{ft:n,parent:l}}function wC(r){let t=_C(r.parent);const n=r.structuredQuery,o=n.from?n.from.length:0;let l=null;if(o>0){Ve(o===1,65062);const x=n.from[0];x.allDescendants?l=x.collectionId:t=t.child(x.collectionId)}let h=[];n.where&&(h=(function(P){const M=Sb(P);return M instanceof os&&XE(M)?M.getFilters():[M]})(n.where));let p=[];n.orderBy&&(p=(function(P){return P.map((M=>(function(W){return new zc(Kl(W.field),(function(lt){switch(lt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(M)))})(n.orderBy));let v=null;n.limit&&(v=(function(P){let M;return M=typeof P=="object"?P.value:P,Kc(M)?null:M})(n.limit));let y=null;n.startAt&&(y=(function(P){const M=!!P.before,q=P.values||[];return new Nf(q,M)})(n.startAt));let E=null;return n.endAt&&(E=(function(P){const M=!P.before,q=P.values||[];return new Nf(q,M)})(n.endAt)),qI(t,l,p,h,v,"F",y,E)}function SC(r,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xt(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Sb(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Kl(n.unaryFilter.field);return jn.create(o,"==",{doubleValue:NaN});case"IS_NULL":const l=Kl(n.unaryFilter.field);return jn.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=Kl(n.unaryFilter.field);return jn.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=Kl(n.unaryFilter.field);return jn.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Xt(61313);default:return Xt(60726)}})(r):r.fieldFilter!==void 0?(function(n){return jn.create(Kl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Xt(58110);default:return Xt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return os.create(n.compositeFilter.filters.map((o=>Sb(o))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Xt(1026)}})(n.compositeFilter.op))})(r):Xt(30097,{filter:r})}function AC(r){return fC[r]}function xC(r){return dC[r]}function RC(r){return mC[r]}function Ql(r){return{fieldPath:r.canonicalString()}}function Kl(r){return yi.fromServerFormat(r.fieldPath)}function Ab(r){return r instanceof jn?(function(n){if(n.op==="=="){if(z0(n.value))return{unaryFilter:{field:Ql(n.field),op:"IS_NAN"}};if(V0(n.value))return{unaryFilter:{field:Ql(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(z0(n.value))return{unaryFilter:{field:Ql(n.field),op:"IS_NOT_NAN"}};if(V0(n.value))return{unaryFilter:{field:Ql(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ql(n.field),op:xC(n.op),value:n.value}}})(r):r instanceof os?(function(n){const o=n.getFilters().map((l=>Ab(l)));return o.length===1?o[0]:{compositeFilter:{op:RC(n.op),filters:o}}})(r):Xt(54877,{filter:r})}function IC(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function xb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(t,n,o,l,h=re.min(),p=re.min(),v=vi.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=n,this.purpose=o,this.sequenceNumber=l,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=v,this.expectedCount=y}withSequenceNumber(t){return new oa(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(t){this.yt=t}}function PC(r){const t=wC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Lf(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(){this.Cn=new OC}addToCollectionParentIndex(t,n){return this.Cn.add(n),gt.resolve()}getCollectionParents(t,n){return gt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return gt.resolve()}deleteFieldIndex(t,n){return gt.resolve()}deleteAllFieldIndexes(t){return gt.resolve()}createTargetIndexes(t,n){return gt.resolve()}getDocumentsMatchingTarget(t,n){return gt.resolve(null)}getIndexType(t,n){return gt.resolve(0)}getFieldIndexes(t,n){return gt.resolve([])}getNextCollectionGroupToUpdate(t){return gt.resolve(null)}getMinOffset(t,n){return gt.resolve(da.min())}getMinOffsetFromCollectionGroup(t,n){return gt.resolve(da.min())}updateCollectionGroup(t,n,o){return gt.resolve()}updateIndexEntries(t,n){return gt.resolve()}}class OC{constructor(){this.index={}}add(t){const n=t.lastSegment(),o=t.popLast(),l=this.index[n]||new Qn(Je.comparator),h=!l.has(o);return this.index[n]=l.add(o),h}has(t){const n=t.lastSegment(),o=t.popLast(),l=this.index[n];return l&&l.has(o)}getEntries(t){return(this.index[t]||new Qn(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rb=41943040;class nr{static withCacheSize(t){return new nr(t,nr.DEFAULT_COLLECTION_PERCENTILE,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,o){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr.DEFAULT_COLLECTION_PERCENTILE=10,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nr.DEFAULT=new nr(Rb,nr.DEFAULT_COLLECTION_PERCENTILE,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nr.DISABLED=new nr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new lu(0)}static cr(){return new lu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="LruGarbageCollector",DC=1048576;function tT([r,t],[n,o]){const l=Pe(r,n);return l===0?Pe(t,o):l}class NC{constructor(t){this.Ir=t,this.buffer=new Qn(tT),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();tT(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class LC{constructor(t,n,o){this.garbageCollector=t,this.asyncQueue=n,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){Vt(J0,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vu(n)?Vt(J0,"Ignoring IndexedDB error during garbage collection: ",n):await yu(n)}await this.Vr(3e5)}))}}class kC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((o=>Math.floor(n/100*o)))}nthSequenceNumber(t,n){if(n===0)return gt.resolve(ed.ce);const o=new NC(n);return this.mr.forEachTarget(t,(l=>o.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>o.Ar(l))))).next((()=>o.maxValue))}removeTargets(t,n,o){return this.mr.removeTargets(t,n,o)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Vt("LruGarbageCollector","Garbage collection skipped; disabled"),gt.resolve($0)):this.getCacheSize(t).next((o=>o<this.params.cacheSizeCollectionThreshold?(Vt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$0):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let o,l,h,p,v,y,E;const x=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((P=>(P>this.params.maximumSequenceNumbersToCollect?(Vt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),l=this.params.maximumSequenceNumbersToCollect):l=P,p=Date.now(),this.nthSequenceNumber(t,l)))).next((P=>(o=P,v=Date.now(),this.removeTargets(t,o,n)))).next((P=>(h=P,y=Date.now(),this.removeOrphanedDocuments(t,o)))).next((P=>(E=Date.now(),Wl()<=Ce.DEBUG&&Vt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-x}ms
	Determined least recently used ${l} in `+(v-p)+`ms
	Removed ${h} targets in `+(y-v)+`ms
	Removed ${P} documents in `+(E-y)+`ms
Total Duration: ${E-x}ms`),gt.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:h,documentsRemoved:P}))))}}function VC(r,t){return new kC(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.changes=new al((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ai.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?gt.resolve(o):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(t,n,o,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=l}getDocument(t,n){let o=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(o=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(o!==null&&Sc(o.mutation,l,wr.empty(),mn.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((o=>this.getLocalViewOfDocuments(t,o,Me()).next((()=>o))))}getLocalViewOfDocuments(t,n,o=Me()){const l=$a();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,o).next((h=>{let p=gc();return h.forEach(((v,y)=>{p=p.insert(v,y.overlayedDocument)})),p}))))}getOverlayedDocuments(t,n){const o=$a();return this.populateOverlays(t,o,n).next((()=>this.computeViews(t,n,o,Me())))}populateOverlays(t,n,o){const l=[];return o.forEach((h=>{n.has(h)||l.push(h)})),this.documentOverlayCache.getOverlays(t,l).next((h=>{h.forEach(((p,v)=>{n.set(p,v)}))}))}computeViews(t,n,o,l){let h=uo();const p=wc(),v=(function(){return wc()})();return n.forEach(((y,E)=>{const x=o.get(E.key);l.has(E.key)&&(x===void 0||x.mutation instanceof ba)?h=h.insert(E.key,E):x!==void 0?(p.set(E.key,x.mutation.getFieldMask()),Sc(x.mutation,E,x.mutation.getFieldMask(),mn.now())):p.set(E.key,wr.empty())})),this.recalculateAndSaveOverlays(t,h).next((y=>(y.forEach(((E,x)=>p.set(E,x))),n.forEach(((E,x)=>v.set(E,new UC(x,p.get(E)??null)))),v)))}recalculateAndSaveOverlays(t,n){const o=wc();let l=new bn(((p,v)=>p-v)),h=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((p=>{for(const v of p)v.keys().forEach((y=>{const E=n.get(y);if(E===null)return;let x=o.get(y)||wr.empty();x=v.applyToLocalView(E,x),o.set(y,x);const P=(l.get(v.batchId)||Me()).add(y);l=l.insert(v.batchId,P)}))})).next((()=>{const p=[],v=l.getReverseIterator();for(;v.hasNext();){const y=v.getNext(),E=y.key,x=y.value,P=ob();x.forEach((M=>{if(!h.has(M)){const q=fb(n.get(M),o.get(M));q!==null&&P.set(M,q),h=h.add(M)}})),p.push(this.documentOverlayCache.saveOverlays(t,E,P))}return gt.waitFor(p)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((o=>this.recalculateAndSaveOverlays(t,o)))}getDocumentsMatchingQuery(t,n,o,l){return(function(p){return Zt.isDocumentKey(p.path)&&p.collectionGroup===null&&p.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):eb(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,o,l):this.getDocumentsMatchingCollectionQuery(t,n,o,l)}getNextDocuments(t,n,o,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,o,l).next((h=>{const p=l-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,o.largestBatchId,l-h.size):gt.resolve($a());let v=Nc,y=h;return p.next((E=>gt.forEach(E,((x,P)=>(v<P.largestBatchId&&(v=P.largestBatchId),h.get(x)?gt.resolve():this.remoteDocumentCache.getEntry(t,x).next((M=>{y=y.insert(x,M)}))))).next((()=>this.populateOverlays(t,E,h))).next((()=>this.computeViews(t,y,E,Me()))).next((x=>({batchId:v,changes:sb(x)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Zt(n)).next((o=>{let l=gc();return o.isFoundDocument()&&(l=l.insert(o.key,o)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,o,l){const h=n.collectionGroup;let p=gc();return this.indexManager.getCollectionParents(t,h).next((v=>gt.forEach(v,(y=>{const E=(function(P,M){return new Tu(M,null,P.explicitOrderBy.slice(),P.filters.slice(),P.limit,P.limitType,P.startAt,P.endAt)})(n,y.child(h));return this.getDocumentsMatchingCollectionQuery(t,E,o,l).next((x=>{x.forEach(((P,M)=>{p=p.insert(P,M)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(t,n,o,l){let h;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,o.largestBatchId).next((p=>(h=p,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,o,h,l)))).next((p=>{h.forEach(((y,E)=>{const x=E.getKey();p.get(x)===null&&(p=p.insert(x,ai.newInvalidDocument(x)))}));let v=gc();return p.forEach(((y,E)=>{const x=h.get(y);x!==void 0&&Sc(x.mutation,E,wr.empty(),mn.now()),sd(n,E)&&(v=v.insert(y,E))})),v}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return gt.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Sr(l.createTime)}})(n)),gt.resolve()}getNamedQuery(t,n){return gt.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:PC(l.bundledQuery),readTime:Sr(l.readTime)}})(n)),gt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.overlays=new bn(Zt.comparator),this.qr=new Map}getOverlay(t,n){return gt.resolve(this.overlays.get(n))}getOverlays(t,n){const o=$a();return gt.forEach(n,(l=>this.getOverlay(t,l).next((h=>{h!==null&&o.set(l,h)})))).next((()=>o))}saveOverlays(t,n,o){return o.forEach(((l,h)=>{this.St(t,n,h)})),gt.resolve()}removeOverlaysForBatchId(t,n,o){const l=this.qr.get(o);return l!==void 0&&(l.forEach((h=>this.overlays=this.overlays.remove(h))),this.qr.delete(o)),gt.resolve()}getOverlaysForCollection(t,n,o){const l=$a(),h=n.length+1,p=new Zt(n.child("")),v=this.overlays.getIteratorFrom(p);for(;v.hasNext();){const y=v.getNext().value,E=y.getKey();if(!n.isPrefixOf(E.path))break;E.path.length===h&&y.largestBatchId>o&&l.set(y.getKey(),y)}return gt.resolve(l)}getOverlaysForCollectionGroup(t,n,o,l){let h=new bn(((E,x)=>E-x));const p=this.overlays.getIterator();for(;p.hasNext();){const E=p.getNext().value;if(E.getKey().getCollectionGroup()===n&&E.largestBatchId>o){let x=h.get(E.largestBatchId);x===null&&(x=$a(),h=h.insert(E.largestBatchId,x)),x.set(E.getKey(),E)}}const v=$a(),y=h.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((E,x)=>v.set(E,x))),!(v.size()>=l)););return gt.resolve(v)}St(t,n,o){const l=this.overlays.get(o.key);if(l!==null){const p=this.qr.get(l.largestBatchId).delete(o.key);this.qr.set(l.largestBatchId,p)}this.overlays=this.overlays.insert(o.key,new aC(n,o));let h=this.qr.get(n);h===void 0&&(h=Me(),this.qr.set(n,h)),this.qr.set(n,h.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.sessionToken=vi.EMPTY_BYTE_STRING}getSessionToken(t){return gt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,gt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(){this.Qr=new Qn(oi.$r),this.Ur=new Qn(oi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const o=new oi(t,n);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(t,n){t.forEach((o=>this.addReference(o,n)))}removeReference(t,n){this.Gr(new oi(t,n))}zr(t,n){t.forEach((o=>this.removeReference(o,n)))}jr(t){const n=new Zt(new Je([])),o=new oi(n,t),l=new oi(n,t+1),h=[];return this.Ur.forEachInRange([o,l],(p=>{this.Gr(p),h.push(p.key)})),h}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Zt(new Je([])),o=new oi(n,t),l=new oi(n,t+1);let h=Me();return this.Ur.forEachInRange([o,l],(p=>{h=h.add(p.key)})),h}containsKey(t){const n=new oi(t,0),o=this.Qr.firstAfterOrEqual(n);return o!==null&&t.isEqual(o.key)}}class oi{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Zt.comparator(t.key,n.key)||Pe(t.Yr,n.Yr)}static Kr(t,n){return Pe(t.Yr,n.Yr)||Zt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Qn(oi.$r)}checkEmpty(t){return gt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,o,l){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new oC(h,n,o,l);this.mutationQueue.push(p);for(const v of l)this.Zr=this.Zr.add(new oi(v.key,h)),this.indexManager.addToCollectionParentIndex(t,v.key.path.popLast());return gt.resolve(p)}lookupMutationBatch(t,n){return gt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const o=n+1,l=this.ei(o),h=l<0?0:l;return gt.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return gt.resolve(this.mutationQueue.length===0?ag:this.tr-1)}getAllMutationBatches(t){return gt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const o=new oi(n,0),l=new oi(n,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([o,l],(p=>{const v=this.Xr(p.Yr);h.push(v)})),gt.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(t,n){let o=new Qn(Pe);return n.forEach((l=>{const h=new oi(l,0),p=new oi(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,p],(v=>{o=o.add(v.Yr)}))})),gt.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(t,n){const o=n.path,l=o.length+1;let h=o;Zt.isDocumentKey(h)||(h=h.child(""));const p=new oi(new Zt(h),0);let v=new Qn(Pe);return this.Zr.forEachWhile((y=>{const E=y.key.path;return!!o.isPrefixOf(E)&&(E.length===l&&(v=v.add(y.Yr)),!0)}),p),gt.resolve(this.ti(v))}ti(t){const n=[];return t.forEach((o=>{const l=this.Xr(o);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){Ve(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return gt.forEach(n.mutations,(l=>{const h=new oi(l.key,n.batchId);return o=o.delete(h),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=o}))}ir(t){}containsKey(t,n){const o=new oi(n,0),l=this.Zr.firstAfterOrEqual(o);return gt.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,gt.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(t){this.ri=t,this.docs=(function(){return new bn(Zt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const o=n.key,l=this.docs.get(o),h=l?l.size:0,p=this.ri(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:p}),this.size+=p-h,this.indexManager.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const o=this.docs.get(n);return gt.resolve(o?o.document.mutableCopy():ai.newInvalidDocument(n))}getEntries(t,n){let o=uo();return n.forEach((l=>{const h=this.docs.get(l);o=o.insert(l,h?h.document.mutableCopy():ai.newInvalidDocument(l))})),gt.resolve(o)}getDocumentsMatchingQuery(t,n,o,l){let h=uo();const p=n.path,v=new Zt(p.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(v);for(;y.hasNext();){const{key:E,value:{document:x}}=y.getNext();if(!p.isPrefixOf(E.path))break;E.path.length>p.length+1||EI(TI(x),o)<=0||(l.has(x.key)||sd(n,x))&&(h=h.insert(x.key,x.mutableCopy()))}return gt.resolve(h)}getAllFromCollectionGroup(t,n,o,l){Xt(9500)}ii(t,n){return gt.forEach(this.docs,(o=>n(o)))}newChangeBuffer(t){return new ZC(this)}getSize(t){return gt.resolve(this.size)}}class ZC extends zC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((o,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(o)})),gt.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(t){this.persistence=t,this.si=new al((n=>cg(n)),hg),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.oi=0,this._i=new gg,this.targetCount=0,this.ai=lu.ur()}forEachTarget(t,n){return this.si.forEach(((o,l)=>n(l))),gt.resolve()}getLastRemoteSnapshotVersion(t){return gt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return gt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),gt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.oi&&(this.oi=n),gt.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new lu(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,gt.resolve()}updateTargetData(t,n){return this.Pr(n),gt.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,gt.resolve()}removeTargets(t,n,o){let l=0;const h=[];return this.si.forEach(((p,v)=>{v.sequenceNumber<=n&&o.get(v.targetId)===null&&(this.si.delete(p),h.push(this.removeMatchingKeysForTargetId(t,v.targetId)),l++)})),gt.waitFor(h).next((()=>l))}getTargetCount(t){return gt.resolve(this.targetCount)}getTargetData(t,n){const o=this.si.get(n)||null;return gt.resolve(o)}addMatchingKeys(t,n,o){return this._i.Wr(n,o),gt.resolve()}removeMatchingKeys(t,n,o){this._i.zr(n,o);const l=this.persistence.referenceDelegate,h=[];return l&&n.forEach((p=>{h.push(l.markPotentiallyOrphaned(t,p))})),gt.waitFor(h)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),gt.resolve()}getMatchingKeysForTargetId(t,n){const o=this._i.Hr(n);return gt.resolve(o)}containsKey(t,n){return gt.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(t,n){this.ui={},this.overlays={},this.ci=new ed(0),this.li=!1,this.li=!0,this.hi=new qC,this.referenceDelegate=t(this),this.Pi=new WC(this),this.indexManager=new MC,this.remoteDocumentCache=(function(l){return new GC(l)})((o=>this.referenceDelegate.Ti(o))),this.serializer=new CC(n),this.Ii=new BC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new HC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let o=this.ui[t.toKey()];return o||(o=new FC(n,this.referenceDelegate),this.ui[t.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,o){Vt("MemoryPersistence","Starting transaction:",t);const l=new YC(this.ci.next());return this.referenceDelegate.Ei(),o(l).next((h=>this.referenceDelegate.di(l).next((()=>h)))).toPromise().then((h=>(l.raiseOnCommittedEvent(),h)))}Ai(t,n){return gt.or(Object.values(this.ui).map((o=>()=>o.containsKey(t,n))))}}class YC extends wI{constructor(t){super(),this.currentSequenceNumber=t}}class _g{constructor(t){this.persistence=t,this.Ri=new gg,this.Vi=null}static mi(t){return new _g(t)}get fi(){if(this.Vi)return this.Vi;throw Xt(60996)}addReference(t,n,o){return this.Ri.addReference(o,n),this.fi.delete(o.toString()),gt.resolve()}removeReference(t,n,o){return this.Ri.removeReference(o,n),this.fi.add(o.toString()),gt.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),gt.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((h=>this.fi.add(h.toString())))})).next((()=>o.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gt.forEach(this.fi,(o=>{const l=Zt.fromPath(o);return this.gi(t,l).next((h=>{h||n.removeEntry(l,re.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((o=>{o?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return gt.or([()=>gt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Uf{constructor(t,n){this.persistence=t,this.pi=new al((o=>xI(o.path)),((o,l)=>o.isEqual(l))),this.garbageCollector=VC(this,n)}static mi(t,n){return new Uf(t,n)}Ei(){}di(t){return gt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((o=>n.next((l=>o+l))))}wr(t){let n=0;return this.pr(t,(o=>{n++})).next((()=>n))}pr(t,n){return gt.forEach(this.pi,((o,l)=>this.br(t,o,l).next((h=>h?gt.resolve():n(l)))))}removeTargets(t,n,o){return this.persistence.getTargetCache().removeTargets(t,n,o)}removeOrphanedDocuments(t,n){let o=0;const l=this.persistence.getRemoteDocumentCache(),h=l.newChangeBuffer();return l.ii(t,(p=>this.br(t,p,n).next((v=>{v||(o++,h.removeEntry(p,re.min()))})))).next((()=>h.apply(t))).next((()=>o))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),gt.resolve()}removeTarget(t,n){const o=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,o)}addReference(t,n,o){return this.pi.set(o,t.currentSequenceNumber),gt.resolve()}removeReference(t,n,o){return this.pi.set(o,t.currentSequenceNumber),gt.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),gt.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=vf(t.data.value)),n}br(t,n,o){return gt.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return gt.resolve(l!==void 0&&l>o)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(t,n,o,l){this.targetId=t,this.fromCache=n,this.Es=o,this.ds=l}static As(t,n){let o=Me(),l=Me();for(const h of n.docChanges)switch(h.type){case 0:o=o.add(h.doc.key);break;case 1:l=l.add(h.doc.key)}return new yg(t,n.fromCache,o,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return RS()?8:SI(Di())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,o,l){const h={result:null};return this.ys(t,n).next((p=>{h.result=p})).next((()=>{if(!h.result)return this.ws(t,n,l,o).next((p=>{h.result=p}))})).next((()=>{if(h.result)return;const p=new QC;return this.Ss(t,n,p).next((v=>{if(h.result=v,this.Vs)return this.bs(t,n,p,v.size)}))})).next((()=>h.result))}bs(t,n,o,l){return o.documentReadCount<this.fs?(Wl()<=Ce.DEBUG&&Vt("QueryEngine","SDK will not create cache indexes for query:",Yl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),gt.resolve()):(Wl()<=Ce.DEBUG&&Vt("QueryEngine","Query:",Yl(n),"scans",o.documentReadCount,"local documents and returns",l,"documents as results."),o.documentReadCount>this.gs*l?(Wl()<=Ce.DEBUG&&Vt("QueryEngine","The SDK decides to create cache indexes for query:",Yl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Is(n))):gt.resolve())}ys(t,n){if(H0(n))return gt.resolve(null);let o=Is(n);return this.indexManager.getIndexType(t,o).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Lf(n,null,"F"),o=Is(n)),this.indexManager.getDocumentsMatchingTarget(t,o).next((h=>{const p=Me(...h);return this.ps.getDocuments(t,p).next((v=>this.indexManager.getMinOffset(t,o).next((y=>{const E=this.Ds(n,v);return this.Cs(n,E,p,y.readTime)?this.ys(t,Lf(n,null,"F")):this.vs(t,E,n,y)}))))})))))}ws(t,n,o,l){return H0(n)||l.isEqual(re.min())?gt.resolve(null):this.ps.getDocuments(t,o).next((h=>{const p=this.Ds(n,h);return this.Cs(n,p,o,l)?gt.resolve(null):(Wl()<=Ce.DEBUG&&Vt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Yl(n)),this.vs(t,p,n,vI(l,Nc)).next((v=>v)))}))}Ds(t,n){let o=new Qn(ib(t));return n.forEach(((l,h)=>{sd(t,h)&&(o=o.add(h))})),o}Cs(t,n,o,l){if(t.limit===null)return!1;if(o.size!==n.size)return!0;const h=t.limitType==="F"?n.last():n.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(l)>0)}Ss(t,n,o){return Wl()<=Ce.DEBUG&&Vt("QueryEngine","Using full collection scan to execute query:",Yl(n)),this.ps.getDocumentsMatchingQuery(t,n,da.min(),o)}vs(t,n,o,l){return this.ps.getDocumentsMatchingQuery(t,o,l).next((h=>(n.forEach((p=>{h=h.insert(p.key,p)})),h)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="LocalStore",XC=3e8;class $C{constructor(t,n,o,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new bn(Pe),this.xs=new al((h=>cg(h)),hg),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(o)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new jC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function JC(r,t,n,o){return new $C(r,t,n,o)}async function Cb(r,t){const n=fe(r);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let l;return n.mutationQueue.getAllMutationBatches(o).next((h=>(l=h,n.Bs(t),n.mutationQueue.getAllMutationBatches(o)))).next((h=>{const p=[],v=[];let y=Me();for(const E of l){p.push(E.batchId);for(const x of E.mutations)y=y.add(x.key)}for(const E of h){v.push(E.batchId);for(const x of E.mutations)y=y.add(x.key)}return n.localDocuments.getDocuments(o,y).next((E=>({Ls:E,removedBatchIds:p,addedBatchIds:v})))}))}))}function t2(r,t){const n=fe(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const l=t.batch.keys(),h=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(v,y,E,x){const P=E.batch,M=P.keys();let q=gt.resolve();return M.forEach((W=>{q=q.next((()=>x.getEntry(y,W))).next((et=>{const lt=E.docVersions.get(W);Ve(lt!==null,48541),et.version.compareTo(lt)<0&&(P.applyToRemoteDocument(et,E),et.isValidDocument()&&(et.setReadTime(E.commitVersion),x.addEntry(et)))}))})),q.next((()=>v.mutationQueue.removeMutationBatch(y,P)))})(n,o,t,h).next((()=>h.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(v){let y=Me();for(let E=0;E<v.mutationResults.length;++E)v.mutationResults[E].transformResults.length>0&&(y=y.add(v.batch.mutations[E].key));return y})(t)))).next((()=>n.localDocuments.getDocuments(o,l)))}))}function Pb(r){const t=fe(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function e2(r,t){const n=fe(r),o=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const p=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const v=[];t.targetChanges.forEach(((x,P)=>{const M=l.get(P);if(!M)return;v.push(n.Pi.removeMatchingKeys(h,x.removedDocuments,P).next((()=>n.Pi.addMatchingKeys(h,x.addedDocuments,P))));let q=M.withSequenceNumber(h.currentSequenceNumber);t.targetMismatches.get(P)!==null?q=q.withResumeToken(vi.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):x.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(x.resumeToken,o)),l=l.insert(P,q),(function(et,lt,Tt){return et.resumeToken.approximateByteSize()===0||lt.snapshotVersion.toMicroseconds()-et.snapshotVersion.toMicroseconds()>=XC?!0:Tt.addedDocuments.size+Tt.modifiedDocuments.size+Tt.removedDocuments.size>0})(M,q,x)&&v.push(n.Pi.updateTargetData(h,q))}));let y=uo(),E=Me();if(t.documentUpdates.forEach((x=>{t.resolvedLimboDocuments.has(x)&&v.push(n.persistence.referenceDelegate.updateLimboDocument(h,x))})),v.push(n2(h,p,t.documentUpdates).next((x=>{y=x.ks,E=x.qs}))),!o.isEqual(re.min())){const x=n.Pi.getLastRemoteSnapshotVersion(h).next((P=>n.Pi.setTargetsMetadata(h,h.currentSequenceNumber,o)));v.push(x)}return gt.waitFor(v).next((()=>p.apply(h))).next((()=>n.localDocuments.getLocalViewOfDocuments(h,y,E))).next((()=>y))})).then((h=>(n.Ms=l,h)))}function n2(r,t,n){let o=Me(),l=Me();return n.forEach((h=>o=o.add(h))),t.getEntries(r,o).next((h=>{let p=uo();return n.forEach(((v,y)=>{const E=h.get(v);y.isFoundDocument()!==E.isFoundDocument()&&(l=l.add(v)),y.isNoDocument()&&y.version.isEqual(re.min())?(t.removeEntry(v,y.readTime),p=p.insert(v,y)):!E.isValidDocument()||y.version.compareTo(E.version)>0||y.version.compareTo(E.version)===0&&E.hasPendingWrites?(t.addEntry(y),p=p.insert(v,y)):Vt(vg,"Ignoring outdated watch update for ",v,". Current version:",E.version," Watch version:",y.version)})),{ks:p,qs:l}}))}function i2(r,t){const n=fe(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(t===void 0&&(t=ag),n.mutationQueue.getNextMutationBatchAfterBatchId(o,t))))}function r2(r,t){const n=fe(r);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let l;return n.Pi.getTargetData(o,t).next((h=>h?(l=h,gt.resolve(l)):n.Pi.allocateTargetId(o).next((p=>(l=new oa(t,p,"TargetPurposeListen",o.currentSequenceNumber),n.Pi.addTargetData(o,l).next((()=>l)))))))})).then((o=>{const l=n.Ms.get(o.targetId);return(l===null||o.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(o.targetId,o),n.xs.set(t,o.targetId)),o}))}async function Dp(r,t,n){const o=fe(r),l=o.Ms.get(t),h=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",h,(p=>o.persistence.referenceDelegate.removeTarget(p,l)))}catch(p){if(!vu(p))throw p;Vt(vg,`Failed to update sequence numbers for target ${t}: ${p}`)}o.Ms=o.Ms.remove(t),o.xs.delete(l.target)}function eT(r,t,n){const o=fe(r);let l=re.min(),h=Me();return o.persistence.runTransaction("Execute query","readwrite",(p=>(function(y,E,x){const P=fe(y),M=P.xs.get(x);return M!==void 0?gt.resolve(P.Ms.get(M)):P.Pi.getTargetData(E,x)})(o,p,Is(t)).next((v=>{if(v)return l=v.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(p,v.targetId).next((y=>{h=y}))})).next((()=>o.Fs.getDocumentsMatchingQuery(p,t,n?l:re.min(),n?h:Me()))).next((v=>(s2(o,GI(t),v),{documents:v,Qs:h})))))}function s2(r,t,n){let o=r.Os.get(t)||re.min();n.forEach(((l,h)=>{h.readTime.compareTo(o)>0&&(o=h.readTime)})),r.Os.set(t,o)}class nT{constructor(){this.activeTargetIds=XI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class o2{constructor(){this.Mo=new nT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,o){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,o){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new nT,Promise.resolve()}handleUserChange(t,n,o){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="ConnectivityMonitor";class rT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Vt(iT,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){Vt(iT,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df=null;function Np(){return df===null?df=(function(){return 268435456+Math.round(2147483648*Math.random())})():df++,"0x"+df.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="RestConnection",l2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class u2{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${o}/databases/${l}`,this.Wo=this.databaseId.database===Of?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Go(t,n,o,l,h){const p=Np(),v=this.zo(t,n.toUriEncodedString());Vt(cp,`Sending RPC '${t}' ${p}:`,v,o);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,h);const{host:E}=new URL(v),x=du(E);return this.Jo(t,v,y,o,x).then((P=>(Vt(cp,`Received RPC '${t}' ${p}: `,P),P)),(P=>{throw ru(cp,`RPC '${t}' ${p} failed with error: `,P,"url: ",v,"request:",o),P}))}Ho(t,n,o,l,h,p){return this.Go(t,n,o,l,h)}jo(t,n,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_u})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,h)=>t[h]=l)),o&&o.headers.forEach(((l,h)=>t[h]=l))}zo(t,n){const o=l2[t];return`${this.Uo}/v1/${n}:${o}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="WebChannelConnection";class h2 extends u2{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,o,l,h){const p=Np();return new Promise(((v,y)=>{const E=new PE;E.setWithCredentials(!0),E.listenOnce(ME.COMPLETE,(()=>{try{switch(E.getLastErrorCode()){case yf.NO_ERROR:const P=E.getResponseJson();Vt(Pi,`XHR for RPC '${t}' ${p} received:`,JSON.stringify(P)),v(P);break;case yf.TIMEOUT:Vt(Pi,`RPC '${t}' ${p} timed out`),y(new Mt(ft.DEADLINE_EXCEEDED,"Request time out"));break;case yf.HTTP_ERROR:const M=E.getStatus();if(Vt(Pi,`RPC '${t}' ${p} failed with status:`,M,"response text:",E.getResponseText()),M>0){let q=E.getResponseJson();Array.isArray(q)&&(q=q[0]);const W=q?.error;if(W&&W.status&&W.message){const et=(function(Tt){const ht=Tt.toLowerCase().replace(/_/g,"-");return Object.values(ft).indexOf(ht)>=0?ht:ft.UNKNOWN})(W.status);y(new Mt(et,W.message))}else y(new Mt(ft.UNKNOWN,"Server responded with status "+E.getStatus()))}else y(new Mt(ft.UNAVAILABLE,"Connection failed."));break;default:Xt(9055,{l_:t,streamId:p,h_:E.getLastErrorCode(),P_:E.getLastError()})}}finally{Vt(Pi,`RPC '${t}' ${p} completed.`)}}));const x=JSON.stringify(l);Vt(Pi,`RPC '${t}' ${p} sending request:`,l),E.send(n,"POST",x,o,15)}))}T_(t,n,o){const l=Np(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],p=NE(),v=DE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(y.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,o),y.encodeInitMessageHeaders=!0;const x=h.join("");Vt(Pi,`Creating RPC '${t}' stream ${l}: ${x}`,y);const P=p.createWebChannel(x,y);this.I_(P);let M=!1,q=!1;const W=new c2({Yo:lt=>{q?Vt(Pi,`Not sending because RPC '${t}' stream ${l} is closed:`,lt):(M||(Vt(Pi,`Opening RPC '${t}' stream ${l} transport.`),P.open(),M=!0),Vt(Pi,`RPC '${t}' stream ${l} sending:`,lt),P.send(lt))},Zo:()=>P.close()}),et=(lt,Tt,ht)=>{lt.listen(Tt,(yt=>{try{ht(yt)}catch(Ht){setTimeout((()=>{throw Ht}),0)}}))};return et(P,pc.EventType.OPEN,(()=>{q||(Vt(Pi,`RPC '${t}' stream ${l} transport opened.`),W.o_())})),et(P,pc.EventType.CLOSE,(()=>{q||(q=!0,Vt(Pi,`RPC '${t}' stream ${l} transport closed`),W.a_(),this.E_(P))})),et(P,pc.EventType.ERROR,(lt=>{q||(q=!0,ru(Pi,`RPC '${t}' stream ${l} transport errored. Name:`,lt.name,"Message:",lt.message),W.a_(new Mt(ft.UNAVAILABLE,"The operation could not be completed")))})),et(P,pc.EventType.MESSAGE,(lt=>{if(!q){const Tt=lt.data[0];Ve(!!Tt,16349);const ht=Tt,yt=ht?.error||ht[0]?.error;if(yt){Vt(Pi,`RPC '${t}' stream ${l} received error:`,yt);const Ht=yt.status;let Pt=(function(O){const k=Un[O];if(k!==void 0)return gb(k)})(Ht),zt=yt.message;Pt===void 0&&(Pt=ft.INTERNAL,zt="Unknown error status: "+Ht+" with message "+yt.message),q=!0,W.a_(new Mt(Pt,zt)),P.close()}else Vt(Pi,`RPC '${t}' stream ${l} received:`,Tt),W.u_(Tt)}})),et(v,OE.STAT_EVENT,(lt=>{lt.stat===wp.PROXY?Vt(Pi,`RPC '${t}' stream ${l} detected buffering proxy`):lt.stat===wp.NOPROXY&&Vt(Pi,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function hp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(r){return new pC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(t,n,o=1e3,l=1.5,h=6e4){this.Mi=t,this.timerId=n,this.d_=o,this.A_=l,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-o);l>0&&Vt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="PersistentStream";class Mb{constructor(t,n,o,l,h,p,v,y){this.Mi=t,this.S_=o,this.b_=l,this.connection=h,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=v,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Tg(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===ft.RESOURCE_EXHAUSTED?(lo(n.toString()),lo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ft.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,l])=>{this.D_===n&&this.G_(o,l)}),(o=>{t((()=>{const l=new Mt(ft.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(l)}))}))}G_(t,n){const o=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{o((()=>this.listener.Xo()))})),this.stream.t_((()=>{o((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{o((()=>this.z_(l)))})),this.stream.onMessage((l=>{o((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return Vt(sT,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(Vt(sT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class f2 extends Mb{constructor(t,n,o,l,h,p){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,l,p),this.serializer=h}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=vC(this.serializer,t),o=(function(h){if(!("targetChange"in h))return re.min();const p=h.targetChange;return p.targetIds&&p.targetIds.length?re.min():p.readTime?Sr(p.readTime):re.min()})(t);return this.listener.H_(n,o)}Y_(t){const n={};n.database=Op(this.serializer),n.addTarget=(function(h,p){let v;const y=p.target;if(v=Ip(y)?{documents:EC(h,y)}:{query:bC(h,y).ft},v.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){v.resumeToken=vb(h,p.resumeToken);const E=Pp(h,p.expectedCount);E!==null&&(v.expectedCount=E)}else if(p.snapshotVersion.compareTo(re.min())>0){v.readTime=Vf(h,p.snapshotVersion.toTimestamp());const E=Pp(h,p.expectedCount);E!==null&&(v.expectedCount=E)}return v})(this.serializer,t);const o=SC(this.serializer,t);o&&(n.labels=o),this.q_(n)}Z_(t){const n={};n.database=Op(this.serializer),n.removeTarget=t,this.q_(n)}}class d2 extends Mb{constructor(t,n,o,l,h,p){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,l,p),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Ve(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ve(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Ve(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=TC(t.writeResults,t.commitTime),o=Sr(t.commitTime);return this.listener.na(o,n)}ra(){const t={};t.database=Op(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((o=>wb(this.serializer,o)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{}class p2 extends m2{constructor(t,n,o,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=o,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Mt(ft.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Go(t,Mp(n,o),l,h,p))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Mt(ft.UNKNOWN,h.toString())}))}Ho(t,n,o,l,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,v])=>this.connection.Ho(t,Mp(n,o),l,p,v,h))).catch((p=>{throw p.name==="FirebaseError"?(p.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new Mt(ft.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class g2{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(lo(n),this.aa=!1):Vt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl="RemoteStore";class _2{constructor(t,n,o,l,h){this.localStore=t,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo((p=>{o.enqueueAndForget((async()=>{ll(this)&&(Vt(sl,"Restarting streams for network reachability change."),await(async function(y){const E=fe(y);E.Ea.add(4),await Jc(E),E.Ra.set("Unknown"),E.Ea.delete(4),await hd(E)})(this))}))})),this.Ra=new g2(o,l)}}async function hd(r){if(ll(r))for(const t of r.da)await t(!0)}async function Jc(r){for(const t of r.da)await t(!1)}function Ob(r,t){const n=fe(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Sg(n)?wg(n):Eu(n).O_()&&bg(n,t))}function Eg(r,t){const n=fe(r),o=Eu(n);n.Ia.delete(t),o.O_()&&Db(n,t),n.Ia.size===0&&(o.O_()?o.L_():ll(n)&&n.Ra.set("Unknown"))}function bg(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(re.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Eu(r).Y_(t)}function Db(r,t){r.Va.Ue(t),Eu(r).Z_(t)}function wg(r){r.Va=new hC({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),Eu(r).start(),r.Ra.ua()}function Sg(r){return ll(r)&&!Eu(r).x_()&&r.Ia.size>0}function ll(r){return fe(r).Ea.size===0}function Nb(r){r.Va=void 0}async function y2(r){r.Ra.set("Online")}async function v2(r){r.Ia.forEach(((t,n)=>{bg(r,t)}))}async function T2(r,t){Nb(r),Sg(r)?(r.Ra.ha(t),wg(r)):r.Ra.set("Unknown")}async function E2(r,t,n){if(r.Ra.set("Online"),t instanceof yb&&t.state===2&&t.cause)try{await(async function(l,h){const p=h.cause;for(const v of h.targetIds)l.Ia.has(v)&&(await l.remoteSyncer.rejectListen(v,p),l.Ia.delete(v),l.Va.removeTarget(v))})(r,t)}catch(o){Vt(sl,"Failed to remove targets %s: %s ",t.targetIds.join(","),o),await jf(r,o)}else if(t instanceof bf?r.Va.Ze(t):t instanceof _b?r.Va.st(t):r.Va.tt(t),!n.isEqual(re.min()))try{const o=await Pb(r.localStore);n.compareTo(o)>=0&&await(function(h,p){const v=h.Va.Tt(p);return v.targetChanges.forEach(((y,E)=>{if(y.resumeToken.approximateByteSize()>0){const x=h.Ia.get(E);x&&h.Ia.set(E,x.withResumeToken(y.resumeToken,p))}})),v.targetMismatches.forEach(((y,E)=>{const x=h.Ia.get(y);if(!x)return;h.Ia.set(y,x.withResumeToken(vi.EMPTY_BYTE_STRING,x.snapshotVersion)),Db(h,y);const P=new oa(x.target,y,E,x.sequenceNumber);bg(h,P)})),h.remoteSyncer.applyRemoteEvent(v)})(r,n)}catch(o){Vt(sl,"Failed to raise snapshot:",o),await jf(r,o)}}async function jf(r,t,n){if(!vu(t))throw t;r.Ea.add(1),await Jc(r),r.Ra.set("Offline"),n||(n=()=>Pb(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Vt(sl,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await hd(r)}))}function Lb(r,t){return t().catch((n=>jf(r,n,t)))}async function fd(r){const t=fe(r),n=_a(t);let o=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ag;for(;b2(t);)try{const l=await i2(t.localStore,o);if(l===null){t.Ta.length===0&&n.L_();break}o=l.batchId,w2(t,l)}catch(l){await jf(t,l)}kb(t)&&Vb(t)}function b2(r){return ll(r)&&r.Ta.length<10}function w2(r,t){r.Ta.push(t);const n=_a(r);n.O_()&&n.X_&&n.ea(t.mutations)}function kb(r){return ll(r)&&!_a(r).x_()&&r.Ta.length>0}function Vb(r){_a(r).start()}async function S2(r){_a(r).ra()}async function A2(r){const t=_a(r);for(const n of r.Ta)t.ea(n.mutations)}async function x2(r,t,n){const o=r.Ta.shift(),l=dg.from(o,t,n);await Lb(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await fd(r)}async function R2(r,t){t&&_a(r).X_&&await(async function(o,l){if((function(p){return pb(p)&&p!==ft.ABORTED})(l.code)){const h=o.Ta.shift();_a(o).B_(),await Lb(o,(()=>o.remoteSyncer.rejectFailedWrite(h.batchId,l))),await fd(o)}})(r,t),kb(r)&&Vb(r)}async function oT(r,t){const n=fe(r);n.asyncQueue.verifyOperationInProgress(),Vt(sl,"RemoteStore received new credentials");const o=ll(n);n.Ea.add(3),await Jc(n),o&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await hd(n)}async function I2(r,t){const n=fe(r);t?(n.Ea.delete(2),await hd(n)):t||(n.Ea.add(2),await Jc(n),n.Ra.set("Unknown"))}function Eu(r){return r.ma||(r.ma=(function(n,o,l){const h=fe(n);return h.sa(),new f2(o,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)})(r.datastore,r.asyncQueue,{Xo:y2.bind(null,r),t_:v2.bind(null,r),r_:T2.bind(null,r),H_:E2.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),Sg(r)?wg(r):r.Ra.set("Unknown")):(await r.ma.stop(),Nb(r))}))),r.ma}function _a(r){return r.fa||(r.fa=(function(n,o,l){const h=fe(n);return h.sa(),new d2(o,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:S2.bind(null,r),r_:R2.bind(null,r),ta:A2.bind(null,r),na:x2.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await fd(r)):(await r.fa.stop(),r.Ta.length>0&&(Vt(sl,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(t,n,o,l,h){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=o,this.op=l,this.removalCallback=h,this.deferred=new Rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,o,l,h){const p=Date.now()+o,v=new Ag(t,n,p,l,h);return v.start(o),v}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Mt(ft.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xg(r,t){if(lo("AsyncQueue",`${t}: ${r}`),vu(r))return new Mt(ft.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{static emptySet(t){return new eu(t.comparator)}constructor(t){this.comparator=t?(n,o)=>t(n,o)||Zt.comparator(n.key,o.key):(n,o)=>Zt.comparator(n.key,o.key),this.keyedMap=gc(),this.sortedSet=new bn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,o)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof eu)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),o=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,h=o.getNext().key;if(!l.isEqual(h))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const o=new eu;return o.comparator=this.comparator,o.keyedMap=t,o.sortedSet=n,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(){this.ga=new bn(Zt.comparator)}track(t){const n=t.doc.key,o=this.ga.get(n);o?t.type!==0&&o.type===3?this.ga=this.ga.insert(n,t):t.type===3&&o.type!==1?this.ga=this.ga.insert(n,{type:o.type,doc:t.doc}):t.type===2&&o.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&o.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&o.type===0?this.ga=this.ga.remove(n):t.type===1&&o.type===2?this.ga=this.ga.insert(n,{type:1,doc:o.doc}):t.type===0&&o.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Xt(63341,{Rt:t,pa:o}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,o)=>{t.push(o)})),t}}class uu{constructor(t,n,o,l,h,p,v,y,E){this.query=t,this.docs=n,this.oldDocs=o,this.docChanges=l,this.mutatedKeys=h,this.fromCache=p,this.syncStateChanged=v,this.excludesMetadataChanges=y,this.hasCachedResults=E}static fromInitialDocuments(t,n,o,l,h){const p=[];return n.forEach((v=>{p.push({type:0,doc:v})})),new uu(t,n,eu.emptySet(n),p,o,l,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&rd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,o=t.docChanges;if(n.length!==o.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==o[l].type||!n[l].doc.isEqual(o[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class P2{constructor(){this.queries=lT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,o){const l=fe(n),h=l.queries;l.queries=lT(),h.forEach(((p,v)=>{for(const y of v.Sa)y.onError(o)}))})(this,new Mt(ft.ABORTED,"Firestore shutting down"))}}function lT(){return new al((r=>nb(r)),rd)}async function Rg(r,t){const n=fe(r);let o=3;const l=t.query;let h=n.queries.get(l);h?!h.ba()&&t.Da()&&(o=2):(h=new C2,o=t.Da()?0:1);try{switch(o){case 0:h.wa=await n.onListen(l,!0);break;case 1:h.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(p){const v=xg(p,`Initialization of query '${Yl(t.query)}' failed`);return void t.onError(v)}n.queries.set(l,h),h.Sa.push(t),t.va(n.onlineState),h.wa&&t.Fa(h.wa)&&Cg(n)}async function Ig(r,t){const n=fe(r),o=t.query;let l=3;const h=n.queries.get(o);if(h){const p=h.Sa.indexOf(t);p>=0&&(h.Sa.splice(p,1),h.Sa.length===0?l=t.Da()?0:1:!h.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function M2(r,t){const n=fe(r);let o=!1;for(const l of t){const h=l.query,p=n.queries.get(h);if(p){for(const v of p.Sa)v.Fa(l)&&(o=!0);p.wa=l}}o&&Cg(n)}function O2(r,t,n){const o=fe(r),l=o.queries.get(t);if(l)for(const h of l.Sa)h.onError(n);o.queries.delete(t)}function Cg(r){r.Ca.forEach((t=>{t.next()}))}var Lp,uT;(uT=Lp||(Lp={})).Ma="default",uT.Cache="cache";class Pg{constructor(t,n,o){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(t){if(!this.options.includeMetadataChanges){const o=[];for(const l of t.docChanges)l.type!==3&&o.push(l);t=new uu(t.query,t.docs,t.oldDocs,o,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const o=n!=="Offline";return(!this.options.qa||!o)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=uu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Lp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(t){this.key=t}}class Ub{constructor(t){this.key=t}}class D2{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Me(),this.mutatedKeys=Me(),this.eu=ib(t),this.tu=new eu(this.eu)}get nu(){return this.Ya}ru(t,n){const o=n?n.iu:new aT,l=n?n.tu:this.tu;let h=n?n.mutatedKeys:this.mutatedKeys,p=l,v=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,E=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((x,P)=>{const M=l.get(x),q=sd(this.query,P)?P:null,W=!!M&&this.mutatedKeys.has(M.key),et=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let lt=!1;M&&q?M.data.isEqual(q.data)?W!==et&&(o.track({type:3,doc:q}),lt=!0):this.su(M,q)||(o.track({type:2,doc:q}),lt=!0,(y&&this.eu(q,y)>0||E&&this.eu(q,E)<0)&&(v=!0)):!M&&q?(o.track({type:0,doc:q}),lt=!0):M&&!q&&(o.track({type:1,doc:M}),lt=!0,(y||E)&&(v=!0)),lt&&(q?(p=p.add(q),h=et?h.add(x):h.delete(x)):(p=p.delete(x),h=h.delete(x)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const x=this.query.limitType==="F"?p.last():p.first();p=p.delete(x.key),h=h.delete(x.key),o.track({type:1,doc:x})}return{tu:p,iu:o,Cs:v,mutatedKeys:h}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,o,l){const h=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const p=t.iu.ya();p.sort(((x,P)=>(function(q,W){const et=lt=>{switch(lt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xt(20277,{Rt:lt})}};return et(q)-et(W)})(x.type,P.type)||this.eu(x.doc,P.doc))),this.ou(o),l=l??!1;const v=n&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,E=y!==this.Za;return this.Za=y,p.length!==0||E?{snapshot:new uu(this.query,t.tu,h,p,t.mutatedKeys,y===0,E,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:v}:{au:v}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new aT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Me(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))}));const n=[];return t.forEach((o=>{this.Xa.has(o)||n.push(new Ub(o))})),this.Xa.forEach((o=>{t.has(o)||n.push(new zb(o))})),n}cu(t){this.Ya=t.Qs,this.Xa=Me();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return uu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Mg="SyncEngine";class N2{constructor(t,n,o){this.query=t,this.targetId=n,this.view=o}}class L2{constructor(t){this.key=t,this.hu=!1}}class k2{constructor(t,n,o,l,h,p){this.localStore=t,this.remoteStore=n,this.eventManager=o,this.sharedClientState=l,this.currentUser=h,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new al((v=>nb(v)),rd),this.Iu=new Map,this.Eu=new Set,this.du=new bn(Zt.comparator),this.Au=new Map,this.Ru=new gg,this.Vu={},this.mu=new Map,this.fu=lu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function V2(r,t,n=!0){const o=Gb(r);let l;const h=o.Tu.get(t);return h?(o.sharedClientState.addLocalQueryTarget(h.targetId),l=h.view.lu()):l=await jb(o,t,n,!0),l}async function z2(r,t){const n=Gb(r);await jb(n,t,!0,!1)}async function jb(r,t,n,o){const l=await r2(r.localStore,Is(t)),h=l.targetId,p=r.sharedClientState.addLocalQueryTarget(h,n);let v;return o&&(v=await U2(r,t,h,p==="current",l.resumeToken)),r.isPrimaryClient&&n&&Ob(r.remoteStore,l),v}async function U2(r,t,n,o,l){r.pu=(P,M,q)=>(async function(et,lt,Tt,ht){let yt=lt.view.ru(Tt);yt.Cs&&(yt=await eT(et.localStore,lt.query,!1).then((({documents:V})=>lt.view.ru(V,yt))));const Ht=ht&&ht.targetChanges.get(lt.targetId),Pt=ht&&ht.targetMismatches.get(lt.targetId)!=null,zt=lt.view.applyChanges(yt,et.isPrimaryClient,Ht,Pt);return hT(et,lt.targetId,zt.au),zt.snapshot})(r,P,M,q);const h=await eT(r.localStore,t,!0),p=new D2(t,h.Qs),v=p.ru(h.documents),y=$c.createSynthesizedTargetChangeForCurrentChange(n,o&&r.onlineState!=="Offline",l),E=p.applyChanges(v,r.isPrimaryClient,y);hT(r,n,E.au);const x=new N2(t,n,p);return r.Tu.set(t,x),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),E.snapshot}async function j2(r,t,n){const o=fe(r),l=o.Tu.get(t),h=o.Iu.get(l.targetId);if(h.length>1)return o.Iu.set(l.targetId,h.filter((p=>!rd(p,t)))),void o.Tu.delete(t);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(l.targetId),o.sharedClientState.isActiveQueryTarget(l.targetId)||await Dp(o.localStore,l.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(l.targetId),n&&Eg(o.remoteStore,l.targetId),kp(o,l.targetId)})).catch(yu)):(kp(o,l.targetId),await Dp(o.localStore,l.targetId,!0))}async function B2(r,t){const n=fe(r),o=n.Tu.get(t),l=n.Iu.get(o.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),Eg(n.remoteStore,o.targetId))}async function H2(r,t,n){const o=Q2(r);try{const l=await(function(p,v){const y=fe(p),E=mn.now(),x=v.reduce(((q,W)=>q.add(W.key)),Me());let P,M;return y.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let W=uo(),et=Me();return y.Ns.getEntries(q,x).next((lt=>{W=lt,W.forEach(((Tt,ht)=>{ht.isValidDocument()||(et=et.add(Tt))}))})).next((()=>y.localDocuments.getOverlayedDocuments(q,W))).next((lt=>{P=lt;const Tt=[];for(const ht of v){const yt=sC(ht,P.get(ht.key).overlayedDocument);yt!=null&&Tt.push(new ba(ht.key,yt,YE(yt.value.mapValue),Oi.exists(!0)))}return y.mutationQueue.addMutationBatch(q,E,Tt,v)})).next((lt=>{M=lt;const Tt=lt.applyToLocalDocumentSet(P,et);return y.documentOverlayCache.saveOverlays(q,lt.batchId,Tt)}))})).then((()=>({batchId:M.batchId,changes:sb(P)})))})(o.localStore,t);o.sharedClientState.addPendingMutation(l.batchId),(function(p,v,y){let E=p.Vu[p.currentUser.toKey()];E||(E=new bn(Pe)),E=E.insert(v,y),p.Vu[p.currentUser.toKey()]=E})(o,l.batchId,n),await th(o,l.changes),await fd(o.remoteStore)}catch(l){const h=xg(l,"Failed to persist write");n.reject(h)}}async function Bb(r,t){const n=fe(r);try{const o=await e2(n.localStore,t);t.targetChanges.forEach(((l,h)=>{const p=n.Au.get(h);p&&(Ve(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?p.hu=!0:l.modifiedDocuments.size>0?Ve(p.hu,14607):l.removedDocuments.size>0&&(Ve(p.hu,42227),p.hu=!1))})),await th(n,o,t)}catch(o){await yu(o)}}function cT(r,t,n){const o=fe(r);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const l=[];o.Tu.forEach(((h,p)=>{const v=p.view.va(t);v.snapshot&&l.push(v.snapshot)})),(function(p,v){const y=fe(p);y.onlineState=v;let E=!1;y.queries.forEach(((x,P)=>{for(const M of P.Sa)M.va(v)&&(E=!0)})),E&&Cg(y)})(o.eventManager,t),l.length&&o.Pu.H_(l),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}async function q2(r,t,n){const o=fe(r);o.sharedClientState.updateQueryState(t,"rejected",n);const l=o.Au.get(t),h=l&&l.key;if(h){let p=new bn(Zt.comparator);p=p.insert(h,ai.newNoDocument(h,re.min()));const v=Me().add(h),y=new ud(re.min(),new Map,new bn(Pe),p,v);await Bb(o,y),o.du=o.du.remove(h),o.Au.delete(t),Og(o)}else await Dp(o.localStore,t,!1).then((()=>kp(o,t,n))).catch(yu)}async function F2(r,t){const n=fe(r),o=t.batch.batchId;try{const l=await t2(n.localStore,t);qb(n,o,null),Hb(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await th(n,l)}catch(l){await yu(l)}}async function G2(r,t,n){const o=fe(r);try{const l=await(function(p,v){const y=fe(p);return y.persistence.runTransaction("Reject batch","readwrite-primary",(E=>{let x;return y.mutationQueue.lookupMutationBatch(E,v).next((P=>(Ve(P!==null,37113),x=P.keys(),y.mutationQueue.removeMutationBatch(E,P)))).next((()=>y.mutationQueue.performConsistencyCheck(E))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(E,x,v))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,x))).next((()=>y.localDocuments.getDocuments(E,x)))}))})(o.localStore,t);qb(o,t,n),Hb(o,t),o.sharedClientState.updateMutationState(t,"rejected",n),await th(o,l)}catch(l){await yu(l)}}function Hb(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function qb(r,t,n){const o=fe(r);let l=o.Vu[o.currentUser.toKey()];if(l){const h=l.get(t);h&&(n?h.reject(n):h.resolve(),l=l.remove(t)),o.Vu[o.currentUser.toKey()]=l}}function kp(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const o of r.Iu.get(t))r.Tu.delete(o),n&&r.Pu.yu(o,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((o=>{r.Ru.containsKey(o)||Fb(r,o)}))}function Fb(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(Eg(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),Og(r))}function hT(r,t,n){for(const o of n)o instanceof zb?(r.Ru.addReference(o.key,t),Z2(r,o)):o instanceof Ub?(Vt(Mg,"Document no longer in limbo: "+o.key),r.Ru.removeReference(o.key,t),r.Ru.containsKey(o.key)||Fb(r,o.key)):Xt(19791,{wu:o})}function Z2(r,t){const n=t.key,o=n.path.canonicalString();r.du.get(n)||r.Eu.has(o)||(Vt(Mg,"New document in limbo: "+n),r.Eu.add(o),Og(r))}function Og(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new Zt(Je.fromString(t)),o=r.fu.next();r.Au.set(o,new L2(n)),r.du=r.du.insert(n,o),Ob(r.remoteStore,new oa(Is(id(n.path)),o,"TargetPurposeLimboResolution",ed.ce))}}async function th(r,t,n){const o=fe(r),l=[],h=[],p=[];o.Tu.isEmpty()||(o.Tu.forEach(((v,y)=>{p.push(o.pu(y,t,n).then((E=>{if((E||n)&&o.isPrimaryClient){const x=E?!E.fromCache:n?.targetChanges.get(y.targetId)?.current;o.sharedClientState.updateQueryState(y.targetId,x?"current":"not-current")}if(E){l.push(E);const x=yg.As(y.targetId,E);h.push(x)}})))})),await Promise.all(p),o.Pu.H_(l),await(async function(y,E){const x=fe(y);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(P=>gt.forEach(E,(M=>gt.forEach(M.Es,(q=>x.persistence.referenceDelegate.addReference(P,M.targetId,q))).next((()=>gt.forEach(M.ds,(q=>x.persistence.referenceDelegate.removeReference(P,M.targetId,q)))))))))}catch(P){if(!vu(P))throw P;Vt(vg,"Failed to update sequence numbers: "+P)}for(const P of E){const M=P.targetId;if(!P.fromCache){const q=x.Ms.get(M),W=q.snapshotVersion,et=q.withLastLimboFreeSnapshotVersion(W);x.Ms=x.Ms.insert(M,et)}}})(o.localStore,h))}async function W2(r,t){const n=fe(r);if(!n.currentUser.isEqual(t)){Vt(Mg,"User change. New user:",t.toKey());const o=await Cb(n.localStore,t);n.currentUser=t,(function(h,p){h.mu.forEach((v=>{v.forEach((y=>{y.reject(new Mt(ft.CANCELLED,p))}))})),h.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),await th(n,o.Ls)}}function Y2(r,t){const n=fe(r),o=n.Au.get(t);if(o&&o.hu)return Me().add(o.key);{let l=Me();const h=n.Iu.get(t);if(!h)return l;for(const p of h){const v=n.Tu.get(p);l=l.unionWith(v.view.nu)}return l}}function Gb(r){const t=fe(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y2.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=q2.bind(null,t),t.Pu.H_=M2.bind(null,t.eventManager),t.Pu.yu=O2.bind(null,t.eventManager),t}function Q2(r){const t=fe(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=F2.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=G2.bind(null,t),t}class Bf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=cd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return JC(this.persistence,new KC,t.initialUser,this.serializer)}Cu(t){return new Ib(_g.mi,this.serializer)}Du(t){return new o2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bf.provider={build:()=>new Bf};class K2 extends Bf{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Ve(this.persistence.referenceDelegate instanceof Uf,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new LC(o,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?nr.withCacheSize(this.cacheSizeBytes):nr.DEFAULT;return new Ib((o=>Uf.mi(o,n)),this.serializer)}}class Vp{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>cT(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=W2.bind(null,this.syncEngine),await I2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new P2})()}createDatastore(t){const n=cd(t.databaseInfo.databaseId),o=(function(h){return new h2(h)})(t.databaseInfo);return(function(h,p,v,y){return new p2(h,p,v,y)})(t.authCredentials,t.appCheckCredentials,o,n)}createRemoteStore(t){return(function(o,l,h,p,v){return new _2(o,l,h,p,v)})(this.localStore,this.datastore,t.asyncQueue,(n=>cT(this.syncEngine,n,0)),(function(){return rT.v()?new rT:new a2})())}createSyncEngine(t,n){return(function(l,h,p,v,y,E,x){const P=new k2(l,h,p,v,y,E);return x&&(P.gu=!0),P})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const o=fe(n);Vt(sl,"RemoteStore shutting down."),o.Ea.add(5),await Jc(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Vp.provider={build:()=>new Vp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):lo("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Mt(ft.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(l,h){const p=fe(l),v={documents:h.map((P=>zf(p.serializer,P)))},y=await p.Ho("BatchGetDocuments",p.serializer.databaseId,Je.emptyPath(),v,h.length),E=new Map;y.forEach((P=>{const M=yC(p.serializer,P);E.set(M.key.toString(),M)}));const x=[];return h.forEach((P=>{const M=E.get(P.toString());Ve(!!M,55234,{key:P}),x.push(M)})),x})(this.datastore,t);return n.forEach((o=>this.recordVersion(o))),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(t.toString())}delete(t){this.write(new ld(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((n=>{t.delete(n.key.toString())})),t.forEach(((n,o)=>{const l=Zt.fromPath(o);this.mutations.push(new mb(l,this.precondition(l)))})),await(async function(o,l){const h=fe(o),p={writes:l.map((v=>wb(h.serializer,v)))};await h.Go("Commit",h.serializer.databaseId,Je.emptyPath(),p)})(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Xt(50498,{Gu:t.constructor.name});n=re.min()}const o=this.readVersions.get(t.key.toString());if(o){if(!n.isEqual(o))throw new Mt(ft.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(re.min())?Oi.exists(!1):Oi.updateTime(n):Oi.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(re.min()))throw new Mt(ft.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Oi.updateTime(n)}return Oi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(t,n,o,l,h){this.asyncQueue=t,this.datastore=n,this.options=o,this.updateFunction=l,this.deferred=h,this.zu=o.maxAttempts,this.M_=new Tg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const t=new X2(this.datastore),n=this.Hu(t);n&&n.then((o=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(o)})).catch((l=>{this.Yu(l)}))))})).catch((o=>{this.Yu(o)}))}))}Hu(t){try{const n=this.updateFunction(t);return!Kc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(t)}Zu(t){if(t?.name==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!pb(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="FirestoreClient";class J2{constructor(t,n,o,l,h){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=l,this.user=Mi.UNAUTHENTICATED,this.clientId=og.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(o,(async p=>{Vt(ya,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(o,(p=>(Vt(ya,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const o=xg(n,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}async function fp(r,t){r.asyncQueue.verifyOperationInProgress(),Vt(ya,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let o=n.initialUser;r.setCredentialChangeListener((async l=>{o.isEqual(l)||(await Cb(t.localStore,l),o=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function fT(r,t){r.asyncQueue.verifyOperationInProgress();const n=await tP(r);Vt(ya,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((o=>oT(t.remoteStore,o))),r.setAppCheckTokenChangeListener(((o,l)=>oT(t.remoteStore,l))),r._onlineComponents=t}async function tP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Vt(ya,"Using user provided OfflineComponentProvider");try{await fp(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===ft.FAILED_PRECONDITION||l.code===ft.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;ru("Error using user provided cache. Falling back to memory cache: "+n),await fp(r,new Bf)}}else Vt(ya,"Using default OfflineComponentProvider"),await fp(r,new K2(void 0));return r._offlineComponents}async function Ng(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Vt(ya,"Using user provided OnlineComponentProvider"),await fT(r,r._uninitializedComponentsProvider._online)):(Vt(ya,"Using default OnlineComponentProvider"),await fT(r,new Vp))),r._onlineComponents}function eP(r){return Ng(r).then((t=>t.syncEngine))}function nP(r){return Ng(r).then((t=>t.datastore))}async function Hf(r){const t=await Ng(r),n=t.eventManager;return n.onListen=V2.bind(null,t.syncEngine),n.onUnlisten=j2.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=z2.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=B2.bind(null,t.syncEngine),n}function iP(r,t,n={}){const o=new Rs;return r.asyncQueue.enqueueAndForget((async()=>(function(h,p,v,y,E){const x=new Dg({next:M=>{x.Nu(),p.enqueueAndForget((()=>Ig(h,P)));const q=M.docs.has(v);!q&&M.fromCache?E.reject(new Mt(ft.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&M.fromCache&&y&&y.source==="server"?E.reject(new Mt(ft.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(M)},error:M=>E.reject(M)}),P=new Pg(id(v.path),x,{includeMetadataChanges:!0,qa:!0});return Rg(h,P)})(await Hf(r),r.asyncQueue,t,n,o))),o.promise}function rP(r,t,n={}){const o=new Rs;return r.asyncQueue.enqueueAndForget((async()=>(function(h,p,v,y,E){const x=new Dg({next:M=>{x.Nu(),p.enqueueAndForget((()=>Ig(h,P))),M.fromCache&&y.source==="server"?E.reject(new Mt(ft.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(M)},error:M=>E.reject(M)}),P=new Pg(v,x,{includeMetadataChanges:!0,qa:!0});return Rg(h,P)})(await Hf(r),r.asyncQueue,t,n,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="firestore.googleapis.com",mT=!0;class pT{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Mt(ft.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Wb,this.ssl=mT}else this.host=t.host,this.ssl=t.ssl??mT;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Rb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<DC)throw new Mt(ft.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}_I("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zb(t.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Mt(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Mt(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Mt(ft.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(o,l){return o.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class dd{constructor(t,n,o,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=o,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Mt(ft.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Mt(ft.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pT(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new aI;switch(o.type){case"firstParty":return new hI(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Mt(ft.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=dT.get(n);o&&(Vt("ComponentProvider","Removing Datastore"),dT.delete(n),o.terminate())})(this),Promise.resolve()}}function sP(r,t,n,o={}){r=rr(r,dd);const l=du(t),h=r._getSettings(),p={...h,emulatorOptions:r._getEmulatorOptions()},v=`${t}:${n}`;l&&(UT(`https://${v}`),jT("Firestore",!0)),h.host!==Wb&&h.host!==v&&ru("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...h,host:v,ssl:l,emulatorOptions:o};if(!tl(y,p)&&(r._setSettings(y),o.mockUserToken)){let E,x;if(typeof o.mockUserToken=="string")E=o.mockUserToken,x=Mi.MOCK_USER;else{E=yS(o.mockUserToken,r._app?.options.projectId);const P=o.mockUserToken.sub||o.mockUserToken.user_id;if(!P)throw new Mt(ft.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Mi(P)}r._authCredentials=new lI(new kE(E,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(t,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=t}withConverter(t){return new mo(this.firestore,t,this._query)}}class En{constructor(t,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ha(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new En(this.firestore,t,this._key)}toJSON(){return{type:En._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,o){if(Qc(n,En._jsonSchema))return new En(t,o||null,new Zt(Je.fromString(n.referencePath)))}}En._jsonSchemaVersion="firestore/documentReference/1.0",En._jsonSchema={type:Bn("string",En._jsonSchemaVersion),referencePath:Bn("string")};class ha extends mo{constructor(t,n,o){super(t,n,id(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new En(this.firestore,null,new Zt(t))}withConverter(t){return new ha(this.firestore,t,this._path)}}function sr(r,t,...n){if(r=Dn(r),VE("collection","path",t),r instanceof dd){const o=Je.fromString(t,...n);return I0(o),new ha(r,null,o)}{if(!(r instanceof En||r instanceof ha))throw new Mt(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(Je.fromString(t,...n));return I0(o),new ha(r.firestore,null,o)}}function Jt(r,t,...n){if(r=Dn(r),arguments.length===1&&(t=og.newId()),VE("doc","path",t),r instanceof dd){const o=Je.fromString(t,...n);return R0(o),new En(r,null,new Zt(o))}{if(!(r instanceof En||r instanceof ha))throw new Mt(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(Je.fromString(t,...n));return R0(o),new En(r.firestore,r instanceof ha?r.converter:null,new Zt(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="AsyncQueue";class _T{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Tg(this,"async_queue_retry"),this._c=()=>{const o=hp();o&&Vt(gT,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=t;const n=hp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=hp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Rs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!vu(t))throw t;Vt(gT,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((o=>{throw this.nc=o,this.rc=!1,lo("INTERNAL UNHANDLED ERROR: ",yT(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=n,n}enqueueAfterDelay(t,n,o){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=Ag.createAndSchedule(this,t,n,o,(h=>this.hc(h)));return this.tc.push(l),l}uc(){this.nc&&Xt(47125,{Pc:yT(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function yT(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(r){return(function(n,o){if(typeof n!="object"||n===null)return!1;const l=n;for(const h of o)if(h in l&&typeof l[h]=="function")return!0;return!1})(r,["next","error","complete"])}class co extends dd{constructor(t,n,o,l){super(t,n,o,l),this.type="firestore",this._queue=new _T,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new _T(t),this._firestoreClient=void 0,await t}}}function oP(r,t){const n=typeof r=="object"?r:FT(),o=typeof r=="string"?r:Of,l=Yp(n,"firestore").getImmediate({identifier:o});if(!l._initialized){const h=gS("firestore");h&&sP(l,...h)}return l}function eh(r){if(r._terminated)throw new Mt(ft.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||aP(r),r._firestoreClient}function aP(r){const t=r._freezeSettings(),n=(function(l,h,p,v){return new CI(l,h,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Zb(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new J2(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const h=l?._online.build();return{_offline:l?._offline.build(h),_online:h}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(t){this._byteString=t}static fromBase64String(t){try{return new br(vi.fromBase64String(t))}catch(n){throw new Mt(ft.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new br(vi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:br._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Qc(t,br._jsonSchema))return br.fromBase64String(t.bytes)}}br._jsonSchemaVersion="firestore/bytes/1.0",br._jsonSchema={type:Bn("string",br._jsonSchemaVersion),bytes:Bn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Mt(ft.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Mt(ft.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Mt(ft.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Pe(this._lat,t._lat)||Pe(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cs._jsonSchemaVersion}}static fromJSON(t){if(Qc(t,Cs._jsonSchema))return new Cs(t.latitude,t.longitude)}}Cs._jsonSchemaVersion="firestore/geoPoint/1.0",Cs._jsonSchema={type:Bn("string",Cs._jsonSchemaVersion),latitude:Bn("number"),longitude:Bn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(o,l){if(o.length!==l.length)return!1;for(let h=0;h<o.length;++h)if(o[h]!==l[h])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Ps._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Qc(t,Ps._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Ps(t.vectorValues);throw new Mt(ft.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ps._jsonSchemaVersion="firestore/vectorValue/1.0",Ps._jsonSchema={type:Bn("string",Ps._jsonSchemaVersion),vectorValues:Bn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=/^__.*__$/;class uP{constructor(t,n,o){this.data=t,this.fieldMask=n,this.fieldTransforms=o}toMutation(t,n){return this.fieldMask!==null?new ba(t,this.data,this.fieldMask,n,this.fieldTransforms):new Xc(t,this.data,n,this.fieldTransforms)}}class Yb{constructor(t,n,o){this.data=t,this.fieldMask=n,this.fieldTransforms=o}toMutation(t,n){return new ba(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Qb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xt(40011,{Ac:r})}}class Lg{constructor(t,n,o,l,h,p){this.settings=t,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=l,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Lg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),o=this.Vc({path:n,fc:!1});return o.gc(t),o}yc(t){const n=this.path?.child(t),o=this.Vc({path:n,fc:!1});return o.Rc(),o}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return qf(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Qb(this.Ac)&&lP.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class cP{constructor(t,n,o){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=o||cd(t)}Cc(t,n,o,l=!1){return new Lg({Ac:t,methodName:n,Dc:o,path:yi.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pd(r){const t=r._freezeSettings(),n=cd(r._databaseId);return new cP(r._databaseId,!!t.ignoreUndefinedProperties,n)}function Kb(r,t,n,o,l,h={}){const p=r.Cc(h.merge||h.mergeFields?2:0,t,n,l);Vg("Data must be an object, but it was:",p,o);const v=Jb(o,p);let y,E;if(h.merge)y=new wr(p.fieldMask),E=p.fieldTransforms;else if(h.mergeFields){const x=[];for(const P of h.mergeFields){const M=zp(t,P,n);if(!p.contains(M))throw new Mt(ft.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);ew(x,M)||x.push(M)}y=new wr(x),E=p.fieldTransforms.filter((P=>y.covers(P.field)))}else y=null,E=p.fieldTransforms;return new uP(new Fi(v),y,E)}class gd extends md{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof gd}}class kg extends md{_toFieldTransform(t){return new eC(t.path,new Uc)}isEqual(t){return t instanceof kg}}function Xb(r,t,n,o){const l=r.Cc(1,t,n);Vg("Data must be an object, but it was:",l,o);const h=[],p=Fi.empty();Ea(o,((y,E)=>{const x=zg(t,y,n);E=Dn(E);const P=l.yc(x);if(E instanceof gd)h.push(x);else{const M=ih(E,P);M!=null&&(h.push(x),p.set(x,M))}}));const v=new wr(h);return new Yb(p,v,l.fieldTransforms)}function $b(r,t,n,o,l,h){const p=r.Cc(1,t,n),v=[zp(t,o,n)],y=[l];if(h.length%2!=0)throw new Mt(ft.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<h.length;M+=2)v.push(zp(t,h[M])),y.push(h[M+1]);const E=[],x=Fi.empty();for(let M=v.length-1;M>=0;--M)if(!ew(E,v[M])){const q=v[M];let W=y[M];W=Dn(W);const et=p.yc(q);if(W instanceof gd)E.push(q);else{const lt=ih(W,et);lt!=null&&(E.push(q),x.set(q,lt))}}const P=new wr(E);return new Yb(x,P,p.fieldTransforms)}function hP(r,t,n,o=!1){return ih(n,r.Cc(o?4:3,t))}function ih(r,t){if(tw(r=Dn(r)))return Vg("Unsupported field value:",t,r),Jb(r,t);if(r instanceof md)return(function(o,l){if(!Qb(l.Ac))throw l.Sc(`${o._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${o._methodName}() is not currently supported inside arrays`);const h=o._toFieldTransform(l);h&&l.fieldTransforms.push(h)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(o,l){const h=[];let p=0;for(const v of o){let y=ih(v,l.wc(p));y==null&&(y={nullValue:"NULL_VALUE"}),h.push(y),p++}return{arrayValue:{values:h}}})(r,t)}return(function(o,l){if((o=Dn(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return $I(l.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const h=mn.fromDate(o);return{timestampValue:Vf(l.serializer,h)}}if(o instanceof mn){const h=new mn(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Vf(l.serializer,h)}}if(o instanceof Cs)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof br)return{bytesValue:vb(l.serializer,o._byteString)};if(o instanceof En){const h=l.databaseId,p=o.firestore._databaseId;if(!p.isEqual(h))throw l.Sc(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:pg(o.firestore._databaseId||l.databaseId,o._key.path)}}if(o instanceof Ps)return(function(p,v){return{mapValue:{fields:{[ZE]:{stringValue:WE},[Df]:{arrayValue:{values:p.toArray().map((E=>{if(typeof E!="number")throw v.Sc("VectorValues must only contain numeric values.");return fg(v.serializer,E)}))}}}}}})(o,l);throw l.Sc(`Unsupported field value: ${td(o)}`)})(r,t)}function Jb(r,t){const n={};return jE(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ea(r,((o,l)=>{const h=ih(l,t.mc(o));h!=null&&(n[o]=h)})),{mapValue:{fields:n}}}function tw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof mn||r instanceof Cs||r instanceof br||r instanceof En||r instanceof md||r instanceof Ps)}function Vg(r,t,n){if(!tw(n)||!zE(n)){const o=td(n);throw o==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+o)}}function zp(r,t,n){if((t=Dn(t))instanceof nh)return t._internalPath;if(typeof t=="string")return zg(r,t);throw qf("Field path arguments must be of type string or ",r,!1,void 0,n)}const fP=new RegExp("[~\\*/\\[\\]]");function zg(r,t,n){if(t.search(fP)>=0)throw qf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new nh(...t.split("."))._internalPath}catch{throw qf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function qf(r,t,n,o,l){const h=o&&!o.isEmpty(),p=l!==void 0;let v=`Function ${t}() called with invalid data`;n&&(v+=" (via `toFirestore()`)"),v+=". ";let y="";return(h||p)&&(y+=" (found",h&&(y+=` in field ${o}`),p&&(y+=` in document ${l}`),y+=")"),new Mt(ft.INVALID_ARGUMENT,v+r+y)}function ew(r,t){return r.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(t,n,o,l,h){this._firestore=t,this._userDataWriter=n,this._key=o,this._document=l,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new dP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(_d("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dP extends Ff{data(){return super.data()}}function _d(r,t){return typeof t=="string"?zg(r,t):t instanceof nh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Mt(ft.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ug{}class jg extends Ug{}function ul(r,t,...n){let o=[];t instanceof Ug&&o.push(t),o=o.concat(n),(function(h){const p=h.filter((y=>y instanceof Bg)).length,v=h.filter((y=>y instanceof yd)).length;if(p>1||p>0&&v>0)throw new Mt(ft.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const l of o)r=l._apply(r);return r}class yd extends jg{constructor(t,n,o){super(),this._field=t,this._op=n,this._value=o,this.type="where"}static _create(t,n,o){return new yd(t,n,o)}_apply(t){const n=this._parse(t);return sw(t._query,n),new mo(t.firestore,t.converter,Cp(t._query,n))}_parse(t){const n=pd(t.firestore);return(function(h,p,v,y,E,x,P){let M;if(E.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new Mt(ft.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){ET(P,x);const W=[];for(const et of P)W.push(TT(y,h,et));M={arrayValue:{values:W}}}else M=TT(y,h,P)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||ET(P,x),M=hP(v,p,P,x==="in"||x==="not-in");return jn.create(E,x,M)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function cu(r,t,n){const o=t,l=_d("where",r);return yd._create(l,o,n)}class Bg extends Ug{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Bg(t,n)}_parse(t){const n=this._queryConstraints.map((o=>o._parse(t))).filter((o=>o.getFilters().length>0));return n.length===1?n[0]:os.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(l,h){let p=l;const v=h.getFlattenedFilters();for(const y of v)sw(p,y),p=Cp(p,y)})(t._query,n),new mo(t.firestore,t.converter,Cp(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hg extends jg{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Hg(t,n)}_apply(t){const n=(function(l,h,p){if(l.startAt!==null)throw new Mt(ft.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Mt(ft.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zc(h,p)})(t._query,this._field,this._direction);return new mo(t.firestore,t.converter,(function(l,h){const p=l.explicitOrderBy.concat([h]);return new Tu(l.path,l.collectionGroup,p,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(t._query,n))}}function iw(r,t="asc"){const n=t,o=_d("orderBy",r);return Hg._create(o,n)}class qg extends jg{constructor(t,n,o){super(),this.type=t,this._limit=n,this._limitType=o}static _create(t,n,o){return new qg(t,n,o)}_apply(t){return new mo(t.firestore,t.converter,Lf(t._query,this._limit,this._limitType))}}function rw(r){return yI("limit",r),qg._create("limit",r,"F")}function TT(r,t,n){if(typeof(n=Dn(n))=="string"){if(n==="")throw new Mt(ft.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eb(t)&&n.indexOf("/")!==-1)throw new Mt(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=t.path.child(Je.fromString(n));if(!Zt.isDocumentKey(o))throw new Mt(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return k0(r,new Zt(o))}if(n instanceof En)return k0(r,n._key);throw new Mt(ft.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${td(n)}.`)}function ET(r,t){if(!Array.isArray(r)||r.length===0)throw new Mt(ft.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function sw(r,t){const n=(function(l,h){for(const p of l)for(const v of p.getFlattenedFilters())if(h.indexOf(v.op)>=0)return v.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new Mt(ft.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Mt(ft.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class ow{convertValue(t,n="none"){switch(ga(t)){case 0:return null;case 1:return t.booleanValue;case 2:return On(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(pa(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Xt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const o={};return Ea(t,((l,h)=>{o[l]=this.convertValue(h,n)})),o}convertVectorValue(t){const n=t.fields?.[Df].arrayValue?.values?.map((o=>On(o.doubleValue)));return new Ps(n)}convertGeoPoint(t){return new Cs(On(t.latitude),On(t.longitude))}convertArray(t,n){return(t.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const o=nd(t);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Lc(t));default:return null}}convertTimestamp(t){const n=ma(t);return new mn(n.seconds,n.nanos)}convertDocumentKey(t,n){const o=Je.fromString(t);Ve(xb(o),9688,{name:t});const l=new kc(o.get(1),o.get(3)),h=new Zt(o.popFirst(5));return l.isEqual(n)||lo(`Document ${h} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(r,t,n){let o;return o=r?n&&(n.merge||n.mergeFields)?r.toFirestore(t,n):r.toFirestore(t):t,o}class mP extends ow{constructor(t){super(),this.firestore=t}convertBytes(t){return new br(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new En(this.firestore,null,n)}}class Xl{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class fa extends Ff{constructor(t,n,o,l,h,p){super(t,n,o,l,p),this._firestore=t,this._firestoreImpl=t,this.metadata=h}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const o=this._document.data.field(_d("DocumentSnapshot.get",t));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Mt(ft.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=fa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fa._jsonSchemaVersion="firestore/documentSnapshot/1.0",fa._jsonSchema={type:Bn("string",fa._jsonSchemaVersion),bundleSource:Bn("string","DocumentSnapshot"),bundleName:Bn("string"),bundle:Bn("string")};class wf extends fa{data(t={}){return super.data(t)}}class Ja{constructor(t,n,o,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new Xl(l.hasPendingWrites,l.fromCache),this.query=o}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((o=>{t.call(n,new wf(this._firestore,this._userDataWriter,o.key,o,new Xl(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Mt(ft.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,h){if(l._snapshot.oldDocs.isEmpty()){let p=0;return l._snapshot.docChanges.map((v=>{const y=new wf(l._firestore,l._userDataWriter,v.doc.key,v.doc,new Xl(l._snapshot.mutatedKeys.has(v.doc.key),l._snapshot.fromCache),l.query.converter);return v.doc,{type:"added",doc:y,oldIndex:-1,newIndex:p++}}))}{let p=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((v=>h||v.type!==3)).map((v=>{const y=new wf(l._firestore,l._userDataWriter,v.doc.key,v.doc,new Xl(l._snapshot.mutatedKeys.has(v.doc.key),l._snapshot.fromCache),l.query.converter);let E=-1,x=-1;return v.type!==0&&(E=p.indexOf(v.doc.key),p=p.delete(v.doc.key)),v.type!==1&&(p=p.add(v.doc),x=p.indexOf(v.doc.key)),{type:pP(v.type),doc:y,oldIndex:E,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Mt(ft.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ja._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=og.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],o=[],l=[];return this.docs.forEach((h=>{h._document!==null&&(n.push(h._document),o.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),l.push(h.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function pP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(r){r=rr(r,En);const t=rr(r.firestore,co);return iP(eh(t),r._key).then((n=>lw(t,r,n)))}Ja._jsonSchemaVersion="firestore/querySnapshot/1.0",Ja._jsonSchema={type:Bn("string",Ja._jsonSchemaVersion),bundleSource:Bn("string","QuerySnapshot"),bundleName:Bn("string"),bundle:Bn("string")};class vd extends ow{constructor(t){super(),this.firestore=t}convertBytes(t){return new br(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new En(this.firestore,null,n)}}function rh(r){r=rr(r,mo);const t=rr(r.firestore,co),n=eh(t),o=new vd(t);return nw(r._query),rP(n,r._query).then((l=>new Ja(t,o,r,l)))}function ol(r,t,n){r=rr(r,En);const o=rr(r.firestore,co),l=aw(r.converter,t,n);return Fg(o,[Kb(pd(o),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,Oi.none())])}function hu(r,t,n,...o){r=rr(r,En);const l=rr(r.firestore,co),h=pd(l);let p;return p=typeof(t=Dn(t))=="string"||t instanceof nh?$b(h,"updateDoc",r._key,t,n,o):Xb(h,"updateDoc",r._key,t),Fg(l,[p.toMutation(r._key,Oi.exists(!0))])}function nu(r){return Fg(rr(r.firestore,co),[new ld(r._key,Oi.none())])}function Os(r,...t){r=Dn(r);let n={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||vT(t[o])||(n=t[o++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(vT(t[o])){const y=t[o];t[o]=y.next?.bind(y),t[o+1]=y.error?.bind(y),t[o+2]=y.complete?.bind(y)}let h,p,v;if(r instanceof En)p=rr(r.firestore,co),v=id(r._key.path),h={next:y=>{t[o]&&t[o](lw(p,r,y))},error:t[o+1],complete:t[o+2]};else{const y=rr(r,mo);p=rr(y.firestore,co),v=y._query;const E=new vd(p);h={next:x=>{t[o]&&t[o](new Ja(p,E,y,x))},error:t[o+1],complete:t[o+2]},nw(r._query)}return(function(E,x,P,M){const q=new Dg(M),W=new Pg(x,q,P);return E.asyncQueue.enqueueAndForget((async()=>Rg(await Hf(E),W))),()=>{q.Nu(),E.asyncQueue.enqueueAndForget((async()=>Ig(await Hf(E),W)))}})(eh(p),v,l,h)}function Fg(r,t){return(function(o,l){const h=new Rs;return o.asyncQueue.enqueueAndForget((async()=>H2(await eP(o),l,h))),h.promise})(eh(r),t)}function lw(r,t,n){const o=n.docs.get(t._key),l=new vd(r);return new fa(r,l,t._key,o,new Xl(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP={maxAttempts:5};function yc(r,t){if((r=Dn(r)).firestore!==t)throw new Mt(ft.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=pd(t)}get(t){const n=yc(t,this._firestore),o=new mP(this._firestore);return this._transaction.lookup([n._key]).then((l=>{if(!l||l.length!==1)return Xt(24041);const h=l[0];if(h.isFoundDocument())return new Ff(this._firestore,o,h.key,h,n.converter);if(h.isNoDocument())return new Ff(this._firestore,o,n._key,null,n.converter);throw Xt(18433,{doc:h})}))}set(t,n,o){const l=yc(t,this._firestore),h=aw(l.converter,n,o),p=Kb(this._dataReader,"Transaction.set",l._key,h,l.converter!==null,o);return this._transaction.set(l._key,p),this}update(t,n,o,...l){const h=yc(t,this._firestore);let p;return p=typeof(n=Dn(n))=="string"||n instanceof nh?$b(this._dataReader,"Transaction.update",h._key,n,o,l):Xb(this._dataReader,"Transaction.update",h._key,n),this._transaction.update(h._key,p),this}delete(t){const n=yc(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP extends _P{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=yc(t,this._firestore),o=new vd(this._firestore);return super.get(t).then((l=>new fa(this._firestore,o,n._key,l._document,new Xl(!1,!1),n.converter)))}}function Hi(r,t,n){r=rr(r,co);const o={...gP,...n};return(function(h){if(h.maxAttempts<1)throw new Mt(ft.INVALID_ARGUMENT,"Max attempts must be at least 1")})(o),(function(h,p,v){const y=new Rs;return h.asyncQueue.enqueueAndForget((async()=>{const E=await nP(h);new $2(h.asyncQueue,E,v,p,y).ju()})),y.promise})(eh(r),(l=>t(new yP(r,l))),o)}function Gi(){return new kg("serverTimestamp")}(function(t,n=!0){(function(l){_u=l})(mu),iu(new el("firestore",((o,{instanceIdentifier:l,options:h})=>{const p=o.getProvider("app").getImmediate(),v=new co(new uI(o.getProvider("auth-internal")),new fI(p,o.getProvider("app-check-internal")),(function(E,x){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new Mt(ft.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kc(E.options.projectId,x)})(p,l),p);return h={useFetchStreams:n,...h},v._setSettings(h),v}),"PUBLIC").setMultipleInstances(!0)),ua(w0,S0,t),ua(w0,S0,"esm2020")})();const vP={VITE_FIREBASE_API_KEY:"AIzaSyDdhwKgyCUPZoa-jxv4t_NnNpQTt_FLTjw",VITE_FIREBASE_APP_ID:"1:81737066531:web:c2d2470cc856443defe996",VITE_FIREBASE_AUTH_DOMAIN:"birdersplace.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"8173706653",VITE_FIREBASE_PROJECT_ID:"birdersplace",VITE_FIREBASE_STORAGE_BUCKET:"birdersplace.firebasestorage.app"},Zl=vP||{},uw={apiKey:Zl.VITE_FIREBASE_API_KEY,authDomain:Zl.VITE_FIREBASE_AUTH_DOMAIN,projectId:Zl.VITE_FIREBASE_PROJECT_ID,appId:Zl.VITE_FIREBASE_APP_ID,messagingSenderId:Zl.VITE_FIREBASE_MESSAGING_SENDER_ID,storageBucket:Zl.VITE_FIREBASE_STORAGE_BUCKET};function TP(r){const t=Object.entries(r).filter(([n,o])=>!o).map(([n])=>n);if(t.length)throw new Error(`Firebase config incompleta. Falta(n): ${t.join(", ")}. Revisa .env.local (prefijo VITE_) y reinicia el dev server.`)}TP(uw);const cw=Jv().length?Jv()[0]:qT(uw),Tn=sI(cw),Dt=oP(cw),bT=new no;function EP({children:r}){const[t,n]=G.useState(null),[o,l]=G.useState(!0),[h,p]=G.useState(""),[v,y]=G.useState(""),[E,x]=G.useState(""),[P,M]=G.useState(!1),[q,W]=G.useState(!1);if(G.useEffect(()=>{const Tt=gu(Tn,ht=>{n(ht||null),l(!1)});return()=>Tt()},[]),o)return A.jsx("div",{style:{padding:16,textAlign:"center"},children:"Loading..."});async function et(){p("");try{await dR(Tn,bT)}catch(Tt){const ht=Tt?.code||"unknown";if(console.error("Auth error:",ht,Tt?.message),ht==="auth/popup-blocked"||ht==="auth/popup-closed-by-user"){await vR(Tn,bT);return}p(ht)}}async function lt(){if(!v||!E){p("Please complete all fields");return}p(""),W(!0);try{P?await Fx(Tn,v,E):await Gx(Tn,v,E)}catch(Tt){const ht=Tt?.code||"unknown";console.error("Email auth error:",ht,Tt?.message),p({"auth/email-already-in-use":"This email is already registered","auth/weak-password":"Password must be at least 6 characters","auth/invalid-email":"Invalid email","auth/user-not-found":"No account exists with this email","auth/wrong-password":"Incorrect password","auth/too-many-requests":"Too many failed attempts. Try again later"}[ht]||ht)}finally{W(!1)}}return t?A.jsxs("div",{children:[A.jsxs("div",{style:{position:"fixed",right:12,top:12,display:"flex",gap:8,alignItems:"center",zIndex:1e3},children:[A.jsx("span",{style:{color:"#fff",background:"#1f2937",padding:"4px 8px",borderRadius:8},children:t.displayName||t.email}),A.jsx("button",{onClick:()=>gE(Tn),style:{padding:"6px 10px",borderRadius:8,border:"none",background:"#374151",color:"#fff",cursor:"pointer"},children:"Sign Out"})]}),r]}):A.jsxs("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:[A.jsx("div",{style:{position:"fixed",left:12,top:12,zIndex:1e3},children:A.jsx("button",{onClick:()=>window.location.href="?view=menu",style:{padding:"6px 10px",borderRadius:8,border:"none",background:"#374151",color:"#fff",cursor:"pointer"},children:"Back"})}),A.jsxs("div",{style:{background:"#111827",padding:24,borderRadius:12,color:"#fff",width:400,textAlign:"center"},children:[A.jsx("h2",{style:{marginTop:0},children:"Birders Place"}),A.jsx("p",{style:{opacity:.85,marginBottom:20},children:"Sign in to play"}),A.jsxs("div",{style:{marginBottom:20},children:[A.jsx("input",{type:"email",placeholder:"Email",value:v,onChange:Tt=>y(Tt.target.value),style:{width:"100%",padding:"0.6rem",marginBottom:10,borderRadius:8,border:"1px solid #374151",background:"#0b1220",color:"#fff",fontSize:14}}),A.jsx("input",{type:"password",placeholder:"Password",value:E,onChange:Tt=>x(Tt.target.value),style:{width:"100%",padding:"0.6rem",marginBottom:10,borderRadius:8,border:"1px solid #374151",background:"#0b1220",color:"#fff",fontSize:14}}),A.jsx("button",{onClick:lt,disabled:q,style:{width:"100%",padding:"0.6rem",marginBottom:10,background:q?"#6b7280":"#10b981",color:"#fff",border:"none",borderRadius:8,cursor:q?"not-allowed":"pointer",fontSize:14,fontWeight:600},children:q?"Loading...":P?"Sign Up":"Sign In"}),A.jsx("button",{onClick:()=>M(!P),style:{background:"transparent",color:"#9ca3af",border:"none",cursor:"pointer",fontSize:12,textDecoration:"underline"},children:P?"Already have an account? Sign In":"Don't have an account? Sign Up"})]}),A.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"20px 0",color:"#6b7280",fontSize:12},children:[A.jsx("div",{style:{flex:1,height:1,background:"#374151"}}),A.jsx("span",{style:{margin:"0 10px"},children:"o"}),A.jsx("div",{style:{flex:1,height:1,background:"#374151"}})]}),A.jsx("button",{onClick:et,style:{width:"100%",padding:"0.6rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:600},children:"Continue with Google"}),h&&A.jsx("div",{style:{marginTop:15,color:"#fca5a5",fontSize:12},children:h}),A.jsxs("div",{style:{marginTop:15,fontSize:11,opacity:.65},children:["Current domain: ",window.location.hostname]})]})]})}const bP=/^[A-Za-z0-9_\.\-]{3,20}$/;function wP({onDone:r}){const[t,n]=G.useState(null),[o,l]=G.useState(!0),[h,p]=G.useState(""),[v,y]=G.useState(!1),[E,x]=G.useState("");G.useEffect(()=>{const M=gu(Tn,async q=>{if(n(q||null),!q){l(!1);return}try{const W=Jt(Dt,"users",q.uid),et=await qi(W);et.exists()&&et.data()?.nickname?(l(!1),r?.()):l(!1)}catch(W){console.error("Error reading profile:",W),x("Could not check profile. Review Firestore rules."),l(!1)}});return()=>M()},[r]);async function P(){x("");const M=h.trim();if(!bP.test(M)){x("Nickname must be 3-20 characters (letters, numbers, _ . -)");return}y(!0);try{const q=M.toLowerCase(),W=Jt(Dt,"nicknames",q),et=Jt(Dt,"users",t.uid);await Hi(Dt,async lt=>{if((await lt.get(W)).exists())throw new Error("That nickname is already in use");lt.set(W,{uid:t.uid,createdAt:Gi()}),lt.set(et,{uid:t.uid,nickname:M,nickname_lc:q,displayName:t.displayName||null,photoURL:t.photoURL||null,createdAt:Gi(),updatedAt:Gi()},{merge:!0})}),r?.()}catch(q){x(q.message||"Could not save")}finally{y(!1)}}return o?A.jsx("div",{style:{padding:16,textAlign:"center",color:"#fff"},children:"Checking profile..."}):A.jsxs("div",{style:{background:"#111827",padding:24,borderRadius:12,color:"#fff",width:420,textAlign:"center"},children:[A.jsx("h2",{style:{marginTop:0},children:"Choose your nickname"}),A.jsx("p",{style:{opacity:.85,marginTop:6},children:"You will use it in multiplayer. You cannot change it ever."}),A.jsx("input",{value:h,onChange:M=>p(M.target.value),placeholder:"tu_nick",maxLength:20,style:{width:"100%",marginTop:10,padding:"0.6rem 0.8rem",borderRadius:8,border:"1px solid #374151",background:"#0b1220",color:"#fff",outline:"none"}}),A.jsx("button",{disabled:v,onClick:P,style:{marginTop:12,padding:"0.6rem 1rem",background:v?"#6b7280":"#10b981",color:"#fff",border:"none",borderRadius:8,cursor:v?"not-allowed":"pointer",fontWeight:600},children:"Save"}),E&&A.jsx("div",{style:{marginTop:10,color:"#fca5a5",fontSize:12},children:E})]})}function Qa(){const[r,t]=G.useState(null),[n,o]=G.useState("");return G.useEffect(()=>{const l=gu(Tn,async h=>{if(t(h||null),h)try{const p=Jt(Dt,"users",h.uid),v=await qi(p),y=v.exists()&&v.data()?.nickname||"";o(y)}catch{o("")}else o("")});return()=>l()},[]),r?A.jsxs("div",{style:{position:"fixed",right:12,top:12,display:"flex",gap:8,alignItems:"center",zIndex:1e3},children:[A.jsx("span",{style:{color:"#fff",background:"#1f2937",padding:"4px 8px",borderRadius:8},children:n||r.displayName||r.email}),A.jsx("button",{onClick:()=>gE(Tn),style:{padding:"6px 10px",borderRadius:8,border:"none",background:"#374151",color:"#fff",cursor:"pointer"},children:"Sign Out"})]}):null}async function SP(r){const t=Tn.currentUser;if(!t)throw new Error("No auth");console.log(" enqueueForDuel iniciado para usuario:",t.uid,"nickname:",r);const n=Jt(Dt,"duel_queue",t.uid);try{return await ol(n,{uid:t.uid,nickname:r||null,createdAt:Gi(),status:"waiting"}),console.log(" Usuario agregado a la cola individual"),{matchId:null,matched:!1}}catch(o){throw console.error(" Error agregando a la cola:",o),o}}async function AP(){const r=Tn.currentUser;if(!r)throw new Error("No auth");console.log(" Intentando matchmaking para usuario:",r.uid);try{const t=await Hi(Dt,async n=>{const o=ul(sr(Dt,"duel_queue"),cu("status","==","waiting")),h=(await rh(o)).docs.map(Tt=>({id:Tt.id,...Tt.data()})).filter(Tt=>Tt.uid!==r.uid).sort((Tt,ht)=>(Tt.createdAt?.seconds||0)-(ht.createdAt?.seconds||0));console.log(" Candidatos encontrados:",h.length);const p=h[0];if(!p)return console.log(" No hay candidatos disponibles"),null;console.log(" Candidato seleccionado:",p.uid);const v=p,y=Jt(Dt,"duel_queue",v.uid),E=await n.get(y);if(!E.exists()||E.data().status!=="waiting")return console.log(" Opponent no longer available"),null;const x=Jt(Dt,"duel_queue",r.uid),P=await n.get(x);if(!P.exists()||P.data().status!=="waiting")return console.log(" Ya no estamos en waiting"),null;const M=Jt(sr(Dt,"duel_matches")),q=M.id;console.log(" Creando match real en Firestore:",q);const W=Jt(Dt,"users",r.uid),et=await qi(W),lt=et.exists()?et.data().nickname:null;return n.set(M,{createdAt:Gi(),state:"playing",round:1,hostUid:r.uid,players:{[r.uid]:{hp:6e3,nickname:lt},[v.uid]:{hp:6e3,nickname:v.nickname||"Player"}},rounds:{},guesses:{},matchmaking:!0}),n.update(x,{status:"matched",matchId:q,opponentUid:v.uid,opponentNickname:v.nickname||null}),q});return t&&console.log(" Match creado exitosamente en Firestore:",t),t}catch(t){return console.log(" Error en matchmaking:",t),null}}async function xP(r,t,n){const o=Tn.currentUser;if(!o)throw new Error("No auth");console.log(" Joining match as opponent:",r);try{const l=Jt(Dt,"duel_queue",o.uid);return await hu(l,{status:"matched",matchId:r,opponentUid:t,opponentNickname:n}),console.log(" Oponente unido al match exitosamente"),!0}catch(l){return console.log(" Error joining match:",l),!1}}async function RP(){const r=Tn.currentUser;if(!r)return;const t=Jt(Dt,"duel_queue",r.uid);try{await hu(t,{lastSeen:Gi()})}catch(n){console.log("Error actualizando heartbeat:",n)}}function IP(r){const t=Tn.currentUser;if(!t)return()=>{};const n=ul(sr(Dt,"duel_queue"),cu("status","==","waiting"));return Os(n,o=>{const l=o.docs.map(p=>({id:p.id,...p.data()})),h=l.findIndex(p=>p.uid===t.uid);console.log(" Queue updated:",l.length,"players, my position:",h+1),r({waitingPlayers:l.length,myPosition:h>=0?h+1:-1,players:l})})}function CP(r){const t=Tn.currentUser;if(!t)return()=>{};const n=ul(sr(Dt,"duel_queue"),cu("opponentUid","==",t.uid),cu("status","==","matched"));return Os(n,async o=>{if(!o.empty){const l=o.docs[0].data();console.log(" Oponente fue emparejado con nosotros:",l);const h=Jt(Dt,"duel_queue",t.uid),p=await qi(h);if(!p.exists()||p.data().status!=="waiting"){console.log(" No estamos en waiting, ignorando match de oponente");return}await xP(l.matchId,l.uid,l.nickname),r({...l,matchId:l.matchId,opponentUid:l.uid,opponentNickname:l.nickname})}})}async function ws(){const r=Tn.currentUser;if(!r)return;const t=Jt(Dt,"duel_queue",r.uid);try{await nu(t),console.log(" Usuario removido de la cola")}catch(n){console.error("Error cancelando cola:",n)}}function PP(r){const t=Tn.currentUser;if(!t)return()=>{};const n=Jt(Dt,"duel_queue",t.uid);return Os(n,o=>r(o.exists()?o.data():null))}function MP(r,t){const n=Jt(Dt,"duel_matches",r);return Os(n,o=>{if(!o.exists()){t(null);return}const l=o.data();if(l.state==="matched"&&l.host){const h=new Date,p=l.players?.[l.host]?.lastActivity?.toDate();if(p&&h-p>9e4){console.log(" Match appears abandoned - host disconnected for too long"),t(null);return}}t({id:r,...l})})}async function OP(){try{const r=ul(sr(Dt,"duel_matches"),cu("state","==","playing")),t=await rh(r),n=new Date,o=3e5;for(const l of t.docs){const p=l.data().players||{};let v=!1;for(const[y,E]of Object.entries(p)){const x=E.lastActivity?.toDate();if(x&&n-x>o){v=!0;break}}v&&(await nu(l.ref),console.log(` Cleaned abandoned match: ${l.id}`))}}catch(r){console.error(" Error cleaning abandoned matches:",r)}}typeof window<"u"&&setInterval(OP,3e5);async function hw(r){const t=Tn.currentUser;if(!t)throw new Error("No auth");const n=Math.random().toString(36).slice(2,8).toUpperCase(),o=Jt(sr(Dt,"rooms"));await ol(o,{code:n,hostUid:t.uid,createdAt:Gi(),state:"lobby"});const l=Jt(Dt,"rooms",o.id,"players",t.uid);return await ol(l,{uid:t.uid,nickname:r||null,joinedAt:Gi()}),{roomId:o.id,code:n}}async function fw(r,t){const n=Tn.currentUser;if(!n)throw new Error("No auth");const o=ul(sr(Dt,"rooms"),cu("code","==",r),rw(1)),l=await rh(o);if(l.empty)throw new Error("Invalid code");const h=l.docs[0],p=Jt(Dt,"rooms",h.id,"players",n.uid);return await ol(p,{uid:n.uid,nickname:t||null,joinedAt:Gi()}),h.id}function dw(r,t){const n=Jt(Dt,"rooms",r);return Os(n,o=>t({id:r,...o.data()||{}}))}function mw(r,t){const n=sr(Dt,"rooms",r,"players"),o=ul(n,iw("joinedAt","asc"));return Os(o,l=>t(l.docs.map(h=>({id:h.id,...h.data()}))))}function DP(r,t,n){const o=Jt(Dt,"rooms",r,"players",t,"notifications","game_ready");return Os(o,l=>{if(l.exists()){const h=l.data();console.log(" Notificacin de juego listo recibida:",h),n(h)}})}async function pw(r){const t=Tn.currentUser;if(!t)return;const n=Jt(Dt,"rooms",r,"players",t.uid);(await qi(n)).exists()&&await nu(n)}async function NP(r){const t=Jt(Dt,"rooms",r),n=await qi(t),o=sr(Dt,"rooms",r,"players"),h=(await rh(o)).docs.map(E=>({uid:E.id,...E.data()||{}}));if(h.length<2)throw new Error("Se necesitan 2 jugadores");const[p,v]=h.slice(0,2),y=Jt(sr(Dt,"duel_matches"));return await ol(y,{createdAt:Gi(),state:"playing",round:1,hostUid:n.exists()&&n.data()?.hostUid||p.uid,players:{[p.uid]:{hp:6e3,nickname:p.nickname||null},[v.uid]:{hp:6e3,nickname:v.nickname||null}},rounds:{},guesses:{},matchmaking:!1}),await hu(t,{duelMatchId:y.id}),y.id}async function LP(r,t,n){const o=Jt(Dt,"duel_matches",r);await Hi(Dt,async l=>{const h=await l.get(o);if(!h.exists())return;const p=h.data();if(p.rounds&&p.rounds[t]||null)return;const y={...p.rounds||{}};y[t]=n,l.update(o,{rounds:y})})}function Up(r,t=14916.862){if(r<=100)return 5e3;const n=5e3*Math.exp(-4*r/t);return Math.min(5e3,Math.max(0,Math.round(n)))}async function kP(r,t,n,o){const l=Jt(Dt,"duel_matches",r);await Hi(Dt,async h=>{const p=await h.get(l);if(!p.exists())return;const v=p.data(),y=v.round||1,E=v.players||{},x=Object.keys(E).find(W=>W!==t),P={...v.rounds||{}},M={...P[y]||{}},q={...M.guesses||{}};if(q[t]={dist:n,guess:o,distance:n},M.guesses=q,P[y]=M,q[x]&&typeof q[x].dist=="number"){const W=q[t].dist,et=q[x].dist,lt=Up(W),Tt=Up(et),ht=lt>Tt?t:x,yt=lt>Tt?x:t,Ht=lt>Tt?lt:Tt,Pt=lt>Tt?Tt:lt;let zt=Ht-Pt;if(y>=4){const N=1.5+(y-4)*.5;zt=Math.round(zt*N),console.log(` Multiplicador de dao ronda ${y}: x${N} (dao: ${zt})`)}const V=E[ht]||{},O=E[yt]||{hp:6e3},k=Math.max(0,(O.hp??6e3)-zt),j={...E,[yt]:{...O,hp:k}},B=(v.round||1)+1,H=k<=0?"finished":"playing";M.damage={winner:V.nickname||`Jugador ${ht.slice(0,6)}`,loser:O.nickname||`Jugador ${yt.slice(0,6)}`,amount:zt,winnerUid:ht,loserUid:yt,winnerPoints:Ht,loserPoints:Pt,multiplier:y>=4?1.5+(y-4)*.5:1,round:y,distances:{[t]:W,[x]:et}},P[y]=M,h.update(l,{players:j,rounds:P,round:B,state:H})}else h.update(l,{rounds:P})})}async function gw(r){const t=Jt(Dt,"rooms",r),n=await qi(t),o=sr(Dt,"rooms",r,"players"),h=(await rh(o)).docs.map(x=>({uid:x.id,...x.data()||{}}));if(console.log(` Creando juego multijugador con ${h.length} jugadores:`,h.map(x=>x.nickname||x.uid.slice(0,6))),h.length<2)throw new Error("Se necesitan al menos 2 jugadores");if(h.length>10)throw new Error("Maximum 10 players");const p={},v=Gi();h.forEach(x=>{p[x.uid]={nickname:x.nickname||null,totalScore:0,lastSeen:v,connected:!0}});const y=Jt(sr(Dt,"multiplayer_games")),E=y.id;try{return await ol(y,{createdAt:Gi(),state:"playing",round:1,hostUid:n.exists()&&n.data()?.hostUid||h[0].uid,players:p,rounds:{},maxRounds:5,roomId:r}),console.log(` Juego multijugador creado: ${E} con ${Object.keys(p).length} jugadores`),await hu(t,{gameId:E}),await VP(r,E,h.map(x=>x.uid)),E}catch(x){throw console.error(" Error creando juego multijugador:",x),x}}async function VP(r,t,n){try{const o=[],l=sr(Dt,"rooms",r,"players");n.forEach(h=>{const p=Jt(l,h,"notifications","game_ready");o.push(ol(p,{gameId:t,timestamp:Gi(),type:"game_ready"}))}),await Promise.all(o),console.log(` Notificaciones de juego listo enviadas a ${n.length} jugadores`)}catch(o){console.error("Error enviando notificaciones:",o)}}async function zP(r,t,n){const o=Jt(Dt,"multiplayer_games",r);await Hi(Dt,async l=>{const h=await l.get(o);if(!h.exists())return;const p=h.data();if(p.rounds&&p.rounds[t]||null)return;const y={...p.rounds||{}};y[t]=n,l.update(o,{rounds:y})})}async function UP(r,t,n,o){const l=Jt(Dt,"multiplayer_games",r);await Hi(Dt,async h=>{const p=await h.get(l);if(!p.exists())return;const v=p.data(),y=v.round||1,E=v.rounds||{},x=E[y]||{guesses:{}},P=x.guesses||{};P[t]={guess:o,dist:n,points:Up(n),timestamp:new Date},x.guesses=P,E[y]=x;const M=v.players||{},q=Object.keys(M);if(Object.keys(P).length===q.length){const et=jP(P,M);x.results=et;const lt={...M};Object.entries(et.scores).forEach(([Ht,Pt])=>{lt[Ht]={...lt[Ht],totalScore:(lt[Ht].totalScore||0)+Pt}});const Tt=y+1,ht=v.maxRounds||5;if(Tt>ht){const Ht=Object.entries(lt).reduce((Pt,zt)=>lt[Pt[0]].totalScore>lt[zt[0]].totalScore?Pt:zt)[0];h.update(l,{players:lt,rounds:E,round:Tt,state:"finished",winner:Ht})}else h.update(l,{players:lt,rounds:E,round:Tt})}else h.update(l,{rounds:E})})}function jP(r,t){const n={scores:{},rankings:[]};return Object.entries(r).forEach(([o,l])=>{n.scores[o]=l.points}),n.rankings=Object.entries(n.scores).map(([o,l])=>({uid:o,nickname:t[o]?.nickname||"Player",points:l,distance:r[o].dist})).sort((o,l)=>l.points-o.points),n}const wT=async(r,t,n)=>{try{const o=Jt(Dt,"user_stats",r);await Hi(Dt,async l=>{const h=await l.get(o);if(h.exists()){const p=h.data();if(n)l.update(o,{duelCups:(p.duelCups||0)+5,duelWins:(p.duelWins||0)+1,lastDuelWin:new Date});else{const v=Math.max(0,(p.duelCups||0)-5);l.update(o,{duelCups:v,duelLosses:(p.duelLosses||0)+1,lastDuelLoss:new Date})}}else n?l.set(o,{uid:r,nickname:t,duelCups:5,duelWins:1,duelLosses:0,firstDuelWin:new Date,lastDuelWin:new Date}):l.set(o,{uid:r,nickname:t,duelCups:0,duelWins:0,duelLosses:1,firstDuelLoss:new Date,lastDuelLoss:new Date})}),console.log(` Stats updated for ${n?"winner":"loser"}:`,t)}catch(o){console.error(" Error updating player stats:",o)}},Mn={INITIAL_HP:6e3,ROUND_TIMER:90,RESULTS_COUNTDOWN:10,HEARTBEAT_INTERVAL:1e4,MAX_OBSERVATION_ATTEMPTS:15,RATE_LIMIT_DELAY:500,TIMEOUT_DISTANCE:2e4,LOADING_TIMEOUT:2e4},ST=[{name:"North America",bbox:[-170,5,-50,75],weight:.5},{name:"South America",bbox:[-82,-56,-34,12],weight:1},{name:"Europe",bbox:[-31,34,45,72],weight:.5},{name:"Africa",bbox:[-20,-35,52,37],weight:1},{name:"Asia",bbox:[25,-10,180,55],weight:1},{name:"Oceania",bbox:[110,-50,180,0],weight:.5}],Yt={IDLE:"idle",WAITING:"waiting",MATCHED:"matched",FINISHED:"finished"};function BP(r,t,n,o){const h=E=>E*Math.PI/180,p=h(n-r),v=h(o-t),y=Math.sin(p/2)**2+Math.cos(h(r))*Math.cos(h(n))*Math.sin(v/2)**2;return 6371*2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y))}function HP(r){return r==null||isNaN(r)?"":r<1?`${Math.round(r*1e3).toLocaleString()} m`:`${Math.round(r).toLocaleString()} km`}function qP(){return ST[Math.floor(Math.random()*ST.length)]}function FP(r,t=0){const[n,o,l,h]=r.bbox;return`https://api.inaturalist.org/v1/observations?photos=true&quality_grade=research&order=desc&per_page=100&geo=true&geoprivacy=open&page=${t}&swlat=${o}&swlng=${n}&nelat=${h}&nelng=${l}&taxon_id=3&captive=false`}function GP(r,t){return`https://api.inaturalist.org/v1/observations?photos=true&quality_grade=research&order=desc&per_page=100&geo=true&geoprivacy=open&coordinates_obscured=false&lat=${r}&lng=${t}&radius=50&taxon_id=3&captive=false`}function AT(r){return(r||[]).filter(t=>t.photos&&t.photos.length&&t.geojson?.coordinates&&t.geojson.type==="Point")}function ZP(r){return r.map(t=>({id:t.id,photo:t.photos[0].url.replace("square","large"),lat:t.geojson.coordinates[1],lon:t.geojson.coordinates[0],species:t.taxon?.preferred_common_name||t.taxon?.name}))}function WP(){const[r,t]=G.useState(!1),n=G.useCallback(async(o,l,h)=>{if(r)return;console.log("Starting loadObservationForMatch, isLoading:",r,"matchData:",l),t(!0);const p=Mn.MAX_OBSERVATION_ATTEMPTS;let v=0;for(await new Promise(y=>setTimeout(y,1e3));v<p;){v++,console.log(`Attempt ${v}/${p}`);try{const y=qP(),E=Math.floor(Math.random()*100),x=FP(y,E),P=await fetch(x);if(P.status===429){console.log(" Rate limit, waiting 500ms..."),await new Promise(Pt=>setTimeout(Pt,Mn.RATE_LIMIT_DELAY));continue}const M=await P.json(),q=AT(M.results);if(!q.length){console.log("No valid observations found");continue}const W=q[Math.floor(Math.random()*q.length)],et=W.geojson.coordinates[1],lt=W.geojson.coordinates[0],Tt=GP(et,lt),ht=await fetch(Tt);if(ht.status===429){console.log(" Cluster rate limit, waiting 500ms..."),await new Promise(Pt=>setTimeout(Pt,Mn.RATE_LIMIT_DELAY));continue}const yt=await ht.json();if(!yt.results||yt.results.length<8)continue;const Ht=AT(yt.results);if(Ht.length>=8){const zt=[...Ht].sort(()=>Math.random()-.5).slice(0,8),V=ZP(zt);console.log("Found 8 items, saving to match:",V.length),o&&l?.round?(console.log(" Saving round data to Firestore - MatchId:",o,"Round:",l.round),await LP(o,l.round,{items:V,index:0}),console.log(" Saved round data to match successfully")):console.log(" Cannot save round data - MatchId:",o,"Round:",l?.round),t(!1);return}await new Promise(Pt=>setTimeout(Pt,200))}catch(y){console.error(`Error in attempt ${v}:`,y),await new Promise(E=>setTimeout(E,200))}}console.error(" No valid cluster found after several attempts"),t(!1)},[r]);return{isLoading:r,loadObservations:n}}function YP(){const[r,t]=G.useState(Mn.ROUND_TIMER),n=G.useRef(!1),o=G.useRef(null),l=G.useRef(0),h=G.useRef(!1),p=G.useCallback((E,x)=>{o.current&&(clearInterval(o.current),o.current=null),n.current=!0,l.current=E,t(Mn.ROUND_TIMER),o.current=setInterval(()=>{t(P=>P<=1?(console.log(" Timer reached 0, checking for automatic elimination"),o.current&&(clearInterval(o.current),o.current=null),x(),0):P-1)},1e3)},[]),v=G.useCallback(()=>{o.current&&(clearInterval(o.current),o.current=null),n.current=!1,h.current=!1},[]),y=G.useCallback(()=>{t(Mn.ROUND_TIMER),n.current=!1,h.current=!1},[]);return{gameCountdown:r,startTimer:p,stopTimer:v,resetTimer:y,timeoutProcessingRef:h,countdownStartedRef:n,currentRoundRef:l}}function QP(){const[r,t]=G.useState(null),[n,o]=G.useState(""),[l,h]=G.useState(Yt.IDLE),[p,v]=G.useState(null),[y,E]=G.useState(null),[x,P]=G.useState(null),[M,q]=G.useState(0),[W,et]=G.useState(null),[lt,Tt]=G.useState([]),[ht,yt]=G.useState(null),[Ht,Pt]=G.useState(null),[zt,V]=G.useState(!1),[O,k]=G.useState(null),[j,B]=G.useState(!1),[H,N]=G.useState(!1),[ge,de]=G.useState(null),[J,At]=G.useState(!1),[ot,te]=G.useState(null),[D,ut]=G.useState(Mn.RESULTS_COUNTDOWN),[wt,rt]=G.useState(new Set),[Et,xt]=G.useState([]),[St,Ee]=G.useState("Activo"),[ce,je]=G.useState(0),Oe=G.useRef(0),Be=G.useRef(null),{isLoading:oe,loadObservations:nn}=WP(),{gameCountdown:wn,startTimer:Hn,stopTimer:Ti,resetTimer:rn,timeoutProcessingRef:Nn,countdownStartedRef:Kn,currentRoundRef:Xn}=YP();console.log(" Duels component render - status:",l,"matchId:",p,"user:",r?.uid);const sn=G.useCallback(()=>{try{const K=sr(Dt,"user_stats"),it=ul(K,iw("duelCups","desc"),rw(10));return Os(it,Nt=>{const kt=Nt.docs.filter(Rt=>{const Ot=Rt.data();return Ot.duelCups&&Ot.duelCups>0}).map((Rt,Ot)=>({id:Rt.id,rank:Ot+1,nickname:Rt.data().nickname||"Player",cups:Rt.data().duelCups||0,wins:Rt.data().duelWins||0,losses:Rt.data().duelLosses||0}));xt(kt),console.log(" Leaderboard loaded:",kt)},Nt=>{console.error(" Error loading leaderboard:",Nt),xt([{id:"1",rank:1,nickname:"Champion",cups:75,wins:15,losses:2},{id:"2",rank:2,nickname:"ProPlayer",cups:60,wins:12,losses:3},{id:"3",rank:3,nickname:"Winner",cups:50,wins:10,losses:5},{id:"4",rank:4,nickname:"Master",cups:40,wins:8,losses:4},{id:"5",rank:5,nickname:"Expert",cups:30,wins:6,losses:3}])})}catch(K){return console.error(" Error setting up leaderboard:",K),xt([]),null}},[]),Ei=G.useCallback(async()=>{if(console.log(" handleTimeout called - matchId:",p,"user:",r?.uid,"confirmed:",zt,"guess:",ht),!p||!r||Nn.current||l===Yt.FINISHED){console.log(" handleTimeout cancelled - matchId:",!!p,"user:",!!r,"processing:",Nn.current,"status:",l);return}if(!y||!y.rounds||!y.rounds[y.round]||!y.rounds[y.round].items){console.log(" handleTimeout cancelled - Match has no round data loaded");return}Nn.current=!0,console.log(" TIMEOUT: Checking for elimination - Current player confirmed:",zt,"hasGuess:",!!ht);try{const K=Jt(Dt,"duel_matches",p);await Hi(Dt,async it=>{const bt=await it.get(K);if(!bt.exists()){console.log(" Match doesn't exist, cancelling automatic elimination");return}const Nt=bt.data();if(Nt.state===Yt.FINISHED){console.log(" Game already finished, cancelling automatic elimination");return}console.log(" Applying automatic elimination - Match state:",Nt.state,"Round:",Nt.round);const kt=Nt.players||{},Rt=kt[r.uid]||{},Ot=Nt.round||1,me={...Nt.rounds||{}},pe={...me[Ot]||{}},ct={...pe.guesses||{}},_t=Object.keys(kt).find(Ft=>Ft!==r.uid),Qt=_t&&ct[_t],$t=ct[r.uid];if(console.log(" Timeout analysis - Current player has guess:",!!$t,"Other player has guess:",!!Qt),$t){if($t&&!Qt&&_t){console.log(" Current player already verified, eliminating opponent by timeout:",_t);const Ft=kt[_t]||{},Wt={...kt,[_t]:{...Ft,hp:0}};ct[_t]={dist:Mn.TIMEOUT_DISTANCE,guess:{lat:0,lng:0},distance:Mn.TIMEOUT_DISTANCE,points:0,timestamp:new Date,timeout:!0,eliminated:!0},pe.guesses=ct,me[Ot]=pe,it.update(K,{players:Wt,rounds:me,state:Yt.FINISHED,finishedAt:new Date,timeoutElimination:!0,eliminatedPlayer:_t,doubleTimeout:!1}),console.log(" Opponent automatically eliminated by timeout - Current player wins")}else if($t&&Qt){console.log(" Both players have made guesses - no timeout elimination needed");return}else if(!$t&&!Qt){console.log(" Double timeout detected - eliminating both players");const Ft={...kt,[r.uid]:{...Rt,hp:0}};_t&&(Ft[_t]={...kt[_t],hp:0},ct[_t]={dist:Mn.TIMEOUT_DISTANCE,guess:{lat:0,lng:0},distance:Mn.TIMEOUT_DISTANCE,points:0,timestamp:new Date,timeout:!0,eliminated:!0}),ct[r.uid]={dist:Mn.TIMEOUT_DISTANCE,guess:ht||{lat:0,lng:0},distance:Mn.TIMEOUT_DISTANCE,points:0,timestamp:new Date,timeout:!0,eliminated:!0},pe.guesses=ct,me[Ot]=pe,it.update(K,{players:Ft,rounds:me,state:Yt.FINISHED,finishedAt:new Date,timeoutElimination:!0,eliminatedPlayer:r.uid,doubleTimeout:!0}),console.log(" Both players eliminated by double timeout - Match ended")}}else{console.log(" Eliminating current player by timeout:",r.uid,"Current HP:",Rt.hp);const Ft={...kt,[r.uid]:{...Rt,hp:0}};ct[r.uid]={dist:Mn.TIMEOUT_DISTANCE,guess:ht||{lat:0,lng:0},distance:Mn.TIMEOUT_DISTANCE,points:0,timestamp:new Date,timeout:!0,eliminated:!0},pe.guesses=ct,me[Ot]=pe,it.update(K,{players:Ft,rounds:me,state:Yt.FINISHED,finishedAt:new Date,timeoutElimination:!0,eliminatedPlayer:r.uid,doubleTimeout:!1}),console.log(" Current player automatically eliminated by timeout - Match ended")}}),V(!0),N(!0),console.log(" AUTOMATIC ELIMINATION applied")}catch(K){console.error(" Error applying automatic elimination:",K)}finally{Nn.current=!1}},[p,r,zt,ht,l,y,Nn]),De=G.useCallback(async()=>{if(!(!p||!y||l!==Yt.MATCHED))try{const K=Jt(Dt,"duel_matches",p),it=await qi(K);if(!it.exists())return;const bt=it.data();if(bt.state===Yt.FINISHED)return;const Nt=bt.players||{},kt=new Date,Rt=9e4;for(const[Ot,me]of Object.entries(Nt)){if(me.hp<=0)continue;const pe=me.lastActivity?.toDate();if(pe&&kt-pe>Rt){console.log(" Player appears disconnected:",Ot,"Last activity:",pe);const ct=Ot===bt.host,It=bt.round||1;if(ct&&It>1){console.log(" Host disconnected in round",It,"- ending match"),await Hi(Dt,async Ft=>{const Wt=await Ft.get(K);if(!Wt.exists())return;const Fe=Wt.data();if(Fe.state===Yt.FINISHED)return;const qn=Object.keys(Fe.players).find($n=>$n!==Ot);Ft.update(K,{state:Yt.FINISHED,finishedAt:new Date,hostDisconnected:!0,winner:qn,disconnectionElimination:!0})});return}const _t=bt.round||1;(bt.rounds?.[_t]?.guesses||{})[Ot]||(console.log(" Eliminating disconnected player:",Ot),await Hi(Dt,async Ft=>{const Wt=await Ft.get(K);if(!Wt.exists())return;const Fe=Wt.data();if(Fe.state===Yt.FINISHED)return;const qn={...Fe.players,[Ot]:{...Fe.players[Ot],hp:0}},$n={...Fe.rounds||{}},Ni={...$n[_t]||{}},or={...Ni.guesses||{}};or[Ot]={dist:Mn.TIMEOUT_DISTANCE,guess:{lat:0,lng:0},distance:Mn.TIMEOUT_DISTANCE,points:0,timestamp:new Date,timeout:!0,eliminated:!0,disconnected:!0},Ni.guesses=or,$n[_t]=Ni,Ft.update(K,{players:qn,rounds:$n,state:Yt.FINISHED,finishedAt:new Date,timeoutElimination:!0,eliminatedPlayer:Ot,disconnectionElimination:!0})}))}}}catch(K){console.error(" Error checking disconnected players:",K)}},[p,y,l]);G.useCallback(async K=>{if(p)try{const it=Jt(Dt,"duel_matches",p);await Hi(Dt,async bt=>{const Nt=await bt.get(it);if(!Nt.exists()||Nt.data().state==="finished")return;const kt=Nt.data(),Rt=Object.keys(kt.players).find(Ot=>Ot!==K);Rt&&bt.update(it,{state:"finished",finishedAt:Gi(),winner:Rt,disconnectionElimination:!0,eliminatedPlayer:K,statsProcessed:!0})}),console.log(" Match ended due to disconnection")}catch(it){console.error(" Error handling disconnection:",it)}},[p]);const li=G.useCallback(async()=>{if(r)try{console.log(" Cleaning player state after match end");const K=Jt(Dt,"duel_queue",r.uid);await nu(K).catch(()=>{}),console.log(" Player state cleaned successfully")}catch(K){console.error(" Error cleaning player state:",K)}},[r]),Zi=G.useCallback(()=>(qp({click(K){if(!(j||zt)&&(yt(K.latlng),p&&r)){const it=Jt(Dt,"duel_matches",p);Hi(Dt,async bt=>{const Nt=await bt.get(it);if(!Nt.exists())return;const Rt={...Nt.data().players};Rt[r.uid]&&(Rt[r.uid]={...Rt[r.uid],lastActivity:new Date}),bt.update(it,{players:Rt})}).catch(bt=>{console.log(" Error updating activity on map click:",bt)})}}}),null),[j,zt,p,r]),le=G.useCallback(()=>{const K=Hc(),it=G.useRef(!1);return G.useEffect(()=>{if(!(!ot||!ot.observation)&&!it.current){const bt=[ot.observation.lat,ot.observation.lon];K.setView(bt,K.getZoom(),{animate:!1}),it.current=!0}},[ot,K]),G.useEffect(()=>{it.current=!1},[ot]),null},[ot]);G.useEffect(()=>{const K=gu(Tn,async it=>{if(t(it||null),it){const bt=await qi(Jt(Dt,"users",it.uid));o(bt.exists()&&bt.data()?.nickname||"")}});return()=>K()},[]),G.useEffect(()=>{if(!r)return;const K=new URLSearchParams(window.location.search),it=K.get("view"),bt=K.get("match");console.log(" URL params check - view:",it,"matchParam:",bt,"user:",r?.uid),it==="duels"&&bt?(console.log(" Navigating to existing duel:",bt),v(bt),h(Yt.MATCHED)):console.log(" Navigating to normal duel, no matchId")},[r]),G.useEffect(()=>{if(!r)return;if(new URLSearchParams(window.location.search).get("match")){console.log(" Coming from private room, skipping cleanup");return}console.log(" Cleaning previous user queue"),(async()=>{try{await ws(),console.log(" Previous queue cleaned")}catch(Nt){console.log(" Error cleaning previous queue:",Nt)}h(Yt.IDLE),v(null),E(null),P(null),et(null),Tt([]),yt(null),Pt(null),V(!1),B(!1),N(!1),At(!1),te(null),ut(Mn.RESULTS_COUNTDOWN),rt(new Set),je(0),Oe.current=0,Be.current=null,Xn.current=0,ge&&(clearTimeout(ge),de(null)),console.log(" State completely reset")})()},[r]),G.useEffect(()=>{if(!r||p)return;console.log(" Starting matchmaking queue listener");const K=IP(it=>{console.log(" Queue data received:",it),q(it.waitingPlayers),it.myPosition>0?(console.log(" User found in queue, position:",it.myPosition),h(Yt.WAITING),it.waitingPlayers>=2&&(console.log(" Enough players, trying matchmaking..."),AP().then(bt=>{bt?(console.log(" Match created successfully:",bt),v(bt),h(Yt.MATCHED)):console.log(" Could not create match (matchId is null) - probably already created by another user")}).catch(bt=>{console.log(" Error in matchmaking:",bt)}))):(console.log(" User NOT found in queue, myPosition:",it.myPosition),console.log(" Complete queue data:",it),console.log(" Current user:",r?.uid))});return()=>K()},[r,p]),G.useEffect(()=>{if(!r||l!==Yt.WAITING)return;const K=setInterval(()=>{RP()},Mn.HEARTBEAT_INTERVAL);return()=>clearInterval(K)},[r,l]),G.useEffect(()=>{if(!r)return;const K=PP(async it=>{if(it&&(console.log(" User queue status:",it),it.status===Yt.MATCHED&&it.matchId)){if(console.log(" Match found for user:",it.matchId),console.log(" Verifying if user is really in queue before processing match"),p){console.log(" Already in a match, ignoring pairing:",p);return}try{const bt=Jt(Dt,"duel_matches",it.matchId),Nt=await qi(bt);if(console.log(" Verifying match state before joining user"),!Nt.exists()){console.log(" Match doesn't exist, cleaning queue"),await ws();return}const kt=Jt(Dt,"duel_queue",r.uid),Rt=await qi(kt);if(!Rt.exists()||Rt.data().status!==Yt.MATCHED){console.log(" User is not really in queue or not matched, ignoring match");return}if(Nt.data().state===Yt.FINISHED){console.log(" Match already finished, cleaning queue and state"),await ws(),h(Yt.IDLE),v(null);return}console.log(" Valid and active match, joining user"),v(it.matchId),h(Yt.MATCHED)}catch(bt){console.log(" Error verifying match:",bt),await ws(),h(Yt.IDLE),v(null)}}});return()=>K()},[r,p]),G.useEffect(()=>{if(!r||l!==Yt.WAITING)return;const K=CP(async it=>{if(console.log(" Opponent was matched with us:",it),p){console.log(" Already in a match, ignoring pairing:",p);return}try{const bt=Jt(Dt,"duel_matches",it.matchId);let Nt,kt=3;for(;kt>0&&(Nt=await qi(bt),!Nt.exists());)console.log(` Match not found, retrying... (${4-kt}/3)`),await new Promise(pe=>setTimeout(pe,1e3)),kt--;if(!Nt.exists()){console.log(" Match doesn't exist after retries, cleaning queue"),await ws();return}const Rt=Nt.data();console.log(" Verifying match state (opponent):",{matchId:it.matchId,state:Rt.state,round:Rt.round,players:Object.keys(Rt.players||{}),hostUid:Rt.hostUid});const Ot=Jt(Dt,"duel_queue",r.uid),me=await qi(Ot);if(!me.exists()||me.data().status!==Yt.MATCHED){console.log(" User is not really in queue or not matched, ignoring match (opponent)");return}if(Rt.state===Yt.FINISHED){console.log(" Match already finished, cleaning queue and state"),await ws(),h(Yt.IDLE),v(null);return}console.log(" Valid and active match, joining user"),v(it.matchId),h(Yt.MATCHED)}catch(bt){console.log(" Error verifying match:",bt),await ws(),h(Yt.IDLE),v(null)}});return()=>K()},[r,l,p]),G.useEffect(()=>{if(!p)return;const K=MP(p,it=>{if(console.log("Match update:",it),E(it),it.id!==Be.current&&(Oe.current=0,Be.current=it.id,je(0),yt(null),Pt(null),V(!1),B(!1),N(!1),rt(new Set),r&&it.players&&it.players[r.uid])){const kt=Jt(Dt,"duel_matches",p);Hi(Dt,async Rt=>{const Ot=await Rt.get(kt);if(!Ot.exists())return;const pe={...Ot.data().players};pe[r.uid]&&(pe[r.uid]={...pe[r.uid],lastActivity:new Date}),Rt.update(kt,{players:pe})}).catch(Rt=>{console.log(" Error initializing player activity:",Rt)})}if(it.state===Yt.FINISHED){console.log("Game finished, players data:",it.players),h(Yt.FINISHED);const kt=it.players||{};if(it.loadingTimeout)console.log(" Loading timeout detected - no winners"),P(null);else if(it.doubleTimeout)console.log(" Double timeout detected - both players lose"),P(null);else{const Rt=Object.entries(kt).map(([me,pe])=>({uid:me,...pe})),Ot=Rt.find(me=>me.hp>0)||Rt[0];if(console.log("Players HP:",Object.entries(kt).map(([me,pe])=>`${me}: ${pe.hp}`)),console.log("Winner detected:",Ot),console.log("Current user UID:",r?.uid),P(Ot),!it.statsProcessed&&it.matchmaking===!0){console.log(" Processing match stats for matchmaking duel"),Ot&&Ot.uid&&wT(Ot.uid,Ot.nickname||"Player",!0);const me=Rt.find(ct=>ct.uid!==Ot.uid);me&&me.uid&&wT(me.uid,me.nickname||"Player",!1);const pe=Jt(Dt,"duel_matches",p);hu(pe,{statsProcessed:!0}).catch(ct=>{console.error(" Error marking stats as processed:",ct)})}else it.matchmaking!==!0?console.log(" Private room match - stats not updated (only matchmaking duels count for leaderboard)"):console.log(" Stats already processed for this match, skipping")}if(li(),it.timeoutElimination&&it.eliminatedPlayer){console.log(" Timeout elimination detected - showing special results");const Rt=it.round||1,Ot=it.rounds?.[Rt];Ot&&Ot.items&&Ot.index!==void 0&&(console.log(" Showing timeout results for round",Rt),te({round:Rt,observation:Ot.items[Ot.index]||null,guesses:Ot.guesses||{},damage:null,players:it.players,timeoutElimination:!0,eliminatedPlayer:it.eliminatedPlayer,doubleTimeout:it.doubleTimeout||!1}),At(!0))}else{const Rt=it.round-1,Ot=it.rounds?.[Rt];Ot&&Ot.guesses&&Object.keys(Ot.guesses).length===2&&!J&&(console.log("Game finished, showing final round results for round",Rt),te({round:Rt,observation:Ot.items?.[Ot.index]||null,guesses:Ot.guesses,damage:Ot.damage,players:it.players}),At(!0))}return}const bt=it.round,Nt=it.rounds?.[bt];if(console.log("Match update - Round:",bt,"Round data:",Nt,"User:",r?.uid,"Host:",it.hostUid),console.log("All rounds:",it.rounds),bt!==Oe.current&&!H){if(console.log("Round change detected, resetting state from round",Oe.current,"to round",bt),Oe.current>0){const kt=Oe.current,Rt=it.rounds?.[kt];console.log("Showing results for completed round:",kt,"Data:",Rt),console.log("Round data checks:",{hasRoundData:!!Rt,hasGuesses:!!Rt?.guesses,guessesCount:Rt?.guesses?Object.keys(Rt.guesses).length:0,hasDamage:!!Rt?.damage,showResults:J,processedRounds:Array.from(wt),isProcessed:wt.has(kt)}),Rt&&Rt.guesses&&Object.keys(Rt.guesses).length===2&&Rt.damage&&!J&&!wt.has(kt)&&(console.log("Both players finished round, showing results for round",kt),te({round:kt,observation:Rt.items?.[Rt.index]||null,guesses:Rt.guesses,damage:Rt.damage,players:it.players}),At(!0),rt(Ot=>new Set([...Ot,kt])))}yt(null),Pt(null),V(!1),B(!1),N(!1),je(bt),Oe.current=bt}if(Nt&&Nt.items&&typeof Nt.index=="number"){console.log(" Loading round data from match - Items:",Nt.items.length,"Index:",Nt.index),Tt(Nt.items);const kt=Nt.items[Nt.index];et(kt),ge&&(console.log(" Clearing loading timeout - round data loaded successfully"),clearTimeout(ge),de(null))}else if(r&&it.hostUid===r.uid&&!Nt)console.log(" Host loading first round - User:",r.uid,"Host:",it.hostUid,"Round:",it.round),nn(p,it,r.uid);else if(!Nt&&(console.log(" Non-host waiting for host to load round data - User:",r.uid,"Host:",it.hostUid,"Round data:",Nt),!ge)){console.log(" Starting loading timeout for non-host player");const kt=setTimeout(async()=>{console.log(" Loading timeout reached - ending match due to loading timeout");try{const Rt=Jt(Dt,"duel_matches",p);await Hi(Dt,async Ot=>{const me=await Ot.get(Rt);!me.exists()||me.data().state===Yt.FINISHED||Ot.update(Rt,{state:Yt.FINISHED,finishedAt:new Date,loadingTimeout:!0,loadingTimeoutReason:"Loading timeout - host disconnected or failed to load"})}),console.log(" Match ended due to loading timeout")}catch(Rt){console.error(" Error ending match due to loading timeout:",Rt)}},Mn.LOADING_TIMEOUT);de(kt)}});return()=>K()},[p,r,nn,li]),G.useEffect(()=>{if(J&&ot){ut(Mn.RESULTS_COUNTDOWN);const K=setInterval(()=>{ut(it=>it<=1?(clearInterval(K),At(!1),te(null),l!==Yt.FINISHED&&(yt(null),Pt(null),V(!1),B(!1),N(!1),console.log(" Resetting timer state for new round"),rn()),0):it-1)},1e3);return()=>clearInterval(K)}},[J,ot,l,rn]),G.useEffect(()=>{if(J){console.log(" Not starting timer - results are being shown");return}if(l===Yt.MATCHED&&y&&y.state!==Yt.FINISHED&&!J&&!j&&W&&(!Kn.current||y.round!==Xn.current)&&y.rounds&&y.rounds[y.round]&&y.rounds[y.round].items){console.log(" Starting 90 second timer for round",y.round),console.log(" Timer state - started:",Kn.current,"currentRound:",Xn.current,"newRound:",y.round),console.log(" Conditions - status:",l,"match:",!!y,"showResults:",J,"roundLocked:",j,"observation:",!!W),console.log(" Match data:",{id:y.id,state:y.state,round:y.round,players:y.players}),console.log(" Round data:",{hasRounds:!!y.rounds,currentRound:y.round,hasItems:!!(y.rounds&&y.rounds[y.round]&&y.rounds[y.round].items)});const K=()=>{!Nn.current&&l!==Yt.FINISHED&&y&&y.rounds&&y.rounds[y.round]&&y.rounds[y.round].items?(console.log(" TIMEOUT: Checking for elimination - Player confirmed:",zt,"hasGuess:",!!ht),Ei()):console.log(" Timeout skipped - processing:",Nn.current,"status:",l,"hasMatchData:",!!(y&&y.rounds&&y.rounds[y.round]&&y.rounds[y.round].items))};Hn(y.round,K)}},[W,y?.round,J,l,y,j,zt,ht,r?.uid,Ei,Hn]),G.useEffect(()=>{(l===Yt.FINISHED||J)&&(Ti(),console.log(" Timer cleaned - game finished or showing results"),ge&&(console.log(" Loading timeout cleaned - game finished or showing results"),clearTimeout(ge),de(null)))},[l,J,Ti,ge]),G.useEffect(()=>{if(l!==Yt.MATCHED||!p||!r)return;const K=async()=>{try{const bt=Jt(Dt,"duel_matches",p);await hu(bt,{[`players.${r.uid}.lastActivity`]:Gi()}),console.log(" Heartbeat sent")}catch(bt){console.error(" Error sending heartbeat:",bt)}};K();const it=setInterval(K,1e4);return()=>clearInterval(it)},[l,p,r]),G.useEffect(()=>{if(l!==Yt.MATCHED||!p)return;const K=setInterval(()=>{De()},1e4);return()=>clearInterval(K)},[l,p,De]),G.useEffect(()=>{if(!p||!y||!r)return;const K=Object.keys(y.players||{}).find(Nt=>Nt!==r.uid);if(!K)return;const it=Jt(Dt,"duel_matches",p),bt=Os(it,Nt=>{if(!Nt.exists())return;const Rt=Nt.data().players?.[K];if(!Rt)return;const Ot=Rt.lastActivity?.toDate(),ct=Ot&&new Date-Ot>9e4;Ee(ct?"Desconectado":"Activo")});return()=>bt()},[p,y,r]),G.useEffect(()=>{const K=sn();return()=>{K&&typeof K=="function"&&K()}},[sn]);const ve=G.useCallback(async()=>{if(r){if(l===Yt.WAITING||l===Yt.MATCHED){console.log(" Already in queue or in a match, ignoring search");return}console.log(" Starting match search...");try{console.log(" Cleaning any existing queue state before new search"),await ws().catch(it=>{console.log(" Error cleaning previous queue:",it)});try{const it=Jt(Dt,"duel_queue",r.uid);await nu(it),console.log(" Queue document deleted completely")}catch(it){console.log(" Error deleting queue document:",it)}h(Yt.WAITING),console.log(" Status changed to waiting");const K=await SP(n);console.log(" enqueueForDuel result:",K),K.matched&&K.matchId?(console.log(" Match found immediately:",K.matchId),v(K.matchId),h(Yt.MATCHED)):(console.log(" User added to queue, waiting for matchmaking..."),setTimeout(()=>{console.log(" User added to queue, waiting for matchmaking...")},100))}catch(K){console.error(" Error searching for match:",K),h(Yt.IDLE)}}},[r,l,n]),pn=G.useCallback(async()=>{await ws(),h(Yt.IDLE),v(null)},[]);return A.jsxs("div",{className:"container-narrow",style:{padding:"1rem",textAlign:"center"},children:[A.jsx("div",{style:{position:"fixed",left:12,top:12,zIndex:1e3},children:A.jsx("button",{onClick:async()=>{if(console.log(" Back button pressed - clearing state"),l===Yt.WAITING)try{await ws(),console.log(" Cola cancelada")}catch(K){console.log(" Error cancelando cola:",K)}h(Yt.IDLE),v(null),E(null),P(null),et(null),Tt([]),yt(null),Pt(null),V(!1),B(!1),N(!1),At(!1),te(null),ut(10),rt(new Set),je(0),Oe.current=0,Be.current=null,console.log(" State completely cleared by Back button"),console.log(" Volviendo al men principal"),window.location.href="?view=menu"},style:{padding:"6px 10px",borderRadius:8,border:"none",background:"#374151",color:"#fff",cursor:"pointer"},children:"Back"})}),A.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold"},children:"Birders Place - Duels"}),!r&&A.jsxs("div",{style:{padding:"2rem",color:"#fff",textAlign:"center"},children:[A.jsx("h2",{style:{marginTop:0},children:"1v1 Duels"}),A.jsx("p",{style:{opacity:.85,marginBottom:20},children:"Sign in to play."}),A.jsx("button",{onClick:()=>window.location.href="?view=login",style:{padding:"0.6rem 1rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600},children:"Sign In"})]}),r&&l===Yt.IDLE&&A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",alignItems:"center"},children:[A.jsx("button",{onClick:ve,disabled:oe,style:{padding:"0.5rem 1rem",backgroundColor:oe?"#95a5a6":"#3498db",color:"white",border:"none",borderRadius:"8px",cursor:oe?"not-allowed":"pointer"},children:oe?"Loading...":"Search 1v1 Match"}),A.jsxs("div",{style:{marginTop:"1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",padding:"1rem",maxWidth:"400px",width:"100%"},children:[A.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#fff",textAlign:"center"},children:" Top 10 Players"}),Et.length===0?A.jsx("div",{style:{color:"#ecf0f1",textAlign:"center",padding:"1rem"},children:"No data yet. Be the first to win!"}):A.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Et.map((K,it)=>A.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",borderRadius:"8px",padding:"0.75rem",border:it<3?"2px solid #fbbf24":"1px solid rgba(255,255,255,0.2)"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[A.jsxs("span",{style:{color:it<3?"#fbbf24":"#ecf0f1",fontWeight:"bold",minWidth:"25px",fontSize:"16px"},children:["#",K.rank]}),A.jsx("span",{style:{color:"#fff",fontWeight:"bold",fontSize:"16px"},children:K.nickname||"Player"})]}),A.jsxs("div",{style:{color:"#fbbf24",fontWeight:"bold",fontSize:"16px"},children:[" ",K.cups||0]})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px",color:"#ecf0f1"},children:[A.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[A.jsxs("span",{style:{color:"#10b981"},children:[" ",K.wins||0," wins"]}),A.jsxs("span",{style:{color:"#ef4444"},children:[" ",K.losses||0," losses"]})]}),A.jsx("div",{style:{color:"#9ca3af"},children:K.wins+K.losses>0?`${Math.round(K.wins/(K.wins+K.losses)*100)}% WR`:"0% WR"})]})]},K.id))})]})]}),r&&l===Yt.WAITING&&A.jsxs(A.Fragment,{children:[A.jsx("div",{style:{marginTop:"1rem",color:"#fff"},children:" Searching for opponent..."}),A.jsx("div",{style:{fontSize:"14px",marginTop:"0.5rem",opacity:.8},children:M>0?` ${M} player${M>1?"s":""} waiting...`:" Waiting for another player to join..."}),A.jsx("button",{onClick:pn,style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"#e74c3c",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Cancel"})]}),J&&ot&&A.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",zIndex:2e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem"},children:A.jsxs("div",{style:{background:"#1f2937",borderRadius:"12px",padding:"2rem",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflow:"auto"},children:[A.jsxs("h2",{style:{color:"#f1c40f",margin:"0 0 1rem 0",textAlign:"center"},children:["Round ",ot.round," - Results"]}),A.jsxs("div",{style:{background:"#374151",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",textAlign:"center"},children:[A.jsxs("div",{style:{color:"#d1d5db",fontSize:"16px",marginBottom:"8px"},children:[" Duel: ",Object.entries(ot.players).map(([K,it])=>{const bt=K===r?.uid;return A.jsx("span",{style:{color:bt?"#8b5cf6":"#10b981",fontWeight:"bold",margin:"0 4px"},children:bt?"You":it?.nickname||"Player"},K)}).reduce((K,it,bt)=>[K,bt===1?" vs ":"",it])]}),A.jsxs("div",{style:{color:"#9ca3af",fontSize:"14px"},children:["Rounds played: ",ot.round," | Remaining points: ",Object.entries(ot.players).map(([K,it])=>{const bt=K===r?.uid,Nt=it?.hp??6e3;return A.jsxs("span",{style:{color:bt?"#8b5cf6":"#10b981",fontWeight:"bold",margin:"0 8px"},children:[bt?"You":it?.nickname||"Player",": ",Nt.toLocaleString()]},K)}).reduce((K,it,bt)=>[K,bt===1?" | ":"",it])]})]}),A.jsx("div",{style:{height:"300px",marginBottom:"1rem",borderRadius:"8px",overflow:"hidden"},children:A.jsxs(xc,{center:[20,0],zoom:2,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,style:{height:"100%",width:"100%"},children:[A.jsx(Rc,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OSM</a>  <a href="https://carto.com/">CARTO</a>',noWrap:!0}),A.jsx(Cc,{}),A.jsx(le,{}),ot.observation&&A.jsx(is,{position:[ot.observation.lat,ot.observation.lon],icon:Gp,children:A.jsx(Ic,{permanent:!0,direction:"top",offset:[-20,-25],className:"distance-tooltip",style:{background:"transparent",border:"none",boxShadow:"none",color:"#dc2626",fontWeight:"bold",fontSize:"14px",textAlign:"center",width:"40px",marginLeft:"-20px"},children:" REAL LOCATION"})}),Object.entries(ot.guesses).map(([K,it],bt)=>{const Nt=K===r?.uid,kt=ot.players[K],Rt=ot.timeoutElimination&&K===ot.eliminatedPlayer,Ot=["#3b82f6","#10b981"],me=Rt?"#ef4444":Ot[bt%Ot.length];return!it?.guess?.lat||!it?.guess?.lng?null:A.jsx(is,{position:[it.guess.lat,it.guess.lng],children:A.jsx(Ic,{permanent:!0,direction:"top",offset:[-20,-25],className:"distance-tooltip",style:{background:"transparent",border:"none",boxShadow:"none",color:me,fontWeight:"bold",fontSize:"14px",textAlign:"center",width:"40px",marginLeft:"-20px"},children:Rt?"":Nt?"YOU":kt?.nickname||"Opponent"})},K)})]})}),ot.timeoutElimination?A.jsxs("div",{style:{background:"#dc2626",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",textAlign:"center"},children:[A.jsx("div",{style:{color:"#fff",fontWeight:"bold",fontSize:"18px"},children:" Timeout Elimination!"}),A.jsx("div",{style:{color:"#fecaca",marginTop:"4px"},children:ot.doubleTimeout?"Neither player clicked in time - both eliminated":"The opponent didn't click in time and was automatically eliminated"}),A.jsx("div",{style:{color:"#fecaca",marginTop:"8px",fontSize:"14px"},children:ot.doubleTimeout?A.jsx("div",{style:{color:"#ef4444",fontWeight:"bold"},children:" Both players:  Didn't click"}):Object.entries(ot.guesses).map(([K,it])=>{const bt=ot.players[K],Nt=K===r?.uid;return K===ot.eliminatedPlayer?A.jsxs("span",{style:{margin:"0 8px",color:"#ef4444"},children:[Nt?"You":bt?.nickname||"Player",":  Didn't click"]},K):A.jsxs("span",{style:{margin:"0 8px",color:"#10b981"},children:[Nt?"You":bt?.nickname||"Player",":  Clicked"]},K)})})]}):ot.damage&&A.jsxs("div",{style:{background:"#dc2626",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",textAlign:"center"},children:[A.jsxs("div",{style:{color:"#fff",fontWeight:"bold",fontSize:"18px"},children:[" ",ot.damage.winner," won this round!"]}),A.jsxs("div",{style:{color:"#fecaca",marginTop:"4px"},children:[ot.damage.loser," lost ",ot.damage.amount.toLocaleString()," points",ot.damage.multiplier&&ot.damage.multiplier>1&&A.jsxs("span",{style:{color:"#fbbf24",fontWeight:"bold",marginLeft:"8px"},children:["(x",ot.damage.multiplier,")"]})]}),ot.damage.distances&&A.jsxs("div",{style:{color:"#fecaca",marginTop:"8px",fontSize:"14px"},children:["Distances: ",Object.entries(ot.damage.distances).map(([K,it])=>{const bt=ot.players[K],Nt=K===r?.uid;return A.jsxs("span",{style:{margin:"0 8px"},children:[Nt?"You":bt?.nickname||"Player",": ",HP(it)]},K)})]})]}),A.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginBottom:"1rem"},children:Object.entries(ot.players).map(([K,it])=>{const bt=K===r?.uid,Nt=it?.hp??6e3;return A.jsxs("div",{style:{background:bt?"#374151":"#111827",padding:"1rem",borderRadius:"8px",border:bt?"2px solid #8b5cf6":"1px solid #374151",minWidth:"150px",textAlign:"center"},children:[A.jsx("div",{style:{fontWeight:"bold",color:bt?"#8b5cf6":"#d1d5db"},children:bt?"You":it?.nickname||"Opponent"}),A.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:Nt<=0?"#ef4444":"#10b981",marginTop:"4px"},children:[Nt.toLocaleString()," pts"]})]},K)})}),A.jsxs("div",{style:{textAlign:"center",color:"#9ca3af"},children:[A.jsx("div",{style:{fontSize:"18px",marginBottom:"8px"},children:l==="finished"?"Showing final results...":"Next round in:"}),A.jsx("div",{style:{fontSize:"48px",fontWeight:"bold",color:D<=3?"#ef4444":"#f1c40f",textShadow:"0 0 10px rgba(241, 196, 15, 0.5)"},children:D})]})]})}),r&&l===Yt.MATCHED&&y&&!J&&A.jsxs("div",{style:{marginBottom:"1rem"},children:[St==="Desconectado"&&A.jsx("div",{style:{background:"#ef4444",color:"#fff",padding:"8px 16px",borderRadius:"8px",textAlign:"center",fontSize:"14px",fontWeight:"bold"},children:" Oponente desconectado - Partida terminar automticamente"}),St==="Activo"&&A.jsx("div",{style:{background:"#10b981",color:"#fff",padding:"8px 16px",borderRadius:"8px",textAlign:"center",fontSize:"14px",fontWeight:"bold"},children:" Oponente conectado"})]}),r&&l===Yt.MATCHED&&y&&!J&&A.jsxs("div",{style:{marginTop:"1rem"},children:[A.jsxs("div",{style:{marginBottom:"1rem",color:"#fff"},children:[A.jsxs("h3",{style:{margin:0},children:["Match found! Round ",y.round||1]}),y.round>=4&&A.jsxs("div",{style:{marginTop:8,padding:"4px 8px",backgroundColor:"#dc2626",color:"#fff",borderRadius:"6px",fontSize:"14px",fontWeight:"bold",display:"inline-block"},children:[" Multiplicador de dao: x",(1.5+(y.round-4)*.5).toFixed(1)]}),A.jsxs("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"1rem"},children:[A.jsx("div",{style:{fontSize:"18px",color:"#9ca3af",marginBottom:"8px"},children:"Tiempo restante:"}),A.jsx("div",{style:{fontSize:"48px",fontWeight:"bold",color:wn<=10?"#ef4444":wn<=30?"#f59e0b":"#10b981",textShadow:"0 0 10px rgba(16, 185, 129, 0.5)"},children:wn}),wn<=10&&!zt&&A.jsx("div",{style:{fontSize:"14px",color:"#ffffff",fontWeight:"bold",marginTop:"8px",textShadow:"0 0 5px rgba(0, 0, 0, 0.8)"},children:" Automatic elimination if you don't verify!"}),wn<=10&&zt&&A.jsx("div",{style:{fontSize:"14px",color:"#10b981",fontWeight:"bold",marginTop:"8px",textShadow:"0 0 5px rgba(16, 185, 129, 0.5)"},children:" You already clicked - Waiting for opponent..."})]}),A.jsx("div",{style:{display:"flex",gap:16,justifyContent:"center",marginTop:12},children:Object.entries(y.players||{}).map(([K,it])=>A.jsxs("div",{style:{background:"#2c3e50",padding:"12px 16px",borderRadius:"8px",border:K===r.uid?"2px solid #3498db":"2px solid transparent"},children:[A.jsx("div",{style:{fontWeight:700,color:"#fff"},children:it.nickname||(K===r.uid?n||"You":"Opponent")}),A.jsxs("div",{style:{color:"#ecf0f1"},children:["Points: ",(it.hp??6e3).toLocaleString()]})]},K))})]}),!W&&A.jsx("div",{style:{marginTop:"1rem",color:"#fbbf24"},children:oe?"Loading round...":"Waiting for round..."}),lt.length>0&&A.jsx("div",{className:"gallery",children:lt.map(K=>A.jsx("div",{className:`gallery-item ${W?.id===K.id?"active":""}`,onClick:()=>{et(K),k(K.photo)},children:A.jsx("img",{src:K.photo})},K.id))}),W&&A.jsx("div",{className:"map-wrapper",children:A.jsxs(xc,{center:[20,0],zoom:2,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,style:{height:"100%",width:"100%"},children:[A.jsx(Rc,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OSM</a>  <a href="https://carto.com/">CARTO</a>',noWrap:!0}),A.jsx(Cc,{}),A.jsx(Zi,{}),ht&&A.jsx(is,{position:[ht.lat,ht.lng]}),zt&&!J&&A.jsx(A.Fragment,{children:ht&&A.jsx(is,{position:[ht.lat,ht.lng]})})]})}),W&&!zt&&ht&&!j&&A.jsx("div",{style:{marginTop:"12px",color:"#d1d5db",fontSize:"14px"},children:"Haz click en el mapa para cambiar la posicin"}),W&&!zt&&ht&&!j&&A.jsx("button",{onClick:async()=>{if(!(!W||!ht||j)){B(!0);try{const K=BP(W.lat,W.lon,ht.lat,ht.lng);Pt(K),V(!0),N(!0);const it=Jt(Dt,"duel_matches",p);await Hi(Dt,async bt=>{const Nt=await bt.get(it);if(!Nt.exists())return;const Rt={...Nt.data().players};Rt[r.uid]&&(Rt[r.uid]={...Rt[r.uid],lastActivity:new Date}),bt.update(it,{players:Rt})}),await kP(p,r.uid,K,{lat:ht.lat,lng:ht.lng})}catch(K){console.error("Error enviando guess:",K),B(!1)}}},style:{marginTop:"18px",padding:"0.6rem 1.2rem",backgroundColor:"#27ae60",color:"white",border:"none",borderRadius:"10px",cursor:"pointer"},children:"Verify"}),j&&A.jsx("div",{style:{marginTop:"18px",padding:"0.6rem 1.2rem",backgroundColor:"#95a5a6",color:"white",borderRadius:"10px",textAlign:"center"},children:"Procesando..."}),zt&&!J&&A.jsxs("div",{className:"result-panel",children:[A.jsxs("h3",{style:{margin:0},children:["Round ",y.round||1]}),y.round>=4&&A.jsxs("div",{style:{marginTop:8,padding:"4px 8px",backgroundColor:"#dc2626",color:"#fff",borderRadius:"6px",fontSize:"14px",fontWeight:"bold",display:"inline-block"},children:[" Multiplicador de dao: x",(1.5+(y.round-4)*.5).toFixed(1)]}),A.jsx("div",{style:{marginTop:16,color:"#fbbf24",fontSize:"18px",fontWeight:"bold"},children:" Waiting for opponent..."})]})]}),l===Yt.FINISHED&&y&&A.jsxs("div",{className:"result-panel",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[A.jsx("h2",{style:{margin:0,color:"#fff"},children:" Game finished!"}),console.log("Game Over screen - match.players:",y.players),A.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",borderRadius:"8px",padding:"1rem",margin:"1rem 0",textAlign:"center"},children:[A.jsxs("div",{style:{color:"#fff",fontSize:"18px",marginBottom:"8px"},children:[" Duel: ",Object.entries(y.players||{}).map(([K,it])=>{const bt=K===r?.uid;return A.jsx("span",{style:{color:bt?"#fbbf24":"#ecf0f1",fontWeight:"bold",margin:"0 4px"},children:bt?"You":it?.nickname||"Player"},K)}).reduce((K,it,bt)=>[K,bt===1?" vs ":"",it])]}),A.jsxs("div",{style:{color:"#ecf0f1",fontSize:"16px",marginBottom:"8px"},children:["Rounds played: ",y.round||1]}),A.jsxs("div",{style:{color:"#ecf0f1",fontSize:"16px"},children:["Final points: ",Object.entries(y.players||{}).map(([K,it])=>{const bt=K===r?.uid;return A.jsxs("span",{style:{color:bt?"#fbbf24":"#ecf0f1",fontWeight:"bold",margin:"0 8px"},children:[bt?"You":it?.nickname||"Player",": ",(it?.hp??0).toLocaleString()]},K)}).reduce((K,it,bt)=>[K,bt===1?" | ":"",it])]})]}),y.loadingTimeout?A.jsx("div",{style:{marginTop:12,fontSize:"24px",fontWeight:"bold",color:"#e74c3c"},children:" Match ended due to loading timeout!"}):y.doubleTimeout?A.jsx("div",{style:{marginTop:12,fontSize:"24px",fontWeight:"bold",color:"#e74c3c"},children:" Both players lost due to timeout!"}):x?A.jsxs("div",{style:{marginTop:12,fontSize:"24px",fontWeight:"bold",color:"#fbbf24"},children:["Winner: ",x.nickname||"Opponent"]}):null,A.jsx("div",{style:{marginTop:8,color:"#ecf0f1"},children:(()=>{if(y.loadingTimeout)return" The host disconnected during loading. No winners!";if(y.doubleTimeout)return" Neither player verified in time. Both lost!";if(x){const K=x.uid===r?.uid;return console.log("Message check - Winner UID:",x?.uid,"User UID:",r?.uid,"Is winner:",K),K?"Congratulations on the victory! ":"Better luck next time! "}return""})()}),A.jsx("button",{onClick:async()=>{console.log(" Reiniciando juego - limpiando todo el estado"),await li();try{const K=Jt(Dt,"duel_queue",r.uid);await nu(K),console.log(" Queue document deleted completely")}catch(K){console.log(" Error deleting queue document:",K)}h(Yt.IDLE),v(null),E(null),P(null),et(null),Tt([]),yt(null),Pt(null),V(!1),B(!1),N(!1),At(!1),te(null),ut(10),rt(new Set),je(0),Oe.current=0,Be.current=null,ge&&(clearTimeout(ge),de(null)),console.log(" Estado completamente limpiado"),console.log(" Volviendo a la vista de duels para buscar nueva partida"),window.location.href="?view=duels"},style:{marginTop:16,padding:"0.7rem 1.2rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",boxShadow:"0 6px 14px rgba(239,68,68,0.25)"},children:"Play again"})]}),O&&A.jsxs("div",{className:"lightbox-backdrop",onClick:()=>k(null),children:[A.jsx("button",{className:"lightbox-close",onClick:()=>k(null),children:"Cerrar"}),A.jsx("img",{className:"lightbox-img",src:O,alt:"Foto"})]}),A.jsxs("div",{style:{position:"fixed",bottom:10,right:10,fontSize:"10px",color:"#666",background:"rgba(255,255,255,0.9)",padding:"4px 8px",borderRadius:"4px",zIndex:1e3},children:["Images: ",A.jsx("a",{href:"https://inaturalist.org",target:"_blank",rel:"noopener noreferrer",style:{color:"#10b981"},children:"iNaturalist"})]})]})}function KP(){const[r,t]=G.useState(null),[n,o]=G.useState(""),[l,h]=G.useState(null),[p,v]=G.useState(null),[y,E]=G.useState([]),[x,P]=G.useState(""),[M,q]=G.useState(""),[W,et]=G.useState(!1),[lt,Tt]=G.useState(null),[ht,yt]=G.useState(null);G.useEffect(()=>{const V=gu(Tn,async O=>{if(t(O||null),O){const k=await qi(Jt(Dt,"users",O.uid));o(k.exists()&&k.data()?.nickname||"")}});return()=>V()},[]),G.useEffect(()=>{if(!l||!r)return;const V=dw(l,j=>{v(j),j?.duelMatchId&&(Tt(j.duelMatchId),window.location.href=`?view=duels&match=${j.duelMatchId}`),j?.gameId&&(yt(j.gameId),window.location.href=`?view=multiplayer&game=${j.gameId}`)}),O=mw(l,E),k=DP(l,r.uid,j=>{j?.gameId&&(console.log(" Game ready notification received, navigating..."),yt(j.gameId),window.location.href=`?view=multiplayer&game=${j.gameId}`)});return()=>{V(),O(),k()}},[l,r]);async function Ht(){q(""),et(!0);try{const V=await hw(n);h(V.roomId)}catch(V){console.error("createRoom error",V),q(V?.message||"No se pudo crear la sala")}finally{et(!1)}}async function Pt(){q(""),et(!0);try{const V=await fw(x.trim().toUpperCase(),n);h(V)}catch(V){console.error("joinRoom error",V),q(V?.message||"No se pudo unir")}finally{et(!1)}}async function zt(){l&&await pw(l),h(null),v(null),E([]),Tt(null)}return r?l?A.jsx("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:A.jsxs("div",{style:{background:"#111827",padding:24,borderRadius:12,color:"#fff",width:560,textAlign:"center"},children:[A.jsxs("h2",{style:{marginTop:0},children:["Room: ",p?.code||""]}),A.jsx("div",{style:{display:"flex",gap:8,justifyContent:"center",flexWrap:"wrap"},children:y.map(V=>A.jsx("div",{style:{background:"#0b1220",padding:10,borderRadius:8},children:A.jsx("div",{style:{fontWeight:700},children:V.nickname||V.id})},V.id))}),lt?A.jsx("div",{style:{marginTop:12},children:A.jsx("div",{style:{color:"#10b981",fontWeight:600},children:"Redirigiendo al duelo..."})}):ht?A.jsx("div",{style:{marginTop:12},children:A.jsx("div",{style:{color:"#10b981",fontWeight:600},children:"Redirigiendo al juego multijugador..."})}):p?.hostUid===r.uid&&y.length>=2?A.jsxs("div",{style:{marginTop:12,display:"flex",gap:"8px",justifyContent:"center",flexWrap:"wrap"},children:[A.jsx("button",{onClick:async()=>{q(""),et(!0);try{const V=await NP(l);Tt(V),window.location.href=`?view=duels&match=${V}`}catch(V){console.error("create duel from room",V),q(V?.message||"No se pudo iniciar el duelo")}finally{et(!1)}},disabled:W,style:{padding:"0.6rem 1rem",background:W?"#6b7280":"#8b5cf6",color:"#fff",border:"none",borderRadius:8,cursor:W?"not-allowed":"pointer",fontWeight:600},children:W?"Iniciando...":"Iniciar duelo (1v1)"}),A.jsx("button",{onClick:async()=>{q(""),et(!0);try{const V=await gw(l);yt(V),console.log(" Juego multijugador creado:",V)}catch(V){console.error("create multiplayer game from room",V),q(V?.message||"No se pudo iniciar el juego multijugador")}finally{et(!1)}},disabled:W,style:{padding:"0.6rem 1rem",background:W?"#6b7280":"#f59e0b",color:"#fff",border:"none",borderRadius:8,cursor:W?"not-allowed":"pointer",fontWeight:600},children:W?"Starting...":`Start multiplayer (${y.length} players)`})]}):y.length<2&&A.jsx("div",{style:{marginTop:12,color:"#fbbf24"},children:"Waiting for more players... (2/2)"}),M&&A.jsx("div",{style:{marginTop:10,color:"#fca5a5",fontSize:12},children:M}),A.jsx("div",{style:{marginTop:12},children:A.jsx("button",{onClick:zt,style:{padding:"0.6rem 1rem",background:"#ef4444",color:"#fff",border:"none",borderRadius:8,cursor:"pointer"},children:"Leave room"})})]})}):A.jsx("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:A.jsxs("div",{style:{background:"#111827",padding:24,borderRadius:12,color:"#fff",width:520,textAlign:"center"},children:[A.jsx("h2",{style:{marginTop:0},children:"Private rooms"}),A.jsxs("div",{children:["Tu nick: ",A.jsx("b",{children:n||r.email})]}),A.jsx("div",{style:{display:"flex",gap:10,justifyContent:"center",marginTop:12},children:A.jsx("button",{onClick:Ht,disabled:W,style:{padding:"0.6rem 1rem",background:W?"#6b7280":"#10b981",color:"#fff",border:"none",borderRadius:8,cursor:W?"not-allowed":"pointer",fontWeight:600},children:W?"Creando...":"Crear sala"})}),A.jsxs("div",{style:{marginTop:14},children:[A.jsx("input",{value:x,onChange:V=>P(V.target.value),placeholder:"CDIGO",style:{padding:"0.5rem 0.8rem",borderRadius:8,border:"1px solid #374151",background:"#0b1220",color:"#fff"}}),A.jsx("button",{onClick:Pt,disabled:W,style:{marginLeft:8,padding:"0.6rem 1rem",background:W?"#6b7280":"#8b5cf6",color:"#fff",border:"none",borderRadius:8,cursor:W?"not-allowed":"pointer"},children:"Unirse"})]}),M&&A.jsx("div",{style:{marginTop:10,color:"#fca5a5",fontSize:12},children:M})]})}):A.jsx("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:A.jsxs("div",{style:{background:"#111827",padding:24,borderRadius:12,color:"#fff",width:480,textAlign:"center"},children:[A.jsx("h2",{style:{marginTop:0},children:"Private rooms"}),A.jsx("p",{style:{opacity:.85,marginBottom:20},children:"Inicia sesin para crear o unirte a una sala."}),A.jsx("button",{onClick:()=>window.location.href="?view=login",style:{padding:"0.6rem 1rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600},children:"Iniciar sesin"})]})})}function XP(){const[r,t]=G.useState(null),[n,o]=G.useState(""),[l,h]=G.useState(null),[p,v]=G.useState(null),[y,E]=G.useState([]),[x,P]=G.useState(""),[M,q]=G.useState(""),[W,et]=G.useState(!1),[lt,Tt]=G.useState(null),[ht,yt]=G.useState(null),[Ht,Pt]=G.useState("lobby"),[zt,V]=G.useState(null),[O,k]=G.useState(null),[j,B]=G.useState([]),[H,N]=G.useState(null),[ge,de]=G.useState(null),[J,At]=G.useState(null),[ot,te]=G.useState(!1),[D,ut]=G.useState(1),[wt,rt]=G.useState(0),[Et,xt]=G.useState(!1),[St,Ee]=G.useState(null),[ce,je]=G.useState(!1),[Oe,Be]=G.useState(!1),[oe,nn]=G.useState(null),[wn,Hn]=G.useState(10),[Ti,rn]=G.useState(new Set),[Nn,Kn]=G.useState(!1),Xn=5,sn=G.useRef(0),Ei=G.useRef(null);function De(ct,It,_t,Qt){const Ft=$n=>$n*Math.PI/180,Wt=Ft(_t-ct),Fe=Ft(Qt-It),qn=Math.sin(Wt/2)**2+Math.cos(Ft(ct))*Math.cos(Ft(_t))*Math.sin(Fe/2)**2;return 6371*2*Math.atan2(Math.sqrt(qn),Math.sqrt(1-qn))}function li(ct){return ct==null||isNaN(ct)?"":ct<1?`${Math.round(ct*1e3).toLocaleString()} m`:`${Math.round(ct).toLocaleString()} km`}function Zi(ct,It){const _t=ct>=0?"N":"S",Qt=It>=0?"E":"W",$t=Math.abs(ct).toFixed(1),Ft=Math.abs(It).toFixed(1);return`${$t}${_t}, ${Ft}${Qt}`}const le=[{name:"North America",bbox:[-170,5,-50,75],weight:.5},{name:"South America",bbox:[-82,-56,-34,12],weight:1},{name:"Europe",bbox:[-31,34,45,72],weight:.5},{name:"Africa",bbox:[-20,-35,52,37],weight:1},{name:"Asia",bbox:[25,-10,180,55],weight:1},{name:"Oceania",bbox:[110,-50,180,0],weight:.5}];function ve(){const ct=le.reduce((_t,Qt)=>_t+Qt.weight,0);let It=Math.random()*ct;for(const _t of le)if(It-=_t.weight,It<=0)return _t;return le[le.length-1]}function pn(ct){let It=0;for(let _t=0;_t<ct.length;_t++){const Qt=ct.charCodeAt(_t);It=(It<<5)-It+Qt,It=It&It}return Math.abs(It)/2147483647}async function K(ct,It){if(Et)return;console.log("Starting loadObservationForGame, isLoading:",Et,"gameData:",ct),xt(!0),N(null),de(null),te(!1),console.log("Host loading observation for round:",ct.round);const _t=`${ct.id||ct.gameId}_${ct.round}`;console.log(" Using deterministic seed:",_t);const Qt=15;let $t=0;for(await new Promise(Ft=>setTimeout(Ft,1e3));$t<Qt;){$t++,console.log(`Attempt ${$t}/${Qt}`);try{const Ft=ve(),[Wt,Fe,qn,$n]=Ft.bbox,or=`https://api.inaturalist.org/v1/observations?photos=true&quality_grade=research&order=desc&per_page=100&geo=true&geoprivacy=open&page=${Math.floor(Math.random()*100)}&swlat=${Fe}&swlng=${Wt}&nelat=${$n}&nelng=${qn}&taxon_id=3&captive=false`,Ge=await fetch(or);if(Ge.status===429){console.log(" Request limit, waiting 500ms..."),await new Promise(be=>setTimeout(be,500));continue}const fn=await Ge.json();if(!fn.results||fn.results.length===0)continue;const on=(fn.results||[]).filter(be=>be.photos&&be.photos.length&&be.geojson?.coordinates&&be.geojson.type==="Point");if(!on.length){console.log("No valid observations found");continue}const bi=Math.floor(pn(_t+"_base")*on.length),Fn=on[bi],Bt=Fn.geojson.coordinates[1],Wi=Fn.geojson.coordinates[0],Ds=Zi(Bt,Wi),Ar=`https://api.inaturalist.org/v1/observations?photos=true&quality_grade=research&order=desc&per_page=100&geo=true&geoprivacy=open&coordinates_obscured=false&lat=${Bt}&lng=${Wi}&radius=50&taxon_id=3&captive=false`,Yi=await fetch(Ar);if(Yi.status===429){console.log(" Cluster request limit, waiting 500ms..."),await new Promise(be=>setTimeout(be,500));continue}const ui=await Yi.json();if(!ui.results||ui.results.length<8)continue;const ci=ui.results.filter(be=>be.photos&&be.photos.length&&be.geojson?.coordinates&&be.geojson.type==="Point");if(ci.length>=8){const be=new Map;ci.forEach(An=>{const Qi=An.taxon?.preferred_common_name||An.taxon?.name||"Unknown";be.has(Qi)||be.set(Qi,An)});let Sn;be.size>=8?Sn=[...Array.from(be.values())].sort((hi,wi)=>{const as=pn(_t+"_shuffle_"+hi.id),Hr=pn(_t+"_shuffle_"+wi.id);return as-Hr}).slice(0,8):Sn=[...ci].sort((Qi,hi)=>{const wi=pn(_t+"_shuffle_"+Qi.id),as=pn(_t+"_shuffle_"+hi.id);return wi-as}).slice(0,8);const an=Sn.map(An=>({id:An.id,photo:An.photos[0].url.replace("square","large"),lat:An.geojson.coordinates[1],lon:An.geojson.coordinates[0],species:An.taxon?.preferred_common_name||An.taxon?.name,hotspot:Ds}));if(console.log("Found 8 items, saving to game:",an.length),lt&&ct?.round){console.log(" Saving round data to Firestore - GameId:",lt,"Round:",ct.round);try{await zP(lt,ct.round,{items:an,index:0}),console.log(" Saved round data to game successfully")}catch(An){console.error(" Error saving round data:",An)}}else console.log(" Cannot save round data - GameId:",lt,"Round:",ct?.round);xt(!1);return}await new Promise(be=>setTimeout(be,200))}catch(Ft){console.error(`Error en intento ${$t}:`,Ft),await new Promise(Wt=>setTimeout(Wt,500))}}console.error(" No valid cluster found after several attempts"),q("Error loading observations. The iNaturalist API is experiencing problems. Try again in a few minutes."),xt(!1)}function it(){return qp({click(ct){ce||ot||N(ct.latlng)}}),null}function bt(){const ct=Hc(),It=G.useRef(!1);return G.useEffect(()=>{if(!(!oe||!oe.observation)&&!It.current){const _t=[oe.observation.lat,oe.observation.lon];ct.setView(_t,ct.getZoom(),{animate:!1}),It.current=!0}},[oe]),G.useEffect(()=>{It.current=!1},[oe]),null}async function Nt(){if(!(!O||!H||ce)){je(!0);try{const ct=De(O.lat,O.lon,H.lat,H.lng);de(ct),te(!0),Kn(!0),await UP(lt,r.uid,ct,{lat:H.lat,lng:H.lng})}catch(ct){console.error("Error enviando guess:",ct),je(!1)}}}G.useEffect(()=>{const ct=gu(Tn,async It=>{if(t(It||null),It){const _t=await qi(Jt(Dt,"users",It.uid));o(_t.exists()&&_t.data()?.nickname||"")}});return()=>ct()},[]),G.useEffect(()=>{if(!l)return;const ct=dw(l,_t=>{console.log(" Room update:",_t),v(_t),_t?.gameId&&(console.log(" Game ID detected in room:",_t.gameId),Tt(_t.gameId),Pt("playing"))}),It=mw(l,_t=>{console.log(" Players update:",_t),E(_t)});return()=>{ct(),It()}},[l]),G.useEffect(()=>{if(!lt)return;const ct=Os(Jt(Dt,"multiplayer_games",lt),It=>{if(It.exists()){const _t={id:It.id,...It.data()};yt(_t),_t.state==="finished"&&Ht!=="finished"&&console.log(" Game finished in Firestore, but waiting to show last round results first");const Qt=_t.round||1,$t=_t.rounds?.[Qt];if(console.log(" Game update - Round:",Qt,"Round data:",$t,"User:",r?.uid,"Host:",_t.hostUid),Qt!==sn.current&&!Nn){if(console.log("Round change detected, resetting state from round",sn.current,"to round",Qt),sn.current>0){const Ft=sn.current,Wt=_t.rounds?.[Ft];console.log("Showing results for completed round:",Ft,"Data:",Wt),Wt&&Wt.guesses&&Wt.results&&!Oe&&!Ti.has(Ft)?(console.log(" All players finished round, showing results for round",Ft),console.log(" Round data:",{guesses:Object.keys(Wt.guesses).length,results:Wt.results,players:Object.keys(_t.players).length}),nn({round:Ft,observation:Wt.items?.[Wt.index],guesses:Wt.guesses,results:Wt.results,players:_t.players}),Be(!0),rn(Fe=>new Set([...Fe,Ft]))):console.log(" Not showing results:",{hasRoundData:!!Wt,hasGuesses:!!Wt?.guesses,hasResults:!!Wt?.results,showResults:Oe,isProcessed:Ti.has(Ft)})}N(null),de(null),te(!1),je(!1),Kn(!1),sn.current=Qt}if($t&&$t.items&&typeof $t.index=="number"){console.log(" Loading round data for all players"),B($t.items);const Ft=$t.items[$t.index];k(Ft)}else r&&_t.hostUid===r.uid&&!$t?(console.log(" Host loading observation for round:",Qt),K(_t,r.uid)):$t||console.log(" Non-host waiting for host to load round data")}});return()=>ct()},[lt,r]);const kt=G.useRef(null);G.useEffect(()=>()=>{kt.current&&(clearInterval(kt.current),kt.current=null)},[]),G.useEffect(()=>{if(Oe&&oe)return kt.current&&clearInterval(kt.current),Hn(10),kt.current=setInterval(()=>{Hn(ct=>{if(ct<=1){kt.current&&(clearInterval(kt.current),kt.current=null),Be(!1),nn(null);const It=ht?.maxRounds||5,_t=oe?.round||0;if(_t>=5||_t>=It){if(console.log(" Last round completed, transitioning to finished state"),Pt("finished"),ht?.players){const Qt=Object.entries(ht.players).reduce(($t,[Ft,Wt])=>(Wt.totalScore||0)>($t.totalScore||0)?{uid:Ft,...Wt}:$t,{totalScore:0});V(Qt.uid),console.log(" Winner calculated:",Qt.uid,"with score:",Qt.totalScore)}}else Ht!=="finished"&&(N(null),de(null),te(!1),je(!1),Kn(!1));return 0}return ct-1})},1e3),()=>{kt.current&&(clearInterval(kt.current),kt.current=null)}},[Oe,oe]);async function Rt(){q(""),et(!0);try{const ct=await hw(n);h(ct.roomId)}catch(ct){console.error("createRoom error",ct),q(ct?.message||"No se pudo crear la sala")}finally{et(!1)}}async function Ot(){q(""),et(!0);try{const ct=await fw(x.trim().toUpperCase(),n);h(ct)}catch(ct){console.error("joinRoom error",ct),q(ct?.message||"No se pudo unir")}finally{et(!1)}}async function me(){l&&await pw(l),h(null),v(null),E([]),Tt(null),yt(null),Pt("lobby")}async function pe(){q(""),et(!0);try{const ct=await gw(l);Tt(ct),Pt("playing")}catch(ct){console.error("create multiplayer game error",ct),q(ct?.message||"No se pudo iniciar el juego")}finally{et(!1)}}if(!r)return A.jsx("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:A.jsxs("div",{style:{background:"#111827",padding:24,borderRadius:12,color:"#fff",width:480,textAlign:"center"},children:[A.jsx("h2",{style:{marginTop:0},children:"Multiplayer Game"}),A.jsx("p",{style:{opacity:.85,marginBottom:20},children:"Sign in to play."}),A.jsx("button",{onClick:()=>window.location.href="?view=login",style:{padding:"0.6rem 1rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600},children:"Sign In"})]})});if(Ht==="lobby")return l?A.jsx("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:A.jsxs("div",{style:{background:"#111827",padding:24,borderRadius:12,color:"#fff",width:560,textAlign:"center"},children:[A.jsxs("h2",{style:{marginTop:0},children:["Room: ",p?.code||""]}),A.jsx("div",{style:{display:"flex",gap:8,justifyContent:"center",flexWrap:"wrap"},children:y.map(ct=>A.jsx("div",{style:{background:"#0b1220",padding:10,borderRadius:8},children:A.jsx("div",{style:{fontWeight:700},children:ct.nickname||ct.id})},ct.id))}),lt?A.jsx("div",{style:{marginTop:12},children:A.jsx("div",{style:{color:"#10b981",fontWeight:600},children:"Redirigiendo al juego..."})}):p?.hostUid===r.uid&&y.length>=2&&y.length<=10?A.jsx("div",{style:{marginTop:12},children:A.jsx("button",{onClick:pe,disabled:W,style:{padding:"0.6rem 1rem",background:W?"#6b7280":"#8b5cf6",color:"#fff",border:"none",borderRadius:8,cursor:W?"not-allowed":"pointer",fontWeight:600},children:W?"Starting...":"Start multiplayer game"})}):y.length<2?A.jsxs("div",{style:{marginTop:12,color:"#fbbf24"},children:["Waiting for more players... (",y.length,"/2-10)"]}):y.length>10?A.jsxs("div",{style:{marginTop:12,color:"#fca5a5"},children:["Too many players (",y.length,"/10 maximum)"]}):null,M&&A.jsx("div",{style:{marginTop:10,color:"#fca5a5",fontSize:12},children:M}),A.jsx("div",{style:{marginTop:12},children:A.jsx("button",{onClick:me,style:{padding:"0.6rem 1rem",background:"#ef4444",color:"#fff",border:"none",borderRadius:8,cursor:"pointer"},children:"Leave room"})})]})}):A.jsx("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:A.jsxs("div",{style:{background:"#111827",padding:24,borderRadius:12,color:"#fff",width:520,textAlign:"center"},children:[A.jsx("h2",{style:{marginTop:0},children:"Multiplayer Game (2-10 players)"}),A.jsxs("div",{children:["Your nick: ",A.jsx("b",{children:n||r.email})]}),A.jsx("div",{style:{display:"flex",gap:10,justifyContent:"center",marginTop:12},children:A.jsx("button",{onClick:Rt,disabled:W,style:{padding:"0.6rem 1rem",background:W?"#6b7280":"#10b981",color:"#fff",border:"none",borderRadius:8,cursor:W?"not-allowed":"pointer",fontWeight:600},children:W?"Creating...":"Create room"})}),A.jsxs("div",{style:{marginTop:14},children:[A.jsx("input",{value:x,onChange:ct=>P(ct.target.value),placeholder:"CODE",style:{padding:"0.5rem 0.8rem",borderRadius:8,border:"1px solid #374151",background:"#0b1220",color:"#fff"}}),A.jsx("button",{onClick:Ot,disabled:W,style:{marginLeft:8,padding:"0.6rem 1rem",background:W?"#6b7280":"#8b5cf6",color:"#fff",border:"none",borderRadius:8,cursor:W?"not-allowed":"pointer"},children:"Join"})]}),M&&A.jsx("div",{style:{marginTop:10,color:"#fca5a5",fontSize:12},children:M})]})});if(Ht==="playing")return A.jsxs("div",{className:"container-narrow",style:{padding:"1rem",textAlign:"center"},children:[A.jsx("div",{style:{position:"fixed",left:12,top:12,zIndex:1e3},children:A.jsx("button",{onClick:()=>window.location.href="?view=menu",style:{padding:"6px 10px",borderRadius:8,border:"none",background:"#374151",color:"#fff",cursor:"pointer"},children:"Back"})}),A.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold"},children:"Birders Place - Multiplayer"}),ht&&A.jsxs("div",{style:{marginBottom:"1rem",color:"#fff"},children:[A.jsxs("h3",{style:{margin:0},children:["Round ",ht.round||1," / ",Xn]}),A.jsxs("div",{style:{fontSize:"12px",color:"#9ca3af",marginTop:"4px"},children:["Host: ",ht.hostUid===r?.uid?"You":"Other player"," | State: ",ht.state||"playing"]}),A.jsx("div",{style:{display:"flex",gap:8,justifyContent:"center",flexWrap:"wrap",marginTop:12},children:Object.entries(ht.players||{}).map(([ct,It])=>A.jsxs("div",{style:{background:"#2c3e50",padding:"8px 12px",borderRadius:"8px",border:ct===r.uid?"2px solid #3498db":"2px solid transparent"},children:[A.jsx("div",{style:{fontWeight:700,color:"#fff",fontSize:"14px"},children:It.nickname||(ct===r.uid?n||"You":"Player")}),A.jsxs("div",{style:{color:"#ecf0f1",fontSize:"12px"},children:["Points: ",(It.totalScore||0).toLocaleString()]})]},ct))})]}),!O&&A.jsx("div",{style:{marginTop:"1rem",color:"#fbbf24"},children:Et?A.jsxs("div",{children:[A.jsx("div",{children:"Loading round..."}),A.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",marginTop:"4px"},children:ht?.hostUid===r?.uid?"Searching for observations...":"Waiting for host to load the round..."})]}):M?A.jsxs("div",{children:[A.jsx("div",{style:{color:"#ef4444",marginBottom:"8px"},children:M}),ht?.hostUid===r?.uid&&A.jsx("button",{onClick:()=>{q(""),K(ht,r.uid)},style:{padding:"0.5rem 1rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px"},children:"Reintentar"})]}):"Waiting for round..."}),j.length>0&&A.jsx("div",{className:"gallery",children:j.map(ct=>A.jsx("div",{className:`gallery-item ${O?.id===ct.id?"active":""}`,onClick:()=>{k(ct),Ee(ct.photo)},children:A.jsx("img",{src:ct.photo})},ct.id))}),O&&A.jsx("div",{className:"map-wrapper",children:A.jsxs(xc,{center:[20,0],zoom:2,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,style:{height:"100%",width:"100%"},children:[A.jsx(Rc,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OSM</a>  <a href="https://carto.com/">CARTO</a>',noWrap:!0}),A.jsx(Cc,{}),A.jsx(it,{}),H&&A.jsx(is,{position:[H.lat,H.lng]}),ot&&!Oe&&A.jsx(A.Fragment,{children:H&&A.jsx(is,{position:[H.lat,H.lng]})})]})}),O&&!ot&&H&&!ce&&A.jsx("div",{style:{marginTop:"12px",color:"#d1d5db",fontSize:"14px"},children:"Haz click en el mapa para cambiar la posicin"}),O&&!ot&&H&&!ce&&A.jsx("button",{onClick:Nt,style:{marginTop:"18px",padding:"0.6rem 1.2rem",backgroundColor:"#27ae60",color:"white",border:"none",borderRadius:"10px",cursor:"pointer"},children:"Verify"}),ce&&A.jsx("div",{style:{marginTop:"18px",padding:"0.6rem 1.2rem",backgroundColor:"#95a5a6",color:"white",borderRadius:"10px",textAlign:"center"},children:"Procesando..."}),ot&&!Oe&&A.jsxs("div",{className:"result-panel",children:[A.jsxs("h3",{style:{margin:0},children:["Round ",ht?.round||1]}),A.jsx("div",{style:{marginTop:16,color:"#fbbf24",fontSize:"18px",fontWeight:"bold"},children:" Waiting for other players..."})]}),Oe&&oe&&A.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",zIndex:2e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem"},children:A.jsxs("div",{style:{background:"#1f2937",borderRadius:"12px",padding:"2rem",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflow:"auto"},children:[A.jsxs("h2",{style:{color:"#f1c40f",margin:"0 0 1rem 0",textAlign:"center"},children:["Round ",oe.round," - Results"]}),A.jsxs("div",{style:{background:"#374151",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",textAlign:"center"},children:[A.jsxs("div",{style:{color:"#d1d5db",fontSize:"16px",marginBottom:"8px"},children:[" Juego Multijugador: ",Object.entries(oe.players).map(([ct,It])=>{const _t=ct===r?.uid;return A.jsx("span",{style:{color:_t?"#8b5cf6":"#10b981",fontWeight:"bold",margin:"0 4px"},children:_t?"You":It?.nickname||"Player"},ct)}).reduce((ct,It,_t)=>[ct,_t===1?" vs ":"",It])]}),A.jsxs("div",{style:{color:"#9ca3af",fontSize:"14px"},children:["Rounds played: ",oe.round," | Total score: ",Object.entries(oe.players).map(([ct,It])=>{const _t=ct===r?.uid,Qt=It?.totalScore??0;return A.jsxs("span",{style:{color:_t?"#8b5cf6":"#10b981",fontWeight:"bold",margin:"0 8px"},children:[_t?"You":It?.nickname||"Player",": ",Qt.toLocaleString()]},ct)}).reduce((ct,It,_t)=>[ct,_t===1?" | ":"",It])]})]}),A.jsx("div",{style:{height:"300px",marginBottom:"1rem",borderRadius:"8px",overflow:"hidden"},children:A.jsxs(xc,{center:[20,0],zoom:2,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,style:{height:"100%",width:"100%"},children:[A.jsx(Rc,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OSM</a>  <a href="https://carto.com/">CARTO</a>',noWrap:!0}),A.jsx(Cc,{}),A.jsx(bt,{}),A.jsx(is,{position:[oe.observation.lat,oe.observation.lon],icon:Gp,children:A.jsx(Ic,{permanent:!0,direction:"top",offset:[-20,-25],className:"distance-tooltip",style:{background:"transparent",border:"none",boxShadow:"none",color:"#dc2626",fontWeight:"bold",fontSize:"14px",textAlign:"center",width:"40px",marginLeft:"-20px"},children:" REAL LOCATION"})}),Object.entries(oe.guesses).map(([ct,It],_t)=>{const Qt=ct===r?.uid,$t=oe.players[ct],Ft=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f97316","#ec4899","#6366f1"],Wt=Ft[_t%Ft.length];return A.jsx(is,{position:[It.guess.lat,It.guess.lng],children:A.jsx(Ic,{permanent:!0,direction:"top",offset:[-20,-25],className:"distance-tooltip",style:{background:"transparent",border:"none",boxShadow:"none",color:Wt,fontWeight:"bold",fontSize:"14px",textAlign:"center",width:"40px",marginLeft:"-20px"},children:Qt?"YOU":$t?.nickname||"Player"})},ct)})]})}),oe.results&&oe.results.rankings&&A.jsxs("div",{style:{background:"#374151",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:[A.jsx("h3",{style:{color:"#f1c40f",margin:"0 0 1rem 0",textAlign:"center"},children:"Total Ranking"}),A.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:oe.results.rankings.map((ct,It)=>{const _t=ct.uid===r?.uid,Qt=It===0?"":It===1?"":It===2?"":`${It+1}.`,$t=oe.players[ct.uid]?.totalScore||0;return A.jsxs("div",{style:{background:_t?"#1f2937":"#111827",padding:"12px",borderRadius:"8px",border:_t?"2px solid #8b5cf6":"1px solid #374151",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[A.jsx("span",{style:{fontSize:"18px"},children:Qt}),A.jsx("span",{style:{fontWeight:"bold",color:_t?"#8b5cf6":"#d1d5db"},children:_t?"You":ct.nickname})]}),A.jsxs("div",{style:{textAlign:"right"},children:[A.jsxs("div",{style:{color:"#f1c40f",fontWeight:"bold",fontSize:"16px"},children:[$t.toLocaleString()," pts"]}),A.jsxs("div",{style:{color:"#10b981",fontSize:"12px"},children:["+",ct.points.toLocaleString()," esta ronda"]}),A.jsx("div",{style:{color:"#9ca3af",fontSize:"11px"},children:li(ct.distance)})]})]},ct.uid)})})]}),A.jsx("div",{style:{textAlign:"center",color:"#9ca3af"},children:(()=>{const ct=ht?.maxRounds||5,It=oe?.round||0,_t=It>=5||It>=ct;return console.log(" Round detection:",{maxRounds:ct,currentRound:It,isLastRound:_t,status:Ht,gameMaxRounds:ht?.maxRounds}),A.jsxs(A.Fragment,{children:[A.jsx("div",{style:{fontSize:"18px",marginBottom:"8px"},children:Ht==="finished"?"Mostrando resultados finales...":_t?"View final results in:":"Next round in:"}),A.jsx("div",{style:{fontSize:"48px",fontWeight:"bold",color:wn<=3?"#ef4444":"#f1c40f",textShadow:"0 0 10px rgba(241, 196, 15, 0.5)"},children:wn}),_t&&Ht!=="finished"&&A.jsx("button",{onClick:()=>{if(Be(!1),nn(null),Pt("finished"),ht?.players){const Qt=Object.entries(ht.players).reduce(($t,[Ft,Wt])=>(Wt.totalScore||0)>($t.totalScore||0)?{uid:Ft,...Wt}:$t,{totalScore:0});V(Qt.uid)}},style:{marginTop:"20px",padding:"12px 24px",fontSize:"16px",fontWeight:"bold",color:"#fff",background:"linear-gradient(135deg, #f39c12 0%, #e67e22 100%)",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 8px rgba(243, 156, 18, 0.3)"},children:" Ver resultados finales ahora"})]})})()})]})}),St&&A.jsxs("div",{className:"lightbox-backdrop",onClick:()=>Ee(null),children:[A.jsx("button",{className:"lightbox-close",onClick:()=>Ee(null),children:"Cerrar"}),A.jsx("img",{className:"lightbox-img",src:St,alt:"Foto"})]})]});if(Ht==="finished"){const ct=ht?.players?Object.entries(ht.players).map(([It,_t])=>({uid:It,nickname:_t.nickname||"Player",totalScore:_t.totalScore||0})).sort((It,_t)=>_t.totalScore-It.totalScore):[];return A.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",position:"relative",overflow:"hidden"},children:[A.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%)",pointerEvents:"none"}}),A.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",borderRadius:"20px",padding:"40px",maxWidth:"600px",width:"100%",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)",position:"relative",zIndex:1},children:[A.jsxs("div",{style:{marginBottom:"30px"},children:[A.jsx("h1",{style:{margin:0,color:"#fff",fontSize:"36px",fontWeight:"bold",textShadow:"0 4px 8px rgba(0, 0, 0, 0.3)",marginBottom:"10px"},children:" Juego Terminado! "}),A.jsxs("div",{style:{fontSize:"18px",color:"#a0a0a0",marginBottom:"20px"},children:[ht?.maxRounds||5," rondas completadas"]})]}),A.jsxs("div",{style:{background:"linear-gradient(135deg, #ffd700 0%, #ffed4e 100%)",borderRadius:"15px",padding:"20px",marginBottom:"30px",border:"3px solid #ffd700",boxShadow:"0 10px 20px rgba(255, 215, 0, 0.3)",position:"relative"},children:[A.jsx("div",{style:{fontSize:"24px",marginBottom:"10px"},children:""}),A.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#1a1a2e",marginBottom:"5px"},children:ht?.players?.[zt]?.nickname||"Player"}),A.jsx("div",{style:{fontSize:"18px",color:"#1a1a2e",opacity:.8},children:"Felicidades por la victoria!"}),A.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#1a1a2e",marginTop:"10px"},children:[ht?.players?.[zt]?.totalScore?.toLocaleString()||0," points"]})]}),A.jsxs("div",{style:{marginBottom:"30px"},children:[A.jsx("h3",{style:{color:"#fff",fontSize:"24px",marginBottom:"20px",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)"},children:"Clasificacin Final"}),A.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:ct.map((It,_t)=>{const Qt=It.uid===r?.uid,$t=_t<3;let Ft,Wt,Fe;return _t===0?(Ft="linear-gradient(135deg, #ffd700 0%, #ffed4e 100%)",Wt="#ffd700",Fe="#1a1a2e"):_t===1?(Ft="linear-gradient(135deg, #c0c0c0 0%, #e8e8e8 100%)",Wt="#c0c0c0",Fe="#1a1a2e"):_t===2?(Ft="linear-gradient(135deg, #cd7f32 0%, #daa520 100%)",Wt="#cd7f32",Fe="#1a1a2e"):(Ft=Qt?"rgba(139, 92, 246, 0.3)":"rgba(255, 255, 255, 0.1)",Wt=Qt?"#8b5cf6":"rgba(255, 255, 255, 0.2)",Fe="#fff"),A.jsxs("div",{style:{background:Ft,borderRadius:"12px",padding:"16px",border:`2px solid ${Wt}`,display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:$t?"0 8px 16px rgba(0, 0, 0, 0.2)":"0 4px 8px rgba(0, 0, 0, 0.1)",transform:$t?"scale(1.02)":"scale(1)",transition:"all 0.3s ease"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[A.jsx("div",{style:{fontSize:"24px",minWidth:"30px",textAlign:"center"},children:_t===0?"":_t===1?"":_t===2?"":`${_t+1}.`}),A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:"bold",fontSize:"18px",color:Fe,textShadow:$t?"0 1px 2px rgba(0, 0, 0, 0.1)":"none"},children:Qt?"You":It.nickname}),Qt&&A.jsx("div",{style:{fontSize:"12px",color:Fe,opacity:.8},children:"(Jugador actual)"})]})]}),A.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:Fe,textShadow:$t?"0 1px 2px rgba(0, 0, 0, 0.1)":"none"},children:[It.totalScore.toLocaleString()," pts"]})]},It.uid)})})]}),A.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center",flexWrap:"wrap"},children:[A.jsx("button",{onClick:()=>{Pt("lobby"),Tt(null),yt(null),V(null),k(null),B([]),N(null),de(null),te(!1),je(!1),Be(!1),nn(null),Hn(10),rn(new Set),Kn(!1),q(null),et(!1),sn.current=0,Ei.current=null},style:{padding:"15px 30px",fontSize:"16px",fontWeight:"bold",color:"#fff",background:"linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)",border:"none",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 8px rgba(231, 76, 60, 0.3)",minWidth:"140px"},onMouseOver:It=>{It.target.style.transform="translateY(-2px)",It.target.style.boxShadow="0 6px 12px rgba(231, 76, 60, 0.4)"},onMouseOut:It=>{It.target.style.transform="translateY(0)",It.target.style.boxShadow="0 4px 8px rgba(231, 76, 60, 0.3)"},children:" Jugar de nuevo"}),A.jsx("button",{onClick:()=>{Pt("lobby"),Tt(null),yt(null),V(null),k(null),B([]),N(null),de(null),te(!1),je(!1),Be(!1),nn(null),Hn(10),rn(new Set),Kn(!1),q(null),et(!1),sn.current=0,Ei.current=null},style:{padding:"15px 30px",fontSize:"16px",fontWeight:"bold",color:"#1a1a2e",background:"linear-gradient(135deg, #f39c12 0%, #e67e22 100%)",border:"none",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 8px rgba(243, 156, 18, 0.3)",minWidth:"140px"},onMouseOver:It=>{It.target.style.transform="translateY(-2px)",It.target.style.boxShadow="0 6px 12px rgba(243, 156, 18, 0.4)"},onMouseOut:It=>{It.target.style.transform="translateY(0)",It.target.style.boxShadow="0 4px 8px rgba(243, 156, 18, 0.3)"},children:" Volver al men"})]})]})]})}return null}function $P(){const[r,t]=G.useState("menu");return G.useEffect(()=>{const o=new URLSearchParams(window.location.search).get("view");o&&["menu","single","multi","login","duels","rooms","multiplayer"].includes(o)&&t(o)},[]),r==="single"?A.jsxs(A.Fragment,{children:[A.jsx(Qa,{}),A.jsx(aS,{onBack:()=>t("menu")})]}):r==="login"?A.jsxs(EP,{children:[A.jsx(Qa,{}),A.jsx("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:A.jsx(wP,{onDone:()=>t("menu")})})]}):r==="multi"?A.jsxs("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:[A.jsx(Qa,{}),A.jsxs("div",{style:{background:"#111827",padding:24,borderRadius:12,color:"#fff",width:420,textAlign:"center"},children:[A.jsx("h2",{style:{marginTop:0},children:"Multiplayer"}),A.jsx("p",{style:{opacity:.85},children:"Choose a mode"}),A.jsxs("div",{style:{display:"grid",gap:10,marginTop:8},children:[A.jsx("button",{onClick:()=>t("duels"),style:{padding:"0.6rem 1rem",background:"#10b981",color:"#fff",border:"none",borderRadius:8,cursor:"pointer"},children:"1v1 Duels"}),A.jsx("button",{onClick:()=>t("rooms"),style:{padding:"0.6rem 1rem",background:"#8b5cf6",color:"#fff",border:"none",borderRadius:8,cursor:"pointer"},children:"Duel rooms"}),A.jsx("button",{onClick:()=>t("multiplayer"),style:{padding:"0.6rem 1rem",background:"#f59e0b",color:"#fff",border:"none",borderRadius:8,cursor:"pointer"},children:"Multiplayer rooms (2-10)"}),A.jsx("button",{onClick:()=>t("menu"),style:{padding:"0.6rem 1rem",background:"#374151",color:"#fff",border:"none",borderRadius:8,cursor:"pointer"},children:"Back"})]})]})]}):r==="duels"?A.jsxs(A.Fragment,{children:[A.jsx(Qa,{}),A.jsx(QP,{}),A.jsx("div",{style:{position:"fixed",left:12,top:12},children:A.jsx("button",{onClick:()=>t("menu"),style:{padding:"6px 10px",borderRadius:8,border:"none",background:"#374151",color:"#fff",cursor:"pointer"},children:"Back"})})]}):r==="rooms"?A.jsxs(A.Fragment,{children:[A.jsx(Qa,{}),A.jsx(KP,{}),A.jsx("div",{style:{position:"fixed",left:12,top:12},children:A.jsx("button",{onClick:()=>t("menu"),style:{padding:"6px 10px",borderRadius:8,border:"none",background:"#374151",color:"#fff",cursor:"pointer"},children:"Back"})})]}):r==="multiplayer"?A.jsxs(A.Fragment,{children:[A.jsx(Qa,{}),A.jsx(XP,{}),A.jsx("div",{style:{position:"fixed",left:12,top:12},children:A.jsx("button",{onClick:()=>t("menu"),style:{padding:"6px 10px",borderRadius:8,border:"none",background:"#374151",color:"#fff",cursor:"pointer"},children:"Back"})})]}):A.jsxs("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:[A.jsx(Qa,{}),A.jsxs("div",{style:{background:"#0f172a",padding:28,borderRadius:16,width:460,textAlign:"center",color:"#fff",boxShadow:"0 8px 24px rgba(0,0,0,0.35)"},children:[A.jsx("h1",{style:{marginTop:0},children:"Birders Place"}),A.jsx("p",{style:{opacity:.9,marginTop:6},children:"Choose your battle mode"}),A.jsxs("div",{style:{marginTop:"20px",padding:"12px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",fontSize:"12px",color:"#9ca3af",textAlign:"center"},children:[A.jsxs("div",{style:{marginBottom:"8px"},children:[" Images provided by ",A.jsx("a",{href:"https://inaturalist.org",target:"_blank",rel:"noopener noreferrer",style:{color:"#10b981",textDecoration:"none"},children:"iNaturalist"})]}),A.jsx("div",{children:" Educational bird identification game"})]}),A.jsxs("div",{style:{display:"grid",gap:12,marginTop:16},children:[A.jsxs("div",{style:{position:"relative"},children:[A.jsx("button",{onClick:()=>t("duels"),style:{padding:"1rem 1.2rem",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",border:"none",borderRadius:12,cursor:"pointer",fontWeight:700,fontSize:"16px",boxShadow:"0 4px 14px rgba(16, 185, 129, 0.3)",transform:"scale(1.02)",transition:"all 0.2s ease"},children:" 1v1 Duels"}),A.jsx("div",{style:{position:"absolute",top:"-8px",right:"-8px",background:"#f59e0b",color:"#000",padding:"2px 6px",borderRadius:"12px",fontSize:"10px",fontWeight:"bold"},children:"COMPETITIVE"}),A.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",marginTop:"4px",textAlign:"center"},children:" Rank up & climb the leaderboard"})]}),A.jsxs("div",{style:{marginTop:"20px",padding:"12px",background:"rgba(255,255,255,0.05)",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)"},children:[A.jsx("div",{style:{fontSize:"14px",color:"#9ca3af",marginBottom:"12px",fontWeight:"600"},children:" Play with Friends"}),A.jsxs("div",{style:{display:"grid",gap:8},children:[A.jsx("button",{onClick:()=>t("rooms"),style:{padding:"0.7rem 1rem",background:"#8b5cf6",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600,fontSize:"14px"},children:" Duel rooms"}),A.jsx("button",{onClick:()=>t("multiplayer"),style:{padding:"0.7rem 1rem",background:"#f59e0b",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600,fontSize:"14px"},children:" Multiplayer rooms (2-10)"})]})]}),A.jsxs("div",{style:{display:"grid",gap:8,marginTop:"16px"},children:[A.jsx("button",{onClick:()=>t("single"),style:{padding:"0.6rem 1rem",background:"#374151",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600,fontSize:"14px"},children:" Single Player"}),A.jsx("button",{onClick:()=>t("login"),style:{padding:"0.6rem 1rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600,fontSize:"14px"},children:" Login"})]})]})]})]})}U1.createRoot(document.getElementById("root")).render(A.jsx(G.StrictMode,{children:A.jsx($P,{})}));
