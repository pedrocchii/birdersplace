(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function n(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(l){if(l.ep)return;l.ep=!0;const h=n(l);fetch(l.href,h)}})();function xT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Km={exports:{}},cc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function M1(){if(Ov)return cc;Ov=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(o,l,h){var p=null;if(h!==void 0&&(p=""+h),l.key!==void 0&&(p=""+l.key),"key"in l){h={};for(var y in l)y!=="key"&&(h[y]=l[y])}else h=l;return l=h.ref,{$$typeof:r,type:o,key:p,ref:l!==void 0?l:null,props:h}}return cc.Fragment=t,cc.jsx=n,cc.jsxs=n,cc}var Dv;function O1(){return Dv||(Dv=1,Km.exports=M1()),Km.exports}var A=O1(),Xm={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lv;function D1(){if(Lv)return ye;Lv=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),p=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),P=Symbol.iterator;function M(D){return D===null||typeof D!="object"?null:(D=P&&D[P]||D["@@iterator"],typeof D=="function"?D:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,nt={};function at(D,lt,bt){this.props=D,this.context=lt,this.refs=nt,this.updater=bt||q}at.prototype.isReactComponent={},at.prototype.setState=function(D,lt){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,lt,"setState")},at.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function Tt(){}Tt.prototype=at.prototype;function ut(D,lt,bt){this.props=D,this.context=lt,this.refs=nt,this.updater=bt||q}var _t=ut.prototype=new Tt;_t.constructor=ut,Q(_t,at.prototype),_t.isPureReactComponent=!0;var Bt=Array.isArray,Ct={H:null,A:null,T:null,S:null,V:null},kt=Object.prototype.hasOwnProperty;function V(D,lt,bt,st,Et,xt){return bt=xt.ref,{$$typeof:r,type:D,key:lt,ref:bt!==void 0?bt:null,props:xt}}function O(D,lt){return V(D.type,lt,void 0,void 0,void 0,D.props)}function k(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function j(D){var lt={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(bt){return lt[bt]})}var B=/\/+/g;function H(D,lt){return typeof D=="object"&&D!==null&&D.key!=null?j(""+D.key):lt.toString(36)}function N(){}function ce(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(N,N):(D.status="pending",D.then(function(lt){D.status==="pending"&&(D.status="fulfilled",D.value=lt)},function(lt){D.status==="pending"&&(D.status="rejected",D.reason=lt)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function pe(D,lt,bt,st,Et){var xt=typeof D;(xt==="undefined"||xt==="boolean")&&(D=null);var At=!1;if(D===null)At=!0;else switch(xt){case"bigint":case"string":case"number":At=!0;break;case"object":switch(D.$$typeof){case r:case t:At=!0;break;case x:return At=D._init,pe(At(D._payload),lt,bt,st,Et)}}if(At)return Et=Et(D),At=st===""?"."+H(D,0):st,Bt(Et)?(bt="",At!=null&&(bt=At.replace(B,"$&/")+"/"),pe(Et,lt,bt,"",function(ze){return ze})):Et!=null&&(k(Et)&&(Et=O(Et,bt+(Et.key==null||D&&D.key===Et.key?"":(""+Et.key).replace(B,"$&/")+"/")+At)),lt.push(Et)),1;At=0;var ge=st===""?".":st+":";if(Bt(D))for(var Zt=0;Zt<D.length;Zt++)st=D[Zt],xt=ge+H(st,Zt),At+=pe(st,lt,bt,xt,Et);else if(Zt=M(D),typeof Zt=="function")for(D=Zt.call(D),Zt=0;!(st=D.next()).done;)st=st.value,xt=ge+H(st,Zt++),At+=pe(st,lt,bt,xt,Et);else if(xt==="object"){if(typeof D.then=="function")return pe(ce(D),lt,bt,st,Et);throw lt=String(D),Error("Objects are not valid as a React child (found: "+(lt==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":lt)+"). If you meant to render a collection of children, use an array instead.")}return At}function W(D,lt,bt){if(D==null)return D;var st=[],Et=0;return pe(D,st,"","",function(xt){return lt.call(bt,xt,Et++)}),st}function St(D){if(D._status===-1){var lt=D._result;lt=lt(),lt.then(function(bt){(D._status===0||D._status===-1)&&(D._status=1,D._result=bt)},function(bt){(D._status===0||D._status===-1)&&(D._status=2,D._result=bt)}),D._status===-1&&(D._status=0,D._result=lt)}if(D._status===1)return D._result.default;throw D._result}var yt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var lt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(lt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function ie(){}return ye.Children={map:W,forEach:function(D,lt,bt){W(D,function(){lt.apply(this,arguments)},bt)},count:function(D){var lt=0;return W(D,function(){lt++}),lt},toArray:function(D){return W(D,function(lt){return lt})||[]},only:function(D){if(!k(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},ye.Component=at,ye.Fragment=n,ye.Profiler=l,ye.PureComponent=ut,ye.StrictMode=o,ye.Suspense=v,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ct,ye.__COMPILER_RUNTIME={__proto__:null,c:function(D){return Ct.H.useMemoCache(D)}},ye.cache=function(D){return function(){return D.apply(null,arguments)}},ye.cloneElement=function(D,lt,bt){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var st=Q({},D.props),Et=D.key,xt=void 0;if(lt!=null)for(At in lt.ref!==void 0&&(xt=void 0),lt.key!==void 0&&(Et=""+lt.key),lt)!kt.call(lt,At)||At==="key"||At==="__self"||At==="__source"||At==="ref"&&lt.ref===void 0||(st[At]=lt[At]);var At=arguments.length-2;if(At===1)st.children=bt;else if(1<At){for(var ge=Array(At),Zt=0;Zt<At;Zt++)ge[Zt]=arguments[Zt+2];st.children=ge}return V(D.type,Et,void 0,void 0,xt,st)},ye.createContext=function(D){return D={$$typeof:p,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:h,_context:D},D},ye.createElement=function(D,lt,bt){var st,Et={},xt=null;if(lt!=null)for(st in lt.key!==void 0&&(xt=""+lt.key),lt)kt.call(lt,st)&&st!=="key"&&st!=="__self"&&st!=="__source"&&(Et[st]=lt[st]);var At=arguments.length-2;if(At===1)Et.children=bt;else if(1<At){for(var ge=Array(At),Zt=0;Zt<At;Zt++)ge[Zt]=arguments[Zt+2];Et.children=ge}if(D&&D.defaultProps)for(st in At=D.defaultProps,At)Et[st]===void 0&&(Et[st]=At[st]);return V(D,xt,void 0,void 0,null,Et)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(D){return{$$typeof:y,render:D}},ye.isValidElement=k,ye.lazy=function(D){return{$$typeof:x,_payload:{_status:-1,_result:D},_init:St}},ye.memo=function(D,lt){return{$$typeof:E,type:D,compare:lt===void 0?null:lt}},ye.startTransition=function(D){var lt=Ct.T,bt={};Ct.T=bt;try{var st=D(),Et=Ct.S;Et!==null&&Et(bt,st),typeof st=="object"&&st!==null&&typeof st.then=="function"&&st.then(ie,yt)}catch(xt){yt(xt)}finally{Ct.T=lt}},ye.unstable_useCacheRefresh=function(){return Ct.H.useCacheRefresh()},ye.use=function(D){return Ct.H.use(D)},ye.useActionState=function(D,lt,bt){return Ct.H.useActionState(D,lt,bt)},ye.useCallback=function(D,lt){return Ct.H.useCallback(D,lt)},ye.useContext=function(D){return Ct.H.useContext(D)},ye.useDebugValue=function(){},ye.useDeferredValue=function(D,lt){return Ct.H.useDeferredValue(D,lt)},ye.useEffect=function(D,lt,bt){var st=Ct.H;if(typeof bt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return st.useEffect(D,lt)},ye.useId=function(){return Ct.H.useId()},ye.useImperativeHandle=function(D,lt,bt){return Ct.H.useImperativeHandle(D,lt,bt)},ye.useInsertionEffect=function(D,lt){return Ct.H.useInsertionEffect(D,lt)},ye.useLayoutEffect=function(D,lt){return Ct.H.useLayoutEffect(D,lt)},ye.useMemo=function(D,lt){return Ct.H.useMemo(D,lt)},ye.useOptimistic=function(D,lt){return Ct.H.useOptimistic(D,lt)},ye.useReducer=function(D,lt,bt){return Ct.H.useReducer(D,lt,bt)},ye.useRef=function(D){return Ct.H.useRef(D)},ye.useState=function(D){return Ct.H.useState(D)},ye.useSyncExternalStore=function(D,lt,bt){return Ct.H.useSyncExternalStore(D,lt,bt)},ye.useTransition=function(){return Ct.H.useTransition()},ye.version="19.1.1",ye}var Nv;function jp(){return Nv||(Nv=1,Xm.exports=D1()),Xm.exports}var Z=jp();const dp=xT(Z);var $m={exports:{}},hc={},Jm={exports:{}},tp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv;function L1(){return kv||(kv=1,(function(r){function t(W,St){var yt=W.length;W.push(St);t:for(;0<yt;){var ie=yt-1>>>1,D=W[ie];if(0<l(D,St))W[ie]=St,W[yt]=D,yt=ie;else break t}}function n(W){return W.length===0?null:W[0]}function o(W){if(W.length===0)return null;var St=W[0],yt=W.pop();if(yt!==St){W[0]=yt;t:for(var ie=0,D=W.length,lt=D>>>1;ie<lt;){var bt=2*(ie+1)-1,st=W[bt],Et=bt+1,xt=W[Et];if(0>l(st,yt))Et<D&&0>l(xt,st)?(W[ie]=xt,W[Et]=yt,ie=Et):(W[ie]=st,W[bt]=yt,ie=bt);else if(Et<D&&0>l(xt,yt))W[ie]=xt,W[Et]=yt,ie=Et;else break t}}return St}function l(W,St){var yt=W.sortIndex-St.sortIndex;return yt!==0?yt:W.id-St.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;r.unstable_now=function(){return h.now()}}else{var p=Date,y=p.now();r.unstable_now=function(){return p.now()-y}}var v=[],E=[],x=1,P=null,M=3,q=!1,Q=!1,nt=!1,at=!1,Tt=typeof setTimeout=="function"?setTimeout:null,ut=typeof clearTimeout=="function"?clearTimeout:null,_t=typeof setImmediate<"u"?setImmediate:null;function Bt(W){for(var St=n(E);St!==null;){if(St.callback===null)o(E);else if(St.startTime<=W)o(E),St.sortIndex=St.expirationTime,t(v,St);else break;St=n(E)}}function Ct(W){if(nt=!1,Bt(W),!Q)if(n(v)!==null)Q=!0,kt||(kt=!0,H());else{var St=n(E);St!==null&&pe(Ct,St.startTime-W)}}var kt=!1,V=-1,O=5,k=-1;function j(){return at?!0:!(r.unstable_now()-k<O)}function B(){if(at=!1,kt){var W=r.unstable_now();k=W;var St=!0;try{t:{Q=!1,nt&&(nt=!1,ut(V),V=-1),q=!0;var yt=M;try{e:{for(Bt(W),P=n(v);P!==null&&!(P.expirationTime>W&&j());){var ie=P.callback;if(typeof ie=="function"){P.callback=null,M=P.priorityLevel;var D=ie(P.expirationTime<=W);if(W=r.unstable_now(),typeof D=="function"){P.callback=D,Bt(W),St=!0;break e}P===n(v)&&o(v),Bt(W)}else o(v);P=n(v)}if(P!==null)St=!0;else{var lt=n(E);lt!==null&&pe(Ct,lt.startTime-W),St=!1}}break t}finally{P=null,M=yt,q=!1}St=void 0}}finally{St?H():kt=!1}}}var H;if(typeof _t=="function")H=function(){_t(B)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ce=N.port2;N.port1.onmessage=B,H=function(){ce.postMessage(null)}}else H=function(){Tt(B,0)};function pe(W,St){V=Tt(function(){W(r.unstable_now())},St)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return M},r.unstable_next=function(W){switch(M){case 1:case 2:case 3:var St=3;break;default:St=M}var yt=M;M=St;try{return W()}finally{M=yt}},r.unstable_requestPaint=function(){at=!0},r.unstable_runWithPriority=function(W,St){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var yt=M;M=W;try{return St()}finally{M=yt}},r.unstable_scheduleCallback=function(W,St,yt){var ie=r.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?ie+yt:ie):yt=ie,W){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=yt+D,W={id:x++,callback:St,priorityLevel:W,startTime:yt,expirationTime:D,sortIndex:-1},yt>ie?(W.sortIndex=yt,t(E,W),n(v)===null&&W===n(E)&&(nt?(ut(V),V=-1):nt=!0,pe(Ct,yt-ie))):(W.sortIndex=D,t(v,W),Q||q||(Q=!0,kt||(kt=!0,H()))),W},r.unstable_shouldYield=j,r.unstable_wrapCallback=function(W){var St=M;return function(){var yt=M;M=St;try{return W.apply(this,arguments)}finally{M=yt}}}})(tp)),tp}var Vv;function N1(){return Vv||(Vv=1,Jm.exports=L1()),Jm.exports}var ep={exports:{}},xi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function k1(){if(zv)return xi;zv=1;var r=jp();function t(v){var E="https://react.dev/errors/"+v;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)E+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+v+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function h(v,E,x){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:P==null?null:""+P,children:v,containerInfo:E,implementation:x}}var p=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(v,E){if(v==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return xi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,xi.createPortal=function(v,E){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(t(299));return h(v,E,null,x)},xi.flushSync=function(v){var E=p.T,x=o.p;try{if(p.T=null,o.p=2,v)return v()}finally{p.T=E,o.p=x,o.d.f()}},xi.preconnect=function(v,E){typeof v=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,o.d.C(v,E))},xi.prefetchDNS=function(v){typeof v=="string"&&o.d.D(v)},xi.preinit=function(v,E){if(typeof v=="string"&&E&&typeof E.as=="string"){var x=E.as,P=y(x,E.crossOrigin),M=typeof E.integrity=="string"?E.integrity:void 0,q=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;x==="style"?o.d.S(v,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:P,integrity:M,fetchPriority:q}):x==="script"&&o.d.X(v,{crossOrigin:P,integrity:M,fetchPriority:q,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},xi.preinitModule=function(v,E){if(typeof v=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var x=y(E.as,E.crossOrigin);o.d.M(v,{crossOrigin:x,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&o.d.M(v)},xi.preload=function(v,E){if(typeof v=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var x=E.as,P=y(x,E.crossOrigin);o.d.L(v,x,{crossOrigin:P,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},xi.preloadModule=function(v,E){if(typeof v=="string")if(E){var x=y(E.as,E.crossOrigin);o.d.m(v,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:x,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else o.d.m(v)},xi.requestFormReset=function(v){o.d.r(v)},xi.unstable_batchedUpdates=function(v,E){return v(E)},xi.useFormState=function(v,E,x){return p.H.useFormState(v,E,x)},xi.useFormStatus=function(){return p.H.useHostTransitionStatus()},xi.version="19.1.1",xi}var Uv;function RT(){if(Uv)return ep.exports;Uv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),ep.exports=k1(),ep.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function V1(){if(jv)return hc;jv=1;var r=N1(),t=jp(),n=RT();function o(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function p(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function y(e){if(h(e)!==e)throw Error(o(188))}function v(e){var i=e.alternate;if(!i){if(i=h(e),i===null)throw Error(o(188));return i!==e?null:e}for(var a=e,c=i;;){var m=a.return;if(m===null)break;var g=m.alternate;if(g===null){if(c=m.return,c!==null){a=c;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===a)return y(m),e;if(g===c)return y(m),i;g=g.sibling}throw Error(o(188))}if(a.return!==c.return)a=m,c=g;else{for(var S=!1,I=m.child;I;){if(I===a){S=!0,a=m,c=g;break}if(I===c){S=!0,c=m,a=g;break}I=I.sibling}if(!S){for(I=g.child;I;){if(I===a){S=!0,a=g,c=m;break}if(I===c){S=!0,c=g,a=m;break}I=I.sibling}if(!S)throw Error(o(189))}}if(a.alternate!==c)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:i}function E(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=E(e),i!==null)return i;e=e.sibling}return null}var x=Object.assign,P=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),nt=Symbol.for("react.strict_mode"),at=Symbol.for("react.profiler"),Tt=Symbol.for("react.provider"),ut=Symbol.for("react.consumer"),_t=Symbol.for("react.context"),Bt=Symbol.for("react.forward_ref"),Ct=Symbol.for("react.suspense"),kt=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function H(e){return e===null||typeof e!="object"?null:(e=B&&e[B]||e["@@iterator"],typeof e=="function"?e:null)}var N=Symbol.for("react.client.reference");function ce(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===N?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Q:return"Fragment";case at:return"Profiler";case nt:return"StrictMode";case Ct:return"Suspense";case kt:return"SuspenseList";case k:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case q:return"Portal";case _t:return(e.displayName||"Context")+".Provider";case ut:return(e._context.displayName||"Context")+".Consumer";case Bt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V:return i=e.displayName||null,i!==null?i:ce(e.type)||"Memo";case O:i=e._payload,e=e._init;try{return ce(e(i))}catch{}}return null}var pe=Array.isArray,W=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,St=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt={pending:!1,data:null,method:null,action:null},ie=[],D=-1;function lt(e){return{current:e}}function bt(e){0>D||(e.current=ie[D],ie[D]=null,D--)}function st(e,i){D++,ie[D]=e.current,e.current=i}var Et=lt(null),xt=lt(null),At=lt(null),ge=lt(null);function Zt(e,i){switch(st(At,i),st(xt,e),st(Et,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?ov(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=ov(i),e=av(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}bt(Et),st(Et,e)}function ze(){bt(Et),bt(xt),bt(At)}function Ue(e){e.memoizedState!==null&&st(ge,e);var i=Et.current,a=av(i,e.type);i!==a&&(st(xt,e),st(Et,a))}function Xe(e){xt.current===e&&(bt(Et),bt(xt)),ge.current===e&&(bt(ge),sc._currentValue=yt)}var le=Object.prototype.hasOwnProperty,en=r.unstable_scheduleCallback,Un=r.unstable_cancelCallback,jn=r.unstable_shouldYield,xn=r.unstable_requestPaint,nn=r.unstable_now,yi=r.unstable_getCurrentPriorityLevel,Qn=r.unstable_ImmediatePriority,si=r.unstable_UserBlockingPriority,rn=r.unstable_NormalPriority,oi=r.unstable_LowPriority,Me=r.unstable_IdlePriority,Oi=r.log,Fi=r.unstable_setDisableYieldValue,he=null,G=null;function tt(e){if(typeof Oi=="function"&&Fi(e),G&&typeof G.setStrictMode=="function")try{G.setStrictMode(he,e)}catch{}}var mt=Math.clz32?Math.clz32:Mt,Nt=Math.log,re=Math.LN2;function Mt(e){return e>>>=0,e===0?32:31-(Nt(e)/re|0)|0}var Ot=256,Yt=4194304;function Ae(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function hn(e,i,a){var c=e.pendingLanes;if(c===0)return 0;var m=0,g=e.suspendedLanes,S=e.pingedLanes;e=e.warmLanes;var I=c&134217727;return I!==0?(c=I&~g,c!==0?m=Ae(c):(S&=I,S!==0?m=Ae(S):a||(a=I&~e,a!==0&&(m=Ae(a))))):(I=c&~g,I!==0?m=Ae(I):S!==0?m=Ae(S):a||(a=c&~e,a!==0&&(m=Ae(a)))),m===0?0:i!==0&&i!==m&&(i&g)===0&&(g=m&-m,a=i&-i,g>=a||g===32&&(a&4194048)!==0)?i:m}function Bn(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function ft(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rt(){var e=Ot;return Ot<<=1,(Ot&4194048)===0&&(Ot=256),e}function wt(){var e=Yt;return Yt<<=1,(Yt&62914560)===0&&(Yt=4194304),e}function qt(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function Wt(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Qt(e,i,a,c,m,g){var S=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var I=e.entanglements,U=e.expirationTimes,J=e.hiddenUpdates;for(a=S&~a;0<a;){var ht=31-mt(a),pt=1<<ht;I[ht]=0,U[ht]=-1;var et=J[ht];if(et!==null)for(J[ht]=null,ht=0;ht<et.length;ht++){var it=et[ht];it!==null&&(it.lane&=-536870913)}a&=~pt}c!==0&&te(e,c,0),g!==0&&m===0&&e.tag!==0&&(e.suspendedLanes|=g&~(S&~i))}function te(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var c=31-mt(i);e.entangledLanes|=i,e.entanglements[c]=e.entanglements[c]|1073741824|a&4194090}function $e(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var c=31-mt(a),m=1<<c;m&i|e[c]&i&&(e[c]|=i),a&=~m}}function Hn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Di(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function jr(){var e=St.p;return e!==0?e:(e=window.event,e===void 0?32:xv(e.type))}function os(e,i){var a=St.p;try{return St.p=e,i()}finally{St.p=a}}var He=Math.random().toString(36).slice(2),fn="__reactFiber$"+He,sn="__reactProps$"+He,vi="__reactContainer$"+He,qn="__reactEvents$"+He,jt="__reactListeners$"+He,Gi="__reactHandles$"+He,Ds="__reactResources$"+He,wr="__reactMarker$"+He;function Zi(e){delete e[fn],delete e[sn],delete e[qn],delete e[jt],delete e[Gi]}function ai(e){var i=e[fn];if(i)return i;for(var a=e.parentNode;a;){if(i=a[vi]||a[fn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=hv(e);e!==null;){if(a=e[fn])return a;e=hv(e)}return i}e=a,a=e.parentNode}return null}function li(e){if(e=e[fn]||e[vi]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function Te(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(o(33))}function bn(e){var i=e[Ds];return i||(i=e[Ds]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function on(e){e[wr]=!0}var wn=new Set,Wi={};function ui(e,i){Ti(e,i),Ti(e+"Capture",i)}function Ti(e,i){for(Wi[e]=i,e=0;e<i.length;e++)wn.add(i[e])}var as=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Br={},Ls={};function cl(e){return le.call(Ls,e)?!0:le.call(Br,e)?!1:as.test(e)?Ls[e]=!0:(Br[e]=!0,!1)}function ls(e,i,a){if(cl(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function Sr(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Fn(e,i,a,c){if(c===null)e.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+c)}}var Hr,us;function Ar(e){if(Hr===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Hr=i&&i[1]||"",us=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hr+e+us}var Ns=!1;function xr(e,i){if(!e||Ns)return"";Ns=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(it){var et=it}Reflect.construct(e,[],pt)}else{try{pt.call()}catch(it){et=it}e.call(pt.prototype)}}else{try{throw Error()}catch(it){et=it}(pt=e())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(it){if(it&&et&&typeof it.stack=="string")return[it.stack,et.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),S=g[0],I=g[1];if(S&&I){var U=S.split(`
`),J=I.split(`
`);for(m=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;m<J.length&&!J[m].includes("DetermineComponentFrameRoot");)m++;if(c===U.length||m===J.length)for(c=U.length-1,m=J.length-1;1<=c&&0<=m&&U[c]!==J[m];)m--;for(;1<=c&&0<=m;c--,m--)if(U[c]!==J[m]){if(c!==1||m!==1)do if(c--,m--,0>m||U[c]!==J[m]){var ht=`
`+U[c].replace(" at new "," at ");return e.displayName&&ht.includes("<anonymous>")&&(ht=ht.replace("<anonymous>",e.displayName)),ht}while(1<=c&&0<=m);break}}}finally{Ns=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ar(a):""}function Ee(e){switch(e.tag){case 26:case 27:case 5:return Ar(e.type);case 16:return Ar("Lazy");case 13:return Ar("Suspense");case 19:return Ar("SuspenseList");case 0:case 15:return xr(e.type,!1);case 11:return xr(e.type.render,!1);case 1:return xr(e.type,!0);case 31:return Ar("Activity");default:return""}}function je(e){try{var i="";do i+=Ee(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function On(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Rr(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function cs(e){var i=Rr(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),c=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var m=a.get,g=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return m.call(this)},set:function(S){c=""+S,g.call(this,S)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(S){c=""+S},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function hs(e){e._valueTracker||(e._valueTracker=cs(e))}function de(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return e&&(c=Rr(e)?e.checked?"true":"false":e.value),e=c,e!==a?(i.setValue(e),!0):!1}function qe(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var wa=/[\n"\\]/g;function dn(e){return e.replace(wa,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function an(e,i,a,c,m,g,S,I){e.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.type=S:e.removeAttribute("type"),i!=null?S==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+On(i)):e.value!==""+On(i)&&(e.value=""+On(i)):S!=="submit"&&S!=="reset"||e.removeAttribute("value"),i!=null?sr(e,S,On(i)):a!=null?sr(e,S,On(a)):c!=null&&e.removeAttribute("value"),m==null&&g!=null&&(e.defaultChecked=!!g),m!=null&&(e.checked=m&&typeof m!="function"&&typeof m!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?e.name=""+On(I):e.removeAttribute("name")}function ks(e,i,a,c,m,g,S,I){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),i!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;a=a!=null?""+On(a):"",i=i!=null?""+On(i):a,I||i===e.value||(e.value=i),e.defaultValue=i}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=I?e.checked:!!c,e.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(e.name=S)}function sr(e,i,a){i==="number"&&qe(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ci(e,i,a,c){if(e=e.options,i){i={};for(var m=0;m<a.length;m++)i["$"+a[m]]=!0;for(a=0;a<e.length;a++)m=i.hasOwnProperty("$"+e[a].value),e[a].selected!==m&&(e[a].selected=m),m&&c&&(e[a].defaultSelected=!0)}else{for(a=""+On(a),i=null,m=0;m<e.length;m++){if(e[m].value===a){e[m].selected=!0,c&&(e[m].defaultSelected=!0);return}i!==null||e[m].disabled||(i=e[m])}i!==null&&(i.selected=!0)}}function se(e,i,a){if(i!=null&&(i=""+On(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+On(a):""}function Li(e,i,a,c){if(i==null){if(c!=null){if(a!=null)throw Error(o(92));if(pe(c)){if(1<c.length)throw Error(o(93));c=c[0]}a=c}a==null&&(a=""),i=a}a=On(i),e.defaultValue=a,c=e.textContent,c===a&&c!==""&&c!==null&&(e.value=c)}function Kn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var or=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function po(e,i,a){var c=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":c?e.setProperty(i,a):typeof a!="number"||a===0||or.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function qr(e,i,a){if(i!=null&&typeof i!="object")throw Error(o(62));if(e=e.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var m in i)c=i[m],i.hasOwnProperty(m)&&a[m]!==c&&po(e,m,c)}else for(var g in i)i.hasOwnProperty(g)&&po(e,g,i[g])}function Vs(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sa=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),go=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fs(e){return go.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var ar=null;function hi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ir=null,lr=null;function Aa(e){var i=li(e);if(i&&(e=i.stateNode)){var a=e[sn]||null;t:switch(e=i.stateNode,i.type){case"input":if(an(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+dn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==e&&c.form===e.form){var m=c[sn]||null;if(!m)throw Error(o(90));an(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<a.length;i++)c=a[i],c.form===e.form&&de(c)}break t;case"textarea":se(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&ci(e,!!a.multiple,i,!1)}}}var Kt=!1;function Ni(e,i,a){if(Kt)return e(i,a);Kt=!0;try{var c=e(i);return c}finally{if(Kt=!1,(Ir!==null||lr!==null)&&(jh(),Ir&&(i=Ir,e=lr,lr=Ir=null,Aa(i),e)))for(i=0;i<e.length;i++)Aa(e[i])}}function Oe(e,i){var a=e.stateNode;if(a===null)return null;var c=a[sn]||null;if(c===null)return null;a=c[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,i,typeof a));return a}var Yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ei=!1;if(Yi)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){Ei=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{Ei=!1}var Qi=null,bi=null,ur=null;function Gr(){if(ur)return ur;var e,i=bi,a=i.length,c,m="value"in Qi?Qi.value:Qi.textContent,g=m.length;for(e=0;e<a&&i[e]===m[e];e++);var S=a-e;for(c=1;c<=S&&i[a-c]===m[g-c];c++);return ur=m.slice(e,1<c?1-c:void 0)}function Ze(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Xn(){return!0}function _o(){return!1}function Rn(e){function i(a,c,m,g,S){this._reactName=a,this._targetInst=m,this.type=c,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var I in e)e.hasOwnProperty(I)&&(a=e[I],this[I]=a?a(g):g[I]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Xn:_o,this.isPropagationStopped=_o,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),i}var ke={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zs=Rn(ke),Zr=x({},ke,{view:0,detail:0}),hl=Rn(Zr),Us,_e,Cr,Gn=x({},Zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ms,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cr&&(Cr&&e.type==="mousemove"?(Us=e.screenX-Cr.screenX,_e=e.screenY-Cr.screenY):_e=Us=0,Cr=e),Us)},movementY:function(e){return"movementY"in e?e.movementY:_e}}),$n=Rn(Gn),xa=x({},Gn,{dataTransfer:0}),bu=Rn(xa),Wr=x({},Zr,{relatedTarget:0}),yo=Rn(Wr),vo=x({},ke,{animationName:0,elapsedTime:0,pseudoElement:0}),To=Rn(vo),fl=x({},ke,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ds=Rn(fl),wu=x({},ke,{data:0}),wi=Rn(wu),js={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ra={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eo(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=cr[e])?!!i[e]:!1}function ms(){return Eo}var bo=x({},Zr,{key:function(e){if(e.key){var i=js[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Ze(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ra[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ms,charCode:function(e){return e.type==="keypress"?Ze(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ze(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wo=Rn(bo),Ia=x({},Gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),So=Rn(Ia),Yr=x({},Zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ms}),dl=Rn(Yr),Ao=x({},ke,{propertyName:0,elapsedTime:0,pseudoElement:0}),ml=Rn(Ao),Ca=x({},Gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Bs=Rn(Ca),Dn=x({},ke,{newState:0,oldState:0}),Pr=Rn(Dn),pl=[9,13,27,32],Si=Yi&&"CompositionEvent"in window,f=null;Yi&&"documentMode"in document&&(f=document.documentMode);var T=Yi&&"TextEvent"in window&&!f,w=Yi&&(!Si||f&&8<f&&11>=f),C=" ",K=!1;function ot(e,i){switch(e){case"keyup":return pl.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function It(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xe=!1;function Sn(e,i){switch(e){case"compositionend":return It(i);case"keypress":return i.which!==32?null:(K=!0,C);case"textInput":return e=i.data,e===C&&K?null:e;default:return null}}function Re(e,i){if(xe)return e==="compositionend"||!Si&&ot(e,i)?(e=Gr(),ur=bi=Qi=null,xe=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return w&&i.locale!=="ko"?null:i.data;default:return null}}var Be={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ln(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Be[e.type]:i==="textarea"}function Qr(e,i,a,c){Ir?lr?lr.push(c):lr=[c]:Ir=c,i=Zh(i,"onChange"),0<i.length&&(a=new zs("onChange","change",null,a,c),e.push({event:a,listeners:i}))}var Je=null,Mr=null;function Or(e){ev(e,0)}function gl(e){var i=Te(e);if(de(i))return e}function xo(e,i){if(e==="change")return i}var Su=!1;if(Yi){var Ro;if(Yi){var Au="oninput"in document;if(!Au){var Kr=document.createElement("div");Kr.setAttribute("oninput","return;"),Au=typeof Kr.oninput=="function"}Ro=Au}else Ro=!1;Su=Ro&&(!document.documentMode||9<document.documentMode)}function Pa(){Je&&(Je.detachEvent("onpropertychange",sh),Mr=Je=null)}function sh(e){if(e.propertyName==="value"&&gl(Mr)){var i=[];Qr(i,Mr,e,hi(e)),Ni(Or,i)}}function xu(e,i,a){e==="focusin"?(Pa(),Je=i,Mr=a,Je.attachEvent("onpropertychange",sh)):e==="focusout"&&Pa()}function Td(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gl(Mr)}function Xr(e,i){if(e==="click")return gl(i)}function Ed(e,i){if(e==="input"||e==="change")return gl(i)}function Io(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var ki=typeof Object.is=="function"?Object.is:Io;function Vi(e,i){if(ki(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var m=a[c];if(!le.call(i,m)||!ki(e[m],i[m]))return!1}return!0}function Ma(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ru(e,i){var a=Ma(e);e=0;for(var c;a;){if(a.nodeType===3){if(c=e+a.textContent.length,e<=i&&c>=i)return{node:a,offset:i-e};e=c}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Ma(a)}}function _l(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?_l(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Oa(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=qe(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=qe(e.document)}return i}function Da(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var yl=Yi&&"documentMode"in document&&11>=document.documentMode,hr=null,Co=null,Hs=null,vl=!1;function oh(e,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;vl||hr==null||hr!==qe(c)||(c=hr,"selectionStart"in c&&Da(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Hs&&Vi(Hs,c)||(Hs=c,c=Zh(Co,"onSelect"),0<c.length&&(i=new zs("onSelect","select",null,i,a),e.push({event:i,listeners:c}),i.target=hr)))}function Dr(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Po={animationend:Dr("Animation","AnimationEnd"),animationiteration:Dr("Animation","AnimationIteration"),animationstart:Dr("Animation","AnimationStart"),transitionrun:Dr("Transition","TransitionRun"),transitionstart:Dr("Transition","TransitionStart"),transitioncancel:Dr("Transition","TransitionCancel"),transitionend:Dr("Transition","TransitionEnd")},Tl={},ah={};Yi&&(ah=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function ps(e){if(Tl[e])return Tl[e];if(!Po[e])return e;var i=Po[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in ah)return Tl[e]=i[a];return e}var lh=ps("animationend"),fr=ps("animationiteration"),La=ps("animationstart"),bd=ps("transitionrun"),El=ps("transitionstart"),wd=ps("transitioncancel"),Iu=ps("transitionend"),uh=new Map,qs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qs.push("scrollEnd");function dr(e,i){uh.set(e,i),ui(i,[e])}var Fs=new WeakMap;function zi(e,i){if(typeof e=="object"&&e!==null){var a=Fs.get(e);return a!==void 0?a:(i={value:e,source:i,stack:je(i)},Fs.set(e,i),i)}return{value:e,source:i,stack:je(i)}}var Ui=[],Mo=0,mr=0;function Na(){for(var e=Mo,i=mr=Mo=0;i<e;){var a=Ui[i];Ui[i++]=null;var c=Ui[i];Ui[i++]=null;var m=Ui[i];Ui[i++]=null;var g=Ui[i];if(Ui[i++]=null,c!==null&&m!==null){var S=c.pending;S===null?m.next=m:(m.next=S.next,S.next=m),c.pending=m}g!==0&&Va(a,m,g)}}function ka(e,i,a,c){Ui[Mo++]=e,Ui[Mo++]=i,Ui[Mo++]=a,Ui[Mo++]=c,mr|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function Gs(e,i,a,c){return ka(e,i,a,c),gs(e)}function Oo(e,i){return ka(e,null,null,i),gs(e)}function Va(e,i,a){e.lanes|=a;var c=e.alternate;c!==null&&(c.lanes|=a);for(var m=!1,g=e.return;g!==null;)g.childLanes|=a,c=g.alternate,c!==null&&(c.childLanes|=a),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(m=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,m&&i!==null&&(m=31-mt(a),e=g.hiddenUpdates,c=e[m],c===null?e[m]=[i]:c.push(i),i.lane=a|536870912),g):null}function gs(e){if(50<Xu)throw Xu=0,Tm=null,Error(o(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Zs={};function ch(e,i,a,c){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(e,i,a,c){return new ch(e,i,a,c)}function bl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Lr(e,i){var a=e.alternate;return a===null?(a=ji(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Cu(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function za(e,i,a,c,m,g){var S=0;if(c=e,typeof e=="function")bl(e)&&(S=1);else if(typeof e=="string")S=y1(e,a,Et.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case k:return e=ji(31,a,i,m),e.elementType=k,e.lanes=g,e;case Q:return _s(a.children,m,g,i);case nt:S=8,m|=24;break;case at:return e=ji(12,a,i,m|2),e.elementType=at,e.lanes=g,e;case Ct:return e=ji(13,a,i,m),e.elementType=Ct,e.lanes=g,e;case kt:return e=ji(19,a,i,m),e.elementType=kt,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Tt:case _t:S=10;break t;case ut:S=9;break t;case Bt:S=11;break t;case V:S=14;break t;case O:S=16,c=null;break t}S=29,a=Error(o(130,e===null?"null":typeof e,"")),c=null}return i=ji(S,a,i,m),i.elementType=e,i.type=c,i.lanes=g,i}function _s(e,i,a,c){return e=ji(7,e,c,i),e.lanes=a,e}function Pu(e,i,a){return e=ji(6,e,null,i),e.lanes=a,e}function wl(e,i,a){return i=ji(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Ws=[],Do=0,s=null,u=0,d=[],_=0,b=null,R=1,z="";function X(e,i){Ws[Do++]=u,Ws[Do++]=s,s=e,u=i}function rt(e,i,a){d[_++]=R,d[_++]=z,d[_++]=b,b=e;var c=R;e=z;var m=32-mt(c)-1;c&=~(1<<m),a+=1;var g=32-mt(i)+m;if(30<g){var S=m-m%5;g=(c&(1<<S)-1).toString(32),c>>=S,m-=S,R=1<<32-mt(i)+m|a<<m|c,z=g+e}else R=1<<g|a<<m|c,z=e}function vt(e){e.return!==null&&(X(e,1),rt(e,1,0))}function Dt(e){for(;e===s;)s=Ws[--Do],Ws[Do]=null,u=Ws[--Do],Ws[Do]=null;for(;e===b;)b=d[--_],d[_]=null,z=d[--_],d[_]=null,R=d[--_],d[_]=null}var zt=null,Ht=null,fe=!1,un=null,_n=!1,Jn=Error(o(519));function Ki(e){var i=Error(o(418,""));throw No(zi(i,e)),Jn}function hh(e){var i=e.stateNode,a=e.type,c=e.memoizedProps;switch(i[fn]=e,i[sn]=c,a){case"dialog":Se("cancel",i),Se("close",i);break;case"iframe":case"object":case"embed":Se("load",i);break;case"video":case"audio":for(a=0;a<Ju.length;a++)Se(Ju[a],i);break;case"source":Se("error",i);break;case"img":case"image":case"link":Se("error",i),Se("load",i);break;case"details":Se("toggle",i);break;case"input":Se("invalid",i),ks(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),hs(i);break;case"select":Se("invalid",i);break;case"textarea":Se("invalid",i),Li(i,c.value,c.defaultValue,c.children),hs(i)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||c.suppressHydrationWarning===!0||sv(i.textContent,a)?(c.popover!=null&&(Se("beforetoggle",i),Se("toggle",i)),c.onScroll!=null&&Se("scroll",i),c.onScrollEnd!=null&&Se("scrollend",i),c.onClick!=null&&(i.onclick=Wh),i=!0):i=!1,i||Ki(e)}function fh(e){for(zt=e.return;zt;)switch(zt.tag){case 5:case 13:_n=!1;return;case 27:case 3:_n=!0;return;default:zt=zt.return}}function Ua(e){if(e!==zt)return!1;if(!fe)return fh(e),fe=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||km(e.type,e.memoizedProps)),a=!a),a&&Ht&&Ki(e),fh(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){Ht=es(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}Ht=null}}else i===27?(i=Ht,Ko(e.type)?(e=jm,jm=null,Ht=e):Ht=i):Ht=zt?es(e.stateNode.nextSibling):null;return!0}function Lo(){Ht=zt=null,fe=!1}function dh(){var e=un;return e!==null&&(Ji===null?Ji=e:Ji.push.apply(Ji,e),un=null),e}function No(e){un===null?un=[e]:un.push(e)}var pn=lt(null),Nr=null,$r=null;function ys(e,i,a){st(pn,i._currentValue),i._currentValue=a}function Jr(e){e._currentValue=pn.current,bt(pn)}function ja(e,i,a){for(;e!==null;){var c=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),e===a)break;e=e.return}}function Sl(e,i,a,c){var m=e.child;for(m!==null&&(m.return=e);m!==null;){var g=m.dependencies;if(g!==null){var S=m.child;g=g.firstContext;t:for(;g!==null;){var I=g;g=m;for(var U=0;U<i.length;U++)if(I.context===i[U]){g.lanes|=a,I=g.alternate,I!==null&&(I.lanes|=a),ja(g.return,a,e),c||(S=null);break t}g=I.next}}else if(m.tag===18){if(S=m.return,S===null)throw Error(o(341));S.lanes|=a,g=S.alternate,g!==null&&(g.lanes|=a),ja(S,a,e),S=null}else S=m.child;if(S!==null)S.return=m;else for(S=m;S!==null;){if(S===e){S=null;break}if(m=S.sibling,m!==null){m.return=S.return,S=m;break}S=S.return}m=S}}function Ba(e,i,a,c){e=null;for(var m=i,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var S=m.alternate;if(S===null)throw Error(o(387));if(S=S.memoizedProps,S!==null){var I=m.type;ki(m.pendingProps.value,S.value)||(e!==null?e.push(I):e=[I])}}else if(m===ge.current){if(S=m.alternate,S===null)throw Error(o(387));S.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(e!==null?e.push(sc):e=[sc])}m=m.return}e!==null&&Sl(i,e,a,c),i.flags|=262144}function mh(e){for(e=e.firstContext;e!==null;){if(!ki(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ha(e){Nr=e,$r=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ai(e){return Gg(Nr,e)}function ph(e,i){return Nr===null&&Ha(e),Gg(e,i)}function Gg(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},$r===null){if(e===null)throw Error(o(308));$r=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else $r=$r.next=i;return a}var _w=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,c){e.push(c)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},yw=r.unstable_scheduleCallback,vw=r.unstable_NormalPriority,Zn={$$typeof:_t,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sd(){return{controller:new _w,data:new Map,refCount:0}}function Mu(e){e.refCount--,e.refCount===0&&yw(vw,function(){e.controller.abort()})}var Ou=null,Ad=0,Al=0,xl=null;function Tw(e,i){if(Ou===null){var a=Ou=[];Ad=0,Al=Rm(),xl={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Ad++,i.then(Zg,Zg),i}function Zg(){if(--Ad===0&&Ou!==null){xl!==null&&(xl.status="fulfilled");var e=Ou;Ou=null,Al=0,xl=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Ew(e,i){var a=[],c={status:"pending",value:null,reason:null,then:function(m){a.push(m)}};return e.then(function(){c.status="fulfilled",c.value=i;for(var m=0;m<a.length;m++)(0,a[m])(i)},function(m){for(c.status="rejected",c.reason=m,m=0;m<a.length;m++)(0,a[m])(void 0)}),c}var Wg=W.S;W.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Tw(e,i),Wg!==null&&Wg(e,i)};var qa=lt(null);function xd(){var e=qa.current;return e!==null?e:cn.pooledCache}function gh(e,i){i===null?st(qa,qa.current):st(qa,i.pool)}function Yg(){var e=xd();return e===null?null:{parent:Zn._currentValue,pool:e}}var Du=Error(o(460)),Qg=Error(o(474)),_h=Error(o(542)),Rd={then:function(){}};function Kg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function yh(){}function Xg(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(yh,yh),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Jg(e),e;default:if(typeof i.status=="string")i.then(yh,yh);else{if(e=cn,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=i,e.status="pending",e.then(function(c){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=c}},function(c){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Jg(e),e}throw Lu=i,Du}}var Lu=null;function $g(){if(Lu===null)throw Error(o(459));var e=Lu;return Lu=null,e}function Jg(e){if(e===Du||e===_h)throw Error(o(483))}var ko=!1;function Id(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cd(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Vo(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function zo(e,i,a){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Fe&2)!==0){var m=c.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),c.pending=i,i=gs(e),Va(e,null,a),i}return ka(e,c,i,a),gs(e)}function Nu(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var c=i.lanes;c&=e.pendingLanes,a|=c,i.lanes=a,$e(e,a)}}function Pd(e,i){var a=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var m=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?m=g=S:g=g.next=S,a=a.next}while(a!==null);g===null?m=g=i:g=g.next=i}else m=g=i;a={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var Md=!1;function ku(){if(Md){var e=xl;if(e!==null)throw e}}function Vu(e,i,a,c){Md=!1;var m=e.updateQueue;ko=!1;var g=m.firstBaseUpdate,S=m.lastBaseUpdate,I=m.shared.pending;if(I!==null){m.shared.pending=null;var U=I,J=U.next;U.next=null,S===null?g=J:S.next=J,S=U;var ht=e.alternate;ht!==null&&(ht=ht.updateQueue,I=ht.lastBaseUpdate,I!==S&&(I===null?ht.firstBaseUpdate=J:I.next=J,ht.lastBaseUpdate=U))}if(g!==null){var pt=m.baseState;S=0,ht=J=U=null,I=g;do{var et=I.lane&-536870913,it=et!==I.lane;if(it?(De&et)===et:(c&et)===et){et!==0&&et===Al&&(Md=!0),ht!==null&&(ht=ht.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});t:{var ue=e,$t=I;et=i;var Qe=a;switch($t.tag){case 1:if(ue=$t.payload,typeof ue=="function"){pt=ue.call(Qe,pt,et);break t}pt=ue;break t;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=$t.payload,et=typeof ue=="function"?ue.call(Qe,pt,et):ue,et==null)break t;pt=x({},pt,et);break t;case 2:ko=!0}}et=I.callback,et!==null&&(e.flags|=64,it&&(e.flags|=8192),it=m.callbacks,it===null?m.callbacks=[et]:it.push(et))}else it={lane:et,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ht===null?(J=ht=it,U=pt):ht=ht.next=it,S|=et;if(I=I.next,I===null){if(I=m.shared.pending,I===null)break;it=I,I=it.next,it.next=null,m.lastBaseUpdate=it,m.shared.pending=null}}while(!0);ht===null&&(U=pt),m.baseState=U,m.firstBaseUpdate=J,m.lastBaseUpdate=ht,g===null&&(m.shared.lanes=0),Zo|=S,e.lanes=S,e.memoizedState=pt}}function t_(e,i){if(typeof e!="function")throw Error(o(191,e));e.call(i)}function e_(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)t_(a[e],i)}var Rl=lt(null),vh=lt(0);function n_(e,i){e=to,st(vh,e),st(Rl,i),to=e|i.baseLanes}function Od(){st(vh,to),st(Rl,Rl.current)}function Dd(){to=vh.current,bt(Rl),bt(vh)}var Uo=0,ve=null,We=null,Ln=null,Th=!1,Il=!1,Fa=!1,Eh=0,zu=0,Cl=null,bw=0;function In(){throw Error(o(321))}function Ld(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!ki(e[a],i[a]))return!1;return!0}function Nd(e,i,a,c,m,g){return Uo=g,ve=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,W.H=e===null||e.memoizedState===null?U_:j_,Fa=!1,g=a(c,m),Fa=!1,Il&&(g=r_(i,a,c,m)),i_(e),g}function i_(e){W.H=Rh;var i=We!==null&&We.next!==null;if(Uo=0,Ln=We=ve=null,Th=!1,zu=0,Cl=null,i)throw Error(o(300));e===null||ti||(e=e.dependencies,e!==null&&mh(e)&&(ti=!0))}function r_(e,i,a,c){ve=e;var m=0;do{if(Il&&(Cl=null),zu=0,Il=!1,25<=m)throw Error(o(301));if(m+=1,Ln=We=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}W.H=Cw,g=i(a,c)}while(Il);return g}function ww(){var e=W.H,i=e.useState()[0];return i=typeof i.then=="function"?Uu(i):i,e=e.useState()[0],(We!==null?We.memoizedState:null)!==e&&(ve.flags|=1024),i}function kd(){var e=Eh!==0;return Eh=0,e}function Vd(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function zd(e){if(Th){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Th=!1}Uo=0,Ln=We=ve=null,Il=!1,zu=Eh=0,Cl=null}function Xi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?ve.memoizedState=Ln=e:Ln=Ln.next=e,Ln}function Nn(){if(We===null){var e=ve.alternate;e=e!==null?e.memoizedState:null}else e=We.next;var i=Ln===null?ve.memoizedState:Ln.next;if(i!==null)Ln=i,We=e;else{if(e===null)throw ve.alternate===null?Error(o(467)):Error(o(310));We=e,e={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Ln===null?ve.memoizedState=Ln=e:Ln=Ln.next=e}return Ln}function Ud(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uu(e){var i=zu;return zu+=1,Cl===null&&(Cl=[]),e=Xg(Cl,e,i),i=ve,(Ln===null?i.memoizedState:Ln.next)===null&&(i=i.alternate,W.H=i===null||i.memoizedState===null?U_:j_),e}function bh(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Uu(e);if(e.$$typeof===_t)return Ai(e)}throw Error(o(438,String(e)))}function jd(e){var i=null,a=ve.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var c=ve.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Ud(),ve.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),c=0;c<e;c++)a[c]=j;return i.index++,a}function Ys(e,i){return typeof i=="function"?i(e):i}function wh(e){var i=Nn();return Bd(i,We,e)}function Bd(e,i,a){var c=e.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=a;var m=e.baseQueue,g=c.pending;if(g!==null){if(m!==null){var S=m.next;m.next=g.next,g.next=S}i.baseQueue=m=g,c.pending=null}if(g=e.baseState,m===null)e.memoizedState=g;else{i=m.next;var I=S=null,U=null,J=i,ht=!1;do{var pt=J.lane&-536870913;if(pt!==J.lane?(De&pt)===pt:(Uo&pt)===pt){var et=J.revertLane;if(et===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),pt===Al&&(ht=!0);else if((Uo&et)===et){J=J.next,et===Al&&(ht=!0);continue}else pt={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(I=U=pt,S=g):U=U.next=pt,ve.lanes|=et,Zo|=et;pt=J.action,Fa&&a(g,pt),g=J.hasEagerState?J.eagerState:a(g,pt)}else et={lane:pt,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(I=U=et,S=g):U=U.next=et,ve.lanes|=pt,Zo|=pt;J=J.next}while(J!==null&&J!==i);if(U===null?S=g:U.next=I,!ki(g,e.memoizedState)&&(ti=!0,ht&&(a=xl,a!==null)))throw a;e.memoizedState=g,e.baseState=S,e.baseQueue=U,c.lastRenderedState=g}return m===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function Hd(e){var i=Nn(),a=i.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var c=a.dispatch,m=a.pending,g=i.memoizedState;if(m!==null){a.pending=null;var S=m=m.next;do g=e(g,S.action),S=S.next;while(S!==m);ki(g,i.memoizedState)||(ti=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,c]}function s_(e,i,a){var c=ve,m=Nn(),g=fe;if(g){if(a===void 0)throw Error(o(407));a=a()}else a=i();var S=!ki((We||m).memoizedState,a);S&&(m.memoizedState=a,ti=!0),m=m.queue;var I=l_.bind(null,c,m,e);if(ju(2048,8,I,[e]),m.getSnapshot!==i||S||Ln!==null&&Ln.memoizedState.tag&1){if(c.flags|=2048,Pl(9,Sh(),a_.bind(null,c,m,a,i),null),cn===null)throw Error(o(349));g||(Uo&124)!==0||o_(c,i,a)}return a}function o_(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=ve.updateQueue,i===null?(i=Ud(),ve.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function a_(e,i,a,c){i.value=a,i.getSnapshot=c,u_(i)&&c_(e)}function l_(e,i,a){return a(function(){u_(i)&&c_(e)})}function u_(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!ki(e,a)}catch{return!0}}function c_(e){var i=Oo(e,2);i!==null&&vr(i,e,2)}function qd(e){var i=Xi();if(typeof e=="function"){var a=e;if(e=a(),Fa){tt(!0);try{a()}finally{tt(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:e},i}function h_(e,i,a,c){return e.baseState=a,Bd(e,We,typeof c=="function"?c:Ys)}function Sw(e,i,a,c,m){if(xh(e))throw Error(o(485));if(e=i.action,e!==null){var g={payload:m,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};W.T!==null?a(!0):g.isTransition=!1,c(g),a=i.pending,a===null?(g.next=i.pending=g,f_(i,g)):(g.next=a.next,i.pending=a.next=g)}}function f_(e,i){var a=i.action,c=i.payload,m=e.state;if(i.isTransition){var g=W.T,S={};W.T=S;try{var I=a(m,c),U=W.S;U!==null&&U(S,I),d_(e,i,I)}catch(J){Fd(e,i,J)}finally{W.T=g}}else try{g=a(m,c),d_(e,i,g)}catch(J){Fd(e,i,J)}}function d_(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){m_(e,i,c)},function(c){return Fd(e,i,c)}):m_(e,i,a)}function m_(e,i,a){i.status="fulfilled",i.value=a,p_(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,f_(e,a)))}function Fd(e,i,a){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=a,p_(i),i=i.next;while(i!==c)}e.action=null}function p_(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function g_(e,i){return i}function __(e,i){if(fe){var a=cn.formState;if(a!==null){t:{var c=ve;if(fe){if(Ht){e:{for(var m=Ht,g=_n;m.nodeType!==8;){if(!g){m=null;break e}if(m=es(m.nextSibling),m===null){m=null;break e}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){Ht=es(m.nextSibling),c=m.data==="F!";break t}}Ki(c)}c=!1}c&&(i=a[0])}}return a=Xi(),a.memoizedState=a.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:g_,lastRenderedState:i},a.queue=c,a=k_.bind(null,ve,c),c.dispatch=a,c=qd(!1),g=Qd.bind(null,ve,!1,c.queue),c=Xi(),m={state:i,dispatch:null,action:e,pending:null},c.queue=m,a=Sw.bind(null,ve,m,g,a),m.dispatch=a,c.memoizedState=e,[i,a,!1]}function y_(e){var i=Nn();return v_(i,We,e)}function v_(e,i,a){if(i=Bd(e,i,g_)[0],e=wh(Ys)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Uu(i)}catch(S){throw S===Du?_h:S}else c=i;i=Nn();var m=i.queue,g=m.dispatch;return a!==i.memoizedState&&(ve.flags|=2048,Pl(9,Sh(),Aw.bind(null,m,a),null)),[c,g,e]}function Aw(e,i){e.action=i}function T_(e){var i=Nn(),a=We;if(a!==null)return v_(i,a,e);Nn(),i=i.memoizedState,a=Nn();var c=a.queue.dispatch;return a.memoizedState=e,[i,c,!1]}function Pl(e,i,a,c){return e={tag:e,create:a,deps:c,inst:i,next:null},i=ve.updateQueue,i===null&&(i=Ud(),ve.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(c=a.next,a.next=e,e.next=c,i.lastEffect=e),e}function Sh(){return{destroy:void 0,resource:void 0}}function E_(){return Nn().memoizedState}function Ah(e,i,a,c){var m=Xi();c=c===void 0?null:c,ve.flags|=e,m.memoizedState=Pl(1|i,Sh(),a,c)}function ju(e,i,a,c){var m=Nn();c=c===void 0?null:c;var g=m.memoizedState.inst;We!==null&&c!==null&&Ld(c,We.memoizedState.deps)?m.memoizedState=Pl(i,g,a,c):(ve.flags|=e,m.memoizedState=Pl(1|i,g,a,c))}function b_(e,i){Ah(8390656,8,e,i)}function w_(e,i){ju(2048,8,e,i)}function S_(e,i){return ju(4,2,e,i)}function A_(e,i){return ju(4,4,e,i)}function x_(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function R_(e,i,a){a=a!=null?a.concat([e]):null,ju(4,4,x_.bind(null,i,e),a)}function Gd(){}function I_(e,i){var a=Nn();i=i===void 0?null:i;var c=a.memoizedState;return i!==null&&Ld(i,c[1])?c[0]:(a.memoizedState=[e,i],e)}function C_(e,i){var a=Nn();i=i===void 0?null:i;var c=a.memoizedState;if(i!==null&&Ld(i,c[1]))return c[0];if(c=e(),Fa){tt(!0);try{e()}finally{tt(!1)}}return a.memoizedState=[c,i],c}function Zd(e,i,a){return a===void 0||(Uo&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=Oy(),ve.lanes|=e,Zo|=e,a)}function P_(e,i,a,c){return ki(a,i)?a:Rl.current!==null?(e=Zd(e,a,c),ki(e,i)||(ti=!0),e):(Uo&42)===0?(ti=!0,e.memoizedState=a):(e=Oy(),ve.lanes|=e,Zo|=e,i)}function M_(e,i,a,c,m){var g=St.p;St.p=g!==0&&8>g?g:8;var S=W.T,I={};W.T=I,Qd(e,!1,i,a);try{var U=m(),J=W.S;if(J!==null&&J(I,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ht=Ew(U,c);Bu(e,i,ht,yr(e))}else Bu(e,i,c,yr(e))}catch(pt){Bu(e,i,{then:function(){},status:"rejected",reason:pt},yr())}finally{St.p=g,W.T=S}}function xw(){}function Wd(e,i,a,c){if(e.tag!==5)throw Error(o(476));var m=O_(e).queue;M_(e,m,i,yt,a===null?xw:function(){return D_(e),a(c)})}function O_(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:yt,baseState:yt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:yt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function D_(e){var i=O_(e).next.queue;Bu(e,i,{},yr())}function Yd(){return Ai(sc)}function L_(){return Nn().memoizedState}function N_(){return Nn().memoizedState}function Rw(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=yr();e=Vo(a);var c=zo(i,e,a);c!==null&&(vr(c,i,a),Nu(c,i,a)),i={cache:Sd()},e.payload=i;return}i=i.return}}function Iw(e,i,a){var c=yr();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},xh(e)?V_(i,a):(a=Gs(e,i,a,c),a!==null&&(vr(a,e,c),z_(a,i,c)))}function k_(e,i,a){var c=yr();Bu(e,i,a,c)}function Bu(e,i,a,c){var m={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(xh(e))V_(i,m);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var S=i.lastRenderedState,I=g(S,a);if(m.hasEagerState=!0,m.eagerState=I,ki(I,S))return ka(e,i,m,0),cn===null&&Na(),!1}catch{}finally{}if(a=Gs(e,i,m,c),a!==null)return vr(a,e,c),z_(a,i,c),!0}return!1}function Qd(e,i,a,c){if(c={lane:2,revertLane:Rm(),action:c,hasEagerState:!1,eagerState:null,next:null},xh(e)){if(i)throw Error(o(479))}else i=Gs(e,a,c,2),i!==null&&vr(i,e,2)}function xh(e){var i=e.alternate;return e===ve||i!==null&&i===ve}function V_(e,i){Il=Th=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function z_(e,i,a){if((a&4194048)!==0){var c=i.lanes;c&=e.pendingLanes,a|=c,i.lanes=a,$e(e,a)}}var Rh={readContext:Ai,use:bh,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useLayoutEffect:In,useInsertionEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useSyncExternalStore:In,useId:In,useHostTransitionStatus:In,useFormState:In,useActionState:In,useOptimistic:In,useMemoCache:In,useCacheRefresh:In},U_={readContext:Ai,use:bh,useCallback:function(e,i){return Xi().memoizedState=[e,i===void 0?null:i],e},useContext:Ai,useEffect:b_,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Ah(4194308,4,x_.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Ah(4194308,4,e,i)},useInsertionEffect:function(e,i){Ah(4,2,e,i)},useMemo:function(e,i){var a=Xi();i=i===void 0?null:i;var c=e();if(Fa){tt(!0);try{e()}finally{tt(!1)}}return a.memoizedState=[c,i],c},useReducer:function(e,i,a){var c=Xi();if(a!==void 0){var m=a(i);if(Fa){tt(!0);try{a(i)}finally{tt(!1)}}}else m=i;return c.memoizedState=c.baseState=m,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:m},c.queue=e,e=e.dispatch=Iw.bind(null,ve,e),[c.memoizedState,e]},useRef:function(e){var i=Xi();return e={current:e},i.memoizedState=e},useState:function(e){e=qd(e);var i=e.queue,a=k_.bind(null,ve,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Gd,useDeferredValue:function(e,i){var a=Xi();return Zd(a,e,i)},useTransition:function(){var e=qd(!1);return e=M_.bind(null,ve,e.queue,!0,!1),Xi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var c=ve,m=Xi();if(fe){if(a===void 0)throw Error(o(407));a=a()}else{if(a=i(),cn===null)throw Error(o(349));(De&124)!==0||o_(c,i,a)}m.memoizedState=a;var g={value:a,getSnapshot:i};return m.queue=g,b_(l_.bind(null,c,g,e),[e]),c.flags|=2048,Pl(9,Sh(),a_.bind(null,c,g,a,i),null),a},useId:function(){var e=Xi(),i=cn.identifierPrefix;if(fe){var a=z,c=R;a=(c&~(1<<32-mt(c)-1)).toString(32)+a,i="«"+i+"R"+a,a=Eh++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=bw++,i="«"+i+"r"+a.toString(32)+"»";return e.memoizedState=i},useHostTransitionStatus:Yd,useFormState:__,useActionState:__,useOptimistic:function(e){var i=Xi();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Qd.bind(null,ve,!0,a),a.dispatch=i,[e,i]},useMemoCache:jd,useCacheRefresh:function(){return Xi().memoizedState=Rw.bind(null,ve)}},j_={readContext:Ai,use:bh,useCallback:I_,useContext:Ai,useEffect:w_,useImperativeHandle:R_,useInsertionEffect:S_,useLayoutEffect:A_,useMemo:C_,useReducer:wh,useRef:E_,useState:function(){return wh(Ys)},useDebugValue:Gd,useDeferredValue:function(e,i){var a=Nn();return P_(a,We.memoizedState,e,i)},useTransition:function(){var e=wh(Ys)[0],i=Nn().memoizedState;return[typeof e=="boolean"?e:Uu(e),i]},useSyncExternalStore:s_,useId:L_,useHostTransitionStatus:Yd,useFormState:y_,useActionState:y_,useOptimistic:function(e,i){var a=Nn();return h_(a,We,e,i)},useMemoCache:jd,useCacheRefresh:N_},Cw={readContext:Ai,use:bh,useCallback:I_,useContext:Ai,useEffect:w_,useImperativeHandle:R_,useInsertionEffect:S_,useLayoutEffect:A_,useMemo:C_,useReducer:Hd,useRef:E_,useState:function(){return Hd(Ys)},useDebugValue:Gd,useDeferredValue:function(e,i){var a=Nn();return We===null?Zd(a,e,i):P_(a,We.memoizedState,e,i)},useTransition:function(){var e=Hd(Ys)[0],i=Nn().memoizedState;return[typeof e=="boolean"?e:Uu(e),i]},useSyncExternalStore:s_,useId:L_,useHostTransitionStatus:Yd,useFormState:T_,useActionState:T_,useOptimistic:function(e,i){var a=Nn();return We!==null?h_(a,We,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:jd,useCacheRefresh:N_},Ml=null,Hu=0;function Ih(e){var i=Hu;return Hu+=1,Ml===null&&(Ml=[]),Xg(Ml,e,i)}function qu(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Ch(e,i){throw i.$$typeof===P?Error(o(525)):(e=Object.prototype.toString.call(i),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function B_(e){var i=e._init;return i(e._payload)}function H_(e){function i(Y,F){if(e){var $=Y.deletions;$===null?(Y.deletions=[F],Y.flags|=16):$.push(F)}}function a(Y,F){if(!e)return null;for(;F!==null;)i(Y,F),F=F.sibling;return null}function c(Y){for(var F=new Map;Y!==null;)Y.key!==null?F.set(Y.key,Y):F.set(Y.index,Y),Y=Y.sibling;return F}function m(Y,F){return Y=Lr(Y,F),Y.index=0,Y.sibling=null,Y}function g(Y,F,$){return Y.index=$,e?($=Y.alternate,$!==null?($=$.index,$<F?(Y.flags|=67108866,F):$):(Y.flags|=67108866,F)):(Y.flags|=1048576,F)}function S(Y){return e&&Y.alternate===null&&(Y.flags|=67108866),Y}function I(Y,F,$,dt){return F===null||F.tag!==6?(F=Pu($,Y.mode,dt),F.return=Y,F):(F=m(F,$),F.return=Y,F)}function U(Y,F,$,dt){var Ut=$.type;return Ut===Q?ht(Y,F,$.props.children,dt,$.key):F!==null&&(F.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===O&&B_(Ut)===F.type)?(F=m(F,$.props),qu(F,$),F.return=Y,F):(F=za($.type,$.key,$.props,null,Y.mode,dt),qu(F,$),F.return=Y,F)}function J(Y,F,$,dt){return F===null||F.tag!==4||F.stateNode.containerInfo!==$.containerInfo||F.stateNode.implementation!==$.implementation?(F=wl($,Y.mode,dt),F.return=Y,F):(F=m(F,$.children||[]),F.return=Y,F)}function ht(Y,F,$,dt,Ut){return F===null||F.tag!==7?(F=_s($,Y.mode,dt,Ut),F.return=Y,F):(F=m(F,$),F.return=Y,F)}function pt(Y,F,$){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Pu(""+F,Y.mode,$),F.return=Y,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case M:return $=za(F.type,F.key,F.props,null,Y.mode,$),qu($,F),$.return=Y,$;case q:return F=wl(F,Y.mode,$),F.return=Y,F;case O:var dt=F._init;return F=dt(F._payload),pt(Y,F,$)}if(pe(F)||H(F))return F=_s(F,Y.mode,$,null),F.return=Y,F;if(typeof F.then=="function")return pt(Y,Ih(F),$);if(F.$$typeof===_t)return pt(Y,ph(Y,F),$);Ch(Y,F)}return null}function et(Y,F,$,dt){var Ut=F!==null?F.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Ut!==null?null:I(Y,F,""+$,dt);if(typeof $=="object"&&$!==null){switch($.$$typeof){case M:return $.key===Ut?U(Y,F,$,dt):null;case q:return $.key===Ut?J(Y,F,$,dt):null;case O:return Ut=$._init,$=Ut($._payload),et(Y,F,$,dt)}if(pe($)||H($))return Ut!==null?null:ht(Y,F,$,dt,null);if(typeof $.then=="function")return et(Y,F,Ih($),dt);if($.$$typeof===_t)return et(Y,F,ph(Y,$),dt);Ch(Y,$)}return null}function it(Y,F,$,dt,Ut){if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return Y=Y.get($)||null,I(F,Y,""+dt,Ut);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case M:return Y=Y.get(dt.key===null?$:dt.key)||null,U(F,Y,dt,Ut);case q:return Y=Y.get(dt.key===null?$:dt.key)||null,J(F,Y,dt,Ut);case O:var be=dt._init;return dt=be(dt._payload),it(Y,F,$,dt,Ut)}if(pe(dt)||H(dt))return Y=Y.get($)||null,ht(F,Y,dt,Ut,null);if(typeof dt.then=="function")return it(Y,F,$,Ih(dt),Ut);if(dt.$$typeof===_t)return it(Y,F,$,ph(F,dt),Ut);Ch(F,dt)}return null}function ue(Y,F,$,dt){for(var Ut=null,be=null,Ft=F,ee=F=0,ni=null;Ft!==null&&ee<$.length;ee++){Ft.index>ee?(ni=Ft,Ft=null):ni=Ft.sibling;var Ve=et(Y,Ft,$[ee],dt);if(Ve===null){Ft===null&&(Ft=ni);break}e&&Ft&&Ve.alternate===null&&i(Y,Ft),F=g(Ve,F,ee),be===null?Ut=Ve:be.sibling=Ve,be=Ve,Ft=ni}if(ee===$.length)return a(Y,Ft),fe&&X(Y,ee),Ut;if(Ft===null){for(;ee<$.length;ee++)Ft=pt(Y,$[ee],dt),Ft!==null&&(F=g(Ft,F,ee),be===null?Ut=Ft:be.sibling=Ft,be=Ft);return fe&&X(Y,ee),Ut}for(Ft=c(Ft);ee<$.length;ee++)ni=it(Ft,Y,ee,$[ee],dt),ni!==null&&(e&&ni.alternate!==null&&Ft.delete(ni.key===null?ee:ni.key),F=g(ni,F,ee),be===null?Ut=ni:be.sibling=ni,be=ni);return e&&Ft.forEach(function(ea){return i(Y,ea)}),fe&&X(Y,ee),Ut}function $t(Y,F,$,dt){if($==null)throw Error(o(151));for(var Ut=null,be=null,Ft=F,ee=F=0,ni=null,Ve=$.next();Ft!==null&&!Ve.done;ee++,Ve=$.next()){Ft.index>ee?(ni=Ft,Ft=null):ni=Ft.sibling;var ea=et(Y,Ft,Ve.value,dt);if(ea===null){Ft===null&&(Ft=ni);break}e&&Ft&&ea.alternate===null&&i(Y,Ft),F=g(ea,F,ee),be===null?Ut=ea:be.sibling=ea,be=ea,Ft=ni}if(Ve.done)return a(Y,Ft),fe&&X(Y,ee),Ut;if(Ft===null){for(;!Ve.done;ee++,Ve=$.next())Ve=pt(Y,Ve.value,dt),Ve!==null&&(F=g(Ve,F,ee),be===null?Ut=Ve:be.sibling=Ve,be=Ve);return fe&&X(Y,ee),Ut}for(Ft=c(Ft);!Ve.done;ee++,Ve=$.next())Ve=it(Ft,Y,ee,Ve.value,dt),Ve!==null&&(e&&Ve.alternate!==null&&Ft.delete(Ve.key===null?ee:Ve.key),F=g(Ve,F,ee),be===null?Ut=Ve:be.sibling=Ve,be=Ve);return e&&Ft.forEach(function(P1){return i(Y,P1)}),fe&&X(Y,ee),Ut}function Qe(Y,F,$,dt){if(typeof $=="object"&&$!==null&&$.type===Q&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case M:t:{for(var Ut=$.key;F!==null;){if(F.key===Ut){if(Ut=$.type,Ut===Q){if(F.tag===7){a(Y,F.sibling),dt=m(F,$.props.children),dt.return=Y,Y=dt;break t}}else if(F.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===O&&B_(Ut)===F.type){a(Y,F.sibling),dt=m(F,$.props),qu(dt,$),dt.return=Y,Y=dt;break t}a(Y,F);break}else i(Y,F);F=F.sibling}$.type===Q?(dt=_s($.props.children,Y.mode,dt,$.key),dt.return=Y,Y=dt):(dt=za($.type,$.key,$.props,null,Y.mode,dt),qu(dt,$),dt.return=Y,Y=dt)}return S(Y);case q:t:{for(Ut=$.key;F!==null;){if(F.key===Ut)if(F.tag===4&&F.stateNode.containerInfo===$.containerInfo&&F.stateNode.implementation===$.implementation){a(Y,F.sibling),dt=m(F,$.children||[]),dt.return=Y,Y=dt;break t}else{a(Y,F);break}else i(Y,F);F=F.sibling}dt=wl($,Y.mode,dt),dt.return=Y,Y=dt}return S(Y);case O:return Ut=$._init,$=Ut($._payload),Qe(Y,F,$,dt)}if(pe($))return ue(Y,F,$,dt);if(H($)){if(Ut=H($),typeof Ut!="function")throw Error(o(150));return $=Ut.call($),$t(Y,F,$,dt)}if(typeof $.then=="function")return Qe(Y,F,Ih($),dt);if($.$$typeof===_t)return Qe(Y,F,ph(Y,$),dt);Ch(Y,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,F!==null&&F.tag===6?(a(Y,F.sibling),dt=m(F,$),dt.return=Y,Y=dt):(a(Y,F),dt=Pu($,Y.mode,dt),dt.return=Y,Y=dt),S(Y)):a(Y,F)}return function(Y,F,$,dt){try{Hu=0;var Ut=Qe(Y,F,$,dt);return Ml=null,Ut}catch(Ft){if(Ft===Du||Ft===_h)throw Ft;var be=ji(29,Ft,null,Y.mode);return be.lanes=dt,be.return=Y,be}finally{}}}var Ol=H_(!0),q_=H_(!1),kr=lt(null),vs=null;function jo(e){var i=e.alternate;st(Wn,Wn.current&1),st(kr,e),vs===null&&(i===null||Rl.current!==null||i.memoizedState!==null)&&(vs=e)}function F_(e){if(e.tag===22){if(st(Wn,Wn.current),st(kr,e),vs===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(vs=e)}}else Bo()}function Bo(){st(Wn,Wn.current),st(kr,kr.current)}function Qs(e){bt(kr),vs===e&&(vs=null),bt(Wn)}var Wn=lt(0);function Ph(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Um(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Kd(e,i,a,c){i=e.memoizedState,a=a(c,i),a=a==null?i:x({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Xd={enqueueSetState:function(e,i,a){e=e._reactInternals;var c=yr(),m=Vo(c);m.payload=i,a!=null&&(m.callback=a),i=zo(e,m,c),i!==null&&(vr(i,e,c),Nu(i,e,c))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var c=yr(),m=Vo(c);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=zo(e,m,c),i!==null&&(vr(i,e,c),Nu(i,e,c))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=yr(),c=Vo(a);c.tag=2,i!=null&&(c.callback=i),i=zo(e,c,a),i!==null&&(vr(i,e,a),Nu(i,e,a))}};function G_(e,i,a,c,m,g,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,g,S):i.prototype&&i.prototype.isPureReactComponent?!Vi(a,c)||!Vi(m,g):!0}function Z_(e,i,a,c){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==e&&Xd.enqueueReplaceState(i,i.state,null)}function Ga(e,i){var a=i;if("ref"in i){a={};for(var c in i)c!=="ref"&&(a[c]=i[c])}if(e=e.defaultProps){a===i&&(a=x({},a));for(var m in e)a[m]===void 0&&(a[m]=e[m])}return a}var Mh=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function W_(e){Mh(e)}function Y_(e){console.error(e)}function Q_(e){Mh(e)}function Oh(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function K_(e,i,a){try{var c=e.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function $d(e,i,a){return a=Vo(a),a.tag=3,a.payload={element:null},a.callback=function(){Oh(e,i)},a}function X_(e){return e=Vo(e),e.tag=3,e}function $_(e,i,a,c){var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var g=c.value;e.payload=function(){return m(g)},e.callback=function(){K_(i,a,c)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(e.callback=function(){K_(i,a,c),typeof m!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function Pw(e,i,a,c,m){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=a.alternate,i!==null&&Ba(i,a,m,!0),a=kr.current,a!==null){switch(a.tag){case 13:return vs===null?bm():a.alternate===null&&An===0&&(An=3),a.flags&=-257,a.flags|=65536,a.lanes=m,c===Rd?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([c]):i.add(c),Sm(e,c,m)),!1;case 22:return a.flags|=65536,c===Rd?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([c]):a.add(c)),Sm(e,c,m)),!1}throw Error(o(435,a.tag))}return Sm(e,c,m),bm(),!1}if(fe)return i=kr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,c!==Jn&&(e=Error(o(422),{cause:c}),No(zi(e,a)))):(c!==Jn&&(i=Error(o(423),{cause:c}),No(zi(i,a))),e=e.current.alternate,e.flags|=65536,m&=-m,e.lanes|=m,c=zi(c,a),m=$d(e.stateNode,c,m),Pd(e,m),An!==4&&(An=2)),!1;var g=Error(o(520),{cause:c});if(g=zi(g,a),Ku===null?Ku=[g]:Ku.push(g),An!==4&&(An=2),i===null)return!0;c=zi(c,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=m&-m,a.lanes|=e,e=$d(a.stateNode,c,e),Pd(a,e),!1;case 1:if(i=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Wo===null||!Wo.has(g))))return a.flags|=65536,m&=-m,a.lanes|=m,m=X_(m),$_(m,e,a,c),Pd(a,m),!1}a=a.return}while(a!==null);return!1}var J_=Error(o(461)),ti=!1;function fi(e,i,a,c){i.child=e===null?q_(i,null,a,c):Ol(i,e.child,a,c)}function ty(e,i,a,c,m){a=a.render;var g=i.ref;if("ref"in c){var S={};for(var I in c)I!=="ref"&&(S[I]=c[I])}else S=c;return Ha(i),c=Nd(e,i,a,S,g,m),I=kd(),e!==null&&!ti?(Vd(e,i,m),Ks(e,i,m)):(fe&&I&&vt(i),i.flags|=1,fi(e,i,c,m),i.child)}function ey(e,i,a,c,m){if(e===null){var g=a.type;return typeof g=="function"&&!bl(g)&&g.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=g,ny(e,i,g,c,m)):(e=za(a.type,null,c,i,i.mode,m),e.ref=i.ref,e.return=i,i.child=e)}if(g=e.child,!om(e,m)){var S=g.memoizedProps;if(a=a.compare,a=a!==null?a:Vi,a(S,c)&&e.ref===i.ref)return Ks(e,i,m)}return i.flags|=1,e=Lr(g,c),e.ref=i.ref,e.return=i,i.child=e}function ny(e,i,a,c,m){if(e!==null){var g=e.memoizedProps;if(Vi(g,c)&&e.ref===i.ref)if(ti=!1,i.pendingProps=c=g,om(e,m))(e.flags&131072)!==0&&(ti=!0);else return i.lanes=e.lanes,Ks(e,i,m)}return Jd(e,i,a,c,m)}function iy(e,i,a){var c=i.pendingProps,m=c.children,g=e!==null?e.memoizedState:null;if(c.mode==="hidden"){if((i.flags&128)!==0){if(c=g!==null?g.baseLanes|a:a,e!==null){for(m=i.child=e.child,g=0;m!==null;)g=g|m.lanes|m.childLanes,m=m.sibling;i.childLanes=g&~c}else i.childLanes=0,i.child=null;return ry(e,i,c,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&gh(i,g!==null?g.cachePool:null),g!==null?n_(i,g):Od(),F_(i);else return i.lanes=i.childLanes=536870912,ry(e,i,g!==null?g.baseLanes|a:a,a)}else g!==null?(gh(i,g.cachePool),n_(i,g),Bo(),i.memoizedState=null):(e!==null&&gh(i,null),Od(),Bo());return fi(e,i,m,a),i.child}function ry(e,i,a,c){var m=xd();return m=m===null?null:{parent:Zn._currentValue,pool:m},i.memoizedState={baseLanes:a,cachePool:m},e!==null&&gh(i,null),Od(),F_(i),e!==null&&Ba(e,i,c,!0),null}function Dh(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Jd(e,i,a,c,m){return Ha(i),a=Nd(e,i,a,c,void 0,m),c=kd(),e!==null&&!ti?(Vd(e,i,m),Ks(e,i,m)):(fe&&c&&vt(i),i.flags|=1,fi(e,i,a,m),i.child)}function sy(e,i,a,c,m,g){return Ha(i),i.updateQueue=null,a=r_(i,c,a,m),i_(e),c=kd(),e!==null&&!ti?(Vd(e,i,g),Ks(e,i,g)):(fe&&c&&vt(i),i.flags|=1,fi(e,i,a,g),i.child)}function oy(e,i,a,c,m){if(Ha(i),i.stateNode===null){var g=Zs,S=a.contextType;typeof S=="object"&&S!==null&&(g=Ai(S)),g=new a(c,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Xd,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=c,g.state=i.memoizedState,g.refs={},Id(i),S=a.contextType,g.context=typeof S=="object"&&S!==null?Ai(S):Zs,g.state=i.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(Kd(i,a,S,c),g.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&Xd.enqueueReplaceState(g,g.state,null),Vu(i,c,g,m),ku(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(e===null){g=i.stateNode;var I=i.memoizedProps,U=Ga(a,I);g.props=U;var J=g.context,ht=a.contextType;S=Zs,typeof ht=="object"&&ht!==null&&(S=Ai(ht));var pt=a.getDerivedStateFromProps;ht=typeof pt=="function"||typeof g.getSnapshotBeforeUpdate=="function",I=i.pendingProps!==I,ht||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(I||J!==S)&&Z_(i,g,c,S),ko=!1;var et=i.memoizedState;g.state=et,Vu(i,c,g,m),ku(),J=i.memoizedState,I||et!==J||ko?(typeof pt=="function"&&(Kd(i,a,pt,c),J=i.memoizedState),(U=ko||G_(i,a,U,c,et,J,S))?(ht||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=J),g.props=c,g.state=J,g.context=S,c=U):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{g=i.stateNode,Cd(e,i),S=i.memoizedProps,ht=Ga(a,S),g.props=ht,pt=i.pendingProps,et=g.context,J=a.contextType,U=Zs,typeof J=="object"&&J!==null&&(U=Ai(J)),I=a.getDerivedStateFromProps,(J=typeof I=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==pt||et!==U)&&Z_(i,g,c,U),ko=!1,et=i.memoizedState,g.state=et,Vu(i,c,g,m),ku();var it=i.memoizedState;S!==pt||et!==it||ko||e!==null&&e.dependencies!==null&&mh(e.dependencies)?(typeof I=="function"&&(Kd(i,a,I,c),it=i.memoizedState),(ht=ko||G_(i,a,ht,c,et,it,U)||e!==null&&e.dependencies!==null&&mh(e.dependencies))?(J||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,it,U),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,it,U)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===e.memoizedProps&&et===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&et===e.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=it),g.props=c,g.state=it,g.context=U,c=ht):(typeof g.componentDidUpdate!="function"||S===e.memoizedProps&&et===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&et===e.memoizedState||(i.flags|=1024),c=!1)}return g=c,Dh(e,i),c=(i.flags&128)!==0,g||c?(g=i.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,e!==null&&c?(i.child=Ol(i,e.child,null,m),i.child=Ol(i,null,a,m)):fi(e,i,a,m),i.memoizedState=g.state,e=i.child):e=Ks(e,i,m),e}function ay(e,i,a,c){return Lo(),i.flags|=256,fi(e,i,a,c),i.child}var tm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function em(e){return{baseLanes:e,cachePool:Yg()}}function nm(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Vr),e}function ly(e,i,a){var c=i.pendingProps,m=!1,g=(i.flags&128)!==0,S;if((S=g)||(S=e!==null&&e.memoizedState===null?!1:(Wn.current&2)!==0),S&&(m=!0,i.flags&=-129),S=(i.flags&32)!==0,i.flags&=-33,e===null){if(fe){if(m?jo(i):Bo(),fe){var I=Ht,U;if(U=I){t:{for(U=I,I=_n;U.nodeType!==8;){if(!I){I=null;break t}if(U=es(U.nextSibling),U===null){I=null;break t}}I=U}I!==null?(i.memoizedState={dehydrated:I,treeContext:b!==null?{id:R,overflow:z}:null,retryLane:536870912,hydrationErrors:null},U=ji(18,null,null,0),U.stateNode=I,U.return=i,i.child=U,zt=i,Ht=null,U=!0):U=!1}U||Ki(i)}if(I=i.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return Um(I)?i.lanes=32:i.lanes=536870912,null;Qs(i)}return I=c.children,c=c.fallback,m?(Bo(),m=i.mode,I=Lh({mode:"hidden",children:I},m),c=_s(c,m,a,null),I.return=i,c.return=i,I.sibling=c,i.child=I,m=i.child,m.memoizedState=em(a),m.childLanes=nm(e,S,a),i.memoizedState=tm,c):(jo(i),im(i,I))}if(U=e.memoizedState,U!==null&&(I=U.dehydrated,I!==null)){if(g)i.flags&256?(jo(i),i.flags&=-257,i=rm(e,i,a)):i.memoizedState!==null?(Bo(),i.child=e.child,i.flags|=128,i=null):(Bo(),m=c.fallback,I=i.mode,c=Lh({mode:"visible",children:c.children},I),m=_s(m,I,a,null),m.flags|=2,c.return=i,m.return=i,c.sibling=m,i.child=c,Ol(i,e.child,null,a),c=i.child,c.memoizedState=em(a),c.childLanes=nm(e,S,a),i.memoizedState=tm,i=m);else if(jo(i),Um(I)){if(S=I.nextSibling&&I.nextSibling.dataset,S)var J=S.dgst;S=J,c=Error(o(419)),c.stack="",c.digest=S,No({value:c,source:null,stack:null}),i=rm(e,i,a)}else if(ti||Ba(e,i,a,!1),S=(a&e.childLanes)!==0,ti||S){if(S=cn,S!==null&&(c=a&-a,c=(c&42)!==0?1:Hn(c),c=(c&(S.suspendedLanes|a))!==0?0:c,c!==0&&c!==U.retryLane))throw U.retryLane=c,Oo(e,c),vr(S,e,c),J_;I.data==="$?"||bm(),i=rm(e,i,a)}else I.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=U.treeContext,Ht=es(I.nextSibling),zt=i,fe=!0,un=null,_n=!1,e!==null&&(d[_++]=R,d[_++]=z,d[_++]=b,R=e.id,z=e.overflow,b=i),i=im(i,c.children),i.flags|=4096);return i}return m?(Bo(),m=c.fallback,I=i.mode,U=e.child,J=U.sibling,c=Lr(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,J!==null?m=Lr(J,m):(m=_s(m,I,a,null),m.flags|=2),m.return=i,c.return=i,c.sibling=m,i.child=c,c=m,m=i.child,I=e.child.memoizedState,I===null?I=em(a):(U=I.cachePool,U!==null?(J=Zn._currentValue,U=U.parent!==J?{parent:J,pool:J}:U):U=Yg(),I={baseLanes:I.baseLanes|a,cachePool:U}),m.memoizedState=I,m.childLanes=nm(e,S,a),i.memoizedState=tm,c):(jo(i),a=e.child,e=a.sibling,a=Lr(a,{mode:"visible",children:c.children}),a.return=i,a.sibling=null,e!==null&&(S=i.deletions,S===null?(i.deletions=[e],i.flags|=16):S.push(e)),i.child=a,i.memoizedState=null,a)}function im(e,i){return i=Lh({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Lh(e,i){return e=ji(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function rm(e,i,a){return Ol(i,e.child,null,a),e=im(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function uy(e,i,a){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i),ja(e.return,i,a)}function sm(e,i,a,c,m){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:m}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=m)}function cy(e,i,a){var c=i.pendingProps,m=c.revealOrder,g=c.tail;if(fi(e,i,c.children,a),c=Wn.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uy(e,a,i);else if(e.tag===19)uy(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}switch(st(Wn,c),m){case"forwards":for(a=i.child,m=null;a!==null;)e=a.alternate,e!==null&&Ph(e)===null&&(m=a),a=a.sibling;a=m,a===null?(m=i.child,i.child=null):(m=a.sibling,a.sibling=null),sm(i,!1,m,a,g);break;case"backwards":for(a=null,m=i.child,i.child=null;m!==null;){if(e=m.alternate,e!==null&&Ph(e)===null){i.child=m;break}e=m.sibling,m.sibling=a,a=m,m=e}sm(i,!0,a,null,g);break;case"together":sm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ks(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Zo|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Ba(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(o(153));if(i.child!==null){for(e=i.child,a=Lr(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Lr(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function om(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&mh(e)))}function Mw(e,i,a){switch(i.tag){case 3:Zt(i,i.stateNode.containerInfo),ys(i,Zn,e.memoizedState.cache),Lo();break;case 27:case 5:Ue(i);break;case 4:Zt(i,i.stateNode.containerInfo);break;case 10:ys(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(jo(i),i.flags|=128,null):(a&i.child.childLanes)!==0?ly(e,i,a):(jo(i),e=Ks(e,i,a),e!==null?e.sibling:null);jo(i);break;case 19:var m=(e.flags&128)!==0;if(c=(a&i.childLanes)!==0,c||(Ba(e,i,a,!1),c=(a&i.childLanes)!==0),m){if(c)return cy(e,i,a);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),st(Wn,Wn.current),c)break;return null;case 22:case 23:return i.lanes=0,iy(e,i,a);case 24:ys(i,Zn,e.memoizedState.cache)}return Ks(e,i,a)}function hy(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)ti=!0;else{if(!om(e,a)&&(i.flags&128)===0)return ti=!1,Mw(e,i,a);ti=(e.flags&131072)!==0}else ti=!1,fe&&(i.flags&1048576)!==0&&rt(i,u,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var c=i.elementType,m=c._init;if(c=m(c._payload),i.type=c,typeof c=="function")bl(c)?(e=Ga(c,e),i.tag=1,i=oy(null,i,c,e,a)):(i.tag=0,i=Jd(null,i,c,e,a));else{if(c!=null){if(m=c.$$typeof,m===Bt){i.tag=11,i=ty(null,i,c,e,a);break t}else if(m===V){i.tag=14,i=ey(null,i,c,e,a);break t}}throw i=ce(c)||c,Error(o(306,i,""))}}return i;case 0:return Jd(e,i,i.type,i.pendingProps,a);case 1:return c=i.type,m=Ga(c,i.pendingProps),oy(e,i,c,m,a);case 3:t:{if(Zt(i,i.stateNode.containerInfo),e===null)throw Error(o(387));c=i.pendingProps;var g=i.memoizedState;m=g.element,Cd(e,i),Vu(i,c,null,a);var S=i.memoizedState;if(c=S.cache,ys(i,Zn,c),c!==g.cache&&Sl(i,[Zn],a,!0),ku(),c=S.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:S.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=ay(e,i,c,a);break t}else if(c!==m){m=zi(Error(o(424)),i),No(m),i=ay(e,i,c,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ht=es(e.firstChild),zt=i,fe=!0,un=null,_n=!0,a=q_(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Lo(),c===m){i=Ks(e,i,a);break t}fi(e,i,c,a)}i=i.child}return i;case 26:return Dh(e,i),e===null?(a=pv(i.type,null,i.pendingProps,null))?i.memoizedState=a:fe||(a=i.type,e=i.pendingProps,c=Yh(At.current).createElement(a),c[fn]=i,c[sn]=e,mi(c,a,e),on(c),i.stateNode=c):i.memoizedState=pv(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Ue(i),e===null&&fe&&(c=i.stateNode=fv(i.type,i.pendingProps,At.current),zt=i,_n=!0,m=Ht,Ko(i.type)?(jm=m,Ht=es(c.firstChild)):Ht=m),fi(e,i,i.pendingProps.children,a),Dh(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&fe&&((m=c=Ht)&&(c=s1(c,i.type,i.pendingProps,_n),c!==null?(i.stateNode=c,zt=i,Ht=es(c.firstChild),_n=!1,m=!0):m=!1),m||Ki(i)),Ue(i),m=i.type,g=i.pendingProps,S=e!==null?e.memoizedProps:null,c=g.children,km(m,g)?c=null:S!==null&&km(m,S)&&(i.flags|=32),i.memoizedState!==null&&(m=Nd(e,i,ww,null,null,a),sc._currentValue=m),Dh(e,i),fi(e,i,c,a),i.child;case 6:return e===null&&fe&&((e=a=Ht)&&(a=o1(a,i.pendingProps,_n),a!==null?(i.stateNode=a,zt=i,Ht=null,e=!0):e=!1),e||Ki(i)),null;case 13:return ly(e,i,a);case 4:return Zt(i,i.stateNode.containerInfo),c=i.pendingProps,e===null?i.child=Ol(i,null,c,a):fi(e,i,c,a),i.child;case 11:return ty(e,i,i.type,i.pendingProps,a);case 7:return fi(e,i,i.pendingProps,a),i.child;case 8:return fi(e,i,i.pendingProps.children,a),i.child;case 12:return fi(e,i,i.pendingProps.children,a),i.child;case 10:return c=i.pendingProps,ys(i,i.type,c.value),fi(e,i,c.children,a),i.child;case 9:return m=i.type._context,c=i.pendingProps.children,Ha(i),m=Ai(m),c=c(m),i.flags|=1,fi(e,i,c,a),i.child;case 14:return ey(e,i,i.type,i.pendingProps,a);case 15:return ny(e,i,i.type,i.pendingProps,a);case 19:return cy(e,i,a);case 31:return c=i.pendingProps,a=i.mode,c={mode:c.mode,children:c.children},e===null?(a=Lh(c,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Lr(e.child,c),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return iy(e,i,a);case 24:return Ha(i),c=Ai(Zn),e===null?(m=xd(),m===null&&(m=cn,g=Sd(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=a),m=g),i.memoizedState={parent:c,cache:m},Id(i),ys(i,Zn,m)):((e.lanes&a)!==0&&(Cd(e,i),Vu(i,null,null,a),ku()),m=e.memoizedState,g=i.memoizedState,m.parent!==c?(m={parent:c,cache:c},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),ys(i,Zn,c)):(c=g.cache,ys(i,Zn,c),c!==m.cache&&Sl(i,[Zn],a,!0))),fi(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(o(156,i.tag))}function Xs(e){e.flags|=4}function fy(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Tv(i)){if(i=kr.current,i!==null&&((De&4194048)===De?vs!==null:(De&62914560)!==De&&(De&536870912)===0||i!==vs))throw Lu=Rd,Qg;e.flags|=8192}}function Nh(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?wt():536870912,e.lanes|=i,kl|=i)}function Fu(e,i){if(!fe)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function yn(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,c=0;if(i)for(var m=e.child;m!==null;)a|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=e,m=m.sibling;else for(m=e.child;m!==null;)a|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=e,m=m.sibling;return e.subtreeFlags|=c,e.childLanes=a,i}function Ow(e,i,a){var c=i.pendingProps;switch(Dt(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(i),null;case 1:return yn(i),null;case 3:return a=i.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Jr(Zn),ze(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ua(i)?Xs(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,dh())),yn(i),null;case 26:return a=i.memoizedState,e===null?(Xs(i),a!==null?(yn(i),fy(i,a)):(yn(i),i.flags&=-16777217)):a?a!==e.memoizedState?(Xs(i),yn(i),fy(i,a)):(yn(i),i.flags&=-16777217):(e.memoizedProps!==c&&Xs(i),yn(i),i.flags&=-16777217),null;case 27:Xe(i),a=At.current;var m=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==c&&Xs(i);else{if(!c){if(i.stateNode===null)throw Error(o(166));return yn(i),null}e=Et.current,Ua(i)?hh(i):(e=fv(m,c,a),i.stateNode=e,Xs(i))}return yn(i),null;case 5:if(Xe(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==c&&Xs(i);else{if(!c){if(i.stateNode===null)throw Error(o(166));return yn(i),null}if(e=Et.current,Ua(i))hh(i);else{switch(m=Yh(At.current),e){case 1:e=m.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=m.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=m.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=m.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof c.is=="string"?m.createElement("select",{is:c.is}):m.createElement("select"),c.multiple?e.multiple=!0:c.size&&(e.size=c.size);break;default:e=typeof c.is=="string"?m.createElement(a,{is:c.is}):m.createElement(a)}}e[fn]=i,e[sn]=c;t:for(m=i.child;m!==null;){if(m.tag===5||m.tag===6)e.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===i)break t;for(;m.sibling===null;){if(m.return===null||m.return===i)break t;m=m.return}m.sibling.return=m.return,m=m.sibling}i.stateNode=e;t:switch(mi(e,a,c),a){case"button":case"input":case"select":case"textarea":e=!!c.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Xs(i)}}return yn(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==c&&Xs(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(o(166));if(e=At.current,Ua(i)){if(e=i.stateNode,a=i.memoizedProps,c=null,m=zt,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}e[fn]=i,e=!!(e.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||sv(e.nodeValue,a)),e||Ki(i)}else e=Yh(e).createTextNode(c),e[fn]=i,i.stateNode=e}return yn(i),null;case 13:if(c=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(m=Ua(i),c!==null&&c.dehydrated!==null){if(e===null){if(!m)throw Error(o(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(o(317));m[fn]=i}else Lo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;yn(i),m=!1}else m=dh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(Qs(i),i):(Qs(i),null)}if(Qs(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=c!==null,e=e!==null&&e.memoizedState!==null,a){c=i.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==m&&(c.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),Nh(i,i.updateQueue),yn(i),null;case 4:return ze(),e===null&&Mm(i.stateNode.containerInfo),yn(i),null;case 10:return Jr(i.type),yn(i),null;case 19:if(bt(Wn),m=i.memoizedState,m===null)return yn(i),null;if(c=(i.flags&128)!==0,g=m.rendering,g===null)if(c)Fu(m,!1);else{if(An!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(g=Ph(e),g!==null){for(i.flags|=128,Fu(m,!1),e=g.updateQueue,i.updateQueue=e,Nh(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Cu(a,e),a=a.sibling;return st(Wn,Wn.current&1|2),i.child}e=e.sibling}m.tail!==null&&nn()>zh&&(i.flags|=128,c=!0,Fu(m,!1),i.lanes=4194304)}else{if(!c)if(e=Ph(g),e!==null){if(i.flags|=128,c=!0,e=e.updateQueue,i.updateQueue=e,Nh(i,e),Fu(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!fe)return yn(i),null}else 2*nn()-m.renderingStartTime>zh&&a!==536870912&&(i.flags|=128,c=!0,Fu(m,!1),i.lanes=4194304);m.isBackwards?(g.sibling=i.child,i.child=g):(e=m.last,e!==null?e.sibling=g:i.child=g,m.last=g)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=nn(),i.sibling=null,e=Wn.current,st(Wn,c?e&1|2:e&1),i):(yn(i),null);case 22:case 23:return Qs(i),Dd(),c=i.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(a&536870912)!==0&&(i.flags&128)===0&&(yn(i),i.subtreeFlags&6&&(i.flags|=8192)):yn(i),a=i.updateQueue,a!==null&&Nh(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==a&&(i.flags|=2048),e!==null&&bt(qa),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Jr(Zn),yn(i),null;case 25:return null;case 30:return null}throw Error(o(156,i.tag))}function Dw(e,i){switch(Dt(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Jr(Zn),ze(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Xe(i),null;case 13:if(Qs(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(o(340));Lo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return bt(Wn),null;case 4:return ze(),null;case 10:return Jr(i.type),null;case 22:case 23:return Qs(i),Dd(),e!==null&&bt(qa),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Jr(Zn),null;case 25:return null;default:return null}}function dy(e,i){switch(Dt(i),i.tag){case 3:Jr(Zn),ze();break;case 26:case 27:case 5:Xe(i);break;case 4:ze();break;case 13:Qs(i);break;case 19:bt(Wn);break;case 10:Jr(i.type);break;case 22:case 23:Qs(i),Dd(),e!==null&&bt(qa);break;case 24:Jr(Zn)}}function Gu(e,i){try{var a=i.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var m=c.next;a=m;do{if((a.tag&e)===e){c=void 0;var g=a.create,S=a.inst;c=g(),S.destroy=c}a=a.next}while(a!==m)}}catch(I){tn(i,i.return,I)}}function Ho(e,i,a){try{var c=i.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var g=m.next;c=g;do{if((c.tag&e)===e){var S=c.inst,I=S.destroy;if(I!==void 0){S.destroy=void 0,m=i;var U=a,J=I;try{J()}catch(ht){tn(m,U,ht)}}}c=c.next}while(c!==g)}}catch(ht){tn(i,i.return,ht)}}function my(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{e_(i,a)}catch(c){tn(e,e.return,c)}}}function py(e,i,a){a.props=Ga(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(c){tn(e,i,c)}}function Zu(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof a=="function"?e.refCleanup=a(c):a.current=c}}catch(m){tn(e,i,m)}}function Ts(e,i){var a=e.ref,c=e.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(m){tn(e,i,m)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(m){tn(e,i,m)}else a.current=null}function gy(e){var i=e.type,a=e.memoizedProps,c=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break t;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(m){tn(e,e.return,m)}}function am(e,i,a){try{var c=e.stateNode;t1(c,e.type,a,i),c[sn]=i}catch(m){tn(e,e.return,m)}}function _y(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ko(e.type)||e.tag===4}function lm(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||_y(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ko(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function um(e,i,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Wh));else if(c!==4&&(c===27&&Ko(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(um(e,i,a),e=e.sibling;e!==null;)um(e,i,a),e=e.sibling}function kh(e,i,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(c!==4&&(c===27&&Ko(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(kh(e,i,a),e=e.sibling;e!==null;)kh(e,i,a),e=e.sibling}function yy(e){var i=e.stateNode,a=e.memoizedProps;try{for(var c=e.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);mi(i,c,a),i[fn]=e,i[sn]=a}catch(g){tn(e,e.return,g)}}var $s=!1,Cn=!1,cm=!1,vy=typeof WeakSet=="function"?WeakSet:Set,ei=null;function Lw(e,i){if(e=e.containerInfo,Lm=tf,e=Oa(e),Da(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var m=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break t}var S=0,I=-1,U=-1,J=0,ht=0,pt=e,et=null;e:for(;;){for(var it;pt!==a||m!==0&&pt.nodeType!==3||(I=S+m),pt!==g||c!==0&&pt.nodeType!==3||(U=S+c),pt.nodeType===3&&(S+=pt.nodeValue.length),(it=pt.firstChild)!==null;)et=pt,pt=it;for(;;){if(pt===e)break e;if(et===a&&++J===m&&(I=S),et===g&&++ht===c&&(U=S),(it=pt.nextSibling)!==null)break;pt=et,et=pt.parentNode}pt=it}a=I===-1||U===-1?null:{start:I,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(Nm={focusedElem:e,selectionRange:a},tf=!1,ei=i;ei!==null;)if(i=ei,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,ei=e;else for(;ei!==null;){switch(i=ei,g=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,a=i,m=g.memoizedProps,g=g.memoizedState,c=a.stateNode;try{var ue=Ga(a.type,m,a.elementType===a.type);e=c.getSnapshotBeforeUpdate(ue,g),c.__reactInternalSnapshotBeforeUpdate=e}catch($t){tn(a,a.return,$t)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)zm(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":zm(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=i.sibling,e!==null){e.return=i.return,ei=e;break}ei=i.return}}function Ty(e,i,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:qo(e,a),c&4&&Gu(5,a);break;case 1:if(qo(e,a),c&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(S){tn(a,a.return,S)}else{var m=Ga(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(m,i,e.__reactInternalSnapshotBeforeUpdate)}catch(S){tn(a,a.return,S)}}c&64&&my(a),c&512&&Zu(a,a.return);break;case 3:if(qo(e,a),c&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{e_(e,i)}catch(S){tn(a,a.return,S)}}break;case 27:i===null&&c&4&&yy(a);case 26:case 5:qo(e,a),i===null&&c&4&&gy(a),c&512&&Zu(a,a.return);break;case 12:qo(e,a);break;case 13:qo(e,a),c&4&&wy(e,a),c&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=qw.bind(null,a),a1(e,a))));break;case 22:if(c=a.memoizedState!==null||$s,!c){i=i!==null&&i.memoizedState!==null||Cn,m=$s;var g=Cn;$s=c,(Cn=i)&&!g?Fo(e,a,(a.subtreeFlags&8772)!==0):qo(e,a),$s=m,Cn=g}break;case 30:break;default:qo(e,a)}}function Ey(e){var i=e.alternate;i!==null&&(e.alternate=null,Ey(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Zi(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var gn=null,$i=!1;function Js(e,i,a){for(a=a.child;a!==null;)by(e,i,a),a=a.sibling}function by(e,i,a){if(G&&typeof G.onCommitFiberUnmount=="function")try{G.onCommitFiberUnmount(he,a)}catch{}switch(a.tag){case 26:Cn||Ts(a,i),Js(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Cn||Ts(a,i);var c=gn,m=$i;Ko(a.type)&&(gn=a.stateNode,$i=!1),Js(e,i,a),ec(a.stateNode),gn=c,$i=m;break;case 5:Cn||Ts(a,i);case 6:if(c=gn,m=$i,gn=null,Js(e,i,a),gn=c,$i=m,gn!==null)if($i)try{(gn.nodeType===9?gn.body:gn.nodeName==="HTML"?gn.ownerDocument.body:gn).removeChild(a.stateNode)}catch(g){tn(a,i,g)}else try{gn.removeChild(a.stateNode)}catch(g){tn(a,i,g)}break;case 18:gn!==null&&($i?(e=gn,cv(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),uc(e)):cv(gn,a.stateNode));break;case 4:c=gn,m=$i,gn=a.stateNode.containerInfo,$i=!0,Js(e,i,a),gn=c,$i=m;break;case 0:case 11:case 14:case 15:Cn||Ho(2,a,i),Cn||Ho(4,a,i),Js(e,i,a);break;case 1:Cn||(Ts(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"&&py(a,i,c)),Js(e,i,a);break;case 21:Js(e,i,a);break;case 22:Cn=(c=Cn)||a.memoizedState!==null,Js(e,i,a),Cn=c;break;default:Js(e,i,a)}}function wy(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{uc(e)}catch(a){tn(i,i.return,a)}}function Nw(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new vy),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new vy),i;default:throw Error(o(435,e.tag))}}function hm(e,i){var a=Nw(e);i.forEach(function(c){var m=Fw.bind(null,e,c);a.has(c)||(a.add(c),c.then(m,m))})}function pr(e,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var m=a[c],g=e,S=i,I=S;t:for(;I!==null;){switch(I.tag){case 27:if(Ko(I.type)){gn=I.stateNode,$i=!1;break t}break;case 5:gn=I.stateNode,$i=!1;break t;case 3:case 4:gn=I.stateNode.containerInfo,$i=!0;break t}I=I.return}if(gn===null)throw Error(o(160));by(g,S,m),gn=null,$i=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Sy(i,e),i=i.sibling}var ts=null;function Sy(e,i){var a=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pr(i,e),gr(e),c&4&&(Ho(3,e,e.return),Gu(3,e),Ho(5,e,e.return));break;case 1:pr(i,e),gr(e),c&512&&(Cn||a===null||Ts(a,a.return)),c&64&&$s&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var m=ts;if(pr(i,e),gr(e),c&512&&(Cn||a===null||Ts(a,a.return)),c&4){var g=a!==null?a.memoizedState:null;if(c=e.memoizedState,a===null)if(c===null)if(e.stateNode===null){t:{c=e.type,a=e.memoizedProps,m=m.ownerDocument||m;e:switch(c){case"title":g=m.getElementsByTagName("title")[0],(!g||g[wr]||g[fn]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(c),m.head.insertBefore(g,m.querySelector("head > title"))),mi(g,c,a),g[fn]=e,on(g),c=g;break t;case"link":var S=yv("link","href",m).get(c+(a.href||""));if(S){for(var I=0;I<S.length;I++)if(g=S[I],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(I,1);break e}}g=m.createElement(c),mi(g,c,a),m.head.appendChild(g);break;case"meta":if(S=yv("meta","content",m).get(c+(a.content||""))){for(I=0;I<S.length;I++)if(g=S[I],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(I,1);break e}}g=m.createElement(c),mi(g,c,a),m.head.appendChild(g);break;default:throw Error(o(468,c))}g[fn]=e,on(g),c=g}e.stateNode=c}else vv(m,e.type,e.stateNode);else e.stateNode=_v(m,c,e.memoizedProps);else g!==c?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,c===null?vv(m,e.type,e.stateNode):_v(m,c,e.memoizedProps)):c===null&&e.stateNode!==null&&am(e,e.memoizedProps,a.memoizedProps)}break;case 27:pr(i,e),gr(e),c&512&&(Cn||a===null||Ts(a,a.return)),a!==null&&c&4&&am(e,e.memoizedProps,a.memoizedProps);break;case 5:if(pr(i,e),gr(e),c&512&&(Cn||a===null||Ts(a,a.return)),e.flags&32){m=e.stateNode;try{Kn(m,"")}catch(it){tn(e,e.return,it)}}c&4&&e.stateNode!=null&&(m=e.memoizedProps,am(e,m,a!==null?a.memoizedProps:m)),c&1024&&(cm=!0);break;case 6:if(pr(i,e),gr(e),c&4){if(e.stateNode===null)throw Error(o(162));c=e.memoizedProps,a=e.stateNode;try{a.nodeValue=c}catch(it){tn(e,e.return,it)}}break;case 3:if(Xh=null,m=ts,ts=Qh(i.containerInfo),pr(i,e),ts=m,gr(e),c&4&&a!==null&&a.memoizedState.isDehydrated)try{uc(i.containerInfo)}catch(it){tn(e,e.return,it)}cm&&(cm=!1,Ay(e));break;case 4:c=ts,ts=Qh(e.stateNode.containerInfo),pr(i,e),gr(e),ts=c;break;case 12:pr(i,e),gr(e);break;case 13:pr(i,e),gr(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(_m=nn()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,hm(e,c)));break;case 22:m=e.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,J=$s,ht=Cn;if($s=J||m,Cn=ht||U,pr(i,e),Cn=ht,$s=J,gr(e),c&8192)t:for(i=e.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(a===null||U||$s||Cn||Za(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){U=a=i;try{if(g=U.stateNode,m)S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{I=U.stateNode;var pt=U.memoizedProps.style,et=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;I.style.display=et==null||typeof et=="boolean"?"":(""+et).trim()}}catch(it){tn(U,U.return,it)}}}else if(i.tag===6){if(a===null){U=i;try{U.stateNode.nodeValue=m?"":U.memoizedProps}catch(it){tn(U,U.return,it)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=e.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,hm(e,a))));break;case 19:pr(i,e),gr(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,hm(e,c)));break;case 30:break;case 21:break;default:pr(i,e),gr(e)}}function gr(e){var i=e.flags;if(i&2){try{for(var a,c=e.return;c!==null;){if(_y(c)){a=c;break}c=c.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var m=a.stateNode,g=lm(e);kh(e,g,m);break;case 5:var S=a.stateNode;a.flags&32&&(Kn(S,""),a.flags&=-33);var I=lm(e);kh(e,I,S);break;case 3:case 4:var U=a.stateNode.containerInfo,J=lm(e);um(e,J,U);break;default:throw Error(o(161))}}catch(ht){tn(e,e.return,ht)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Ay(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Ay(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function qo(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ty(e,i.alternate,i),i=i.sibling}function Za(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Ho(4,i,i.return),Za(i);break;case 1:Ts(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&py(i,i.return,a),Za(i);break;case 27:ec(i.stateNode);case 26:case 5:Ts(i,i.return),Za(i);break;case 22:i.memoizedState===null&&Za(i);break;case 30:Za(i);break;default:Za(i)}e=e.sibling}}function Fo(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,m=e,g=i,S=g.flags;switch(g.tag){case 0:case 11:case 15:Fo(m,g,a),Gu(4,g);break;case 1:if(Fo(m,g,a),c=g,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(J){tn(c,c.return,J)}if(c=g,m=c.updateQueue,m!==null){var I=c.stateNode;try{var U=m.shared.hiddenCallbacks;if(U!==null)for(m.shared.hiddenCallbacks=null,m=0;m<U.length;m++)t_(U[m],I)}catch(J){tn(c,c.return,J)}}a&&S&64&&my(g),Zu(g,g.return);break;case 27:yy(g);case 26:case 5:Fo(m,g,a),a&&c===null&&S&4&&gy(g),Zu(g,g.return);break;case 12:Fo(m,g,a);break;case 13:Fo(m,g,a),a&&S&4&&wy(m,g);break;case 22:g.memoizedState===null&&Fo(m,g,a),Zu(g,g.return);break;case 30:break;default:Fo(m,g,a)}i=i.sibling}}function fm(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Mu(a))}function dm(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Mu(e))}function Es(e,i,a,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)xy(e,i,a,c),i=i.sibling}function xy(e,i,a,c){var m=i.flags;switch(i.tag){case 0:case 11:case 15:Es(e,i,a,c),m&2048&&Gu(9,i);break;case 1:Es(e,i,a,c);break;case 3:Es(e,i,a,c),m&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Mu(e)));break;case 12:if(m&2048){Es(e,i,a,c),e=i.stateNode;try{var g=i.memoizedProps,S=g.id,I=g.onPostCommit;typeof I=="function"&&I(S,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(U){tn(i,i.return,U)}}else Es(e,i,a,c);break;case 13:Es(e,i,a,c);break;case 23:break;case 22:g=i.stateNode,S=i.alternate,i.memoizedState!==null?g._visibility&2?Es(e,i,a,c):Wu(e,i):g._visibility&2?Es(e,i,a,c):(g._visibility|=2,Dl(e,i,a,c,(i.subtreeFlags&10256)!==0)),m&2048&&fm(S,i);break;case 24:Es(e,i,a,c),m&2048&&dm(i.alternate,i);break;default:Es(e,i,a,c)}}function Dl(e,i,a,c,m){for(m=m&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=e,S=i,I=a,U=c,J=S.flags;switch(S.tag){case 0:case 11:case 15:Dl(g,S,I,U,m),Gu(8,S);break;case 23:break;case 22:var ht=S.stateNode;S.memoizedState!==null?ht._visibility&2?Dl(g,S,I,U,m):Wu(g,S):(ht._visibility|=2,Dl(g,S,I,U,m)),m&&J&2048&&fm(S.alternate,S);break;case 24:Dl(g,S,I,U,m),m&&J&2048&&dm(S.alternate,S);break;default:Dl(g,S,I,U,m)}i=i.sibling}}function Wu(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,c=i,m=c.flags;switch(c.tag){case 22:Wu(a,c),m&2048&&fm(c.alternate,c);break;case 24:Wu(a,c),m&2048&&dm(c.alternate,c);break;default:Wu(a,c)}i=i.sibling}}var Yu=8192;function Ll(e){if(e.subtreeFlags&Yu)for(e=e.child;e!==null;)Ry(e),e=e.sibling}function Ry(e){switch(e.tag){case 26:Ll(e),e.flags&Yu&&e.memoizedState!==null&&T1(ts,e.memoizedState,e.memoizedProps);break;case 5:Ll(e);break;case 3:case 4:var i=ts;ts=Qh(e.stateNode.containerInfo),Ll(e),ts=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Yu,Yu=16777216,Ll(e),Yu=i):Ll(e));break;default:Ll(e)}}function Iy(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Qu(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];ei=c,Py(c,e)}Iy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Cy(e),e=e.sibling}function Cy(e){switch(e.tag){case 0:case 11:case 15:Qu(e),e.flags&2048&&Ho(9,e,e.return);break;case 3:Qu(e);break;case 12:Qu(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Vh(e)):Qu(e);break;default:Qu(e)}}function Vh(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];ei=c,Py(c,e)}Iy(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Ho(8,i,i.return),Vh(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Vh(i));break;default:Vh(i)}e=e.sibling}}function Py(e,i){for(;ei!==null;){var a=ei;switch(a.tag){case 0:case 11:case 15:Ho(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Mu(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,ei=c;else t:for(a=e;ei!==null;){c=ei;var m=c.sibling,g=c.return;if(Ey(c),c===a){ei=null;break t}if(m!==null){m.return=g,ei=m;break t}ei=g}}}var kw={getCacheForType:function(e){var i=Ai(Zn),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},Vw=typeof WeakMap=="function"?WeakMap:Map,Fe=0,cn=null,we=null,De=0,Ge=0,_r=null,Go=!1,Nl=!1,mm=!1,to=0,An=0,Zo=0,Wa=0,pm=0,Vr=0,kl=0,Ku=null,Ji=null,gm=!1,_m=0,zh=1/0,Uh=null,Wo=null,di=0,Yo=null,Vl=null,zl=0,ym=0,vm=null,My=null,Xu=0,Tm=null;function yr(){if((Fe&2)!==0&&De!==0)return De&-De;if(W.T!==null){var e=Al;return e!==0?e:Rm()}return jr()}function Oy(){Vr===0&&(Vr=(De&536870912)===0||fe?Rt():536870912);var e=kr.current;return e!==null&&(e.flags|=32),Vr}function vr(e,i,a){(e===cn&&(Ge===2||Ge===9)||e.cancelPendingCommit!==null)&&(Ul(e,0),Qo(e,De,Vr,!1)),Wt(e,a),((Fe&2)===0||e!==cn)&&(e===cn&&((Fe&2)===0&&(Wa|=a),An===4&&Qo(e,De,Vr,!1)),bs(e))}function Dy(e,i,a){if((Fe&6)!==0)throw Error(o(327));var c=!a&&(i&124)===0&&(i&e.expiredLanes)===0||Bn(e,i),m=c?jw(e,i):wm(e,i,!0),g=c;do{if(m===0){Nl&&!c&&Qo(e,i,0,!1);break}else{if(a=e.current.alternate,g&&!zw(a)){m=wm(e,i,!1),g=!1;continue}if(m===2){if(g=i,e.errorRecoveryDisabledLanes&g)var S=0;else S=e.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){i=S;t:{var I=e;m=Ku;var U=I.current.memoizedState.isDehydrated;if(U&&(Ul(I,S).flags|=256),S=wm(I,S,!1),S!==2){if(mm&&!U){I.errorRecoveryDisabledLanes|=g,Wa|=g,m=4;break t}g=Ji,Ji=m,g!==null&&(Ji===null?Ji=g:Ji.push.apply(Ji,g))}m=S}if(g=!1,m!==2)continue}}if(m===1){Ul(e,0),Qo(e,i,0,!0);break}t:{switch(c=e,g=m,g){case 0:case 1:throw Error(o(345));case 4:if((i&4194048)!==i)break;case 6:Qo(c,i,Vr,!Go);break t;case 2:Ji=null;break;case 3:case 5:break;default:throw Error(o(329))}if((i&62914560)===i&&(m=_m+300-nn(),10<m)){if(Qo(c,i,Vr,!Go),hn(c,0,!0)!==0)break t;c.timeoutHandle=lv(Ly.bind(null,c,a,Ji,Uh,gm,i,Vr,Wa,kl,Go,g,2,-0,0),m);break t}Ly(c,a,Ji,Uh,gm,i,Vr,Wa,kl,Go,g,0,-0,0)}}break}while(!0);bs(e)}function Ly(e,i,a,c,m,g,S,I,U,J,ht,pt,et,it){if(e.timeoutHandle=-1,pt=i.subtreeFlags,(pt&8192||(pt&16785408)===16785408)&&(rc={stylesheets:null,count:0,unsuspend:v1},Ry(i),pt=E1(),pt!==null)){e.cancelPendingCommit=pt(By.bind(null,e,i,g,a,c,m,S,I,U,ht,1,et,it)),Qo(e,g,S,!J);return}By(e,i,g,a,c,m,S,I,U)}function zw(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var m=a[c],g=m.getSnapshot;m=m.value;try{if(!ki(g(),m))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Qo(e,i,a,c){i&=~pm,i&=~Wa,e.suspendedLanes|=i,e.pingedLanes&=~i,c&&(e.warmLanes|=i),c=e.expirationTimes;for(var m=i;0<m;){var g=31-mt(m),S=1<<g;c[g]=-1,m&=~S}a!==0&&te(e,a,i)}function jh(){return(Fe&6)===0?($u(0),!1):!0}function Em(){if(we!==null){if(Ge===0)var e=we.return;else e=we,$r=Nr=null,zd(e),Ml=null,Hu=0,e=we;for(;e!==null;)dy(e.alternate,e),e=e.return;we=null}}function Ul(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,n1(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Em(),cn=e,we=a=Lr(e.current,null),De=i,Ge=0,_r=null,Go=!1,Nl=Bn(e,i),mm=!1,kl=Vr=pm=Wa=Zo=An=0,Ji=Ku=null,gm=!1,(i&8)!==0&&(i|=i&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=i;0<c;){var m=31-mt(c),g=1<<m;i|=e[m],c&=~g}return to=i,Na(),a}function Ny(e,i){ve=null,W.H=Rh,i===Du||i===_h?(i=$g(),Ge=3):i===Qg?(i=$g(),Ge=4):Ge=i===J_?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,_r=i,we===null&&(An=1,Oh(e,zi(i,e.current)))}function ky(){var e=W.H;return W.H=Rh,e===null?Rh:e}function Vy(){var e=W.A;return W.A=kw,e}function bm(){An=4,Go||(De&4194048)!==De&&kr.current!==null||(Nl=!0),(Zo&134217727)===0&&(Wa&134217727)===0||cn===null||Qo(cn,De,Vr,!1)}function wm(e,i,a){var c=Fe;Fe|=2;var m=ky(),g=Vy();(cn!==e||De!==i)&&(Uh=null,Ul(e,i)),i=!1;var S=An;t:do try{if(Ge!==0&&we!==null){var I=we,U=_r;switch(Ge){case 8:Em(),S=6;break t;case 3:case 2:case 9:case 6:kr.current===null&&(i=!0);var J=Ge;if(Ge=0,_r=null,jl(e,I,U,J),a&&Nl){S=0;break t}break;default:J=Ge,Ge=0,_r=null,jl(e,I,U,J)}}Uw(),S=An;break}catch(ht){Ny(e,ht)}while(!0);return i&&e.shellSuspendCounter++,$r=Nr=null,Fe=c,W.H=m,W.A=g,we===null&&(cn=null,De=0,Na()),S}function Uw(){for(;we!==null;)zy(we)}function jw(e,i){var a=Fe;Fe|=2;var c=ky(),m=Vy();cn!==e||De!==i?(Uh=null,zh=nn()+500,Ul(e,i)):Nl=Bn(e,i);t:do try{if(Ge!==0&&we!==null){i=we;var g=_r;e:switch(Ge){case 1:Ge=0,_r=null,jl(e,i,g,1);break;case 2:case 9:if(Kg(g)){Ge=0,_r=null,Uy(i);break}i=function(){Ge!==2&&Ge!==9||cn!==e||(Ge=7),bs(e)},g.then(i,i);break t;case 3:Ge=7;break t;case 4:Ge=5;break t;case 7:Kg(g)?(Ge=0,_r=null,Uy(i)):(Ge=0,_r=null,jl(e,i,g,7));break;case 5:var S=null;switch(we.tag){case 26:S=we.memoizedState;case 5:case 27:var I=we;if(!S||Tv(S)){Ge=0,_r=null;var U=I.sibling;if(U!==null)we=U;else{var J=I.return;J!==null?(we=J,Bh(J)):we=null}break e}}Ge=0,_r=null,jl(e,i,g,5);break;case 6:Ge=0,_r=null,jl(e,i,g,6);break;case 8:Em(),An=6;break t;default:throw Error(o(462))}}Bw();break}catch(ht){Ny(e,ht)}while(!0);return $r=Nr=null,W.H=c,W.A=m,Fe=a,we!==null?0:(cn=null,De=0,Na(),An)}function Bw(){for(;we!==null&&!jn();)zy(we)}function zy(e){var i=hy(e.alternate,e,to);e.memoizedProps=e.pendingProps,i===null?Bh(e):we=i}function Uy(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=sy(a,i,i.pendingProps,i.type,void 0,De);break;case 11:i=sy(a,i,i.pendingProps,i.type.render,i.ref,De);break;case 5:zd(i);default:dy(a,i),i=we=Cu(i,to),i=hy(a,i,to)}e.memoizedProps=e.pendingProps,i===null?Bh(e):we=i}function jl(e,i,a,c){$r=Nr=null,zd(i),Ml=null,Hu=0;var m=i.return;try{if(Pw(e,m,i,a,De)){An=1,Oh(e,zi(a,e.current)),we=null;return}}catch(g){if(m!==null)throw we=m,g;An=1,Oh(e,zi(a,e.current)),we=null;return}i.flags&32768?(fe||c===1?e=!0:Nl||(De&536870912)!==0?e=!1:(Go=e=!0,(c===2||c===9||c===3||c===6)&&(c=kr.current,c!==null&&c.tag===13&&(c.flags|=16384))),jy(i,e)):Bh(i)}function Bh(e){var i=e;do{if((i.flags&32768)!==0){jy(i,Go);return}e=i.return;var a=Ow(i.alternate,i,to);if(a!==null){we=a;return}if(i=i.sibling,i!==null){we=i;return}we=i=e}while(i!==null);An===0&&(An=5)}function jy(e,i){do{var a=Dw(e.alternate,e);if(a!==null){a.flags&=32767,we=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){we=e;return}we=e=a}while(e!==null);An=6,we=null}function By(e,i,a,c,m,g,S,I,U){e.cancelPendingCommit=null;do Hh();while(di!==0);if((Fe&6)!==0)throw Error(o(327));if(i!==null){if(i===e.current)throw Error(o(177));if(g=i.lanes|i.childLanes,g|=mr,Qt(e,a,g,S,I,U),e===cn&&(we=cn=null,De=0),Vl=i,Yo=e,zl=a,ym=g,vm=m,My=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Gw(rn,function(){return Zy(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=W.T,W.T=null,m=St.p,St.p=2,S=Fe,Fe|=4;try{Lw(e,i,a)}finally{Fe=S,St.p=m,W.T=c}}di=1,Hy(),qy(),Fy()}}function Hy(){if(di===1){di=0;var e=Yo,i=Vl,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=W.T,W.T=null;var c=St.p;St.p=2;var m=Fe;Fe|=4;try{Sy(i,e);var g=Nm,S=Oa(e.containerInfo),I=g.focusedElem,U=g.selectionRange;if(S!==I&&I&&I.ownerDocument&&_l(I.ownerDocument.documentElement,I)){if(U!==null&&Da(I)){var J=U.start,ht=U.end;if(ht===void 0&&(ht=J),"selectionStart"in I)I.selectionStart=J,I.selectionEnd=Math.min(ht,I.value.length);else{var pt=I.ownerDocument||document,et=pt&&pt.defaultView||window;if(et.getSelection){var it=et.getSelection(),ue=I.textContent.length,$t=Math.min(U.start,ue),Qe=U.end===void 0?$t:Math.min(U.end,ue);!it.extend&&$t>Qe&&(S=Qe,Qe=$t,$t=S);var Y=Ru(I,$t),F=Ru(I,Qe);if(Y&&F&&(it.rangeCount!==1||it.anchorNode!==Y.node||it.anchorOffset!==Y.offset||it.focusNode!==F.node||it.focusOffset!==F.offset)){var $=pt.createRange();$.setStart(Y.node,Y.offset),it.removeAllRanges(),$t>Qe?(it.addRange($),it.extend(F.node,F.offset)):($.setEnd(F.node,F.offset),it.addRange($))}}}}for(pt=[],it=I;it=it.parentNode;)it.nodeType===1&&pt.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<pt.length;I++){var dt=pt[I];dt.element.scrollLeft=dt.left,dt.element.scrollTop=dt.top}}tf=!!Lm,Nm=Lm=null}finally{Fe=m,St.p=c,W.T=a}}e.current=i,di=2}}function qy(){if(di===2){di=0;var e=Yo,i=Vl,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=W.T,W.T=null;var c=St.p;St.p=2;var m=Fe;Fe|=4;try{Ty(e,i.alternate,i)}finally{Fe=m,St.p=c,W.T=a}}di=3}}function Fy(){if(di===4||di===3){di=0,xn();var e=Yo,i=Vl,a=zl,c=My;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?di=5:(di=0,Vl=Yo=null,Gy(e,e.pendingLanes));var m=e.pendingLanes;if(m===0&&(Wo=null),Di(a),i=i.stateNode,G&&typeof G.onCommitFiberRoot=="function")try{G.onCommitFiberRoot(he,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=W.T,m=St.p,St.p=2,W.T=null;try{for(var g=e.onRecoverableError,S=0;S<c.length;S++){var I=c[S];g(I.value,{componentStack:I.stack})}}finally{W.T=i,St.p=m}}(zl&3)!==0&&Hh(),bs(e),m=e.pendingLanes,(a&4194090)!==0&&(m&42)!==0?e===Tm?Xu++:(Xu=0,Tm=e):Xu=0,$u(0)}}function Gy(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Mu(i)))}function Hh(e){return Hy(),qy(),Fy(),Zy()}function Zy(){if(di!==5)return!1;var e=Yo,i=ym;ym=0;var a=Di(zl),c=W.T,m=St.p;try{St.p=32>a?32:a,W.T=null,a=vm,vm=null;var g=Yo,S=zl;if(di=0,Vl=Yo=null,zl=0,(Fe&6)!==0)throw Error(o(331));var I=Fe;if(Fe|=4,Cy(g.current),xy(g,g.current,S,a),Fe=I,$u(0,!1),G&&typeof G.onPostCommitFiberRoot=="function")try{G.onPostCommitFiberRoot(he,g)}catch{}return!0}finally{St.p=m,W.T=c,Gy(e,i)}}function Wy(e,i,a){i=zi(a,i),i=$d(e.stateNode,i,2),e=zo(e,i,2),e!==null&&(Wt(e,2),bs(e))}function tn(e,i,a){if(e.tag===3)Wy(e,e,a);else for(;i!==null;){if(i.tag===3){Wy(i,e,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Wo===null||!Wo.has(c))){e=zi(a,e),a=X_(2),c=zo(i,a,2),c!==null&&($_(a,c,i,e),Wt(c,2),bs(c));break}}i=i.return}}function Sm(e,i,a){var c=e.pingCache;if(c===null){c=e.pingCache=new Vw;var m=new Set;c.set(i,m)}else m=c.get(i),m===void 0&&(m=new Set,c.set(i,m));m.has(a)||(mm=!0,m.add(a),e=Hw.bind(null,e,i,a),i.then(e,e))}function Hw(e,i,a){var c=e.pingCache;c!==null&&c.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,cn===e&&(De&a)===a&&(An===4||An===3&&(De&62914560)===De&&300>nn()-_m?(Fe&2)===0&&Ul(e,0):pm|=a,kl===De&&(kl=0)),bs(e)}function Yy(e,i){i===0&&(i=wt()),e=Oo(e,i),e!==null&&(Wt(e,i),bs(e))}function qw(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Yy(e,a)}function Fw(e,i){var a=0;switch(e.tag){case 13:var c=e.stateNode,m=e.memoizedState;m!==null&&(a=m.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(i),Yy(e,a)}function Gw(e,i){return en(e,i)}var qh=null,Bl=null,Am=!1,Fh=!1,xm=!1,Ya=0;function bs(e){e!==Bl&&e.next===null&&(Bl===null?qh=Bl=e:Bl=Bl.next=e),Fh=!0,Am||(Am=!0,Ww())}function $u(e,i){if(!xm&&Fh){xm=!0;do for(var a=!1,c=qh;c!==null;){if(e!==0){var m=c.pendingLanes;if(m===0)var g=0;else{var S=c.suspendedLanes,I=c.pingedLanes;g=(1<<31-mt(42|e)+1)-1,g&=m&~(S&~I),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,$y(c,g))}else g=De,g=hn(c,c===cn?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Bn(c,g)||(a=!0,$y(c,g));c=c.next}while(a);xm=!1}}function Zw(){Qy()}function Qy(){Fh=Am=!1;var e=0;Ya!==0&&(e1()&&(e=Ya),Ya=0);for(var i=nn(),a=null,c=qh;c!==null;){var m=c.next,g=Ky(c,i);g===0?(c.next=null,a===null?qh=m:a.next=m,m===null&&(Bl=a)):(a=c,(e!==0||(g&3)!==0)&&(Fh=!0)),c=m}$u(e)}function Ky(e,i){for(var a=e.suspendedLanes,c=e.pingedLanes,m=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var S=31-mt(g),I=1<<S,U=m[S];U===-1?((I&a)===0||(I&c)!==0)&&(m[S]=ft(I,i)):U<=i&&(e.expiredLanes|=I),g&=~I}if(i=cn,a=De,a=hn(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,a===0||e===i&&(Ge===2||Ge===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&Un(c),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Bn(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(c!==null&&Un(c),Di(a)){case 2:case 8:a=si;break;case 32:a=rn;break;case 268435456:a=Me;break;default:a=rn}return c=Xy.bind(null,e),a=en(a,c),e.callbackPriority=i,e.callbackNode=a,i}return c!==null&&c!==null&&Un(c),e.callbackPriority=2,e.callbackNode=null,2}function Xy(e,i){if(di!==0&&di!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Hh()&&e.callbackNode!==a)return null;var c=De;return c=hn(e,e===cn?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(Dy(e,c,i),Ky(e,nn()),e.callbackNode!=null&&e.callbackNode===a?Xy.bind(null,e):null)}function $y(e,i){if(Hh())return null;Dy(e,i,!0)}function Ww(){i1(function(){(Fe&6)!==0?en(Qn,Zw):Qy()})}function Rm(){return Ya===0&&(Ya=Rt()),Ya}function Jy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:fs(""+e)}function tv(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function Yw(e,i,a,c,m){if(i==="submit"&&a&&a.stateNode===m){var g=Jy((m[sn]||null).action),S=c.submitter;S&&(i=(i=S[sn]||null)?Jy(i.formAction):S.getAttribute("formAction"),i!==null&&(g=i,S=null));var I=new zs("action","action",null,c,m);e.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ya!==0){var U=S?tv(m,S):new FormData(m);Wd(a,{pending:!0,data:U,method:m.method,action:g},null,U)}}else typeof g=="function"&&(I.preventDefault(),U=S?tv(m,S):new FormData(m),Wd(a,{pending:!0,data:U,method:m.method,action:g},g,U))},currentTarget:m}]})}}for(var Im=0;Im<qs.length;Im++){var Cm=qs[Im],Qw=Cm.toLowerCase(),Kw=Cm[0].toUpperCase()+Cm.slice(1);dr(Qw,"on"+Kw)}dr(lh,"onAnimationEnd"),dr(fr,"onAnimationIteration"),dr(La,"onAnimationStart"),dr("dblclick","onDoubleClick"),dr("focusin","onFocus"),dr("focusout","onBlur"),dr(bd,"onTransitionRun"),dr(El,"onTransitionStart"),dr(wd,"onTransitionCancel"),dr(Iu,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ju));function ev(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var c=e[a],m=c.event;c=c.listeners;t:{var g=void 0;if(i)for(var S=c.length-1;0<=S;S--){var I=c[S],U=I.instance,J=I.currentTarget;if(I=I.listener,U!==g&&m.isPropagationStopped())break t;g=I,m.currentTarget=J;try{g(m)}catch(ht){Mh(ht)}m.currentTarget=null,g=U}else for(S=0;S<c.length;S++){if(I=c[S],U=I.instance,J=I.currentTarget,I=I.listener,U!==g&&m.isPropagationStopped())break t;g=I,m.currentTarget=J;try{g(m)}catch(ht){Mh(ht)}m.currentTarget=null,g=U}}}}function Se(e,i){var a=i[qn];a===void 0&&(a=i[qn]=new Set);var c=e+"__bubble";a.has(c)||(nv(i,e,2,!1),a.add(c))}function Pm(e,i,a){var c=0;i&&(c|=4),nv(a,e,c,i)}var Gh="_reactListening"+Math.random().toString(36).slice(2);function Mm(e){if(!e[Gh]){e[Gh]=!0,wn.forEach(function(a){a!=="selectionchange"&&(Xw.has(a)||Pm(a,!1,e),Pm(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Gh]||(i[Gh]=!0,Pm("selectionchange",!1,i))}}function nv(e,i,a,c){switch(xv(i)){case 2:var m=S1;break;case 8:m=A1;break;default:m=Gm}a=m.bind(null,i,a,e),m=void 0,!Ei||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),c?m!==void 0?e.addEventListener(i,a,{capture:!0,passive:m}):e.addEventListener(i,a,!0):m!==void 0?e.addEventListener(i,a,{passive:m}):e.addEventListener(i,a,!1)}function Om(e,i,a,c,m){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)t:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var I=c.stateNode.containerInfo;if(I===m)break;if(S===4)for(S=c.return;S!==null;){var U=S.tag;if((U===3||U===4)&&S.stateNode.containerInfo===m)return;S=S.return}for(;I!==null;){if(S=ai(I),S===null)return;if(U=S.tag,U===5||U===6||U===26||U===27){c=g=S;continue t}I=I.parentNode}}c=c.return}Ni(function(){var J=g,ht=hi(a),pt=[];t:{var et=uh.get(e);if(et!==void 0){var it=zs,ue=e;switch(e){case"keypress":if(Ze(a)===0)break t;case"keydown":case"keyup":it=wo;break;case"focusin":ue="focus",it=yo;break;case"focusout":ue="blur",it=yo;break;case"beforeblur":case"afterblur":it=yo;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=$n;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=bu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=dl;break;case lh:case fr:case La:it=To;break;case Iu:it=ml;break;case"scroll":case"scrollend":it=hl;break;case"wheel":it=Bs;break;case"copy":case"cut":case"paste":it=ds;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=So;break;case"toggle":case"beforetoggle":it=Pr}var $t=(i&4)!==0,Qe=!$t&&(e==="scroll"||e==="scrollend"),Y=$t?et!==null?et+"Capture":null:et;$t=[];for(var F=J,$;F!==null;){var dt=F;if($=dt.stateNode,dt=dt.tag,dt!==5&&dt!==26&&dt!==27||$===null||Y===null||(dt=Oe(F,Y),dt!=null&&$t.push(tc(F,dt,$))),Qe)break;F=F.return}0<$t.length&&(et=new it(et,ue,null,a,ht),pt.push({event:et,listeners:$t}))}}if((i&7)===0){t:{if(et=e==="mouseover"||e==="pointerover",it=e==="mouseout"||e==="pointerout",et&&a!==ar&&(ue=a.relatedTarget||a.fromElement)&&(ai(ue)||ue[vi]))break t;if((it||et)&&(et=ht.window===ht?ht:(et=ht.ownerDocument)?et.defaultView||et.parentWindow:window,it?(ue=a.relatedTarget||a.toElement,it=J,ue=ue?ai(ue):null,ue!==null&&(Qe=h(ue),$t=ue.tag,ue!==Qe||$t!==5&&$t!==27&&$t!==6)&&(ue=null)):(it=null,ue=J),it!==ue)){if($t=$n,dt="onMouseLeave",Y="onMouseEnter",F="mouse",(e==="pointerout"||e==="pointerover")&&($t=So,dt="onPointerLeave",Y="onPointerEnter",F="pointer"),Qe=it==null?et:Te(it),$=ue==null?et:Te(ue),et=new $t(dt,F+"leave",it,a,ht),et.target=Qe,et.relatedTarget=$,dt=null,ai(ht)===J&&($t=new $t(Y,F+"enter",ue,a,ht),$t.target=$,$t.relatedTarget=Qe,dt=$t),Qe=dt,it&&ue)e:{for($t=it,Y=ue,F=0,$=$t;$;$=Hl($))F++;for($=0,dt=Y;dt;dt=Hl(dt))$++;for(;0<F-$;)$t=Hl($t),F--;for(;0<$-F;)Y=Hl(Y),$--;for(;F--;){if($t===Y||Y!==null&&$t===Y.alternate)break e;$t=Hl($t),Y=Hl(Y)}$t=null}else $t=null;it!==null&&iv(pt,et,it,$t,!1),ue!==null&&Qe!==null&&iv(pt,Qe,ue,$t,!0)}}t:{if(et=J?Te(J):window,it=et.nodeName&&et.nodeName.toLowerCase(),it==="select"||it==="input"&&et.type==="file")var Ut=xo;else if(ln(et))if(Su)Ut=Ed;else{Ut=Td;var be=xu}else it=et.nodeName,!it||it.toLowerCase()!=="input"||et.type!=="checkbox"&&et.type!=="radio"?J&&Vs(J.elementType)&&(Ut=xo):Ut=Xr;if(Ut&&(Ut=Ut(e,J))){Qr(pt,Ut,a,ht);break t}be&&be(e,et,J),e==="focusout"&&J&&et.type==="number"&&J.memoizedProps.value!=null&&sr(et,"number",et.value)}switch(be=J?Te(J):window,e){case"focusin":(ln(be)||be.contentEditable==="true")&&(hr=be,Co=J,Hs=null);break;case"focusout":Hs=Co=hr=null;break;case"mousedown":vl=!0;break;case"contextmenu":case"mouseup":case"dragend":vl=!1,oh(pt,a,ht);break;case"selectionchange":if(yl)break;case"keydown":case"keyup":oh(pt,a,ht)}var Ft;if(Si)t:{switch(e){case"compositionstart":var ee="onCompositionStart";break t;case"compositionend":ee="onCompositionEnd";break t;case"compositionupdate":ee="onCompositionUpdate";break t}ee=void 0}else xe?ot(e,a)&&(ee="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ee="onCompositionStart");ee&&(w&&a.locale!=="ko"&&(xe||ee!=="onCompositionStart"?ee==="onCompositionEnd"&&xe&&(Ft=Gr()):(Qi=ht,bi="value"in Qi?Qi.value:Qi.textContent,xe=!0)),be=Zh(J,ee),0<be.length&&(ee=new wi(ee,e,null,a,ht),pt.push({event:ee,listeners:be}),Ft?ee.data=Ft:(Ft=It(a),Ft!==null&&(ee.data=Ft)))),(Ft=T?Sn(e,a):Re(e,a))&&(ee=Zh(J,"onBeforeInput"),0<ee.length&&(be=new wi("onBeforeInput","beforeinput",null,a,ht),pt.push({event:be,listeners:ee}),be.data=Ft)),Yw(pt,e,J,a,ht)}ev(pt,i)})}function tc(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Zh(e,i){for(var a=i+"Capture",c=[];e!==null;){var m=e,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=Oe(e,a),m!=null&&c.unshift(tc(e,m,g)),m=Oe(e,i),m!=null&&c.push(tc(e,m,g))),e.tag===3)return c;e=e.return}return[]}function Hl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function iv(e,i,a,c,m){for(var g=i._reactName,S=[];a!==null&&a!==c;){var I=a,U=I.alternate,J=I.stateNode;if(I=I.tag,U!==null&&U===c)break;I!==5&&I!==26&&I!==27||J===null||(U=J,m?(J=Oe(a,g),J!=null&&S.unshift(tc(a,J,U))):m||(J=Oe(a,g),J!=null&&S.push(tc(a,J,U)))),a=a.return}S.length!==0&&e.push({event:i,listeners:S})}var $w=/\r\n?/g,Jw=/\u0000|\uFFFD/g;function rv(e){return(typeof e=="string"?e:""+e).replace($w,`
`).replace(Jw,"")}function sv(e,i){return i=rv(i),rv(e)===i}function Wh(){}function Ye(e,i,a,c,m,g){switch(a){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Kn(e,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Kn(e,""+c);break;case"className":Sr(e,"class",c);break;case"tabIndex":Sr(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Sr(e,a,c);break;case"style":qr(e,c,g);break;case"data":if(i!=="object"){Sr(e,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=fs(""+c),e.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(i!=="input"&&Ye(e,i,"name",m.name,m,null),Ye(e,i,"formEncType",m.formEncType,m,null),Ye(e,i,"formMethod",m.formMethod,m,null),Ye(e,i,"formTarget",m.formTarget,m,null)):(Ye(e,i,"encType",m.encType,m,null),Ye(e,i,"method",m.method,m,null),Ye(e,i,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=fs(""+c),e.setAttribute(a,c);break;case"onClick":c!=null&&(e.onclick=Wh);break;case"onScroll":c!=null&&Se("scroll",e);break;case"onScrollEnd":c!=null&&Se("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(m.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}a=fs(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""+c):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":c===!0?e.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,c):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(a,c):e.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(a):e.setAttribute(a,c);break;case"popover":Se("beforetoggle",e),Se("toggle",e),ls(e,"popover",c);break;case"xlinkActuate":Fn(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Fn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Fn(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Fn(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Fn(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Fn(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Fn(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ls(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Sa.get(a)||a,ls(e,a,c))}}function Dm(e,i,a,c,m,g){switch(a){case"style":qr(e,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(a=c.__html,a!=null){if(m.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"children":typeof c=="string"?Kn(e,c):(typeof c=="number"||typeof c=="bigint")&&Kn(e,""+c);break;case"onScroll":c!=null&&Se("scroll",e);break;case"onScrollEnd":c!=null&&Se("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Wh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wi.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(m=a.endsWith("Capture"),i=a.slice(2,m?a.length-7:void 0),g=e[sn]||null,g=g!=null?g[a]:null,typeof g=="function"&&e.removeEventListener(i,g,m),typeof c=="function")){typeof g!="function"&&g!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,c,m);break t}a in e?e[a]=c:c===!0?e.setAttribute(a,""):ls(e,a,c)}}}function mi(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Se("error",e),Se("load",e);var c=!1,m=!1,g;for(g in a)if(a.hasOwnProperty(g)){var S=a[g];if(S!=null)switch(g){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:Ye(e,i,g,S,a,null)}}m&&Ye(e,i,"srcSet",a.srcSet,a,null),c&&Ye(e,i,"src",a.src,a,null);return;case"input":Se("invalid",e);var I=g=S=m=null,U=null,J=null;for(c in a)if(a.hasOwnProperty(c)){var ht=a[c];if(ht!=null)switch(c){case"name":m=ht;break;case"type":S=ht;break;case"checked":U=ht;break;case"defaultChecked":J=ht;break;case"value":g=ht;break;case"defaultValue":I=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(o(137,i));break;default:Ye(e,i,c,ht,a,null)}}ks(e,g,I,U,J,S,m,!1),hs(e);return;case"select":Se("invalid",e),c=S=g=null;for(m in a)if(a.hasOwnProperty(m)&&(I=a[m],I!=null))switch(m){case"value":g=I;break;case"defaultValue":S=I;break;case"multiple":c=I;default:Ye(e,i,m,I,a,null)}i=g,a=S,e.multiple=!!c,i!=null?ci(e,!!c,i,!1):a!=null&&ci(e,!!c,a,!0);return;case"textarea":Se("invalid",e),g=m=c=null;for(S in a)if(a.hasOwnProperty(S)&&(I=a[S],I!=null))switch(S){case"value":c=I;break;case"defaultValue":m=I;break;case"children":g=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(o(91));break;default:Ye(e,i,S,I,a,null)}Li(e,c,m,g),hs(e);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(c=a[U],c!=null))switch(U){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ye(e,i,U,c,a,null)}return;case"dialog":Se("beforetoggle",e),Se("toggle",e),Se("cancel",e),Se("close",e);break;case"iframe":case"object":Se("load",e);break;case"video":case"audio":for(c=0;c<Ju.length;c++)Se(Ju[c],e);break;case"image":Se("error",e),Se("load",e);break;case"details":Se("toggle",e);break;case"embed":case"source":case"link":Se("error",e),Se("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(c=a[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:Ye(e,i,J,c,a,null)}return;default:if(Vs(i)){for(ht in a)a.hasOwnProperty(ht)&&(c=a[ht],c!==void 0&&Dm(e,i,ht,c,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(c=a[I],c!=null&&Ye(e,i,I,c,a,null))}function t1(e,i,a,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,S=null,I=null,U=null,J=null,ht=null;for(it in a){var pt=a[it];if(a.hasOwnProperty(it)&&pt!=null)switch(it){case"checked":break;case"value":break;case"defaultValue":U=pt;default:c.hasOwnProperty(it)||Ye(e,i,it,null,c,pt)}}for(var et in c){var it=c[et];if(pt=a[et],c.hasOwnProperty(et)&&(it!=null||pt!=null))switch(et){case"type":g=it;break;case"name":m=it;break;case"checked":J=it;break;case"defaultChecked":ht=it;break;case"value":S=it;break;case"defaultValue":I=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(o(137,i));break;default:it!==pt&&Ye(e,i,et,it,c,pt)}}an(e,S,I,U,J,ht,g,m);return;case"select":it=S=I=et=null;for(g in a)if(U=a[g],a.hasOwnProperty(g)&&U!=null)switch(g){case"value":break;case"multiple":it=U;default:c.hasOwnProperty(g)||Ye(e,i,g,null,c,U)}for(m in c)if(g=c[m],U=a[m],c.hasOwnProperty(m)&&(g!=null||U!=null))switch(m){case"value":et=g;break;case"defaultValue":I=g;break;case"multiple":S=g;default:g!==U&&Ye(e,i,m,g,c,U)}i=I,a=S,c=it,et!=null?ci(e,!!a,et,!1):!!c!=!!a&&(i!=null?ci(e,!!a,i,!0):ci(e,!!a,a?[]:"",!1));return;case"textarea":it=et=null;for(I in a)if(m=a[I],a.hasOwnProperty(I)&&m!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Ye(e,i,I,null,c,m)}for(S in c)if(m=c[S],g=a[S],c.hasOwnProperty(S)&&(m!=null||g!=null))switch(S){case"value":et=m;break;case"defaultValue":it=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(o(91));break;default:m!==g&&Ye(e,i,S,m,c,g)}se(e,et,it);return;case"option":for(var ue in a)if(et=a[ue],a.hasOwnProperty(ue)&&et!=null&&!c.hasOwnProperty(ue))switch(ue){case"selected":e.selected=!1;break;default:Ye(e,i,ue,null,c,et)}for(U in c)if(et=c[U],it=a[U],c.hasOwnProperty(U)&&et!==it&&(et!=null||it!=null))switch(U){case"selected":e.selected=et&&typeof et!="function"&&typeof et!="symbol";break;default:Ye(e,i,U,et,c,it)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $t in a)et=a[$t],a.hasOwnProperty($t)&&et!=null&&!c.hasOwnProperty($t)&&Ye(e,i,$t,null,c,et);for(J in c)if(et=c[J],it=a[J],c.hasOwnProperty(J)&&et!==it&&(et!=null||it!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(o(137,i));break;default:Ye(e,i,J,et,c,it)}return;default:if(Vs(i)){for(var Qe in a)et=a[Qe],a.hasOwnProperty(Qe)&&et!==void 0&&!c.hasOwnProperty(Qe)&&Dm(e,i,Qe,void 0,c,et);for(ht in c)et=c[ht],it=a[ht],!c.hasOwnProperty(ht)||et===it||et===void 0&&it===void 0||Dm(e,i,ht,et,c,it);return}}for(var Y in a)et=a[Y],a.hasOwnProperty(Y)&&et!=null&&!c.hasOwnProperty(Y)&&Ye(e,i,Y,null,c,et);for(pt in c)et=c[pt],it=a[pt],!c.hasOwnProperty(pt)||et===it||et==null&&it==null||Ye(e,i,pt,et,c,it)}var Lm=null,Nm=null;function Yh(e){return e.nodeType===9?e:e.ownerDocument}function ov(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function av(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function km(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Vm=null;function e1(){var e=window.event;return e&&e.type==="popstate"?e===Vm?!1:(Vm=e,!0):(Vm=null,!1)}var lv=typeof setTimeout=="function"?setTimeout:void 0,n1=typeof clearTimeout=="function"?clearTimeout:void 0,uv=typeof Promise=="function"?Promise:void 0,i1=typeof queueMicrotask=="function"?queueMicrotask:typeof uv<"u"?function(e){return uv.resolve(null).then(e).catch(r1)}:lv;function r1(e){setTimeout(function(){throw e})}function Ko(e){return e==="head"}function cv(e,i){var a=i,c=0,m=0;do{var g=a.nextSibling;if(e.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"){if(0<c&&8>c){a=c;var S=e.ownerDocument;if(a&1&&ec(S.documentElement),a&2&&ec(S.body),a&4)for(a=S.head,ec(a),S=a.firstChild;S;){var I=S.nextSibling,U=S.nodeName;S[wr]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&S.rel.toLowerCase()==="stylesheet"||a.removeChild(S),S=I}}if(m===0){e.removeChild(g),uc(i);return}m--}else a==="$"||a==="$?"||a==="$!"?m++:c=a.charCodeAt(0)-48;else c=0;a=g}while(a);uc(i)}function zm(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":zm(a),Zi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function s1(e,i,a,c){for(;e.nodeType===1;){var m=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[wr])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==m.rel||e.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||e.getAttribute("title")!==(m.title==null?null:m.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(m.src==null?null:m.src)||e.getAttribute("type")!==(m.type==null?null:m.type)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=es(e.nextSibling),e===null)break}return null}function o1(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=es(e.nextSibling),e===null))return null;return e}function Um(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function a1(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var c=function(){i(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function es(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var jm=null;function hv(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function fv(e,i,a){switch(i=Yh(a),e){case"html":if(e=i.documentElement,!e)throw Error(o(452));return e;case"head":if(e=i.head,!e)throw Error(o(453));return e;case"body":if(e=i.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function ec(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Zi(e)}var zr=new Map,dv=new Set;function Qh(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var eo=St.d;St.d={f:l1,r:u1,D:c1,C:h1,L:f1,m:d1,X:p1,S:m1,M:g1};function l1(){var e=eo.f(),i=jh();return e||i}function u1(e){var i=li(e);i!==null&&i.tag===5&&i.type==="form"?D_(i):eo.r(e)}var ql=typeof document>"u"?null:document;function mv(e,i,a){var c=ql;if(c&&typeof i=="string"&&i){var m=dn(i);m='link[rel="'+e+'"][href="'+m+'"]',typeof a=="string"&&(m+='[crossorigin="'+a+'"]'),dv.has(m)||(dv.add(m),e={rel:e,crossOrigin:a,href:i},c.querySelector(m)===null&&(i=c.createElement("link"),mi(i,"link",e),on(i),c.head.appendChild(i)))}}function c1(e){eo.D(e),mv("dns-prefetch",e,null)}function h1(e,i){eo.C(e,i),mv("preconnect",e,i)}function f1(e,i,a){eo.L(e,i,a);var c=ql;if(c&&e&&i){var m='link[rel="preload"][as="'+dn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(m+='[imagesrcset="'+dn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(m+='[imagesizes="'+dn(a.imageSizes)+'"]')):m+='[href="'+dn(e)+'"]';var g=m;switch(i){case"style":g=Fl(e);break;case"script":g=Gl(e)}zr.has(g)||(e=x({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),zr.set(g,e),c.querySelector(m)!==null||i==="style"&&c.querySelector(nc(g))||i==="script"&&c.querySelector(ic(g))||(i=c.createElement("link"),mi(i,"link",e),on(i),c.head.appendChild(i)))}}function d1(e,i){eo.m(e,i);var a=ql;if(a&&e){var c=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+dn(c)+'"][href="'+dn(e)+'"]',g=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Gl(e)}if(!zr.has(g)&&(e=x({rel:"modulepreload",href:e},i),zr.set(g,e),a.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ic(g)))return}c=a.createElement("link"),mi(c,"link",e),on(c),a.head.appendChild(c)}}}function m1(e,i,a){eo.S(e,i,a);var c=ql;if(c&&e){var m=bn(c).hoistableStyles,g=Fl(e);i=i||"default";var S=m.get(g);if(!S){var I={loading:0,preload:null};if(S=c.querySelector(nc(g)))I.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":i},a),(a=zr.get(g))&&Bm(e,a);var U=S=c.createElement("link");on(U),mi(U,"link",e),U._p=new Promise(function(J,ht){U.onload=J,U.onerror=ht}),U.addEventListener("load",function(){I.loading|=1}),U.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Kh(S,i,c)}S={type:"stylesheet",instance:S,count:1,state:I},m.set(g,S)}}}function p1(e,i){eo.X(e,i);var a=ql;if(a&&e){var c=bn(a).hoistableScripts,m=Gl(e),g=c.get(m);g||(g=a.querySelector(ic(m)),g||(e=x({src:e,async:!0},i),(i=zr.get(m))&&Hm(e,i),g=a.createElement("script"),on(g),mi(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function g1(e,i){eo.M(e,i);var a=ql;if(a&&e){var c=bn(a).hoistableScripts,m=Gl(e),g=c.get(m);g||(g=a.querySelector(ic(m)),g||(e=x({src:e,async:!0,type:"module"},i),(i=zr.get(m))&&Hm(e,i),g=a.createElement("script"),on(g),mi(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function pv(e,i,a,c){var m=(m=At.current)?Qh(m):null;if(!m)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Fl(a.href),a=bn(m).hoistableStyles,c=a.get(i),c||(c={type:"style",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Fl(a.href);var g=bn(m).hoistableStyles,S=g.get(e);if(S||(m=m.ownerDocument||m,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,S),(g=m.querySelector(nc(e)))&&!g._p&&(S.instance=g,S.state.loading=5),zr.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},zr.set(e,a),g||_1(m,e,a,S.state))),i&&c===null)throw Error(o(528,""));return S}if(i&&c!==null)throw Error(o(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Gl(a),a=bn(m).hoistableScripts,c=a.get(i),c||(c={type:"script",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Fl(e){return'href="'+dn(e)+'"'}function nc(e){return'link[rel="stylesheet"]['+e+"]"}function gv(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function _1(e,i,a,c){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=e.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),mi(i,"link",a),on(i),e.head.appendChild(i))}function Gl(e){return'[src="'+dn(e)+'"]'}function ic(e){return"script[async]"+e}function _v(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var c=e.querySelector('style[data-href~="'+dn(a.href)+'"]');if(c)return i.instance=c,on(c),c;var m=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),on(c),mi(c,"style",m),Kh(c,a.precedence,e),i.instance=c;case"stylesheet":m=Fl(a.href);var g=e.querySelector(nc(m));if(g)return i.state.loading|=4,i.instance=g,on(g),g;c=gv(a),(m=zr.get(m))&&Bm(c,m),g=(e.ownerDocument||e).createElement("link"),on(g);var S=g;return S._p=new Promise(function(I,U){S.onload=I,S.onerror=U}),mi(g,"link",c),i.state.loading|=4,Kh(g,a.precedence,e),i.instance=g;case"script":return g=Gl(a.src),(m=e.querySelector(ic(g)))?(i.instance=m,on(m),m):(c=a,(m=zr.get(g))&&(c=x({},a),Hm(c,m)),e=e.ownerDocument||e,m=e.createElement("script"),on(m),mi(m,"link",c),e.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(o(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Kh(c,a.precedence,e));return i.instance}function Kh(e,i,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,g=m,S=0;S<c.length;S++){var I=c[S];if(I.dataset.precedence===i)g=I;else if(g!==m)break}g?g.parentNode.insertBefore(e,g.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Bm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Hm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Xh=null;function yv(e,i,a){if(Xh===null){var c=new Map,m=Xh=new Map;m.set(a,c)}else m=Xh,c=m.get(a),c||(c=new Map,m.set(a,c));if(c.has(e))return c;for(c.set(e,null),a=a.getElementsByTagName(e),m=0;m<a.length;m++){var g=a[m];if(!(g[wr]||g[fn]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(i)||"";S=e+S;var I=c.get(S);I?I.push(g):c.set(S,[g])}}return c}function vv(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function y1(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Tv(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var rc=null;function v1(){}function T1(e,i,a){if(rc===null)throw Error(o(475));var c=rc;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var m=Fl(a.href),g=e.querySelector(nc(m));if(g){e=g._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(c.count++,c=$h.bind(c),e.then(c,c)),i.state.loading|=4,i.instance=g,on(g);return}g=e.ownerDocument||e,a=gv(a),(m=zr.get(m))&&Bm(a,m),g=g.createElement("link"),on(g);var S=g;S._p=new Promise(function(I,U){S.onload=I,S.onerror=U}),mi(g,"link",a),i.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(c.count++,i=$h.bind(c),e.addEventListener("load",i),e.addEventListener("error",i))}}function E1(){if(rc===null)throw Error(o(475));var e=rc;return e.stylesheets&&e.count===0&&qm(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&qm(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function $h(){if(this.count--,this.count===0){if(this.stylesheets)qm(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Jh=null;function qm(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Jh=new Map,i.forEach(b1,e),Jh=null,$h.call(e))}function b1(e,i){if(!(i.state.loading&4)){var a=Jh.get(e);if(a)var c=a.get(null);else{a=new Map,Jh.set(e,a);for(var m=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var S=m[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),c=S)}c&&a.set(null,c)}m=i.instance,S=m.getAttribute("data-precedence"),g=a.get(S)||c,g===c&&a.set(null,m),a.set(S,m),this.count++,c=$h.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),g?g.parentNode.insertBefore(m,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(m,e.firstChild)),i.state.loading|=4}}var sc={$$typeof:_t,Provider:null,Consumer:null,_currentValue:yt,_currentValue2:yt,_threadCount:0};function w1(e,i,a,c,m,g,S,I){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.hiddenUpdates=qt(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function Ev(e,i,a,c,m,g,S,I,U,J,ht,pt){return e=new w1(e,i,a,S,I,U,J,pt),i=1,g===!0&&(i|=24),g=ji(3,null,null,i),e.current=g,g.stateNode=e,i=Sd(),i.refCount++,e.pooledCache=i,i.refCount++,g.memoizedState={element:c,isDehydrated:a,cache:i},Id(g),e}function bv(e){return e?(e=Zs,e):Zs}function wv(e,i,a,c,m,g){m=bv(m),c.context===null?c.context=m:c.pendingContext=m,c=Vo(i),c.payload={element:a},g=g===void 0?null:g,g!==null&&(c.callback=g),a=zo(e,c,i),a!==null&&(vr(a,e,i),Nu(a,e,i))}function Sv(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Fm(e,i){Sv(e,i),(e=e.alternate)&&Sv(e,i)}function Av(e){if(e.tag===13){var i=Oo(e,67108864);i!==null&&vr(i,e,67108864),Fm(e,67108864)}}var tf=!0;function S1(e,i,a,c){var m=W.T;W.T=null;var g=St.p;try{St.p=2,Gm(e,i,a,c)}finally{St.p=g,W.T=m}}function A1(e,i,a,c){var m=W.T;W.T=null;var g=St.p;try{St.p=8,Gm(e,i,a,c)}finally{St.p=g,W.T=m}}function Gm(e,i,a,c){if(tf){var m=Zm(c);if(m===null)Om(e,i,c,ef,a),Rv(e,c);else if(R1(m,e,i,a,c))c.stopPropagation();else if(Rv(e,c),i&4&&-1<x1.indexOf(e)){for(;m!==null;){var g=li(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=Ae(g.pendingLanes);if(S!==0){var I=g;for(I.pendingLanes|=2,I.entangledLanes|=2;S;){var U=1<<31-mt(S);I.entanglements[1]|=U,S&=~U}bs(g),(Fe&6)===0&&(zh=nn()+500,$u(0))}}break;case 13:I=Oo(g,2),I!==null&&vr(I,g,2),jh(),Fm(g,2)}if(g=Zm(c),g===null&&Om(e,i,c,ef,a),g===m)break;m=g}m!==null&&c.stopPropagation()}else Om(e,i,c,null,a)}}function Zm(e){return e=hi(e),Wm(e)}var ef=null;function Wm(e){if(ef=null,e=ai(e),e!==null){var i=h(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=p(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return ef=e,null}function xv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yi()){case Qn:return 2;case si:return 8;case rn:case oi:return 32;case Me:return 268435456;default:return 32}default:return 32}}var Ym=!1,Xo=null,$o=null,Jo=null,oc=new Map,ac=new Map,ta=[],x1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rv(e,i){switch(e){case"focusin":case"focusout":Xo=null;break;case"dragenter":case"dragleave":$o=null;break;case"mouseover":case"mouseout":Jo=null;break;case"pointerover":case"pointerout":oc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ac.delete(i.pointerId)}}function lc(e,i,a,c,m,g){return e===null||e.nativeEvent!==g?(e={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[m]},i!==null&&(i=li(i),i!==null&&Av(i)),e):(e.eventSystemFlags|=c,i=e.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),e)}function R1(e,i,a,c,m){switch(i){case"focusin":return Xo=lc(Xo,e,i,a,c,m),!0;case"dragenter":return $o=lc($o,e,i,a,c,m),!0;case"mouseover":return Jo=lc(Jo,e,i,a,c,m),!0;case"pointerover":var g=m.pointerId;return oc.set(g,lc(oc.get(g)||null,e,i,a,c,m)),!0;case"gotpointercapture":return g=m.pointerId,ac.set(g,lc(ac.get(g)||null,e,i,a,c,m)),!0}return!1}function Iv(e){var i=ai(e.target);if(i!==null){var a=h(i);if(a!==null){if(i=a.tag,i===13){if(i=p(a),i!==null){e.blockedOn=i,os(e.priority,function(){if(a.tag===13){var c=yr();c=Hn(c);var m=Oo(a,c);m!==null&&vr(m,a,c),Fm(a,c)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nf(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Zm(e.nativeEvent);if(a===null){a=e.nativeEvent;var c=new a.constructor(a.type,a);ar=c,a.target.dispatchEvent(c),ar=null}else return i=li(a),i!==null&&Av(i),e.blockedOn=a,!1;i.shift()}return!0}function Cv(e,i,a){nf(e)&&a.delete(i)}function I1(){Ym=!1,Xo!==null&&nf(Xo)&&(Xo=null),$o!==null&&nf($o)&&($o=null),Jo!==null&&nf(Jo)&&(Jo=null),oc.forEach(Cv),ac.forEach(Cv)}function rf(e,i){e.blockedOn===i&&(e.blockedOn=null,Ym||(Ym=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,I1)))}var sf=null;function Pv(e){sf!==e&&(sf=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){sf===e&&(sf=null);for(var i=0;i<e.length;i+=3){var a=e[i],c=e[i+1],m=e[i+2];if(typeof c!="function"){if(Wm(c||a)===null)continue;break}var g=li(a);g!==null&&(e.splice(i,3),i-=3,Wd(g,{pending:!0,data:m,method:a.method,action:c},c,m))}}))}function uc(e){function i(U){return rf(U,e)}Xo!==null&&rf(Xo,e),$o!==null&&rf($o,e),Jo!==null&&rf(Jo,e),oc.forEach(i),ac.forEach(i);for(var a=0;a<ta.length;a++){var c=ta[a];c.blockedOn===e&&(c.blockedOn=null)}for(;0<ta.length&&(a=ta[0],a.blockedOn===null);)Iv(a),a.blockedOn===null&&ta.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var m=a[c],g=a[c+1],S=m[sn]||null;if(typeof g=="function")S||Pv(a);else if(S){var I=null;if(g&&g.hasAttribute("formAction")){if(m=g,S=g[sn]||null)I=S.formAction;else if(Wm(m)!==null)continue}else I=S.action;typeof I=="function"?a[c+1]=I:(a.splice(c,3),c-=3),Pv(a)}}}function Qm(e){this._internalRoot=e}of.prototype.render=Qm.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(o(409));var a=i.current,c=yr();wv(a,c,e,i,null,null)},of.prototype.unmount=Qm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;wv(e.current,2,null,e,null,null),jh(),i[vi]=null}};function of(e){this._internalRoot=e}of.prototype.unstable_scheduleHydration=function(e){if(e){var i=jr();e={blockedOn:null,target:e,priority:i};for(var a=0;a<ta.length&&i!==0&&i<ta[a].priority;a++);ta.splice(a,0,e),a===0&&Iv(e)}};var Mv=t.version;if(Mv!=="19.1.1")throw Error(o(527,Mv,"19.1.1"));St.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=v(i),e=e!==null?E(e):null,e=e===null?null:e.stateNode,e};var C1={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!af.isDisabled&&af.supportsFiber)try{he=af.inject(C1),G=af}catch{}}return hc.createRoot=function(e,i){if(!l(e))throw Error(o(299));var a=!1,c="",m=W_,g=Y_,S=Q_,I=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(I=i.unstable_transitionCallbacks)),i=Ev(e,1,!1,null,null,a,c,m,g,S,I,null),e[vi]=i.current,Mm(e),new Qm(i)},hc.hydrateRoot=function(e,i,a){if(!l(e))throw Error(o(299));var c=!1,m="",g=W_,S=Y_,I=Q_,U=null,J=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(U=a.unstable_transitionCallbacks),a.formState!==void 0&&(J=a.formState)),i=Ev(e,1,!0,i,a??null,c,m,g,S,I,U,J),i.context=bv(null),a=i.current,c=yr(),c=Hn(c),m=Vo(c),m.callback=null,zo(a,m,c),a=c,i.current.lanes=a,Wt(i,a),bs(i),e[vi]=i.current,Mm(e),new of(i)},hc.version="19.1.1",hc}var Bv;function z1(){if(Bv)return $m.exports;Bv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),$m.exports=V1(),$m.exports}var U1=z1();function IT(r,t){const n=Z.useRef(t);Z.useEffect(function(){t!==n.current&&r.attributionControl!=null&&(n.current!=null&&r.attributionControl.removeAttribution(n.current),t!=null&&r.attributionControl.addAttribution(t)),n.current=t},[r,t])}var j1=RT();const B1=1;function H1(r){return Object.freeze({__version:B1,map:r})}function CT(r,t){return Object.freeze({...r,...t})}const Bp=Z.createContext(null);function Gf(){const r=Z.use(Bp);if(r==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return r}function PT(r){function t(n,o){const{instance:l,context:h}=r(n).current;Z.useImperativeHandle(o,()=>l);const{children:p}=n;return p==null?null:dp.createElement(Bp,{value:h},p)}return Z.forwardRef(t)}function q1(r){function t(n,o){const[l,h]=Z.useState(!1),{instance:p}=r(n,h).current;Z.useImperativeHandle(o,()=>p),Z.useEffect(function(){l&&p.update()},[p,l,n.children]);const y=p._contentNode;return y?j1.createPortal(n.children,y):null}return Z.forwardRef(t)}function F1(r){function t(n,o){const{instance:l}=r(n).current;return Z.useImperativeHandle(o,()=>l),null}return Z.forwardRef(t)}function Hp(r,t){const n=Z.useRef(void 0);Z.useEffect(function(){return t!=null&&r.instance.on(t),n.current=t,function(){n.current!=null&&r.instance.off(n.current),n.current=null}},[r,t])}function Zf(r,t){const n=r.pane??t.pane;return n?{...r,pane:n}:r}function G1(r,t){return function(o,l){const h=Gf(),p=r(Zf(o,h),h);return IT(h.map,o.attribution),Hp(p.current,o.eventHandlers),t(p.current,h,o,l),p}}var fc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Z1=fc.exports,Hv;function W1(){return Hv||(Hv=1,(function(r,t){(function(n,o){o(t)})(Z1,(function(n){var o="1.9.4";function l(s){var u,d,_,b;for(d=1,_=arguments.length;d<_;d++){b=arguments[d];for(u in b)s[u]=b[u]}return s}var h=Object.create||(function(){function s(){}return function(u){return s.prototype=u,new s}})();function p(s,u){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var _=d.call(arguments,2);return function(){return s.apply(u,_.length?_.concat(d.call(arguments)):arguments)}}var y=0;function v(s){return"_leaflet_id"in s||(s._leaflet_id=++y),s._leaflet_id}function E(s,u,d){var _,b,R,z;return z=function(){_=!1,b&&(R.apply(d,b),b=!1)},R=function(){_?b=arguments:(s.apply(d,arguments),setTimeout(z,u),_=!0)},R}function x(s,u,d){var _=u[1],b=u[0],R=_-b;return s===_&&d?s:((s-b)%R+R)%R+b}function P(){return!1}function M(s,u){if(u===!1)return s;var d=Math.pow(10,u===void 0?6:u);return Math.round(s*d)/d}function q(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function Q(s){return q(s).split(/\s+/)}function nt(s,u){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?h(s.options):{});for(var d in u)s.options[d]=u[d];return s.options}function at(s,u,d){var _=[];for(var b in s)_.push(encodeURIComponent(d?b.toUpperCase():b)+"="+encodeURIComponent(s[b]));return(!u||u.indexOf("?")===-1?"?":"&")+_.join("&")}var Tt=/\{ *([\w_ -]+) *\}/g;function ut(s,u){return s.replace(Tt,function(d,_){var b=u[_];if(b===void 0)throw new Error("No value provided for variable "+d);return typeof b=="function"&&(b=b(u)),b})}var _t=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function Bt(s,u){for(var d=0;d<s.length;d++)if(s[d]===u)return d;return-1}var Ct="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function kt(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var V=0;function O(s){var u=+new Date,d=Math.max(0,16-(u-V));return V=u+d,window.setTimeout(s,d)}var k=window.requestAnimationFrame||kt("RequestAnimationFrame")||O,j=window.cancelAnimationFrame||kt("CancelAnimationFrame")||kt("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function B(s,u,d){if(d&&k===O)s.call(u);else return k.call(window,p(s,u))}function H(s){s&&j.call(window,s)}var N={__proto__:null,extend:l,create:h,bind:p,get lastId(){return y},stamp:v,throttle:E,wrapNum:x,falseFn:P,formatNum:M,trim:q,splitWords:Q,setOptions:nt,getParamString:at,template:ut,isArray:_t,indexOf:Bt,emptyImageUrl:Ct,requestFn:k,cancelFn:j,requestAnimFrame:B,cancelAnimFrame:H};function ce(){}ce.extend=function(s){var u=function(){nt(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=u.__super__=this.prototype,_=h(d);_.constructor=u,u.prototype=_;for(var b in this)Object.prototype.hasOwnProperty.call(this,b)&&b!=="prototype"&&b!=="__super__"&&(u[b]=this[b]);return s.statics&&l(u,s.statics),s.includes&&(pe(s.includes),l.apply(null,[_].concat(s.includes))),l(_,s),delete _.statics,delete _.includes,_.options&&(_.options=d.options?h(d.options):{},l(_.options,s.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var R=0,z=_._initHooks.length;R<z;R++)_._initHooks[R].call(this)}},u},ce.include=function(s){var u=this.prototype.options;return l(this.prototype,s),s.options&&(this.prototype.options=u,this.mergeOptions(s.options)),this},ce.mergeOptions=function(s){return l(this.prototype.options,s),this},ce.addInitHook=function(s){var u=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function pe(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=_t(s)?s:[s];for(var u=0;u<s.length;u++)s[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var W={on:function(s,u,d){if(typeof s=="object")for(var _ in s)this._on(_,s[_],u);else{s=Q(s);for(var b=0,R=s.length;b<R;b++)this._on(s[b],u,d)}return this},off:function(s,u,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var _ in s)this._off(_,s[_],u);else{s=Q(s);for(var b=arguments.length===1,R=0,z=s.length;R<z;R++)b?this._off(s[R]):this._off(s[R],u,d)}return this},_on:function(s,u,d,_){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(s,u,d)===!1){d===this&&(d=void 0);var b={fn:u,ctx:d};_&&(b.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(b)}},_off:function(s,u,d){var _,b,R;if(this._events&&(_=this._events[s],!!_)){if(arguments.length===1){if(this._firingCount)for(b=0,R=_.length;b<R;b++)_[b].fn=P;delete this._events[s];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var z=this._listens(s,u,d);if(z!==!1){var X=_[z];this._firingCount&&(X.fn=P,this._events[s]=_=_.slice()),_.splice(z,1)}}},fire:function(s,u,d){if(!this.listens(s,d))return this;var _=l({},u,{type:s,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var b=this._events[s];if(b){this._firingCount=this._firingCount+1||1;for(var R=0,z=b.length;R<z;R++){var X=b[R],rt=X.fn;X.once&&this.off(s,rt,X.ctx),rt.call(X.ctx||this,_)}this._firingCount--}}return d&&this._propagateEvent(_),this},listens:function(s,u,d,_){typeof s!="string"&&console.warn('"string" type argument expected');var b=u;typeof u!="function"&&(_=!!u,b=void 0,d=void 0);var R=this._events&&this._events[s];if(R&&R.length&&this._listens(s,b,d)!==!1)return!0;if(_){for(var z in this._eventParents)if(this._eventParents[z].listens(s,u,d,_))return!0}return!1},_listens:function(s,u,d){if(!this._events)return!1;var _=this._events[s]||[];if(!u)return!!_.length;d===this&&(d=void 0);for(var b=0,R=_.length;b<R;b++)if(_[b].fn===u&&_[b].ctx===d)return b;return!1},once:function(s,u,d){if(typeof s=="object")for(var _ in s)this._on(_,s[_],u,!0);else{s=Q(s);for(var b=0,R=s.length;b<R;b++)this._on(s[b],u,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[v(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[v(s)],this},_propagateEvent:function(s){for(var u in this._eventParents)this._eventParents[u].fire(s.type,l({layer:s.target,propagatedFrom:s.target},s),!0)}};W.addEventListener=W.on,W.removeEventListener=W.clearAllEventListeners=W.off,W.addOneTimeEventListener=W.once,W.fireEvent=W.fire,W.hasEventListeners=W.listens;var St=ce.extend(W);function yt(s,u,d){this.x=d?Math.round(s):s,this.y=d?Math.round(u):u}var ie=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};yt.prototype={clone:function(){return new yt(this.x,this.y)},add:function(s){return this.clone()._add(D(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(D(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new yt(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new yt(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ie(this.x),this.y=ie(this.y),this},distanceTo:function(s){s=D(s);var u=s.x-this.x,d=s.y-this.y;return Math.sqrt(u*u+d*d)},equals:function(s){return s=D(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=D(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+M(this.x)+", "+M(this.y)+")"}};function D(s,u,d){return s instanceof yt?s:_t(s)?new yt(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new yt(s.x,s.y):new yt(s,u,d)}function lt(s,u){if(s)for(var d=u?[s,u]:s,_=0,b=d.length;_<b;_++)this.extend(d[_])}lt.prototype={extend:function(s){var u,d;if(!s)return this;if(s instanceof yt||typeof s[0]=="number"||"x"in s)u=d=D(s);else if(s=bt(s),u=s.min,d=s.max,!u||!d)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=d.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return D((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return D(this.min.x,this.max.y)},getTopRight:function(){return D(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var u,d;return typeof s[0]=="number"||s instanceof yt?s=D(s):s=bt(s),s instanceof lt?(u=s.min,d=s.max):u=d=s,u.x>=this.min.x&&d.x<=this.max.x&&u.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=bt(s);var u=this.min,d=this.max,_=s.min,b=s.max,R=b.x>=u.x&&_.x<=d.x,z=b.y>=u.y&&_.y<=d.y;return R&&z},overlaps:function(s){s=bt(s);var u=this.min,d=this.max,_=s.min,b=s.max,R=b.x>u.x&&_.x<d.x,z=b.y>u.y&&_.y<d.y;return R&&z},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var u=this.min,d=this.max,_=Math.abs(u.x-d.x)*s,b=Math.abs(u.y-d.y)*s;return bt(D(u.x-_,u.y-b),D(d.x+_,d.y+b))},equals:function(s){return s?(s=bt(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function bt(s,u){return!s||s instanceof lt?s:new lt(s,u)}function st(s,u){if(s)for(var d=u?[s,u]:s,_=0,b=d.length;_<b;_++)this.extend(d[_])}st.prototype={extend:function(s){var u=this._southWest,d=this._northEast,_,b;if(s instanceof xt)_=s,b=s;else if(s instanceof st){if(_=s._southWest,b=s._northEast,!_||!b)return this}else return s?this.extend(At(s)||Et(s)):this;return!u&&!d?(this._southWest=new xt(_.lat,_.lng),this._northEast=new xt(b.lat,b.lng)):(u.lat=Math.min(_.lat,u.lat),u.lng=Math.min(_.lng,u.lng),d.lat=Math.max(b.lat,d.lat),d.lng=Math.max(b.lng,d.lng)),this},pad:function(s){var u=this._southWest,d=this._northEast,_=Math.abs(u.lat-d.lat)*s,b=Math.abs(u.lng-d.lng)*s;return new st(new xt(u.lat-_,u.lng-b),new xt(d.lat+_,d.lng+b))},getCenter:function(){return new xt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xt(this.getNorth(),this.getWest())},getSouthEast:function(){return new xt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof xt||"lat"in s?s=At(s):s=Et(s);var u=this._southWest,d=this._northEast,_,b;return s instanceof st?(_=s.getSouthWest(),b=s.getNorthEast()):_=b=s,_.lat>=u.lat&&b.lat<=d.lat&&_.lng>=u.lng&&b.lng<=d.lng},intersects:function(s){s=Et(s);var u=this._southWest,d=this._northEast,_=s.getSouthWest(),b=s.getNorthEast(),R=b.lat>=u.lat&&_.lat<=d.lat,z=b.lng>=u.lng&&_.lng<=d.lng;return R&&z},overlaps:function(s){s=Et(s);var u=this._southWest,d=this._northEast,_=s.getSouthWest(),b=s.getNorthEast(),R=b.lat>u.lat&&_.lat<d.lat,z=b.lng>u.lng&&_.lng<d.lng;return R&&z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,u){return s?(s=Et(s),this._southWest.equals(s.getSouthWest(),u)&&this._northEast.equals(s.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Et(s,u){return s instanceof st?s:new st(s,u)}function xt(s,u,d){if(isNaN(s)||isNaN(u))throw new Error("Invalid LatLng object: ("+s+", "+u+")");this.lat=+s,this.lng=+u,d!==void 0&&(this.alt=+d)}xt.prototype={equals:function(s,u){if(!s)return!1;s=At(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(u===void 0?1e-9:u)},toString:function(s){return"LatLng("+M(this.lat,s)+", "+M(this.lng,s)+")"},distanceTo:function(s){return Zt.distance(this,At(s))},wrap:function(){return Zt.wrapLatLng(this)},toBounds:function(s){var u=180*s/40075017,d=u/Math.cos(Math.PI/180*this.lat);return Et([this.lat-u,this.lng-d],[this.lat+u,this.lng+d])},clone:function(){return new xt(this.lat,this.lng,this.alt)}};function At(s,u,d){return s instanceof xt?s:_t(s)&&typeof s[0]!="object"?s.length===3?new xt(s[0],s[1],s[2]):s.length===2?new xt(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new xt(s.lat,"lng"in s?s.lng:s.lon,s.alt):u===void 0?null:new xt(s,u,d)}var ge={latLngToPoint:function(s,u){var d=this.projection.project(s),_=this.scale(u);return this.transformation._transform(d,_)},pointToLatLng:function(s,u){var d=this.scale(u),_=this.transformation.untransform(s,d);return this.projection.unproject(_)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var u=this.projection.bounds,d=this.scale(s),_=this.transformation.transform(u.min,d),b=this.transformation.transform(u.max,d);return new lt(_,b)},infinite:!1,wrapLatLng:function(s){var u=this.wrapLng?x(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?x(s.lat,this.wrapLat,!0):s.lat,_=s.alt;return new xt(d,u,_)},wrapLatLngBounds:function(s){var u=s.getCenter(),d=this.wrapLatLng(u),_=u.lat-d.lat,b=u.lng-d.lng;if(_===0&&b===0)return s;var R=s.getSouthWest(),z=s.getNorthEast(),X=new xt(R.lat-_,R.lng-b),rt=new xt(z.lat-_,z.lng-b);return new st(X,rt)}},Zt=l({},ge,{wrapLng:[-180,180],R:6371e3,distance:function(s,u){var d=Math.PI/180,_=s.lat*d,b=u.lat*d,R=Math.sin((u.lat-s.lat)*d/2),z=Math.sin((u.lng-s.lng)*d/2),X=R*R+Math.cos(_)*Math.cos(b)*z*z,rt=2*Math.atan2(Math.sqrt(X),Math.sqrt(1-X));return this.R*rt}}),ze=6378137,Ue={R:ze,MAX_LATITUDE:85.0511287798,project:function(s){var u=Math.PI/180,d=this.MAX_LATITUDE,_=Math.max(Math.min(d,s.lat),-d),b=Math.sin(_*u);return new yt(this.R*s.lng*u,this.R*Math.log((1+b)/(1-b))/2)},unproject:function(s){var u=180/Math.PI;return new xt((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*u,s.x*u/this.R)},bounds:(function(){var s=ze*Math.PI;return new lt([-s,-s],[s,s])})()};function Xe(s,u,d,_){if(_t(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=u,this._c=d,this._d=_}Xe.prototype={transform:function(s,u){return this._transform(s.clone(),u)},_transform:function(s,u){return u=u||1,s.x=u*(this._a*s.x+this._b),s.y=u*(this._c*s.y+this._d),s},untransform:function(s,u){return u=u||1,new yt((s.x/u-this._b)/this._a,(s.y/u-this._d)/this._c)}};function le(s,u,d,_){return new Xe(s,u,d,_)}var en=l({},Zt,{code:"EPSG:3857",projection:Ue,transformation:(function(){var s=.5/(Math.PI*Ue.R);return le(s,.5,-s,.5)})()}),Un=l({},en,{code:"EPSG:900913"});function jn(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function xn(s,u){var d="",_,b,R,z,X,rt;for(_=0,R=s.length;_<R;_++){for(X=s[_],b=0,z=X.length;b<z;b++)rt=X[b],d+=(b?"L":"M")+rt.x+" "+rt.y;d+=u?jt.svg?"z":"x":""}return d||"M0 0"}var nn=document.documentElement.style,yi="ActiveXObject"in window,Qn=yi&&!document.addEventListener,si="msLaunchUri"in navigator&&!("documentMode"in document),rn=qn("webkit"),oi=qn("android"),Me=qn("android 2")||qn("android 3"),Oi=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Fi=oi&&qn("Google")&&Oi<537&&!("AudioNode"in window),he=!!window.opera,G=!si&&qn("chrome"),tt=qn("gecko")&&!rn&&!he&&!yi,mt=!G&&qn("safari"),Nt=qn("phantom"),re="OTransition"in nn,Mt=navigator.platform.indexOf("Win")===0,Ot=yi&&"transition"in nn,Yt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Me,Ae="MozPerspective"in nn,hn=!window.L_DISABLE_3D&&(Ot||Yt||Ae)&&!re&&!Nt,Bn=typeof orientation<"u"||qn("mobile"),ft=Bn&&rn,Rt=Bn&&Yt,wt=!window.PointerEvent&&window.MSPointerEvent,qt=!!(window.PointerEvent||wt),Wt="ontouchstart"in window||!!window.TouchEvent,Qt=!window.L_NO_TOUCH&&(Wt||qt),te=Bn&&he,$e=Bn&&tt,Hn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Di=(function(){var s=!1;try{var u=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",P,u),window.removeEventListener("testPassiveEventSupport",P,u)}catch{}return s})(),jr=(function(){return!!document.createElement("canvas").getContext})(),os=!!(document.createElementNS&&jn("svg").createSVGRect),He=!!os&&(function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),fn=!os&&(function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var u=s.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}})(),sn=navigator.platform.indexOf("Mac")===0,vi=navigator.platform.indexOf("Linux")===0;function qn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var jt={ie:yi,ielt9:Qn,edge:si,webkit:rn,android:oi,android23:Me,androidStock:Fi,opera:he,chrome:G,gecko:tt,safari:mt,phantom:Nt,opera12:re,win:Mt,ie3d:Ot,webkit3d:Yt,gecko3d:Ae,any3d:hn,mobile:Bn,mobileWebkit:ft,mobileWebkit3d:Rt,msPointer:wt,pointer:qt,touch:Qt,touchNative:Wt,mobileOpera:te,mobileGecko:$e,retina:Hn,passiveEvents:Di,canvas:jr,svg:os,vml:fn,inlineSvg:He,mac:sn,linux:vi},Gi=jt.msPointer?"MSPointerDown":"pointerdown",Ds=jt.msPointer?"MSPointerMove":"pointermove",wr=jt.msPointer?"MSPointerUp":"pointerup",Zi=jt.msPointer?"MSPointerCancel":"pointercancel",ai={touchstart:Gi,touchmove:Ds,touchend:wr,touchcancel:Zi},li={touchstart:Ls,touchmove:Br,touchend:Br,touchcancel:Br},Te={},bn=!1;function on(s,u,d){return u==="touchstart"&&as(),li[u]?(d=li[u].bind(this,d),s.addEventListener(ai[u],d,!1),d):(console.warn("wrong event specified:",u),P)}function wn(s,u,d){if(!ai[u]){console.warn("wrong event specified:",u);return}s.removeEventListener(ai[u],d,!1)}function Wi(s){Te[s.pointerId]=s}function ui(s){Te[s.pointerId]&&(Te[s.pointerId]=s)}function Ti(s){delete Te[s.pointerId]}function as(){bn||(document.addEventListener(Gi,Wi,!0),document.addEventListener(Ds,ui,!0),document.addEventListener(wr,Ti,!0),document.addEventListener(Zi,Ti,!0),bn=!0)}function Br(s,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var d in Te)u.touches.push(Te[d]);u.changedTouches=[u],s(u)}}function Ls(s,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&Ze(u),Br(s,u)}function cl(s){var u={},d,_;for(_ in s)d=s[_],u[_]=d&&d.bind?d.bind(s):d;return s=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var ls=200;function Sr(s,u){s.addEventListener("dblclick",u);var d=0,_;function b(R){if(R.detail!==1){_=R.detail;return}if(!(R.pointerType==="mouse"||R.sourceCapabilities&&!R.sourceCapabilities.firesTouchEvents)){var z=_o(R);if(!(z.some(function(rt){return rt instanceof HTMLLabelElement&&rt.attributes.for})&&!z.some(function(rt){return rt instanceof HTMLInputElement||rt instanceof HTMLSelectElement}))){var X=Date.now();X-d<=ls?(_++,_===2&&u(cl(R))):_=1,d=X}}}return s.addEventListener("click",b),{dblclick:u,simDblclick:b}}function Fn(s,u){s.removeEventListener("dblclick",u.dblclick),s.removeEventListener("click",u.simDblclick)}var Hr=sr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),us=sr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ar=us==="webkitTransition"||us==="OTransition"?us+"End":"transitionend";function Ns(s){return typeof s=="string"?document.getElementById(s):s}function xr(s,u){var d=s.style[u]||s.currentStyle&&s.currentStyle[u];if((!d||d==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(s,null);d=_?_[u]:null}return d==="auto"?null:d}function Ee(s,u,d){var _=document.createElement(s);return _.className=u||"",d&&d.appendChild(_),_}function je(s){var u=s.parentNode;u&&u.removeChild(s)}function On(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Rr(s){var u=s.parentNode;u&&u.lastChild!==s&&u.appendChild(s)}function cs(s){var u=s.parentNode;u&&u.firstChild!==s&&u.insertBefore(s,u.firstChild)}function hs(s,u){if(s.classList!==void 0)return s.classList.contains(u);var d=dn(s);return d.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(d)}function de(s,u){if(s.classList!==void 0)for(var d=Q(u),_=0,b=d.length;_<b;_++)s.classList.add(d[_]);else if(!hs(s,u)){var R=dn(s);wa(s,(R?R+" ":"")+u)}}function qe(s,u){s.classList!==void 0?s.classList.remove(u):wa(s,q((" "+dn(s)+" ").replace(" "+u+" "," ")))}function wa(s,u){s.className.baseVal===void 0?s.className=u:s.className.baseVal=u}function dn(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function an(s,u){"opacity"in s.style?s.style.opacity=u:"filter"in s.style&&ks(s,u)}function ks(s,u){var d=!1,_="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(_)}catch{if(u===1)return}u=Math.round(u*100),d?(d.Enabled=u!==100,d.Opacity=u):s.style.filter+=" progid:"+_+"(opacity="+u+")"}function sr(s){for(var u=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in u)return s[d];return!1}function ci(s,u,d){var _=u||new yt(0,0);s.style[Hr]=(jt.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(d?" scale("+d+")":"")}function se(s,u){s._leaflet_pos=u,jt.any3d?ci(s,u):(s.style.left=u.x+"px",s.style.top=u.y+"px")}function Li(s){return s._leaflet_pos||new yt(0,0)}var Kn,or,po;if("onselectstart"in document)Kn=function(){Kt(window,"selectstart",Ze)},or=function(){Oe(window,"selectstart",Ze)};else{var qr=sr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Kn=function(){if(qr){var s=document.documentElement.style;po=s[qr],s[qr]="none"}},or=function(){qr&&(document.documentElement.style[qr]=po,po=void 0)}}function Vs(){Kt(window,"dragstart",Ze)}function Sa(){Oe(window,"dragstart",Ze)}var go,fs;function ar(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(hi(),go=s,fs=s.style.outlineStyle,s.style.outlineStyle="none",Kt(window,"keydown",hi))}function hi(){go&&(go.style.outlineStyle=fs,go=void 0,fs=void 0,Oe(window,"keydown",hi))}function Ir(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function lr(s){var u=s.getBoundingClientRect();return{x:u.width/s.offsetWidth||1,y:u.height/s.offsetHeight||1,boundingClientRect:u}}var Aa={__proto__:null,TRANSFORM:Hr,TRANSITION:us,TRANSITION_END:Ar,get:Ns,getStyle:xr,create:Ee,remove:je,empty:On,toFront:Rr,toBack:cs,hasClass:hs,addClass:de,removeClass:qe,setClass:wa,getClass:dn,setOpacity:an,testProp:sr,setTransform:ci,setPosition:se,getPosition:Li,get disableTextSelection(){return Kn},get enableTextSelection(){return or},disableImageDrag:Vs,enableImageDrag:Sa,preventOutline:ar,restoreOutline:hi,getSizedParentNode:Ir,getScale:lr};function Kt(s,u,d,_){if(u&&typeof u=="object")for(var b in u)Fr(s,b,u[b],d);else{u=Q(u);for(var R=0,z=u.length;R<z;R++)Fr(s,u[R],d,_)}return this}var Ni="_leaflet_events";function Oe(s,u,d,_){if(arguments.length===1)Yi(s),delete s[Ni];else if(u&&typeof u=="object")for(var b in u)Qi(s,b,u[b],d);else if(u=Q(u),arguments.length===2)Yi(s,function(X){return Bt(u,X)!==-1});else for(var R=0,z=u.length;R<z;R++)Qi(s,u[R],d,_);return this}function Yi(s,u){for(var d in s[Ni]){var _=d.split(/\d/)[0];(!u||u(_))&&Qi(s,_,null,null,d)}}var Ei={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Fr(s,u,d,_){var b=u+v(d)+(_?"_"+v(_):"");if(s[Ni]&&s[Ni][b])return this;var R=function(X){return d.call(_||s,X||window.event)},z=R;!jt.touchNative&&jt.pointer&&u.indexOf("touch")===0?R=on(s,u,R):jt.touch&&u==="dblclick"?R=Sr(s,R):"addEventListener"in s?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?s.addEventListener(Ei[u]||u,R,jt.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(R=function(X){X=X||window.event,Zr(s,X)&&z(X)},s.addEventListener(Ei[u],R,!1)):s.addEventListener(u,z,!1):s.attachEvent("on"+u,R),s[Ni]=s[Ni]||{},s[Ni][b]=R}function Qi(s,u,d,_,b){b=b||u+v(d)+(_?"_"+v(_):"");var R=s[Ni]&&s[Ni][b];if(!R)return this;!jt.touchNative&&jt.pointer&&u.indexOf("touch")===0?wn(s,u,R):jt.touch&&u==="dblclick"?Fn(s,R):"removeEventListener"in s?s.removeEventListener(Ei[u]||u,R,!1):s.detachEvent("on"+u,R),s[Ni][b]=null}function bi(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function ur(s){return Fr(s,"wheel",bi),this}function Gr(s){return Kt(s,"mousedown touchstart dblclick contextmenu",bi),s._leaflet_disable_click=!0,this}function Ze(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Xn(s){return Ze(s),bi(s),this}function _o(s){if(s.composedPath)return s.composedPath();for(var u=[],d=s.target;d;)u.push(d),d=d.parentNode;return u}function Rn(s,u){if(!u)return new yt(s.clientX,s.clientY);var d=lr(u),_=d.boundingClientRect;return new yt((s.clientX-_.left)/d.x-u.clientLeft,(s.clientY-_.top)/d.y-u.clientTop)}var ke=jt.linux&&jt.chrome?window.devicePixelRatio:jt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function zs(s){return jt.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/ke:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Zr(s,u){var d=u.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var hl={__proto__:null,on:Kt,off:Oe,stopPropagation:bi,disableScrollPropagation:ur,disableClickPropagation:Gr,preventDefault:Ze,stop:Xn,getPropagationPath:_o,getMousePosition:Rn,getWheelDelta:zs,isExternalTarget:Zr,addListener:Kt,removeListener:Oe},Us=St.extend({run:function(s,u,d,_){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=Li(s),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=B(this._animate,this),this._step()},_step:function(s){var u=+new Date-this._startTime,d=this._duration*1e3;u<d?this._runFrame(this._easeOut(u/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,u){var d=this._startPos.add(this._offset.multiplyBy(s));u&&d._round(),se(this._el,d),this.fire("step")},_complete:function(){H(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),_e=St.extend({options:{crs:en,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,u){u=nt(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(At(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=us&&jt.any3d&&!jt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Kt(this._proxy,Ar,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,u,d){if(u=u===void 0?this._zoom:this._limitZoom(u),s=this._limitCenter(At(s),u,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=l({animate:d.animate},d.zoom),d.pan=l({animate:d.animate,duration:d.duration},d.pan));var _=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,u,d.zoom):this._tryAnimatedPan(s,d.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(s,u,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,u){return this._loaded?this.setView(this.getCenter(),s,{zoom:u}):(this._zoom=s,this)},zoomIn:function(s,u){return s=s||(jt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,u)},zoomOut:function(s,u){return s=s||(jt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,u)},setZoomAround:function(s,u,d){var _=this.getZoomScale(u),b=this.getSize().divideBy(2),R=s instanceof yt?s:this.latLngToContainerPoint(s),z=R.subtract(b).multiplyBy(1-1/_),X=this.containerPointToLatLng(b.add(z));return this.setView(X,u,{zoom:d})},_getBoundsCenterZoom:function(s,u){u=u||{},s=s.getBounds?s.getBounds():Et(s);var d=D(u.paddingTopLeft||u.padding||[0,0]),_=D(u.paddingBottomRight||u.padding||[0,0]),b=this.getBoundsZoom(s,!1,d.add(_));if(b=typeof u.maxZoom=="number"?Math.min(u.maxZoom,b):b,b===1/0)return{center:s.getCenter(),zoom:b};var R=_.subtract(d).divideBy(2),z=this.project(s.getSouthWest(),b),X=this.project(s.getNorthEast(),b),rt=this.unproject(z.add(X).divideBy(2).add(R),b);return{center:rt,zoom:b}},fitBounds:function(s,u){if(s=Et(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,u);return this.setView(d.center,d.zoom,u)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,u){return this.setView(s,this._zoom,{pan:u})},panBy:function(s,u){if(s=D(s).round(),u=u||{},!s.x&&!s.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Us,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){de(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,u.duration||.25,u.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,u,d){if(d=d||{},d.animate===!1||!jt.any3d)return this.setView(s,u,d);this._stop();var _=this.project(this.getCenter()),b=this.project(s),R=this.getSize(),z=this._zoom;s=At(s),u=u===void 0?z:u;var X=Math.max(R.x,R.y),rt=X*this.getZoomScale(z,u),vt=b.distanceTo(_)||1,Dt=1.42,zt=Dt*Dt;function Ht(pn){var Nr=pn?-1:1,$r=pn?rt:X,ys=rt*rt-X*X+Nr*zt*zt*vt*vt,Jr=2*$r*zt*vt,ja=ys/Jr,Sl=Math.sqrt(ja*ja+1)-ja,Ba=Sl<1e-9?-18:Math.log(Sl);return Ba}function fe(pn){return(Math.exp(pn)-Math.exp(-pn))/2}function un(pn){return(Math.exp(pn)+Math.exp(-pn))/2}function _n(pn){return fe(pn)/un(pn)}var Jn=Ht(0);function Ki(pn){return X*(un(Jn)/un(Jn+Dt*pn))}function hh(pn){return X*(un(Jn)*_n(Jn+Dt*pn)-fe(Jn))/zt}function fh(pn){return 1-Math.pow(1-pn,1.5)}var Ua=Date.now(),Lo=(Ht(1)-Jn)/Dt,dh=d.duration?1e3*d.duration:1e3*Lo*.8;function No(){var pn=(Date.now()-Ua)/dh,Nr=fh(pn)*Lo;pn<=1?(this._flyToFrame=B(No,this),this._move(this.unproject(_.add(b.subtract(_).multiplyBy(hh(Nr)/vt)),z),this.getScaleZoom(X/Ki(Nr),z),{flyTo:!0})):this._move(s,u)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),No.call(this),this},flyToBounds:function(s,u){var d=this._getBoundsCenterZoom(s,u);return this.flyTo(d.center,d.zoom,u)},setMaxBounds:function(s){return s=Et(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var u=this.options.minZoom;return this.options.minZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var u=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,u){this._enforcingBounds=!0;var d=this.getCenter(),_=this._limitCenter(d,this._zoom,Et(s));return d.equals(_)||this.panTo(_,u),this._enforcingBounds=!1,this},panInside:function(s,u){u=u||{};var d=D(u.paddingTopLeft||u.padding||[0,0]),_=D(u.paddingBottomRight||u.padding||[0,0]),b=this.project(this.getCenter()),R=this.project(s),z=this.getPixelBounds(),X=bt([z.min.add(d),z.max.subtract(_)]),rt=X.getSize();if(!X.contains(R)){this._enforcingBounds=!0;var vt=R.subtract(X.getCenter()),Dt=X.extend(R).getSize().subtract(rt);b.x+=vt.x<0?-Dt.x:Dt.x,b.y+=vt.y<0?-Dt.y:Dt.y,this.panTo(this.unproject(b),u),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=l({animate:!1,pan:!0},s===!0?{animate:!0}:s);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),_=u.divideBy(2).round(),b=d.divideBy(2).round(),R=_.subtract(b);return!R.x&&!R.y?this:(s.animate&&s.pan?this.panBy(R):(s.pan&&this._rawPanBy(R),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=l({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=p(this._handleGeolocationResponse,this),d=p(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,d,s):navigator.geolocation.getCurrentPosition(u,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var u=s.code,d=s.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var u=s.coords.latitude,d=s.coords.longitude,_=new xt(u,d),b=_.toBounds(s.coords.accuracy*2),R=this._locateOptions;if(R.setView){var z=this.getBoundsZoom(b);this.setView(_,R.maxZoom?Math.min(z,R.maxZoom):z)}var X={latlng:_,bounds:b,timestamp:s.timestamp};for(var rt in s.coords)typeof s.coords[rt]=="number"&&(X[rt]=s.coords[rt]);this.fire("locationfound",X)}},addHandler:function(s,u){if(!u)return this;var d=this[s]=new u(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),je(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(H(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)je(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,u){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),_=Ee("div",d,u||this._mapPane);return s&&(this._panes[s]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),u=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new st(u,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,u,d){s=Et(s),d=D(d||[0,0]);var _=this.getZoom()||0,b=this.getMinZoom(),R=this.getMaxZoom(),z=s.getNorthWest(),X=s.getSouthEast(),rt=this.getSize().subtract(d),vt=bt(this.project(X,_),this.project(z,_)).getSize(),Dt=jt.any3d?this.options.zoomSnap:1,zt=rt.x/vt.x,Ht=rt.y/vt.y,fe=u?Math.max(zt,Ht):Math.min(zt,Ht);return _=this.getScaleZoom(fe,_),Dt&&(_=Math.round(_/(Dt/100))*(Dt/100),_=u?Math.ceil(_/Dt)*Dt:Math.floor(_/Dt)*Dt),Math.max(b,Math.min(R,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new yt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,u){var d=this._getTopLeftPoint(s,u);return new lt(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,u){var d=this.options.crs;return u=u===void 0?this._zoom:u,d.scale(s)/d.scale(u)},getScaleZoom:function(s,u){var d=this.options.crs;u=u===void 0?this._zoom:u;var _=d.zoom(s*d.scale(u));return isNaN(_)?1/0:_},project:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(At(s),u)},unproject:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(D(s),u)},layerPointToLatLng:function(s){var u=D(s).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(s){var u=this.project(At(s))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(At(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Et(s))},distance:function(s,u){return this.options.crs.distance(At(s),At(u))},containerPointToLayerPoint:function(s){return D(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return D(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var u=this.containerPointToLayerPoint(D(s));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(At(s)))},mouseEventToContainerPoint:function(s){return Rn(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var u=this._container=Ns(s);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Kt(u,"scroll",this._onScroll,this),this._containerId=v(u)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&jt.any3d,de(s,"leaflet-container"+(jt.touch?" leaflet-touch":"")+(jt.retina?" leaflet-retina":"")+(jt.ielt9?" leaflet-oldie":"")+(jt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=xr(s,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),se(this._mapPane,new yt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(de(s.markerPane,"leaflet-zoom-hide"),de(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,u,d){se(this._mapPane,new yt(0,0));var _=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var b=this._zoom!==u;this._moveStart(b,d)._move(s,u)._moveEnd(b),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(s,u){return s&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(s,u,d,_){u===void 0&&(u=this._zoom);var b=this._zoom!==u;return this._zoom=u,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),_?d&&d.pinch&&this.fire("zoom",d):((b||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return H(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){se(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[v(this._container)]=this;var u=s?Oe:Kt;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),jt.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){H(this._resizeRequest),this._resizeRequest=B(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,u){for(var d=[],_,b=u==="mouseout"||u==="mouseover",R=s.target||s.srcElement,z=!1;R;){if(_=this._targets[v(R)],_&&(u==="click"||u==="preclick")&&this._draggableMoved(_)){z=!0;break}if(_&&_.listens(u,!0)&&(b&&!Zr(R,s)||(d.push(_),b))||R===this._container)break;R=R.parentNode}return!d.length&&!z&&!b&&this.listens(u,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var u=s.target||s.srcElement;if(!(!this._loaded||u._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(u))){var d=s.type;d==="mousedown"&&ar(u),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,u,d){if(s.type==="click"){var _=l({},s);_.type="preclick",this._fireDOMEvent(_,_.type,d)}var b=this._findEventTargets(s,u);if(d){for(var R=[],z=0;z<d.length;z++)d[z].listens(u,!0)&&R.push(d[z]);b=R.concat(b)}if(b.length){u==="contextmenu"&&Ze(s);var X=b[0],rt={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var vt=X.getLatLng&&(!X._radius||X._radius<=10);rt.containerPoint=vt?this.latLngToContainerPoint(X.getLatLng()):this.mouseEventToContainerPoint(s),rt.layerPoint=this.containerPointToLayerPoint(rt.containerPoint),rt.latlng=vt?X.getLatLng():this.layerPointToLatLng(rt.layerPoint)}for(z=0;z<b.length;z++)if(b[z].fire(u,rt,!0),rt.originalEvent._stopped||b[z].options.bubblingMouseEvents===!1&&Bt(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,u=this._handlers.length;s<u;s++)this._handlers[s].disable()},whenReady:function(s,u){return this._loaded?s.call(u||this,{target:this}):this.on("load",s,u),this},_getMapPanePos:function(){return Li(this._mapPane)||new yt(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,u){var d=s&&u!==void 0?this._getNewPixelOrigin(s,u):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,u){var d=this.getSize()._divideBy(2);return this.project(s,u)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,u,d){var _=this._getNewPixelOrigin(d,u);return this.project(s,u)._subtract(_)},_latLngBoundsToNewLayerBounds:function(s,u,d){var _=this._getNewPixelOrigin(d,u);return bt([this.project(s.getSouthWest(),u)._subtract(_),this.project(s.getNorthWest(),u)._subtract(_),this.project(s.getSouthEast(),u)._subtract(_),this.project(s.getNorthEast(),u)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,u,d){if(!d)return s;var _=this.project(s,u),b=this.getSize().divideBy(2),R=new lt(_.subtract(b),_.add(b)),z=this._getBoundsOffset(R,d,u);return Math.abs(z.x)<=1&&Math.abs(z.y)<=1?s:this.unproject(_.add(z),u)},_limitOffset:function(s,u){if(!u)return s;var d=this.getPixelBounds(),_=new lt(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(_,u))},_getBoundsOffset:function(s,u,d){var _=bt(this.project(u.getNorthEast(),d),this.project(u.getSouthWest(),d)),b=_.min.subtract(s.min),R=_.max.subtract(s.max),z=this._rebound(b.x,-R.x),X=this._rebound(b.y,-R.y);return new yt(z,X)},_rebound:function(s,u){return s+u>0?Math.round(s-u)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(u))},_limitZoom:function(s){var u=this.getMinZoom(),d=this.getMaxZoom(),_=jt.any3d?this.options.zoomSnap:1;return _&&(s=Math.round(s/_)*_),Math.max(u,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){qe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,u){var d=this._getCenterOffset(s)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,u),!0)},_createAnimProxy:function(){var s=this._proxy=Ee("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(u){var d=Hr,_=this._proxy.style[d];ci(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),_===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){je(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),u=this.getZoom();ci(this._proxy,this.project(s,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,u,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(u),b=this._getCenterOffset(s)._divideBy(1-1/_);return d.animate!==!0&&!this.getSize().contains(b)?!1:(B(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,u,!0)},this),!0)},_animateZoom:function(s,u,d,_){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=u,de(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:u,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&qe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Cr(s,u){return new _e(s,u)}var Gn=ce.extend({options:{position:"topright"},initialize:function(s){nt(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var u=this._map;return u&&u.removeControl(this),this.options.position=s,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var u=this._container=this.onAdd(s),d=this.getPosition(),_=s._controlCorners[d];return de(u,"leaflet-control"),d.indexOf("bottom")!==-1?_.insertBefore(u,_.firstChild):_.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(je(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),$n=function(s){return new Gn(s)};_e.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},u="leaflet-",d=this._controlContainer=Ee("div",u+"control-container",this._container);function _(b,R){var z=u+b+" "+u+R;s[b+R]=Ee("div",z,d)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)je(this._controlCorners[s]);je(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var xa=Gn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,u,d,_){return d<_?-1:_<d?1:0}},initialize:function(s,u,d){nt(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in s)this._addLayer(s[_],_);for(_ in u)this._addLayer(u[_],_,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Gn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,u){return this._addLayer(s,u),this._map?this._update():this},addOverlay:function(s,u){return this._addLayer(s,u,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var u=this._getLayer(v(s));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){de(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(de(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):qe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return qe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",u=this._container=Ee("div",s),d=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Gr(u),ur(u);var _=this._section=Ee("section",s+"-list");d&&(this._map.on("click",this.collapse,this),Kt(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var b=this._layersLink=Ee("a",s+"-toggle",u);b.href="#",b.title="Layers",b.setAttribute("role","button"),Kt(b,{keydown:function(R){R.keyCode===13&&this._expandSafely()},click:function(R){Ze(R),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ee("div",s+"-base",_),this._separator=Ee("div",s+"-separator",_),this._overlaysList=Ee("div",s+"-overlays",_),u.appendChild(_)},_getLayer:function(s){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&v(this._layers[u].layer)===s)return this._layers[u]},_addLayer:function(s,u,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:u,overlay:d}),this.options.sortLayers&&this._layers.sort(p(function(_,b){return this.options.sortFunction(_.layer,b.layer,_.name,b.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;On(this._baseLayersList),On(this._overlaysList),this._layerControlInputs=[];var s,u,d,_,b=0;for(d=0;d<this._layers.length;d++)_=this._layers[d],this._addItem(_),u=u||_.overlay,s=s||!_.overlay,b+=_.overlay?0:1;return this.options.hideSingleBase&&(s=s&&b>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=u&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var u=this._getLayer(v(s.target)),d=u.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,u)},_createRadioElement:function(s,u){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(u?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=d,_.firstChild},_addItem:function(s){var u=document.createElement("label"),d=this._map.hasLayer(s.layer),_;s.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=d):_=this._createRadioElement("leaflet-base-layers_"+v(this),d),this._layerControlInputs.push(_),_.layerId=v(s.layer),Kt(_,"click",this._onInputClick,this);var b=document.createElement("span");b.innerHTML=" "+s.name;var R=document.createElement("span");u.appendChild(R),R.appendChild(_),R.appendChild(b);var z=s.overlay?this._overlaysList:this._baseLayersList;return z.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,u,d,_=[],b=[];this._handlingClick=!0;for(var R=s.length-1;R>=0;R--)u=s[R],d=this._getLayer(u.layerId).layer,u.checked?_.push(d):u.checked||b.push(d);for(R=0;R<b.length;R++)this._map.hasLayer(b[R])&&this._map.removeLayer(b[R]);for(R=0;R<_.length;R++)this._map.hasLayer(_[R])||this._map.addLayer(_[R]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,u,d,_=this._map.getZoom(),b=s.length-1;b>=0;b--)u=s[b],d=this._getLayer(u.layerId).layer,u.disabled=d.options.minZoom!==void 0&&_<d.options.minZoom||d.options.maxZoom!==void 0&&_>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Kt(s,"click",Ze),this.expand();var u=this;setTimeout(function(){Oe(s,"click",Ze),u._preventClick=!1})}}),bu=function(s,u,d){return new xa(s,u,d)},Wr=Gn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var u="leaflet-control-zoom",d=Ee("div",u+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,u+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,u+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,u,d,_,b){var R=Ee("a",d,_);return R.innerHTML=s,R.href="#",R.title=u,R.setAttribute("role","button"),R.setAttribute("aria-label",u),Gr(R),Kt(R,"click",Xn),Kt(R,"click",b,this),Kt(R,"click",this._refocusOnMap,this),R},_updateDisabled:function(){var s=this._map,u="leaflet-disabled";qe(this._zoomInButton,u),qe(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(de(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(de(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});_e.mergeOptions({zoomControl:!0}),_e.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Wr,this.addControl(this.zoomControl))});var yo=function(s){return new Wr(s)},vo=Gn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var u="leaflet-control-scale",d=Ee("div",u),_=this.options;return this._addScales(_,u+"-line",d),s.on(_.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,u,d){s.metric&&(this._mScale=Ee("div",u,d)),s.imperial&&(this._iScale=Ee("div",u,d))},_update:function(){var s=this._map,u=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,u]),s.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var u=this._getRoundNum(s),d=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,d,u/s)},_updateImperial:function(s){var u=s*3.2808399,d,_,b;u>5280?(d=u/5280,_=this._getRoundNum(d),this._updateScale(this._iScale,_+" mi",_/d)):(b=this._getRoundNum(u),this._updateScale(this._iScale,b+" ft",b/u))},_updateScale:function(s,u,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=u},_getRoundNum:function(s){var u=Math.pow(10,(Math.floor(s)+"").length-1),d=s/u;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,u*d}}),To=function(s){return new vo(s)},fl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ds=Gn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(jt.inlineSvg?fl+" ":"")+"Leaflet</a>"},initialize:function(s){nt(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ee("div","leaflet-control-attribution"),Gr(this._container);for(var u in s._layers)s._layers[u].getAttribution&&this.addAttribution(s._layers[u].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var u in this._attributions)this._attributions[u]&&s.push(u);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});_e.mergeOptions({attributionControl:!0}),_e.addInitHook(function(){this.options.attributionControl&&new ds().addTo(this)});var wu=function(s){return new ds(s)};Gn.Layers=xa,Gn.Zoom=Wr,Gn.Scale=vo,Gn.Attribution=ds,$n.layers=bu,$n.zoom=yo,$n.scale=To,$n.attribution=wu;var wi=ce.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});wi.addTo=function(s,u){return s.addHandler(u,this),this};var js={Events:W},Ra=jt.touch?"touchstart mousedown":"mousedown",cr=St.extend({options:{clickTolerance:3},initialize:function(s,u,d,_){nt(this,_),this._element=s,this._dragStartTarget=u||s,this._preventOutline=d},enable:function(){this._enabled||(Kt(this._dragStartTarget,Ra,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(cr._dragging===this&&this.finishDrag(!0),Oe(this._dragStartTarget,Ra,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!hs(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){cr._dragging===this&&this.finishDrag();return}if(!(cr._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(cr._dragging=this,this._preventOutline&&ar(this._element),Vs(),Kn(),!this._moving)){this.fire("down");var u=s.touches?s.touches[0]:s,d=Ir(this._element);this._startPoint=new yt(u.clientX,u.clientY),this._startPos=Li(this._element),this._parentScale=lr(d);var _=s.type==="mousedown";Kt(document,_?"mousemove":"touchmove",this._onMove,this),Kt(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var u=s.touches&&s.touches.length===1?s.touches[0]:s,d=new yt(u.clientX,u.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Ze(s),this._moved||(this.fire("dragstart"),this._moved=!0,de(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),de(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),se(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){qe(document.body,"leaflet-dragging"),this._lastTarget&&(qe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Oe(document,"mousemove touchmove",this._onMove,this),Oe(document,"mouseup touchend touchcancel",this._onUp,this),Sa(),or();var u=this._moved&&this._moving;this._moving=!1,cr._dragging=!1,u&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Eo(s,u,d){var _,b=[1,4,2,8],R,z,X,rt,vt,Dt,zt,Ht;for(R=0,Dt=s.length;R<Dt;R++)s[R]._code=Pr(s[R],u);for(X=0;X<4;X++){for(zt=b[X],_=[],R=0,Dt=s.length,z=Dt-1;R<Dt;z=R++)rt=s[R],vt=s[z],rt._code&zt?vt._code&zt||(Ht=Dn(vt,rt,zt,u,d),Ht._code=Pr(Ht,u),_.push(Ht)):(vt._code&zt&&(Ht=Dn(vt,rt,zt,u,d),Ht._code=Pr(Ht,u),_.push(Ht)),_.push(rt));s=_}return s}function ms(s,u){var d,_,b,R,z,X,rt,vt,Dt;if(!s||s.length===0)throw new Error("latlngs not passed");f(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var zt=At([0,0]),Ht=Et(s),fe=Ht.getNorthWest().distanceTo(Ht.getSouthWest())*Ht.getNorthEast().distanceTo(Ht.getNorthWest());fe<1700&&(zt=bo(s));var un=s.length,_n=[];for(d=0;d<un;d++){var Jn=At(s[d]);_n.push(u.project(At([Jn.lat-zt.lat,Jn.lng-zt.lng])))}for(X=rt=vt=0,d=0,_=un-1;d<un;_=d++)b=_n[d],R=_n[_],z=b.y*R.x-R.y*b.x,rt+=(b.x+R.x)*z,vt+=(b.y+R.y)*z,X+=z*3;X===0?Dt=_n[0]:Dt=[rt/X,vt/X];var Ki=u.unproject(D(Dt));return At([Ki.lat+zt.lat,Ki.lng+zt.lng])}function bo(s){for(var u=0,d=0,_=0,b=0;b<s.length;b++){var R=At(s[b]);u+=R.lat,d+=R.lng,_++}return At([u/_,d/_])}var wo={__proto__:null,clipPolygon:Eo,polygonCenter:ms,centroid:bo};function Ia(s,u){if(!u||!s.length)return s.slice();var d=u*u;return s=ml(s,d),s=dl(s,d),s}function So(s,u,d){return Math.sqrt(Si(s,u,d,!0))}function Yr(s,u,d){return Si(s,u,d)}function dl(s,u){var d=s.length,_=typeof Uint8Array<"u"?Uint8Array:Array,b=new _(d);b[0]=b[d-1]=1,Ao(s,b,u,0,d-1);var R,z=[];for(R=0;R<d;R++)b[R]&&z.push(s[R]);return z}function Ao(s,u,d,_,b){var R=0,z,X,rt;for(X=_+1;X<=b-1;X++)rt=Si(s[X],s[_],s[b],!0),rt>R&&(z=X,R=rt);R>d&&(u[z]=1,Ao(s,u,d,_,z),Ao(s,u,d,z,b))}function ml(s,u){for(var d=[s[0]],_=1,b=0,R=s.length;_<R;_++)pl(s[_],s[b])>u&&(d.push(s[_]),b=_);return b<R-1&&d.push(s[R-1]),d}var Ca;function Bs(s,u,d,_,b){var R=_?Ca:Pr(s,d),z=Pr(u,d),X,rt,vt;for(Ca=z;;){if(!(R|z))return[s,u];if(R&z)return!1;X=R||z,rt=Dn(s,u,X,d,b),vt=Pr(rt,d),X===R?(s=rt,R=vt):(u=rt,z=vt)}}function Dn(s,u,d,_,b){var R=u.x-s.x,z=u.y-s.y,X=_.min,rt=_.max,vt,Dt;return d&8?(vt=s.x+R*(rt.y-s.y)/z,Dt=rt.y):d&4?(vt=s.x+R*(X.y-s.y)/z,Dt=X.y):d&2?(vt=rt.x,Dt=s.y+z*(rt.x-s.x)/R):d&1&&(vt=X.x,Dt=s.y+z*(X.x-s.x)/R),new yt(vt,Dt,b)}function Pr(s,u){var d=0;return s.x<u.min.x?d|=1:s.x>u.max.x&&(d|=2),s.y<u.min.y?d|=4:s.y>u.max.y&&(d|=8),d}function pl(s,u){var d=u.x-s.x,_=u.y-s.y;return d*d+_*_}function Si(s,u,d,_){var b=u.x,R=u.y,z=d.x-b,X=d.y-R,rt=z*z+X*X,vt;return rt>0&&(vt=((s.x-b)*z+(s.y-R)*X)/rt,vt>1?(b=d.x,R=d.y):vt>0&&(b+=z*vt,R+=X*vt)),z=s.x-b,X=s.y-R,_?z*z+X*X:new yt(b,R)}function f(s){return!_t(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function T(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),f(s)}function w(s,u){var d,_,b,R,z,X,rt,vt;if(!s||s.length===0)throw new Error("latlngs not passed");f(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Dt=At([0,0]),zt=Et(s),Ht=zt.getNorthWest().distanceTo(zt.getSouthWest())*zt.getNorthEast().distanceTo(zt.getNorthWest());Ht<1700&&(Dt=bo(s));var fe=s.length,un=[];for(d=0;d<fe;d++){var _n=At(s[d]);un.push(u.project(At([_n.lat-Dt.lat,_n.lng-Dt.lng])))}for(d=0,_=0;d<fe-1;d++)_+=un[d].distanceTo(un[d+1])/2;if(_===0)vt=un[0];else for(d=0,R=0;d<fe-1;d++)if(z=un[d],X=un[d+1],b=z.distanceTo(X),R+=b,R>_){rt=(R-_)/b,vt=[X.x-rt*(X.x-z.x),X.y-rt*(X.y-z.y)];break}var Jn=u.unproject(D(vt));return At([Jn.lat+Dt.lat,Jn.lng+Dt.lng])}var C={__proto__:null,simplify:Ia,pointToSegmentDistance:So,closestPointOnSegment:Yr,clipSegment:Bs,_getEdgeIntersection:Dn,_getBitCode:Pr,_sqClosestPointOnSegment:Si,isFlat:f,_flat:T,polylineCenter:w},K={project:function(s){return new yt(s.lng,s.lat)},unproject:function(s){return new xt(s.y,s.x)},bounds:new lt([-180,-90],[180,90])},ot={R:6378137,R_MINOR:6356752314245179e-9,bounds:new lt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var u=Math.PI/180,d=this.R,_=s.lat*u,b=this.R_MINOR/d,R=Math.sqrt(1-b*b),z=R*Math.sin(_),X=Math.tan(Math.PI/4-_/2)/Math.pow((1-z)/(1+z),R/2);return _=-d*Math.log(Math.max(X,1e-10)),new yt(s.lng*u*d,_)},unproject:function(s){for(var u=180/Math.PI,d=this.R,_=this.R_MINOR/d,b=Math.sqrt(1-_*_),R=Math.exp(-s.y/d),z=Math.PI/2-2*Math.atan(R),X=0,rt=.1,vt;X<15&&Math.abs(rt)>1e-7;X++)vt=b*Math.sin(z),vt=Math.pow((1-vt)/(1+vt),b/2),rt=Math.PI/2-2*Math.atan(R*vt)-z,z+=rt;return new xt(z*u,s.x*u/d)}},It={__proto__:null,LonLat:K,Mercator:ot,SphericalMercator:Ue},xe=l({},Zt,{code:"EPSG:3395",projection:ot,transformation:(function(){var s=.5/(Math.PI*ot.R);return le(s,.5,-s,.5)})()}),Sn=l({},Zt,{code:"EPSG:4326",projection:K,transformation:le(1/180,1,-1/180,.5)}),Re=l({},ge,{projection:K,transformation:le(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,u){var d=u.lng-s.lng,_=u.lat-s.lat;return Math.sqrt(d*d+_*_)},infinite:!0});ge.Earth=Zt,ge.EPSG3395=xe,ge.EPSG3857=en,ge.EPSG900913=Un,ge.EPSG4326=Sn,ge.Simple=Re;var Be=St.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[v(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[v(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var u=s.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var d=this.getEvents();u.on(d,this),this.once("remove",function(){u.off(d,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});_e.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var u=v(s);return this._layers[u]?this:(this._layers[u]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var u=v(s);return this._layers[u]?(this._loaded&&s.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return v(s)in this._layers},eachLayer:function(s,u){for(var d in this._layers)s.call(u,this._layers[d]);return this},_addLayers:function(s){s=s?_t(s)?s:[s]:[];for(var u=0,d=s.length;u<d;u++)this.addLayer(s[u])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[v(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var u=v(s);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,u=-1/0,d=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var b=this._zoomBoundLayers[_].options;s=b.minZoom===void 0?s:Math.min(s,b.minZoom),u=b.maxZoom===void 0?u:Math.max(u,b.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ln=Be.extend({initialize:function(s,u){nt(this,u),this._layers={};var d,_;if(s)for(d=0,_=s.length;d<_;d++)this.addLayer(s[d])},addLayer:function(s){var u=this.getLayerId(s);return this._layers[u]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var u=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(s){var u=typeof s=="number"?s:this.getLayerId(s);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var u=Array.prototype.slice.call(arguments,1),d,_;for(d in this._layers)_=this._layers[d],_[s]&&_[s].apply(_,u);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,u){for(var d in this._layers)s.call(u,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return v(s)}}),Qr=function(s,u){return new ln(s,u)},Je=ln.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),ln.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),ln.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new st;for(var u in this._layers){var d=this._layers[u];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),Mr=function(s,u){return new Je(s,u)},Or=ce.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){nt(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,u){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(d,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(_,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(s,u){var d=this.options,_=d[u+"Size"];typeof _=="number"&&(_=[_,_]);var b=D(_),R=D(u==="shadow"&&d.shadowAnchor||d.iconAnchor||b&&b.divideBy(2,!0));s.className="leaflet-marker-"+u+" "+(d.className||""),R&&(s.style.marginLeft=-R.x+"px",s.style.marginTop=-R.y+"px"),b&&(s.style.width=b.x+"px",s.style.height=b.y+"px")},_createImg:function(s,u){return u=u||document.createElement("img"),u.src=s,u},_getIconUrl:function(s){return jt.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function gl(s){return new Or(s)}var xo=Or.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof xo.imagePath!="string"&&(xo.imagePath=this._detectIconPath()),(this.options.imagePath||xo.imagePath)+Or.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var u=function(d,_,b){var R=_.exec(d);return R&&R[b]};return s=u(s,/^url\((['"])?(.+)\1\)$/,2),s&&u(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ee("div","leaflet-default-icon-path",document.body),u=xr(s,"background-image")||xr(s,"backgroundImage");if(document.body.removeChild(s),u=this._stripUrl(u),u)return u;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Su=wi.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new cr(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),de(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&qe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var u=this._marker,d=u._map,_=this._marker.options.autoPanSpeed,b=this._marker.options.autoPanPadding,R=Li(u._icon),z=d.getPixelBounds(),X=d.getPixelOrigin(),rt=bt(z.min._subtract(X).add(b),z.max._subtract(X).subtract(b));if(!rt.contains(R)){var vt=D((Math.max(rt.max.x,R.x)-rt.max.x)/(z.max.x-rt.max.x)-(Math.min(rt.min.x,R.x)-rt.min.x)/(z.min.x-rt.min.x),(Math.max(rt.max.y,R.y)-rt.max.y)/(z.max.y-rt.max.y)-(Math.min(rt.min.y,R.y)-rt.min.y)/(z.min.y-rt.min.y)).multiplyBy(_);d.panBy(vt,{animate:!1}),this._draggable._newPos._add(vt),this._draggable._startPos._add(vt),se(u._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=B(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(H(this._panRequest),this._panRequest=B(this._adjustPan.bind(this,s)))},_onDrag:function(s){var u=this._marker,d=u._shadow,_=Li(u._icon),b=u._map.layerPointToLatLng(_);d&&se(d,_),u._latlng=b,s.latlng=b,s.oldLatLng=this._oldLatLng,u.fire("move",s).fire("drag",s)},_onDragEnd:function(s){H(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Ro=Be.extend({options:{icon:new xo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,u){nt(this,u),this._latlng=At(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var u=this._latlng;return this._latlng=At(s),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),_=!1;d!==this._icon&&(this._icon&&this._removeIcon(),_=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),de(d,u),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Kt(d,"focus",this._panOnFocus,this);var b=s.icon.createShadow(this._shadow),R=!1;b!==this._shadow&&(this._removeShadow(),R=!0),b&&(de(b,u),b.alt=""),this._shadow=b,s.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),b&&R&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Oe(this._icon,"focus",this._panOnFocus,this),je(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&je(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&se(this._icon,s),this._shadow&&se(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(de(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Su)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Su(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&an(this._icon,s),this._shadow&&an(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var u=this.options.icon.options,d=u.iconSize?D(u.iconSize):D(0,0),_=u.iconAnchor?D(u.iconAnchor):D(0,0);s.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:d.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Au(s,u){return new Ro(s,u)}var Kr=Be.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return nt(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Pa=Kr.extend({options:{fill:!0,radius:10},initialize:function(s,u){nt(this,u),this._latlng=At(s),this._radius=this.options.radius},setLatLng:function(s){var u=this._latlng;return this._latlng=At(s),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var u=s&&s.radius||this._radius;return Kr.prototype.setStyle.call(this,s),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,u=this._radiusY||s,d=this._clickTolerance(),_=[s+d,u+d];this._pxBounds=new lt(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function sh(s,u){return new Pa(s,u)}var xu=Pa.extend({initialize:function(s,u,d){if(typeof u=="number"&&(u=l({},d,{radius:u})),nt(this,u),this._latlng=At(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new st(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Kr.prototype.setStyle,_project:function(){var s=this._latlng.lng,u=this._latlng.lat,d=this._map,_=d.options.crs;if(_.distance===Zt.distance){var b=Math.PI/180,R=this._mRadius/Zt.R/b,z=d.project([u+R,s]),X=d.project([u-R,s]),rt=z.add(X).divideBy(2),vt=d.unproject(rt).lat,Dt=Math.acos((Math.cos(R*b)-Math.sin(u*b)*Math.sin(vt*b))/(Math.cos(u*b)*Math.cos(vt*b)))/b;(isNaN(Dt)||Dt===0)&&(Dt=R/Math.cos(Math.PI/180*u)),this._point=rt.subtract(d.getPixelOrigin()),this._radius=isNaN(Dt)?0:rt.x-d.project([vt,s-Dt]).x,this._radiusY=rt.y-z.y}else{var zt=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(zt).x}this._updateBounds()}});function Td(s,u,d){return new xu(s,u,d)}var Xr=Kr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,u){nt(this,u),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var u=1/0,d=null,_=Si,b,R,z=0,X=this._parts.length;z<X;z++)for(var rt=this._parts[z],vt=1,Dt=rt.length;vt<Dt;vt++){b=rt[vt-1],R=rt[vt];var zt=_(s,b,R,!0);zt<u&&(u=zt,d=_(s,b,R))}return d&&(d.distance=Math.sqrt(u)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return w(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,u){return u=u||this._defaultShape(),s=At(s),u.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new st,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return f(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var u=[],d=f(s),_=0,b=s.length;_<b;_++)d?(u[_]=At(s[_]),this._bounds.extend(u[_])):u[_]=this._convertLatLngs(s[_]);return u},_project:function(){var s=new lt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),u=new yt(s,s);this._rawPxBounds&&(this._pxBounds=new lt([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(s,u,d){var _=s[0]instanceof xt,b=s.length,R,z;if(_){for(z=[],R=0;R<b;R++)z[R]=this._map.latLngToLayerPoint(s[R]),d.extend(z[R]);u.push(z)}else for(R=0;R<b;R++)this._projectLatlngs(s[R],u,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,d,_,b,R,z,X,rt;for(d=0,b=0,R=this._rings.length;d<R;d++)for(rt=this._rings[d],_=0,z=rt.length;_<z-1;_++)X=Bs(rt[_],rt[_+1],s,_,!0),X&&(u[b]=u[b]||[],u[b].push(X[0]),(X[1]!==rt[_+1]||_===z-2)&&(u[b].push(X[1]),b++))}},_simplifyPoints:function(){for(var s=this._parts,u=this.options.smoothFactor,d=0,_=s.length;d<_;d++)s[d]=Ia(s[d],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,u){var d,_,b,R,z,X,rt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,R=this._parts.length;d<R;d++)for(X=this._parts[d],_=0,z=X.length,b=z-1;_<z;b=_++)if(!(!u&&_===0)&&So(s,X[b],X[_])<=rt)return!0;return!1}});function Ed(s,u){return new Xr(s,u)}Xr._flat=T;var Io=Xr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ms(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var u=Xr.prototype._convertLatLngs.call(this,s),d=u.length;return d>=2&&u[0]instanceof xt&&u[0].equals(u[d-1])&&u.pop(),u},_setLatLngs:function(s){Xr.prototype._setLatLngs.call(this,s),f(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return f(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,u=this.options.weight,d=new yt(u,u);if(s=new lt(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,b=this._rings.length,R;_<b;_++)R=Eo(this._rings[_],s,!0),R.length&&this._parts.push(R)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var u=!1,d,_,b,R,z,X,rt,vt;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(R=0,rt=this._parts.length;R<rt;R++)for(d=this._parts[R],z=0,vt=d.length,X=vt-1;z<vt;X=z++)_=d[z],b=d[X],_.y>s.y!=b.y>s.y&&s.x<(b.x-_.x)*(s.y-_.y)/(b.y-_.y)+_.x&&(u=!u);return u||Xr.prototype._containsPoint.call(this,s,!0)}});function ki(s,u){return new Io(s,u)}var Vi=Je.extend({initialize:function(s,u){nt(this,u),this._layers={},s&&this.addData(s)},addData:function(s){var u=_t(s)?s:s.features,d,_,b;if(u){for(d=0,_=u.length;d<_;d++)b=u[d],(b.geometries||b.geometry||b.features||b.coordinates)&&this.addData(b);return this}var R=this.options;if(R.filter&&!R.filter(s))return this;var z=Ma(s,R);return z?(z.feature=Co(s),z.defaultOptions=z.options,this.resetStyle(z),R.onEachFeature&&R.onEachFeature(s,z),this.addLayer(z)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=l({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(u){this._setLayerStyle(u,s)},this)},_setLayerStyle:function(s,u){s.setStyle&&(typeof u=="function"&&(u=u(s.feature)),s.setStyle(u))}});function Ma(s,u){var d=s.type==="Feature"?s.geometry:s,_=d?d.coordinates:null,b=[],R=u&&u.pointToLayer,z=u&&u.coordsToLatLng||_l,X,rt,vt,Dt;if(!_&&!d)return null;switch(d.type){case"Point":return X=z(_),Ru(R,s,X,u);case"MultiPoint":for(vt=0,Dt=_.length;vt<Dt;vt++)X=z(_[vt]),b.push(Ru(R,s,X,u));return new Je(b);case"LineString":case"MultiLineString":return rt=Oa(_,d.type==="LineString"?0:1,z),new Xr(rt,u);case"Polygon":case"MultiPolygon":return rt=Oa(_,d.type==="Polygon"?1:2,z),new Io(rt,u);case"GeometryCollection":for(vt=0,Dt=d.geometries.length;vt<Dt;vt++){var zt=Ma({geometry:d.geometries[vt],type:"Feature",properties:s.properties},u);zt&&b.push(zt)}return new Je(b);case"FeatureCollection":for(vt=0,Dt=d.features.length;vt<Dt;vt++){var Ht=Ma(d.features[vt],u);Ht&&b.push(Ht)}return new Je(b);default:throw new Error("Invalid GeoJSON object.")}}function Ru(s,u,d,_){return s?s(u,d):new Ro(d,_&&_.markersInheritOptions&&_)}function _l(s){return new xt(s[1],s[0],s[2])}function Oa(s,u,d){for(var _=[],b=0,R=s.length,z;b<R;b++)z=u?Oa(s[b],u-1,d):(d||_l)(s[b]),_.push(z);return _}function Da(s,u){return s=At(s),s.alt!==void 0?[M(s.lng,u),M(s.lat,u),M(s.alt,u)]:[M(s.lng,u),M(s.lat,u)]}function yl(s,u,d,_){for(var b=[],R=0,z=s.length;R<z;R++)b.push(u?yl(s[R],f(s[R])?0:u-1,d,_):Da(s[R],_));return!u&&d&&b.length>0&&b.push(b[0].slice()),b}function hr(s,u){return s.feature?l({},s.feature,{geometry:u}):Co(u)}function Co(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Hs={toGeoJSON:function(s){return hr(this,{type:"Point",coordinates:Da(this.getLatLng(),s)})}};Ro.include(Hs),xu.include(Hs),Pa.include(Hs),Xr.include({toGeoJSON:function(s){var u=!f(this._latlngs),d=yl(this._latlngs,u?1:0,!1,s);return hr(this,{type:(u?"Multi":"")+"LineString",coordinates:d})}}),Io.include({toGeoJSON:function(s){var u=!f(this._latlngs),d=u&&!f(this._latlngs[0]),_=yl(this._latlngs,d?2:u?1:0,!0,s);return u||(_=[_]),hr(this,{type:(d?"Multi":"")+"Polygon",coordinates:_})}}),ln.include({toMultiPoint:function(s){var u=[];return this.eachLayer(function(d){u.push(d.toGeoJSON(s).geometry.coordinates)}),hr(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(s){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(s);var d=u==="GeometryCollection",_=[];return this.eachLayer(function(b){if(b.toGeoJSON){var R=b.toGeoJSON(s);if(d)_.push(R.geometry);else{var z=Co(R);z.type==="FeatureCollection"?_.push.apply(_,z.features):_.push(z)}}}),d?hr(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function vl(s,u){return new Vi(s,u)}var oh=vl,Dr=Be.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,u,d){this._url=s,this._bounds=Et(u),nt(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(de(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){je(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Rr(this._image),this},bringToBack:function(){return this._map&&cs(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Et(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",u=this._image=s?this._url:Ee("img");if(de(u,"leaflet-image-layer"),this._zoomAnimated&&de(u,"leaflet-zoom-animated"),this.options.className&&de(u,this.options.className),u.onselectstart=P,u.onmousemove=P,u.onload=p(this.fire,this,"load"),u.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(s){var u=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;ci(this._image,d,u)},_reset:function(){var s=this._image,u=new lt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=u.getSize();se(s,u.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){an(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),Po=function(s,u,d){return new Dr(s,u,d)},Tl=Dr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",u=this._image=s?this._url:Ee("video");if(de(u,"leaflet-image-layer"),this._zoomAnimated&&de(u,"leaflet-zoom-animated"),this.options.className&&de(u,this.options.className),u.onselectstart=P,u.onmousemove=P,u.onloadeddata=p(this.fire,this,"load"),s){for(var d=u.getElementsByTagName("source"),_=[],b=0;b<d.length;b++)_.push(d[b].src);this._url=d.length>0?_:[u.src];return}_t(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var R=0;R<this._url.length;R++){var z=Ee("source");z.src=this._url[R],u.appendChild(z)}}});function ah(s,u,d){return new Tl(s,u,d)}var ps=Dr.extend({_initImage:function(){var s=this._image=this._url;de(s,"leaflet-image-layer"),this._zoomAnimated&&de(s,"leaflet-zoom-animated"),this.options.className&&de(s,this.options.className),s.onselectstart=P,s.onmousemove=P}});function lh(s,u,d){return new ps(s,u,d)}var fr=Be.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,u){s&&(s instanceof xt||_t(s))?(this._latlng=At(s),nt(this,u)):(nt(this,s),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&an(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&an(this._container,1),this.bringToFront(),this.options.interactive&&(de(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(an(this._container,0),this._removeTimeout=setTimeout(p(je,void 0,this._container),200)):je(this._container),this.options.interactive&&(qe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=At(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Rr(this._container),this},bringToBack:function(){return this._map&&cs(this._container),this},_prepareOpen:function(s){var u=this._source;if(!u._map)return!1;if(u instanceof Je){u=null;var d=this._source._layers;for(var _ in d)if(d[_]._map){u=d[_];break}if(!u)return!1;this._source=u}if(!s)if(u.getCenter)s=u.getCenter();else if(u.getLatLng)s=u.getLatLng();else if(u.getBounds)s=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")s.innerHTML=u;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),u=D(this.options.offset),d=this._getAnchor();this._zoomAnimated?se(this._container,s.add(d)):u=u.add(s).add(d);var _=this._containerBottom=-u.y,b=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=_+"px",this._container.style.left=b+"px"}},_getAnchor:function(){return[0,0]}});_e.include({_initOverlay:function(s,u,d,_){var b=u;return b instanceof s||(b=new s(_).setContent(u)),d&&b.setLatLng(d),b}}),Be.include({_initOverlay:function(s,u,d,_){var b=d;return b instanceof s?(nt(b,_),b._source=this):(b=u&&!_?u:new s(_,this),b.setContent(d)),b}});var La=fr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,fr.prototype.openOn.call(this,s)},onAdd:function(s){fr.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Kr||this._source.on("preclick",bi))},onRemove:function(s){fr.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Kr||this._source.off("preclick",bi))},getEvents:function(){var s=fr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",u=this._container=Ee("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ee("div",s+"-content-wrapper",u);if(this._contentNode=Ee("div",s+"-content",d),Gr(u),ur(this._contentNode),Kt(u,"contextmenu",bi),this._tipContainer=Ee("div",s+"-tip-container",u),this._tip=Ee("div",s+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=Ee("a",s+"-close-button",u);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',Kt(_,"click",function(b){Ze(b),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,u=s.style;u.width="",u.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),u.width=d+1+"px",u.whiteSpace="",u.height="";var _=s.offsetHeight,b=this.options.maxHeight,R="leaflet-popup-scrolled";b&&_>b?(u.height=b+"px",de(s,R)):qe(s,R),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();se(this._container,u.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,u=parseInt(xr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+u,_=this._containerWidth,b=new yt(this._containerLeft,-d-this._containerBottom);b._add(Li(this._container));var R=s.layerPointToContainerPoint(b),z=D(this.options.autoPanPadding),X=D(this.options.autoPanPaddingTopLeft||z),rt=D(this.options.autoPanPaddingBottomRight||z),vt=s.getSize(),Dt=0,zt=0;R.x+_+rt.x>vt.x&&(Dt=R.x+_-vt.x+rt.x),R.x-Dt-X.x<0&&(Dt=R.x-X.x),R.y+d+rt.y>vt.y&&(zt=R.y+d-vt.y+rt.y),R.y-zt-X.y<0&&(zt=R.y-X.y),(Dt||zt)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([Dt,zt]))}},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),bd=function(s,u){return new La(s,u)};_e.mergeOptions({closePopupOnClick:!0}),_e.include({openPopup:function(s,u,d){return this._initOverlay(La,s,u,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Be.include({bindPopup:function(s,u){return this._popup=this._initOverlay(La,this._popup,s,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Je||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){Xn(s);var u=s.layer||s.target;if(this._popup._source===u&&!(u instanceof Kr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=u,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var El=fr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){fr.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){fr.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=fr.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",u=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ee("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var u,d,_=this._map,b=this._container,R=_.latLngToContainerPoint(_.getCenter()),z=_.layerPointToContainerPoint(s),X=this.options.direction,rt=b.offsetWidth,vt=b.offsetHeight,Dt=D(this.options.offset),zt=this._getAnchor();X==="top"?(u=rt/2,d=vt):X==="bottom"?(u=rt/2,d=0):X==="center"?(u=rt/2,d=vt/2):X==="right"?(u=0,d=vt/2):X==="left"?(u=rt,d=vt/2):z.x<R.x?(X="right",u=0,d=vt/2):(X="left",u=rt+(Dt.x+zt.x)*2,d=vt/2),s=s.subtract(D(u,d,!0)).add(Dt).add(zt),qe(b,"leaflet-tooltip-right"),qe(b,"leaflet-tooltip-left"),qe(b,"leaflet-tooltip-top"),qe(b,"leaflet-tooltip-bottom"),de(b,"leaflet-tooltip-"+X),se(b,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&an(this._container,s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(u)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),wd=function(s,u){return new El(s,u)};_e.include({openTooltip:function(s,u,d){return this._initOverlay(El,s,u,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Be.include({bindTooltip:function(s,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(El,this._tooltip,s,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var u=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[u](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Je||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&(Kt(u,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Kt(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var u=s.latlng,d,_;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),_=this._map.containerPointToLayerPoint(d),u=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(u)}});var Iu=Or.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var u=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(On(u),u.appendChild(d.html)):u.innerHTML=d.html!==!1?d.html:"",d.bgPos){var _=D(d.bgPos);u.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function uh(s){return new Iu(s)}Or.Default=xo;var qs=Be.extend({options:{tileSize:256,opacity:1,updateWhenIdle:jt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){nt(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),je(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Rr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(cs(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=E(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof yt?s:new yt(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var u=this.getPane().children,d=-s(-1/0,1/0),_=0,b=u.length,R;_<b;_++)R=u[_].style.zIndex,u[_]!==this._container&&R&&(d=s(d,+R));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!jt.ielt9){an(this._container,this.options.opacity);var s=+new Date,u=!1,d=!1;for(var _ in this._tiles){var b=this._tiles[_];if(!(!b.current||!b.loaded)){var R=Math.min(1,(s-b.loaded)/200);an(b.el,R),R<1?u=!0:(b.active?d=!0:this._onOpaqueTile(b),b.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),u&&(H(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this))}},_onOpaqueTile:P,_initContainer:function(){this._container||(this._container=Ee("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,u=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=u-Math.abs(s-d),this._onUpdateLevel(d)):(je(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var _=this._levels[s],b=this._map;return _||(_=this._levels[s]={},_.el=Ee("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=u,_.origin=b.project(b.unproject(b.getPixelOrigin()),s).round(),_.zoom=s,this._setZoomTransform(_,b.getCenter(),b.getZoom()),P(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:P,_onRemoveLevel:P,_onCreateLevel:P,_pruneTiles:function(){if(this._map){var s,u,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)u=this._tiles[s],u.retain=u.current;for(s in this._tiles)if(u=this._tiles[s],u.current&&!u.active){var _=u.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var u in this._tiles)this._tiles[u].coords.z===s&&this._removeTile(u)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)je(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,u,d,_){var b=Math.floor(s/2),R=Math.floor(u/2),z=d-1,X=new yt(+b,+R);X.z=+z;var rt=this._tileCoordsToKey(X),vt=this._tiles[rt];return vt&&vt.active?(vt.retain=!0,!0):(vt&&vt.loaded&&(vt.retain=!0),z>_?this._retainParent(b,R,z,_):!1)},_retainChildren:function(s,u,d,_){for(var b=2*s;b<2*s+2;b++)for(var R=2*u;R<2*u+2;R++){var z=new yt(b,R);z.z=d+1;var X=this._tileCoordsToKey(z),rt=this._tiles[X];if(rt&&rt.active){rt.retain=!0;continue}else rt&&rt.loaded&&(rt.retain=!0);d+1<_&&this._retainChildren(b,R,d+1,_)}},_resetView:function(s){var u=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var u=this.options;return u.minNativeZoom!==void 0&&s<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<s?u.maxNativeZoom:s},_setView:function(s,u,d,_){var b=Math.round(u);this.options.maxZoom!==void 0&&b>this.options.maxZoom||this.options.minZoom!==void 0&&b<this.options.minZoom?b=void 0:b=this._clampZoom(b);var R=this.options.updateWhenZooming&&b!==this._tileZoom;(!_||R)&&(this._tileZoom=b,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),b!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,u)},_setZoomTransforms:function(s,u){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,u)},_setZoomTransform:function(s,u,d){var _=this._map.getZoomScale(d,s.zoom),b=s.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(u,d)).round();jt.any3d?ci(s.el,b,_):se(s.el,b)},_resetGrid:function(){var s=this._map,u=s.options.crs,d=this._tileSize=this.getTileSize(),_=this._tileZoom,b=this._map.getPixelWorldBounds(this._tileZoom);b&&(this._globalTileRange=this._pxBoundsToTileRange(b)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,u.wrapLng[0]],_).x/d.x),Math.ceil(s.project([0,u.wrapLng[1]],_).x/d.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([u.wrapLat[0],0],_).y/d.x),Math.ceil(s.project([u.wrapLat[1],0],_).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var u=this._map,d=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),_=u.getZoomScale(d,this._tileZoom),b=u.project(s,this._tileZoom).floor(),R=u.getSize().divideBy(_*2);return new lt(b.subtract(R),b.add(R))},_update:function(s){var u=this._map;if(u){var d=this._clampZoom(u.getZoom());if(s===void 0&&(s=u.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(s),b=this._pxBoundsToTileRange(_),R=b.getCenter(),z=[],X=this.options.keepBuffer,rt=new lt(b.getBottomLeft().subtract([X,-X]),b.getTopRight().add([X,-X]));if(!(isFinite(b.min.x)&&isFinite(b.min.y)&&isFinite(b.max.x)&&isFinite(b.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var vt in this._tiles){var Dt=this._tiles[vt].coords;(Dt.z!==this._tileZoom||!rt.contains(new yt(Dt.x,Dt.y)))&&(this._tiles[vt].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var zt=b.min.y;zt<=b.max.y;zt++)for(var Ht=b.min.x;Ht<=b.max.x;Ht++){var fe=new yt(Ht,zt);if(fe.z=this._tileZoom,!!this._isValidTile(fe)){var un=this._tiles[this._tileCoordsToKey(fe)];un?un.current=!0:z.push(fe)}}if(z.sort(function(Jn,Ki){return Jn.distanceTo(R)-Ki.distanceTo(R)}),z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var _n=document.createDocumentFragment();for(Ht=0;Ht<z.length;Ht++)this._addTile(z[Ht],_n);this._level.el.appendChild(_n)}}}},_isValidTile:function(s){var u=this._map.options.crs;if(!u.infinite){var d=this._globalTileRange;if(!u.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!u.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(s);return Et(this.options.bounds).overlaps(_)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var u=this._map,d=this.getTileSize(),_=s.scaleBy(d),b=_.add(d),R=u.unproject(_,s.z),z=u.unproject(b,s.z);return[R,z]},_tileCoordsToBounds:function(s){var u=this._tileCoordsToNwSe(s),d=new st(u[0],u[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var u=s.split(":"),d=new yt(+u[0],+u[1]);return d.z=+u[2],d},_removeTile:function(s){var u=this._tiles[s];u&&(je(u.el),delete this._tiles[s],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){de(s,"leaflet-tile");var u=this.getTileSize();s.style.width=u.x+"px",s.style.height=u.y+"px",s.onselectstart=P,s.onmousemove=P,jt.ielt9&&this.options.opacity<1&&an(s,this.options.opacity)},_addTile:function(s,u){var d=this._getTilePos(s),_=this._tileCoordsToKey(s),b=this.createTile(this._wrapCoords(s),p(this._tileReady,this,s));this._initTile(b),this.createTile.length<2&&B(p(this._tileReady,this,s,null,b)),se(b,d),this._tiles[_]={el:b,coords:s,current:!0},u.appendChild(b),this.fire("tileloadstart",{tile:b,coords:s})},_tileReady:function(s,u,d){u&&this.fire("tileerror",{error:u,tile:d,coords:s});var _=this._tileCoordsToKey(s);d=this._tiles[_],d&&(d.loaded=+new Date,this._map._fadeAnimated?(an(d.el,0),H(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),u||(de(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),jt.ielt9||!this._map._fadeAnimated?B(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var u=new yt(this._wrapX?x(s.x,this._wrapX):s.x,this._wrapY?x(s.y,this._wrapY):s.y);return u.z=s.z,u},_pxBoundsToTileRange:function(s){var u=this.getTileSize();return new lt(s.min.unscaleBy(u).floor(),s.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function dr(s){return new qs(s)}var Fs=qs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,u){this._url=s,u=nt(this,u),u.detectRetina&&jt.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,u){return this._url===s&&u===void 0&&(u=!0),this._url=s,u||this.redraw(),this},createTile:function(s,u){var d=document.createElement("img");return Kt(d,"load",p(this._tileOnLoad,this,u,d)),Kt(d,"error",p(this._tileOnError,this,u,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var u={r:jt.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(u.y=d),u["-y"]=d}return ut(this._url,l(u,this.options))},_tileOnLoad:function(s,u){jt.ielt9?setTimeout(p(s,this,null,u),0):s(null,u)},_tileOnError:function(s,u,d){var _=this.options.errorTileUrl;_&&u.getAttribute("src")!==_&&(u.src=_),s(d,u)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,u=this.options.maxZoom,d=this.options.zoomReverse,_=this.options.zoomOffset;return d&&(s=u-s),s+_},_getSubdomain:function(s){var u=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var s,u;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(u=this._tiles[s].el,u.onload=P,u.onerror=P,!u.complete)){u.src=Ct;var d=this._tiles[s].coords;je(u),delete this._tiles[s],this.fire("tileabort",{tile:u,coords:d})}},_removeTile:function(s){var u=this._tiles[s];if(u)return u.el.setAttribute("src",Ct),qs.prototype._removeTile.call(this,s)},_tileReady:function(s,u,d){if(!(!this._map||d&&d.getAttribute("src")===Ct))return qs.prototype._tileReady.call(this,s,u,d)}});function zi(s,u){return new Fs(s,u)}var Ui=Fs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,u){this._url=s;var d=l({},this.defaultWmsParams);for(var _ in u)_ in this.options||(d[_]=u[_]);u=nt(this,u);var b=u.detectRetina&&jt.retina?2:1,R=this.getTileSize();d.width=R.x*b,d.height=R.y*b,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Fs.prototype.onAdd.call(this,s)},getTileUrl:function(s){var u=this._tileCoordsToNwSe(s),d=this._crs,_=bt(d.project(u[0]),d.project(u[1])),b=_.min,R=_.max,z=(this._wmsVersion>=1.3&&this._crs===Sn?[b.y,b.x,R.y,R.x]:[b.x,b.y,R.x,R.y]).join(","),X=Fs.prototype.getTileUrl.call(this,s);return X+at(this.wmsParams,X,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+z},setParams:function(s,u){return l(this.wmsParams,s),u||this.redraw(),this}});function Mo(s,u){return new Ui(s,u)}Fs.WMS=Ui,zi.wms=Mo;var mr=Be.extend({options:{padding:.1},initialize:function(s){nt(this,s),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),de(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,u){var d=this._map.getZoomScale(u,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),b=this._map.project(this._center,u),R=_.multiplyBy(-d).add(b).subtract(this._map._getNewPixelOrigin(s,u));jt.any3d?ci(this._container,R,d):se(this._container,R)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,u=this._map.getSize(),d=this._map.containerPointToLayerPoint(u.multiplyBy(-s)).round();this._bounds=new lt(d,d.add(u.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Na=mr.extend({options:{tolerance:0},getEvents:function(){var s=mr.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){mr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Kt(s,"mousemove",this._onMouseMove,this),Kt(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Kt(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){H(this._redrawRequest),delete this._ctx,je(this._container),Oe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var u in this._layers)s=this._layers[u],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mr.prototype._update.call(this);var s=this._bounds,u=this._container,d=s.getSize(),_=jt.retina?2:1;se(u,s.min),u.width=_*d.x,u.height=_*d.y,u.style.width=d.x+"px",u.style.height=d.y+"px",jt.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){mr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[v(s)]=s;var u=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var u=s._order,d=u.next,_=u.prev;d?d.prev=_:this._drawLast=_,_?_.next=d:this._drawFirst=d,delete s._order,delete this._layers[v(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var u=s.options.dashArray.split(/[, ]+/),d=[],_,b;for(b=0;b<u.length;b++){if(_=Number(u[b]),isNaN(_))return;d.push(_)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||B(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var u=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new lt,this._redrawBounds.extend(s._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(s._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var u=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,u=this._redrawBounds;if(this._ctx.save(),u){var d=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)s=_.layer,(!u||s._pxBounds&&s._pxBounds.intersects(u))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,u){if(this._drawing){var d,_,b,R,z=s._parts,X=z.length,rt=this._ctx;if(X){for(rt.beginPath(),d=0;d<X;d++){for(_=0,b=z[d].length;_<b;_++)R=z[d][_],rt[_?"lineTo":"moveTo"](R.x,R.y);u&&rt.closePath()}this._fillStroke(rt,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var u=s._point,d=this._ctx,_=Math.max(Math.round(s._radius),1),b=(Math.max(Math.round(s._radiusY),1)||_)/_;b!==1&&(d.save(),d.scale(1,b)),d.beginPath(),d.arc(u.x,u.y/b,_,0,Math.PI*2,!1),b!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,u){var d=u.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(u.options&&u.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var u=this._map.mouseEventToLayerPoint(s),d,_,b=this._drawFirst;b;b=b.next)d=b.layer,d.options.interactive&&d._containsPoint(u)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(_=d);this._fireEvent(_?[_]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,u)}},_handleMouseOut:function(s){var u=this._hoveredLayer;u&&(qe(this._container,"leaflet-interactive"),this._fireEvent([u],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,u){if(!this._mouseHoverThrottled){for(var d,_,b=this._drawFirst;b;b=b.next)d=b.layer,d.options.interactive&&d._containsPoint(u)&&(_=d);_!==this._hoveredLayer&&(this._handleMouseOut(s),_&&(de(this._container,"leaflet-interactive"),this._fireEvent([_],s,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,u,d){this._map._fireDOMEvent(u,d||u.type,s)},_bringToFront:function(s){var u=s._order;if(u){var d=u.next,_=u.prev;if(d)d.prev=_;else return;_?_.next=d:d&&(this._drawFirst=d),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(s)}},_bringToBack:function(s){var u=s._order;if(u){var d=u.next,_=u.prev;if(_)_.next=d;else return;d?d.prev=_:_&&(this._drawLast=_),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(s)}}});function ka(s){return jt.canvas?new Na(s):null}var Gs=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Oo={_initContainer:function(){this._container=Ee("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(mr.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var u=s._container=Gs("shape");de(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",s._path=Gs("path"),u.appendChild(s._path),this._updateStyle(s),this._layers[v(s)]=s},_addPath:function(s){var u=s._container;this._container.appendChild(u),s.options.interactive&&s.addInteractiveTarget(u)},_removePath:function(s){var u=s._container;je(u),s.removeInteractiveTarget(u),delete this._layers[v(s)]},_updateStyle:function(s){var u=s._stroke,d=s._fill,_=s.options,b=s._container;b.stroked=!!_.stroke,b.filled=!!_.fill,_.stroke?(u||(u=s._stroke=Gs("stroke")),b.appendChild(u),u.weight=_.weight+"px",u.color=_.color,u.opacity=_.opacity,_.dashArray?u.dashStyle=_t(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=_.lineCap.replace("butt","flat"),u.joinstyle=_.lineJoin):u&&(b.removeChild(u),s._stroke=null),_.fill?(d||(d=s._fill=Gs("fill")),b.appendChild(d),d.color=_.fillColor||_.color,d.opacity=_.fillOpacity):d&&(b.removeChild(d),s._fill=null)},_updateCircle:function(s){var u=s._point.round(),d=Math.round(s._radius),_=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+u.x+","+u.y+" "+d+","+_+" 0,"+65535*360)},_setPath:function(s,u){s._path.v=u},_bringToFront:function(s){Rr(s._container)},_bringToBack:function(s){cs(s._container)}},Va=jt.vml?Gs:jn,gs=mr.extend({_initContainer:function(){this._container=Va("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Va("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){je(this._container),Oe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mr.prototype._update.call(this);var s=this._bounds,u=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,d.setAttribute("width",u.x),d.setAttribute("height",u.y)),se(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(s){var u=s._path=Va("path");s.options.className&&de(u,s.options.className),s.options.interactive&&de(u,"leaflet-interactive"),this._updateStyle(s),this._layers[v(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){je(s._path),s.removeInteractiveTarget(s._path),delete this._layers[v(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var u=s._path,d=s.options;u&&(d.stroke?(u.setAttribute("stroke",d.color),u.setAttribute("stroke-opacity",d.opacity),u.setAttribute("stroke-width",d.weight),u.setAttribute("stroke-linecap",d.lineCap),u.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?u.setAttribute("stroke-dasharray",d.dashArray):u.removeAttribute("stroke-dasharray"),d.dashOffset?u.setAttribute("stroke-dashoffset",d.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),d.fill?(u.setAttribute("fill",d.fillColor||d.color),u.setAttribute("fill-opacity",d.fillOpacity),u.setAttribute("fill-rule",d.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(s,u){this._setPath(s,xn(s._parts,u))},_updateCircle:function(s){var u=s._point,d=Math.max(Math.round(s._radius),1),_=Math.max(Math.round(s._radiusY),1)||d,b="a"+d+","+_+" 0 1,0 ",R=s._empty()?"M0 0":"M"+(u.x-d)+","+u.y+b+d*2+",0 "+b+-d*2+",0 ";this._setPath(s,R)},_setPath:function(s,u){s._path.setAttribute("d",u)},_bringToFront:function(s){Rr(s._path)},_bringToBack:function(s){cs(s._path)}});jt.vml&&gs.include(Oo);function Zs(s){return jt.svg||jt.vml?new gs(s):null}_e.include({getRenderer:function(s){var u=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var u=this._paneRenderers[s];return u===void 0&&(u=this._createRenderer({pane:s}),this._paneRenderers[s]=u),u},_createRenderer:function(s){return this.options.preferCanvas&&ka(s)||Zs(s)}});var ch=Io.extend({initialize:function(s,u){Io.prototype.initialize.call(this,this._boundsToLatLngs(s),u)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Et(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function ji(s,u){return new ch(s,u)}gs.create=Va,gs.pointsToPath=xn,Vi.geometryToLayer=Ma,Vi.coordsToLatLng=_l,Vi.coordsToLatLngs=Oa,Vi.latLngToCoords=Da,Vi.latLngsToCoords=yl,Vi.getFeature=hr,Vi.asFeature=Co,_e.mergeOptions({boxZoom:!0});var bl=wi.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Kt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Oe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){je(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Kn(),Vs(),this._startPoint=this._map.mouseEventToContainerPoint(s),Kt(document,{contextmenu:Xn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ee("div","leaflet-zoom-box",this._container),de(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var u=new lt(this._point,this._startPoint),d=u.getSize();se(this._box,u.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(je(this._box),qe(this._container,"leaflet-crosshair")),or(),Sa(),Oe(document,{contextmenu:Xn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var u=new st(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});_e.addInitHook("addHandler","boxZoom",bl),_e.mergeOptions({doubleClickZoom:!0});var Lr=wi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var u=this._map,d=u.getZoom(),_=u.options.zoomDelta,b=s.originalEvent.shiftKey?d-_:d+_;u.options.doubleClickZoom==="center"?u.setZoom(b):u.setZoomAround(s.containerPoint,b)}});_e.addInitHook("addHandler","doubleClickZoom",Lr),_e.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Cu=wi.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new cr(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}de(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){qe(this._map._container,"leaflet-grab"),qe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=Et(this._map.options.maxBounds);this._offsetLimit=bt(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var u=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(u),this._prunePositions(u)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,u){return s-(s-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;s.x<u.min.x&&(s.x=this._viscousLimit(s.x,u.min.x)),s.y<u.min.y&&(s.y=this._viscousLimit(s.y,u.min.y)),s.x>u.max.x&&(s.x=this._viscousLimit(s.x,u.max.x)),s.y>u.max.y&&(s.y=this._viscousLimit(s.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,u=Math.round(s/2),d=this._initialWorldOffset,_=this._draggable._newPos.x,b=(_-u+d)%s+u-d,R=(_+u+d)%s-u-d,z=Math.abs(b+d)<Math.abs(R+d)?b:R;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=z},_onDragEnd:function(s){var u=this._map,d=u.options,_=!d.inertia||s.noInertia||this._times.length<2;if(u.fire("dragend",s),_)u.fire("moveend");else{this._prunePositions(+new Date);var b=this._lastPos.subtract(this._positions[0]),R=(this._lastTime-this._times[0])/1e3,z=d.easeLinearity,X=b.multiplyBy(z/R),rt=X.distanceTo([0,0]),vt=Math.min(d.inertiaMaxSpeed,rt),Dt=X.multiplyBy(vt/rt),zt=vt/(d.inertiaDeceleration*z),Ht=Dt.multiplyBy(-zt/2).round();!Ht.x&&!Ht.y?u.fire("moveend"):(Ht=u._limitOffset(Ht,u.options.maxBounds),B(function(){u.panBy(Ht,{duration:zt,easeLinearity:z,noMoveStart:!0,animate:!0})}))}}});_e.addInitHook("addHandler","dragging",Cu),_e.mergeOptions({keyboard:!0,keyboardPanDelta:80});var za=wi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Kt(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Oe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,u=document.documentElement,d=s.scrollTop||u.scrollTop,_=s.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(_,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var u=this._panKeys={},d=this.keyCodes,_,b;for(_=0,b=d.left.length;_<b;_++)u[d.left[_]]=[-1*s,0];for(_=0,b=d.right.length;_<b;_++)u[d.right[_]]=[s,0];for(_=0,b=d.down.length;_<b;_++)u[d.down[_]]=[0,s];for(_=0,b=d.up.length;_<b;_++)u[d.up[_]]=[0,-1*s]},_setZoomDelta:function(s){var u=this._zoomKeys={},d=this.keyCodes,_,b;for(_=0,b=d.zoomIn.length;_<b;_++)u[d.zoomIn[_]]=s;for(_=0,b=d.zoomOut.length;_<b;_++)u[d.zoomOut[_]]=-s},_addHooks:function(){Kt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Oe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var u=s.keyCode,d=this._map,_;if(u in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(_=this._panKeys[u],s.shiftKey&&(_=D(_).multiplyBy(3)),d.options.maxBounds&&(_=d._limitOffset(D(_),d.options.maxBounds)),d.options.worldCopyJump){var b=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(_)));d.panTo(b)}else d.panBy(_)}else if(u in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Xn(s)}}});_e.addInitHook("addHandler","keyboard",za),_e.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var _s=wi.extend({addHooks:function(){Kt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Oe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var u=zs(s),d=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var _=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),_),Xn(s)},_performZoom:function(){var s=this._map,u=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),b=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,R=d?Math.ceil(b/d)*d:b,z=s._limitZoom(u+(this._delta>0?R:-R))-u;this._delta=0,this._startTime=null,z&&(s.options.scrollWheelZoom==="center"?s.setZoom(u+z):s.setZoomAround(this._lastMousePos,u+z))}});_e.addInitHook("addHandler","scrollWheelZoom",_s);var Pu=600;_e.mergeOptions({tapHold:jt.touchNative&&jt.safari&&jt.mobile,tapTolerance:15});var wl=wi.extend({addHooks:function(){Kt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Oe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var u=s.touches[0];this._startPos=this._newPos=new yt(u.clientX,u.clientY),this._holdTimeout=setTimeout(p(function(){this._cancel(),this._isTapValid()&&(Kt(document,"touchend",Ze),Kt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),Pu),Kt(document,"touchend touchcancel contextmenu",this._cancel,this),Kt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Oe(document,"touchend",Ze),Oe(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Oe(document,"touchend touchcancel contextmenu",this._cancel,this),Oe(document,"touchmove",this._onMove,this)},_onMove:function(s){var u=s.touches[0];this._newPos=new yt(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,u){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});d._simulated=!0,u.target.dispatchEvent(d)}});_e.addInitHook("addHandler","tapHold",wl),_e.mergeOptions({touchZoom:jt.touch,bounceAtZoomLimits:!0});var Ws=wi.extend({addHooks:function(){de(this._map._container,"leaflet-touch-zoom"),Kt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){qe(this._map._container,"leaflet-touch-zoom"),Oe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var u=this._map;if(!(!s.touches||s.touches.length!==2||u._animatingZoom||this._zooming)){var d=u.mouseEventToContainerPoint(s.touches[0]),_=u.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(d.add(_)._divideBy(2))),this._startDist=d.distanceTo(_),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),Kt(document,"touchmove",this._onTouchMove,this),Kt(document,"touchend touchcancel",this._onTouchEnd,this),Ze(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var u=this._map,d=u.mouseEventToContainerPoint(s.touches[0]),_=u.mouseEventToContainerPoint(s.touches[1]),b=d.distanceTo(_)/this._startDist;if(this._zoom=u.getScaleZoom(b,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&b<1||this._zoom>u.getMaxZoom()&&b>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,b===1)return}else{var R=d._add(_)._divideBy(2)._subtract(this._centerPoint);if(b===1&&R.x===0&&R.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(R),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),H(this._animRequest);var z=p(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=B(z,this,!0),Ze(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,H(this._animRequest),Oe(document,"touchmove",this._onTouchMove,this),Oe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});_e.addInitHook("addHandler","touchZoom",Ws),_e.BoxZoom=bl,_e.DoubleClickZoom=Lr,_e.Drag=Cu,_e.Keyboard=za,_e.ScrollWheelZoom=_s,_e.TapHold=wl,_e.TouchZoom=Ws,n.Bounds=lt,n.Browser=jt,n.CRS=ge,n.Canvas=Na,n.Circle=xu,n.CircleMarker=Pa,n.Class=ce,n.Control=Gn,n.DivIcon=Iu,n.DivOverlay=fr,n.DomEvent=hl,n.DomUtil=Aa,n.Draggable=cr,n.Evented=St,n.FeatureGroup=Je,n.GeoJSON=Vi,n.GridLayer=qs,n.Handler=wi,n.Icon=Or,n.ImageOverlay=Dr,n.LatLng=xt,n.LatLngBounds=st,n.Layer=Be,n.LayerGroup=ln,n.LineUtil=C,n.Map=_e,n.Marker=Ro,n.Mixin=js,n.Path=Kr,n.Point=yt,n.PolyUtil=wo,n.Polygon=Io,n.Polyline=Xr,n.Popup=La,n.PosAnimation=Us,n.Projection=It,n.Rectangle=ch,n.Renderer=mr,n.SVG=gs,n.SVGOverlay=ps,n.TileLayer=Fs,n.Tooltip=El,n.Transformation=Xe,n.Util=N,n.VideoOverlay=Tl,n.bind=p,n.bounds=bt,n.canvas=ka,n.circle=Td,n.circleMarker=sh,n.control=$n,n.divIcon=uh,n.extend=l,n.featureGroup=Mr,n.geoJSON=vl,n.geoJson=oh,n.gridLayer=dr,n.icon=gl,n.imageOverlay=Po,n.latLng=At,n.latLngBounds=Et,n.layerGroup=Qr,n.map=Cr,n.marker=Au,n.point=D,n.polygon=ki,n.polyline=Ed,n.popup=bd,n.rectangle=ji,n.setOptions=nt,n.stamp=v,n.svg=Zs,n.svgOverlay=lh,n.tileLayer=zi,n.tooltip=wd,n.transformation=le,n.version=o,n.videoOverlay=ah;var Do=window.L;n.noConflict=function(){return window.L=Do,this},window.L=n}))})(fc,fc.exports)),fc.exports}var fu=W1();const so=xT(fu);function Wf(r,t,n){return Object.freeze({instance:r,context:t,container:n})}function Yf(r,t){return t==null?function(o,l){const h=Z.useRef(void 0);return h.current||(h.current=r(o,l)),h}:function(o,l){const h=Z.useRef(void 0);h.current||(h.current=r(o,l));const p=Z.useRef(o),{instance:y}=h.current;return Z.useEffect(function(){p.current!==o&&(t(y,o,p.current),p.current=o)},[y,o,t]),h}}function MT(r,t){Z.useEffect(function(){return(t.layerContainer??t.map).addLayer(r.instance),function(){t.layerContainer?.removeLayer(r.instance),t.map.removeLayer(r.instance)}},[t,r])}function OT(r){return function(n){const o=Gf(),l=r(Zf(n,o),o);return IT(o.map,n.attribution),Hp(l.current,n.eventHandlers),MT(l.current,o),l}}function Y1(r,t){const n=Z.useRef(void 0);Z.useEffect(function(){if(t.pathOptions!==n.current){const l=t.pathOptions??{};r.instance.setStyle(l),n.current=l}},[r,t])}function Q1(r){return function(n){const o=Gf(),l=r(Zf(n,o),o);return Hp(l.current,n.eventHandlers),MT(l.current,o),Y1(l.current,n),l}}function K1(r,t){const n=Yf(r,t),o=OT(n);return PT(o)}function X1(r,t){const n=Yf(r),o=G1(n,t);return q1(o)}function $1(r,t){const n=Yf(r,t),o=Q1(n);return PT(o)}function J1(r,t){const n=Yf(r,t),o=OT(n);return F1(o)}function tS(r,t,n){const{opacity:o,zIndex:l}=t;o!=null&&o!==n.opacity&&r.setOpacity(o),l!=null&&l!==n.zIndex&&r.setZIndex(l)}function Hc(){return Gf().map}function qp(r){const t=Hc();return Z.useEffect(function(){return t.on(r),function(){t.off(r)}},[t,r]),t}function eS({bounds:r,boundsOptions:t,center:n,children:o,className:l,id:h,placeholder:p,style:y,whenReady:v,zoom:E,...x},P){const[M]=Z.useState({className:l,id:h,style:y}),[q,Q]=Z.useState(null),nt=Z.useRef(void 0);Z.useImperativeHandle(P,()=>q?.map??null,[q]);const at=Z.useCallback(ut=>{if(ut!==null&&!nt.current){const _t=new fu.Map(ut,x);nt.current=_t,n!=null&&E!=null?_t.setView(n,E):r!=null&&_t.fitBounds(r,t),v!=null&&_t.whenReady(v),Q(H1(_t))}},[]);Z.useEffect(()=>()=>{q?.map.remove()},[q]);const Tt=q?dp.createElement(Bp,{value:q},o):p??null;return dp.createElement("div",{...M,ref:at},Tt)}const xc=Z.forwardRef(eS),ns=K1(function({position:t,...n},o){const l=new fu.Marker(t,n);return Wf(l,CT(o,{overlayContainer:l}))},function(t,n,o){n.position!==o.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==o.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==o.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==o.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==o.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),nS=$1(function({positions:t,...n},o){const l=new fu.Polyline(t,n);return Wf(l,CT(o,{overlayContainer:l}))},function(t,n,o){n.positions!==o.positions&&t.setLatLngs(n.positions)}),Rc=J1(function({url:t,...n},o){const l=new fu.TileLayer(t,Zf(n,o));return Wf(l,o)},function(t,n,o){tS(t,n,o);const{url:l}=n;l!=null&&l!==o.url&&t.setUrl(l)}),Ic=X1(function(t,n){const o=new fu.Tooltip(t,n.overlayContainer);return Wf(o,n)},function(t,n,{position:o},l){Z.useEffect(function(){const p=n.overlayContainer;if(p==null)return;const{instance:y}=t,v=x=>{x.tooltip===y&&(o!=null&&y.setLatLng(o),y.update(),l(!0))},E=x=>{x.tooltip===y&&l(!1)};return p.on({tooltipopen:v,tooltipclose:E}),p.bindTooltip(y),function(){p.off({tooltipopen:v,tooltipclose:E}),p._map!=null&&p.unbindTooltip()}},[t,n,l,o])}),qv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",Fp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";delete so.Icon.Default.prototype._getIconUrl;so.Icon.Default.mergeOptions({iconRetinaUrl:qv,iconUrl:qv,shadowUrl:Fp});const Gp=so.icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:Fp,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]}),iS=so.icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png",shadowUrl:Fp,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});function Cc(){const r=Hc();return Z.useEffect(()=>{const t=()=>{try{r.invalidateSize()}catch{}};t();const n=setTimeout(t,0),o=setTimeout(t,250),l=()=>t();window.addEventListener("resize",l);const h=r.getContainer(),p=h?.parentElement,y=new ResizeObserver(()=>t());h&&y.observe(h),p&&y.observe(p);const v=so.latLngBounds(so.latLng(-90,-180),so.latLng(90,180)),E=()=>{try{const x=r.getBoundsZoom(v,!0),P=Math.max(0,x);r.setMinZoom(P),r.getZoom()<P&&r.setZoom(P)}catch{}};return E(),r.on("load",()=>{t(),E()}),()=>{clearTimeout(n),clearTimeout(o),window.removeEventListener("resize",l),r.off("load");try{y.disconnect()}catch{}}},[r]),null}function rS(r,t){const n=r>=0?"N":"S",o=t>=0?"E":"W",l=Math.abs(r).toFixed(1),h=Math.abs(t).toFixed(1);return`${l}°${n}, ${h}°${o}`}function sS(r,t,n,o){const h=E=>E*Math.PI/180,p=h(n-r),y=h(o-t),v=Math.sin(p/2)**2+Math.cos(h(r))*Math.cos(h(n))*Math.sin(y/2)**2;return 6371*2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v))}function Fv(r){return r==null||isNaN(r)?"":r<1?`${Math.round(r*1e3).toLocaleString()} m`:`${Math.round(r).toLocaleString()} km`}function oS(r,t=14916.862){if(r<=100)return 5e3;const n=5e3*Math.exp(-4*r/t);return Math.min(5e3,Math.max(0,Math.round(n)))}function aS({onBack:r}){const[t,n]=Z.useState(null),[o,l]=Z.useState([]),[h,p]=Z.useState(null),[y,v]=Z.useState(null),[E,x]=Z.useState(null),[P,M]=Z.useState(null),[q,Q]=Z.useState(!1),[nt,at]=Z.useState(1),[Tt,ut]=Z.useState(0),[_t,Bt]=Z.useState(!1),[Ct,kt]=Z.useState(0),[V,O]=Z.useState(new Set),[k,j]=Z.useState(new Set),[B,H]=Z.useState([]),N=5;Z.useEffect(()=>{t&&!q&&(v(null),x(null),M(null))},[t,q]),Z.useEffect(()=>{if(q&&nt===N){let st;const xt=performance.now(),At=0,ge=Tt,Zt=Ue=>1-Math.pow(1-Ue,3),ze=Ue=>{const Xe=Math.min(1,(Ue-xt)/900),le=Zt(Xe),en=Math.round(At+(ge-At)*le);kt(en),Xe<1&&(st=requestAnimationFrame(ze))};return st=requestAnimationFrame(ze),()=>cancelAnimationFrame(st)}},[q,nt,Tt]);function ce(st){return st>=24e3?"👑 Mister Birder":st>=21e3?"🦅 Ornithology Legend":st>=18e3?"🦉 Master Ornithologist":st>=15e3?"🦆 Experto Observador":st>=12e3?"🦜 Explorador de Aves":st>=9e3?"🦩 Aprendiz con Talento":st>=6e3?"🐥 Observador Amateur":st>=3e3?"🐦 Novice Adventurer":"🐣 Adventurer in Training"}const pe=[{name:"North America",bbox:[-170,5,-50,75],weight:.5},{name:"South America",bbox:[-82,-56,-34,12],weight:1},{name:"Europe",bbox:[-31,34,45,72],weight:.5},{name:"Africa",bbox:[-20,-35,52,37],weight:1},{name:"Asia",bbox:[25,-10,180,55],weight:1},{name:"Oceania",bbox:[110,-50,180,0],weight:.5}];function W(){const st=pe.reduce((xt,At)=>xt+At.weight,0);let Et=Math.random()*st;for(const xt of pe)if(Et-=xt.weight,Et<=0)return xt;return pe[pe.length-1]}async function St(){if(_t)return;Bt(!0),v(null),x(null),M(null),Q(!1);const st=15;let Et=0;for(;Et<st;){Et++;try{const xt=W(),[At,ge,Zt,ze]=xt.bbox,Xe=`https://api.inaturalist.org/v1/observations?photos=true&quality_grade=research&order=desc&per_page=100&geo=true&geoprivacy=open&page=${Math.floor(Math.random()*200)}&swlat=${ge}&swlng=${At}&nelat=${ze}&nelng=${Zt}&taxon_id=3&captive=false`,le=await fetch(Xe);if(le.status===429){console.log("💤 Request limit, waiting 500ms..."),await new Promise(Me=>setTimeout(Me,500));continue}const en=await le.json();if(!en.results||en.results.length===0)continue;const Un=en.results.filter(Me=>Me.photos&&Me.photos.length&&Me.geojson?.coordinates&&Me.geojson.type==="Point");if(Un.length===0)continue;const jn=Un[Math.floor(Math.random()*Un.length)],xn=jn.geojson.coordinates[1],nn=jn.geojson.coordinates[0],yi=rS(xn,nn),Qn=`https://api.inaturalist.org/v1/observations?photos=true&quality_grade=research&order=desc&per_page=100&geo=true&geoprivacy=open&coordinates_obscured=false&lat=${xn}&lng=${nn}&radius=50&taxon_id=3&captive=false`,si=await fetch(Qn);if(si.status===429){console.log("💤 Cluster request limit, waiting 500ms..."),await new Promise(Me=>setTimeout(Me,500));continue}const rn=await si.json();if(!rn.results||rn.results.length<8)continue;const oi=rn.results.filter(Me=>Me.photos&&Me.photos.length&&Me.geojson?.coordinates&&Me.geojson.type==="Point");if(oi.length>=8){const Me=new Map;oi.forEach(he=>{const G=he.taxon?.preferred_common_name||he.taxon?.name||"Unknown";Me.has(G)||Me.set(G,he)});let Oi;Me.size>=8?Oi=[...Array.from(Me.values())].sort(()=>Math.random()-.5).slice(0,8):Oi=[...oi].sort(()=>Math.random()-.5).slice(0,8);const Fi=Oi.map(he=>({id:he.id,photo:he.photos[0].url.replace("square","large"),lat:he.geojson.coordinates[1],lon:he.geojson.coordinates[0],species:he.taxon?.preferred_common_name||he.taxon?.name,taxon_id:he.taxon?.id,hotspot:yi}));l(Fi),requestAnimationFrame(()=>{Fi[0]&&n(Fi[0])}),Bt(!1);return}await new Promise(Me=>setTimeout(Me,200))}catch(xt){console.error(`Error en intento ${Et}:`,xt),await new Promise(At=>setTimeout(At,500))}}console.error("❌ No valid cluster found after several attempts"),Bt(!1)}function yt(){return qp({click(st){q||v(st.latlng)}}),null}function ie(){const st=Hc();return Z.useEffect(()=>{if(!q||!y||!t)return;const Et=so.latLngBounds([y.lat,y.lng],[t.lat,t.lon]),xt=Number(E)||0,At=xt<=50?10:xt<=200?8:xt<=1e3?6:xt<=3e3?5:4;st.flyToBounds(Et,{padding:[60,60],maxZoom:At,duration:.8})},[q,y,t,E,st]),null}function D(){if(t&&y){const st=sS(t.lat,t.lon,y.lat,y.lng);x(st);const Et=oS(st);M(Et),ut(xt=>xt+Et),Q(!0)}}function lt(){nt<N&&!_t&&(l([]),n(null),v(null),x(null),M(null),Q(!1),at(st=>st+1),St())}function bt(){_t||(at(1),ut(0),v(null),x(null),M(null),Q(!1),n(null),l([]),O(new Set),j(new Set),H([]),St())}return A.jsxs("div",{className:"container-narrow",style:{padding:"1rem",textAlign:"center"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[A.jsx("button",{onClick:r||(()=>window.history.back()),style:{padding:"0.5rem 1rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:"← Back"}),A.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold",margin:0},children:"Birders Place"}),A.jsx("div",{style:{width:"80px"}})," "]}),A.jsx("button",{onClick:o.length===0?St:bt,disabled:_t,style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:_t?"#95a5a6":"#3498db",color:"white",border:"none",borderRadius:"8px",cursor:_t?"not-allowed":"pointer"},children:_t?"Loading...":o.length===0?"Load Observation":"Restart"}),o.length>0&&A.jsxs("div",{style:{marginTop:"1rem"},children:[A.jsx("div",{className:"gallery",children:o.map(st=>A.jsxs("div",{className:`gallery-item ${t?.id===st.id?"active":""}`,onClick:()=>{n(st),p(st.photo)},children:[A.jsx("img",{src:st.photo}),q&&A.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0, 0, 0, 0.8)",color:"#fff",padding:"4px 6px",fontSize:"11px",fontWeight:"600",textAlign:"center",borderRadius:"0 0 8px 8px",backdropFilter:"blur(4px)",cursor:"pointer",transition:"background-color 0.2s ease"},onClick:Et=>{Et.stopPropagation();const xt=st.taxon_id||"3";window.open(`https://www.inaturalist.org/observations?subview=map&taxon_id=${xt}&view=map`,"_blank")},onMouseEnter:Et=>{Et.target.style.backgroundColor="rgba(0, 0, 0, 0.9)"},onMouseLeave:Et=>{Et.target.style.backgroundColor="rgba(0, 0, 0, 0.8)"},children:st.species})]},st.id))}),A.jsx("div",{className:"map-wrapper",children:A.jsxs(xc,{center:[20,0],zoom:2,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,style:{height:"100%",width:"100%"},children:[A.jsx(Rc,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OSM</a> © <a href="https://carto.com/">CARTO</a>',noWrap:!0}),A.jsx(Cc,{}),A.jsx(yt,{}),y&&A.jsx(ns,{position:[y.lat,y.lng],icon:iS}),q&&A.jsxs(A.Fragment,{children:[A.jsx(ie,{}),A.jsx(ns,{position:[t.lat,t.lon],icon:Gp}),y&&A.jsx(nS,{positions:[[y.lat,y.lng],[t.lat,t.lon]],pathOptions:{color:"#2ecc71",weight:3}}),y&&A.jsx(ns,{position:[(y.lat+t.lat)/2,(y.lng+t.lon)/2],icon:so.divIcon({className:"no-icon",html:"",iconSize:[0,0]}),children:A.jsx(Ic,{permanent:!0,direction:"top",offset:[0,-4],className:"distance-tooltip",children:Fv(Number(E))})})]})]})}),!q&&A.jsx("button",{onClick:D,style:{marginTop:"18px",padding:"0.6rem 1.2rem",backgroundColor:"#27ae60",color:"white",border:"none",borderRadius:"10px",cursor:"pointer"},children:"Verify"}),h&&A.jsxs("div",{className:"lightbox-backdrop",onClick:()=>p(null),children:[A.jsx("button",{className:"lightbox-close",onClick:()=>p(null),children:"Cerrar"}),A.jsx("img",{className:"lightbox-img",src:h,alt:"Foto"})]}),q&&A.jsxs("div",{className:"result-panel",children:[A.jsxs("h3",{style:{margin:0},children:["Round ",nt," / ",N]}),A.jsx("div",{style:{marginTop:6,fontSize:"22px",fontWeight:"bold",color:"#f1c40f"},children:`${Number(P).toLocaleString()} points`}),A.jsx("div",{className:"result-bar",title:"Closer → more points",style:{marginTop:8},children:A.jsx("span",{style:{width:`${Math.min(100,P/5e3*100)}%`}})}),A.jsxs("div",{style:{marginTop:10,color:"#ecf0f1"},children:["What you guessed was at",A.jsx("span",{style:{fontWeight:"bold",margin:"0 6px",padding:"2px 6px",background:"#2c3e50",borderRadius:"6px",color:"#f9f9f9"},children:Fv(Number(E)).toUpperCase()}),"from the correct location."]}),A.jsxs("div",{style:{marginTop:8},children:["Total score: ",A.jsx("span",{style:{fontWeight:"bold"},children:Number(Tt).toLocaleString()})]}),nt<N?A.jsx("button",{onClick:lt,disabled:_t,style:{marginTop:"12px",padding:"0.6rem 1.2rem",backgroundColor:_t?"#95a5a6":"#8e44ad",color:"white",border:"none",borderRadius:"10px",cursor:_t?"not-allowed":"pointer"},children:_t?"Loading...":"Next round"}):A.jsxs("div",{style:{marginTop:"16px",padding:"14px 12px",background:"#111827",borderRadius:"12px",border:"1px solid #1f2937",color:"#ecf0f1"},children:[A.jsx("div",{style:{fontSize:"18px",opacity:.9,marginBottom:6},children:"¡Juego terminado!"}),A.jsxs("div",{style:{fontSize:"32px",fontWeight:"800",background:"linear-gradient(90deg,#f59e0b,#fbbf24)",WebkitBackgroundClip:"text",color:"transparent"},children:[Ct.toLocaleString()," points"]}),A.jsx("div",{style:{marginTop:6,fontWeight:"600"},children:ce(Tt)}),A.jsx("button",{onClick:bt,style:{marginTop:"14px",padding:"0.7rem 1.2rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",boxShadow:"0 6px 14px rgba(239,68,68,0.25)"},children:"Jugar de nuevo"})]})]})]}),A.jsxs("div",{style:{position:"fixed",bottom:10,right:10,fontSize:"10px",color:"#666",background:"rgba(255,255,255,0.9)",padding:"4px 8px",borderRadius:"4px",zIndex:1e3},children:["Images: ",A.jsx("a",{href:"https://inaturalist.org",target:"_blank",rel:"noopener noreferrer",style:{color:"#10b981"},children:"iNaturalist"})]})]})}const lS=()=>{};var Gv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=function(r){const t=[];let n=0;for(let o=0;o<r.length;o++){let l=r.charCodeAt(o);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&o+1<r.length&&(r.charCodeAt(o+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++o)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},uS=function(r){const t=[];let n=0,o=0;for(;n<r.length;){const l=r[n++];if(l<128)t[o++]=String.fromCharCode(l);else if(l>191&&l<224){const h=r[n++];t[o++]=String.fromCharCode((l&31)<<6|h&63)}else if(l>239&&l<365){const h=r[n++],p=r[n++],y=r[n++],v=((l&7)<<18|(h&63)<<12|(p&63)<<6|y&63)-65536;t[o++]=String.fromCharCode(55296+(v>>10)),t[o++]=String.fromCharCode(56320+(v&1023))}else{const h=r[n++],p=r[n++];t[o++]=String.fromCharCode((l&15)<<12|(h&63)<<6|p&63)}}return t.join("")},LT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let l=0;l<r.length;l+=3){const h=r[l],p=l+1<r.length,y=p?r[l+1]:0,v=l+2<r.length,E=v?r[l+2]:0,x=h>>2,P=(h&3)<<4|y>>4;let M=(y&15)<<2|E>>6,q=E&63;v||(q=64,p||(M=64)),o.push(n[x],n[P],n[M],n[q])}return o.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(DT(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):uS(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let l=0;l<r.length;){const h=n[r.charAt(l++)],y=l<r.length?n[r.charAt(l)]:0;++l;const E=l<r.length?n[r.charAt(l)]:64;++l;const P=l<r.length?n[r.charAt(l)]:64;if(++l,h==null||y==null||E==null||P==null)throw new cS;const M=h<<2|y>>4;if(o.push(M),E!==64){const q=y<<4&240|E>>2;if(o.push(q),P!==64){const Q=E<<6&192|P;o.push(Q)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class cS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hS=function(r){const t=DT(r);return LT.encodeByteArray(t,!0)},Sf=function(r){return hS(r).replace(/\./g,"")},NT=function(r){try{return LT.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=()=>fS().__FIREBASE_DEFAULTS__,mS=()=>{if(typeof process>"u"||typeof Gv>"u")return;const r=Gv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},pS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&NT(r[1]);return t&&JSON.parse(t)},Qf=()=>{try{return lS()||dS()||mS()||pS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},kT=r=>Qf()?.emulatorHosts?.[r],gS=r=>{const t=kT(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const o=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),o]:[t.substring(0,n),o]},VT=()=>Qf()?.config,zT=r=>Qf()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function UT(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=t||"demo-project",l=r.iat||0,h=r.sub||r.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${o}`,aud:o,iat:l,exp:l+3600,auth_time:l,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Sf(JSON.stringify(n)),Sf(JSON.stringify(p)),""].join(".")}const vc={};function vS(){const r={prod:[],emulator:[]};for(const t of Object.keys(vc))vc[t]?r.emulator.push(t):r.prod.push(t);return r}function TS(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let Zv=!1;function jT(r,t){if(typeof window>"u"||typeof document>"u"||!du(window.location.host)||vc[r]===t||vc[r]||Zv)return;vc[r]=t;function n(M){return`__firebase__banner__${M}`}const o="__firebase__banner",h=vS().prod.length>0;function p(){const M=document.getElementById(o);M&&M.remove()}function y(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function v(M,q){M.setAttribute("width","24"),M.setAttribute("id",q),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function E(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{Zv=!0,p()},M}function x(M,q){M.setAttribute("id",q),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function P(){const M=TS(o),q=n("text"),Q=document.getElementById(q)||document.createElement("span"),nt=n("learnmore"),at=document.getElementById(nt)||document.createElement("a"),Tt=n("preprendIcon"),ut=document.getElementById(Tt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const _t=M.element;y(_t),x(at,nt);const Bt=E();v(ut,Tt),_t.append(ut,Q,at,Bt),document.body.appendChild(_t)}h?(Q.innerText="Preview backend disconnected.",ut.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ut.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",P):P()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ES(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mi())}function bS(){const r=Qf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function AS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xS(){const r=Mi();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function RS(){return!bS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IS(){try{return typeof indexedDB=="object"}catch{return!1}}function CS(){return new Promise((r,t)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(o);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(o),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="FirebaseError";class ho extends Error{constructor(t,n,o){super(n),this.code=t,this.customData=o,this.name=PS,Object.setPrototypeOf(this,ho.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qc.prototype.create)}}class qc{constructor(t,n,o){this.service=t,this.serviceName=n,this.errors=o}create(t,...n){const o=n[0]||{},l=`${this.service}/${t}`,h=this.errors[t],p=h?MS(h,o):"Error",y=`${this.serviceName}: ${p} (${l}).`;return new ho(l,y,o)}}function MS(r,t){return r.replace(OS,(n,o)=>{const l=t[o];return l!=null?String(l):`<${o}?>`})}const OS=/\{\$([^}]+)}/g;function DS(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function tl(r,t){if(r===t)return!0;const n=Object.keys(r),o=Object.keys(t);for(const l of n){if(!o.includes(l))return!1;const h=r[l],p=t[l];if(Wv(h)&&Wv(p)){if(!tl(h,p))return!1}else if(h!==p)return!1}for(const l of o)if(!n.includes(l))return!1;return!0}function Wv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(r){const t=[];for(const[n,o]of Object.entries(r))Array.isArray(o)?o.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(o));return t.length?"&"+t.join("&"):""}function dc(r){const t={};return r.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[l,h]=o.split("=");t[decodeURIComponent(l)]=decodeURIComponent(h)}}),t}function mc(r){const t=r.indexOf("?");if(!t)return"";const n=r.indexOf("#",t);return r.substring(t,n>0?n:void 0)}function LS(r,t){const n=new NS(r,t);return n.subscribe.bind(n)}class NS{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(o=>{this.error(o)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,o){let l;if(t===void 0&&n===void 0&&o===void 0)throw new Error("Missing Observer.");kS(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:o},l.next===void 0&&(l.next=np),l.error===void 0&&(l.error=np),l.complete===void 0&&(l.complete=np);const h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),h}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kS(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function np(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(r){return r&&r._delegate?r._delegate:r}class el{constructor(t,n,o){this.name=t,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const o=new _S;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&o.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),o=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(US(t))try{this.getOrInitializeService({instanceIdentifier:Ka})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const h=this.getOrInitializeService({instanceIdentifier:l});o.resolve(h)}catch{}}}}clearInstance(t=Ka){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ka){return this.instances.has(t)}getOptions(t=Ka){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[h,p]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(h);o===y&&p.resolve(l)}return l}onInit(t,n){const o=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(o)??new Set;l.add(t),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&t(h,o),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const o=this.onInitCallbacks.get(n);if(o)for(const l of o)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let o=this.instances.get(t);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:zS(t),options:n}),this.instances.set(t,o),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(o,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,o)}catch{}return o||null}normalizeInstanceIdentifier(t=Ka){return this.component?this.component.multipleInstances?t:Ka:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zS(r){return r===Ka?void 0:r}function US(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new VS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ie||(Ie={}));const BS={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},HS=Ie.INFO,qS={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},FS=(r,t,...n)=>{if(t<r.logLevel)return;const o=new Date().toISOString(),l=qS[t];if(l)console[l](`[${o}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Zp{constructor(t){this.name=t,this._logLevel=HS,this._logHandler=FS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ie))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?BS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...t),this._logHandler(this,Ie.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...t),this._logHandler(this,Ie.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...t),this._logHandler(this,Ie.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...t),this._logHandler(this,Ie.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...t),this._logHandler(this,Ie.ERROR,...t)}}const GS=(r,t)=>t.some(n=>r instanceof n);let Yv,Qv;function ZS(){return Yv||(Yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WS(){return Qv||(Qv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const BT=new WeakMap,mp=new WeakMap,HT=new WeakMap,ip=new WeakMap,Wp=new WeakMap;function YS(r){const t=new Promise((n,o)=>{const l=()=>{r.removeEventListener("success",h),r.removeEventListener("error",p)},h=()=>{n(aa(r.result)),l()},p=()=>{o(r.error),l()};r.addEventListener("success",h),r.addEventListener("error",p)});return t.then(n=>{n instanceof IDBCursor&&BT.set(n,r)}).catch(()=>{}),Wp.set(t,r),t}function QS(r){if(mp.has(r))return;const t=new Promise((n,o)=>{const l=()=>{r.removeEventListener("complete",h),r.removeEventListener("error",p),r.removeEventListener("abort",p)},h=()=>{n(),l()},p=()=>{o(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",h),r.addEventListener("error",p),r.addEventListener("abort",p)});mp.set(r,t)}let pp={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return mp.get(r);if(t==="objectStoreNames")return r.objectStoreNames||HT.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return aa(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function KS(r){pp=r(pp)}function XS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const o=r.call(rp(this),t,...n);return HT.set(o,t.sort?t.sort():[t]),aa(o)}:WS().includes(r)?function(...t){return r.apply(rp(this),t),aa(BT.get(this))}:function(...t){return aa(r.apply(rp(this),t))}}function $S(r){return typeof r=="function"?XS(r):(r instanceof IDBTransaction&&QS(r),GS(r,ZS())?new Proxy(r,pp):r)}function aa(r){if(r instanceof IDBRequest)return YS(r);if(ip.has(r))return ip.get(r);const t=$S(r);return t!==r&&(ip.set(r,t),Wp.set(t,r)),t}const rp=r=>Wp.get(r);function JS(r,t,{blocked:n,upgrade:o,blocking:l,terminated:h}={}){const p=indexedDB.open(r,t),y=aa(p);return o&&p.addEventListener("upgradeneeded",v=>{o(aa(p.result),v.oldVersion,v.newVersion,aa(p.transaction),v)}),n&&p.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),y.then(v=>{h&&v.addEventListener("close",()=>h()),l&&v.addEventListener("versionchange",E=>l(E.oldVersion,E.newVersion,E))}).catch(()=>{}),y}const tA=["get","getKey","getAll","getAllKeys","count"],eA=["put","add","delete","clear"],sp=new Map;function Kv(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(sp.get(t))return sp.get(t);const n=t.replace(/FromIndex$/,""),o=t!==n,l=eA.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(l||tA.includes(n)))return;const h=async function(p,...y){const v=this.transaction(p,l?"readwrite":"readonly");let E=v.store;return o&&(E=E.index(y.shift())),(await Promise.all([E[n](...y),l&&v.done]))[0]};return sp.set(t,h),h}KS(r=>({...r,get:(t,n,o)=>Kv(t,n)||r.get(t,n,o),has:(t,n)=>!!Kv(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iA(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function iA(r){return r.getComponent()?.type==="VERSION"}const gp="@firebase/app",Xv="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=new Zp("@firebase/app"),rA="@firebase/app-compat",sA="@firebase/analytics-compat",oA="@firebase/analytics",aA="@firebase/app-check-compat",lA="@firebase/app-check",uA="@firebase/auth",cA="@firebase/auth-compat",hA="@firebase/database",fA="@firebase/data-connect",dA="@firebase/database-compat",mA="@firebase/functions",pA="@firebase/functions-compat",gA="@firebase/installations",_A="@firebase/installations-compat",yA="@firebase/messaging",vA="@firebase/messaging-compat",TA="@firebase/performance",EA="@firebase/performance-compat",bA="@firebase/remote-config",wA="@firebase/remote-config-compat",SA="@firebase/storage",AA="@firebase/storage-compat",xA="@firebase/firestore",RA="@firebase/ai",IA="@firebase/firestore-compat",CA="firebase",PA="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="[DEFAULT]",MA={[gp]:"fire-core",[rA]:"fire-core-compat",[oA]:"fire-analytics",[sA]:"fire-analytics-compat",[lA]:"fire-app-check",[aA]:"fire-app-check-compat",[uA]:"fire-auth",[cA]:"fire-auth-compat",[hA]:"fire-rtdb",[fA]:"fire-data-connect",[dA]:"fire-rtdb-compat",[mA]:"fire-fn",[pA]:"fire-fn-compat",[gA]:"fire-iid",[_A]:"fire-iid-compat",[yA]:"fire-fcm",[vA]:"fire-fcm-compat",[TA]:"fire-perf",[EA]:"fire-perf-compat",[bA]:"fire-rc",[wA]:"fire-rc-compat",[SA]:"fire-gcs",[AA]:"fire-gcs-compat",[xA]:"fire-fst",[IA]:"fire-fst-compat",[RA]:"fire-vertex","fire-js":"fire-js",[CA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new Map,OA=new Map,yp=new Map;function $v(r,t){try{r.container.addComponent(t)}catch(n){oo.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function iu(r){const t=r.name;if(yp.has(t))return oo.debug(`There were multiple attempts to register component ${t}.`),!1;yp.set(t,r);for(const n of Pc.values())$v(n,r);for(const n of OA.values())$v(n,r);return!0}function Yp(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function nr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},la=new qc("app","Firebase",DA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(t,n,o){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new el("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw la.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=PA;function qT(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const o={name:_p,automaticDataCollectionEnabled:!0,...t},l=o.name;if(typeof l!="string"||!l)throw la.create("bad-app-name",{appName:String(l)});if(n||(n=VT()),!n)throw la.create("no-options");const h=Pc.get(l);if(h){if(tl(n,h.options)&&tl(o,h.config))return h;throw la.create("duplicate-app",{appName:l})}const p=new jS(l);for(const v of yp.values())p.addComponent(v);const y=new LA(n,o,p);return Pc.set(l,y),y}function FT(r=_p){const t=Pc.get(r);if(!t&&r===_p&&VT())return qT();if(!t)throw la.create("no-app",{appName:r});return t}function Jv(){return Array.from(Pc.values())}function ua(r,t,n){let o=MA[r]??r;n&&(o+=`-${n}`);const l=o.match(/\s|\//),h=t.match(/\s|\//);if(l||h){const p=[`Unable to register library "${o}" with version "${t}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&p.push("and"),h&&p.push(`version name "${t}" contains illegal characters (whitespace or "/")`),oo.warn(p.join(" "));return}iu(new el(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="firebase-heartbeat-database",kA=1,Mc="firebase-heartbeat-store";let op=null;function GT(){return op||(op=JS(NA,kA,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Mc)}catch(n){console.warn(n)}}}}).catch(r=>{throw la.create("idb-open",{originalErrorMessage:r.message})})),op}async function VA(r){try{const n=(await GT()).transaction(Mc),o=await n.objectStore(Mc).get(ZT(r));return await n.done,o}catch(t){if(t instanceof ho)oo.warn(t.message);else{const n=la.create("idb-get",{originalErrorMessage:t?.message});oo.warn(n.message)}}}async function t0(r,t){try{const o=(await GT()).transaction(Mc,"readwrite");await o.objectStore(Mc).put(t,ZT(r)),await o.done}catch(n){if(n instanceof ho)oo.warn(n.message);else{const o=la.create("idb-set",{originalErrorMessage:n?.message});oo.warn(o.message)}}}function ZT(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=1024,UA=30;class jA{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HA(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=e0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:n}),this._heartbeatsCache.heartbeats.length>UA){const l=qA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){oo.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=e0(),{heartbeatsToSend:n,unsentEntries:o}=BA(this._heartbeatsCache.heartbeats),l=Sf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return oo.warn(t),""}}}function e0(){return new Date().toISOString().substring(0,10)}function BA(r,t=zA){const n=[];let o=r.slice();for(const l of r){const h=n.find(p=>p.agent===l.agent);if(h){if(h.dates.push(l.date),n0(n)>t){h.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),n0(n)>t){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class HA{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IS()?CS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const o=await this.read();return t0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const o=await this.read();return t0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function n0(r){return Sf(JSON.stringify({version:2,heartbeats:r})).length}function qA(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let o=1;o<r.length;o++)r[o].date<n&&(n=r[o].date,t=o);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(r){iu(new el("platform-logger",t=>new nA(t),"PRIVATE")),iu(new el("heartbeat",t=>new jA(t),"PRIVATE")),ua(gp,Xv,r),ua(gp,Xv,"esm2020"),ua("fire-js","")}FA("");var GA="firebase",ZA="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ua(GA,ZA,"app");function WT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WA=WT,YT=new qc("auth","Firebase",WT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new Zp("@firebase/auth");function YA(r,...t){Af.logLevel<=Ie.WARN&&Af.warn(`Auth (${mu}): ${r}`,...t)}function mf(r,...t){Af.logLevel<=Ie.ERROR&&Af.error(`Auth (${mu}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(r,...t){throw Kp(r,...t)}function rs(r,...t){return Kp(r,...t)}function Qp(r,t,n){const o={...WA(),[t]:n};return new qc("auth","Firebase",o).create(t,{appName:r.name})}function As(r){return Qp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function QT(r,t,n){const o=n;if(!(t instanceof o))throw o.name!==t.constructor.name&&Ur(r,"argument-error"),Qp(r,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kp(r,...t){if(typeof r!="string"){const n=t[0],o=[...t.slice(1)];return o[0]&&(o[0].appName=r.name),r._errorFactory.create(n,...o)}return YT.create(r,...t)}function ae(r,t,...n){if(!r)throw Kp(t,...n)}function io(r){const t="INTERNAL ASSERTION FAILED: "+r;throw mf(t),new Error(t)}function ao(r,t){r||io(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(){return typeof self<"u"&&self.location?.href||""}function QA(){return i0()==="http:"||i0()==="https:"}function i0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QA()||SS()||"connection"in navigator)?navigator.onLine:!0}function XA(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(t,n){this.shortDelay=t,this.longDelay=n,ao(n>t,"Short delay should be less than long delay!"),this.isMobile=ES()||AS()}get(){return KA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(r,t){ao(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{static initialize(t,n,o){this.fetchImpl=t,n&&(this.headersImpl=n),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;io("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;io("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;io("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tx=new Gc(3e4,6e4);function va(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function Ta(r,t,n,o,l={}){return XT(r,l,async()=>{let h={},p={};o&&(t==="GET"?p=o:h={body:JSON.stringify(o)});const y=Fc({key:r.config.apiKey,...p}).slice(1),v=await r._getAdditionalHeaders();v["Content-Type"]="application/json",r.languageCode&&(v["X-Firebase-Locale"]=r.languageCode);const E={method:t,headers:v,...h};return wS()||(E.referrerPolicy="no-referrer"),r.emulatorConfig&&du(r.emulatorConfig.host)&&(E.credentials="include"),KT.fetch()(await $T(r,r.config.apiHost,n,y),E)})}async function XT(r,t,n){r._canInitEmulator=!1;const o={...$A,...t};try{const l=new nx(r),h=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const p=await h.json();if("needConfirmation"in p)throw lf(r,"account-exists-with-different-credential",p);if(h.ok&&!("errorMessage"in p))return p;{const y=h.ok?p.errorMessage:p.error.message,[v,E]=y.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw lf(r,"credential-already-in-use",p);if(v==="EMAIL_EXISTS")throw lf(r,"email-already-in-use",p);if(v==="USER_DISABLED")throw lf(r,"user-disabled",p);const x=o[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw Qp(r,x,E);Ur(r,x)}}catch(l){if(l instanceof ho)throw l;Ur(r,"network-request-failed",{message:String(l)})}}async function Zc(r,t,n,o,l={}){const h=await Ta(r,t,n,o,l);return"mfaPendingCredential"in h&&Ur(r,"multi-factor-auth-required",{_serverResponse:h}),h}async function $T(r,t,n,o){const l=`${t}${n}?${o}`,h=r,p=h.config.emulator?Xp(r.config,l):`${r.config.apiScheme}://${l}`;return JA.includes(n)&&(await h._persistenceManagerAvailable,h._getPersistenceType()==="COOKIE")?h._getPersistence()._getFinalTarget(p).toString():p}function ex(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,o)=>{this.timer=setTimeout(()=>o(rs(this.auth,"network-request-failed")),tx.get())})}}function lf(r,t,n){const o={appName:r.name};n.email&&(o.email=n.email),n.phoneNumber&&(o.phoneNumber=n.phoneNumber);const l=rs(r,t,o);return l.customData._tokenResponse=n,l}function r0(r){return r!==void 0&&r.enterprise!==void 0}class ix{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return ex(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rx(r,t){return Ta(r,"GET","/v2/recaptchaConfig",va(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sx(r,t){return Ta(r,"POST","/v1/accounts:delete",t)}async function xf(r,t){return Ta(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function ox(r,t=!1){const n=Mn(r),o=await n.getIdToken(t),l=$p(o);ae(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const h=typeof l.firebase=="object"?l.firebase:void 0,p=h?.sign_in_provider;return{claims:l,token:o,authTime:Tc(ap(l.auth_time)),issuedAtTime:Tc(ap(l.iat)),expirationTime:Tc(ap(l.exp)),signInProvider:p||null,signInSecondFactor:h?.sign_in_second_factor||null}}function ap(r){return Number(r)*1e3}function $p(r){const[t,n,o]=r.split(".");if(t===void 0||n===void 0||o===void 0)return mf("JWT malformed, contained fewer than 3 sections"),null;try{const l=NT(n);return l?JSON.parse(l):(mf("Failed to decode base64 JWT payload"),null)}catch(l){return mf("Caught error parsing JWT payload as JSON",l?.toString()),null}}function s0(r){const t=$p(r);return ae(t,"internal-error"),ae(typeof t.exp<"u","internal-error"),ae(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oc(r,t,n=!1){if(n)return t;try{return await t}catch(o){throw o instanceof ho&&ax(o)&&r.auth.currentUser===r&&await r.auth.signOut(),o}}function ax({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tc(this.lastLoginAt),this.creationTime=Tc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rf(r){const t=r.auth,n=await r.getIdToken(),o=await Oc(r,xf(t,{idToken:n}));ae(o?.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=l.providerUserInfo?.length?JT(l.providerUserInfo):[],p=cx(r.providerData,h),y=r.isAnonymous,v=!(r.email&&l.passwordHash)&&!p?.length,E=y?v:!1,x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new Tp(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,x)}async function ux(r){const t=Mn(r);await Rf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function cx(r,t){return[...r.filter(o=>!t.some(l=>l.providerId===o.providerId)),...t]}function JT(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx(r,t){const n=await XT(r,{},async()=>{const o=Fc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:h}=r.config,p=await $T(r,l,"/v1/token",`key=${h}`),y=await r._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:y,body:o};return r.emulatorConfig&&du(r.emulatorConfig.host)&&(v.credentials="include"),KT.fetch()(p,v)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fx(r,t){return Ta(r,"POST","/v2/accounts:revokeToken",va(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ae(t.idToken,"internal-error"),ae(typeof t.idToken<"u","internal-error"),ae(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):s0(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){ae(t.length!==0,"internal-error");const n=s0(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:o,refreshToken:l,expiresIn:h}=await hx(t,n);this.updateTokensAndExpiration(o,l,Number(h))}updateTokensAndExpiration(t,n,o){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(t,n){const{refreshToken:o,accessToken:l,expirationTime:h}=n,p=new $l;return o&&(ae(typeof o=="string","internal-error",{appName:t}),p.refreshToken=o),l&&(ae(typeof l=="string","internal-error",{appName:t}),p.accessToken=l),h&&(ae(typeof h=="number","internal-error",{appName:t}),p.expirationTime=h),p}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new $l,this.toJSON())}_performRefresh(){return io("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(r,t){ae(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class is{constructor({uid:t,auth:n,stsTokenManager:o,...l}){this.providerId="firebase",this.proactiveRefresh=new lx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Tp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await Oc(this,this.stsTokenManager.getToken(this.auth,t));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return ox(this,t)}reload(){return ux(this)}_assign(t){this!==t&&(ae(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new is({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let o=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),o=!0),n&&await Rf(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(As(this.auth));const t=await this.getIdToken();return await Oc(this,sx(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const o=n.displayName??void 0,l=n.email??void 0,h=n.phoneNumber??void 0,p=n.photoURL??void 0,y=n.tenantId??void 0,v=n._redirectEventId??void 0,E=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:P,emailVerified:M,isAnonymous:q,providerData:Q,stsTokenManager:nt}=n;ae(P&&nt,t,"internal-error");const at=$l.fromJSON(this.name,nt);ae(typeof P=="string",t,"internal-error"),na(o,t.name),na(l,t.name),ae(typeof M=="boolean",t,"internal-error"),ae(typeof q=="boolean",t,"internal-error"),na(h,t.name),na(p,t.name),na(y,t.name),na(v,t.name),na(E,t.name),na(x,t.name);const Tt=new is({uid:P,auth:t,email:l,emailVerified:M,displayName:o,isAnonymous:q,photoURL:p,phoneNumber:h,tenantId:y,stsTokenManager:at,createdAt:E,lastLoginAt:x});return Q&&Array.isArray(Q)&&(Tt.providerData=Q.map(ut=>({...ut}))),v&&(Tt._redirectEventId=v),Tt}static async _fromIdTokenResponse(t,n,o=!1){const l=new $l;l.updateFromServerResponse(n);const h=new is({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:o});return await Rf(h),h}static async _fromGetAccountInfoResponse(t,n,o){const l=n.users[0];ae(l.localId!==void 0,"internal-error");const h=l.providerUserInfo!==void 0?JT(l.providerUserInfo):[],p=!(l.email&&l.passwordHash)&&!h?.length,y=new $l;y.updateFromIdToken(o);const v=new is({uid:l.localId,auth:t,stsTokenManager:y,isAnonymous:p}),E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Tp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!h?.length};return Object.assign(v,E),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=new Map;function ro(r){ao(r instanceof Function,"Expected a class definition");let t=o0.get(r);return t?(ao(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,o0.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}tE.type="NONE";const a0=tE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(r,t,n){return`firebase:${r}:${t}:${n}`}class Jl{constructor(t,n,o){this.persistence=t,this.auth=n,this.userKey=o;const{config:l,name:h}=this.auth;this.fullUserKey=pf(this.userKey,l.apiKey,h),this.fullPersistenceKey=pf("persistence",l.apiKey,h),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await xf(this.auth,{idToken:t}).catch(()=>{});return n?is._fromGetAccountInfoResponse(this.auth,n,t):null}return is._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,o="authUser"){if(!n.length)return new Jl(ro(a0),t,o);const l=(await Promise.all(n.map(async E=>{if(await E._isAvailable())return E}))).filter(E=>E);let h=l[0]||ro(a0);const p=pf(o,t.config.apiKey,t.name);let y=null;for(const E of n)try{const x=await E._get(p);if(x){let P;if(typeof x=="string"){const M=await xf(t,{idToken:x}).catch(()=>{});if(!M)break;P=await is._fromGetAccountInfoResponse(t,M,x)}else P=is._fromJSON(t,x);E!==h&&(y=P),h=E;break}}catch{}const v=l.filter(E=>E._shouldAllowMigration);return!h._shouldAllowMigration||!v.length?new Jl(h,t,o):(h=v[0],y&&await h._set(p,y.toJSON()),await Promise.all(n.map(async E=>{if(E!==h)try{await E._remove(p)}catch{}})),new Jl(h,t,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(rE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(eE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(oE(t))return"Blackberry";if(aE(t))return"Webos";if(nE(t))return"Safari";if((t.includes("chrome/")||iE(t))&&!t.includes("edge/"))return"Chrome";if(sE(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=r.match(n);if(o?.length===2)return o[1]}return"Other"}function eE(r=Mi()){return/firefox\//i.test(r)}function nE(r=Mi()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function iE(r=Mi()){return/crios\//i.test(r)}function rE(r=Mi()){return/iemobile/i.test(r)}function sE(r=Mi()){return/android/i.test(r)}function oE(r=Mi()){return/blackberry/i.test(r)}function aE(r=Mi()){return/webos/i.test(r)}function Jp(r=Mi()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function dx(r=Mi()){return Jp(r)&&!!window.navigator?.standalone}function mx(){return xS()&&document.documentMode===10}function lE(r=Mi()){return Jp(r)||sE(r)||aE(r)||oE(r)||/windows phone/i.test(r)||rE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(r,t=[]){let n;switch(r){case"Browser":n=l0(Mi());break;case"Worker":n=`${l0(Mi())}-${r}`;break;default:n=r}const o=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${mu}/${o}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const o=h=>new Promise((p,y)=>{try{const v=t(h);p(v)}catch(v){y(v)}});o.onAbort=n,this.queue.push(o);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const o of this.queue)await o(t),o.onAbort&&n.push(o.onAbort)}catch(o){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gx(r,t={}){return Ta(r,"GET","/v2/passwordPolicy",va(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=6;class yx{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??_x,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const o=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;o&&(n.meetsMinPasswordLength=t.length>=o),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let o;for(let l=0;l<t.length;l++)o=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(t,n,o,l,h){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(t,n,o,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=o,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new u0(this),this.idTokenSubscription=new u0(this),this.beforeStateQueue=new px(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(h=>this._resolvePersistenceManagerAvailable=h)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ro(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Jl.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await xf(this,{idToken:t}),o=await is._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(o)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(nr(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let o=n,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=this.redirectUser?._redirectEventId,p=o?._redirectEventId,y=await this.tryRedirectSignIn(t);(!h||h===p)&&y?.user&&(o=y.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Rf(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=XA()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(nr(this.app))return Promise.reject(As(this));const n=t?Mn(t):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&ae(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(As(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return nr(this.app)?Promise.reject(As(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ro(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await gx(this),n=new yx(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new qc("auth","Firebase",t())}onAuthStateChanged(t,n,o){return this.registerStateListener(this.authStateSubscription,t,n,o)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,o){return this.registerStateListener(this.idTokenSubscription,t,n,o)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const o=this.onAuthStateChanged(()=>{o(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(o.tenantId=this.tenantId),await fx(this,o)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const o=await this.getOrInitRedirectPersistenceManager(n);return t===null?o.removeCurrentUser():o.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ro(t)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await Jl.create(this,[ro(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,o,l){if(this._deleted)return()=>{};const h=typeof n=="function"?n:n.next.bind(n);let p=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(y,this,"internal-error"),y.then(()=>{p||h(this.currentUser)}),typeof n=="function"){const v=t.addObserver(n,o,l);return()=>{p=!0,v()}}else{const v=t.addObserver(n);return()=>{p=!0,v()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=uE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){if(nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&YA(`Error while retrieving App Check token: ${t.error}`),t?.token}}function fo(r){return Mn(r)}class u0{constructor(t){this.auth=t,this.observer=null,this.addObserver=LS(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tx(r){Kf=r}function cE(r){return Kf.loadJS(r)}function Ex(){return Kf.recaptchaEnterpriseScript}function bx(){return Kf.gapiScript}function wx(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Sx{constructor(){this.enterprise=new Ax}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class Ax{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const xx="recaptcha-enterprise",hE="NO_RECAPTCHA";class Rx{constructor(t){this.type=xx,this.auth=fo(t)}async verify(t="verify",n=!1){async function o(h){if(!n){if(h.tenantId==null&&h._agentRecaptchaConfig!=null)return h._agentRecaptchaConfig.siteKey;if(h.tenantId!=null&&h._tenantRecaptchaConfigs[h.tenantId]!==void 0)return h._tenantRecaptchaConfigs[h.tenantId].siteKey}return new Promise(async(p,y)=>{rx(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)y(new Error("recaptcha Enterprise site key undefined"));else{const E=new ix(v);return h.tenantId==null?h._agentRecaptchaConfig=E:h._tenantRecaptchaConfigs[h.tenantId]=E,p(E.siteKey)}}).catch(v=>{y(v)})})}function l(h,p,y){const v=window.grecaptcha;r0(v)?v.enterprise.ready(()=>{v.enterprise.execute(h,{action:t}).then(E=>{p(E)}).catch(()=>{p(hE)})}):y(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Sx().execute("siteKey",{action:"verify"}):new Promise((h,p)=>{o(this.auth).then(y=>{if(!n&&r0(window.grecaptcha))l(y,h,p);else{if(typeof window>"u"){p(new Error("RecaptchaVerifier is only supported in browser"));return}let v=Ex();v.length!==0&&(v+=y),cE(v).then(()=>{l(y,h,p)}).catch(E=>{p(E)})}}).catch(y=>{p(y)})})}}async function c0(r,t,n,o=!1,l=!1){const h=new Rx(r);let p;if(l)p=hE;else try{p=await h.verify(n)}catch{p=await h.verify(n,!0)}const y={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in y){const v=y.phoneEnrollmentInfo.phoneNumber,E=y.phoneEnrollmentInfo.recaptchaToken;Object.assign(y,{phoneEnrollmentInfo:{phoneNumber:v,recaptchaToken:E,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in y){const v=y.phoneSignInInfo.recaptchaToken;Object.assign(y,{phoneSignInInfo:{recaptchaToken:v,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return y}return o?Object.assign(y,{captchaResp:p}):Object.assign(y,{captchaResponse:p}),Object.assign(y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),y}async function Ep(r,t,n,o,l){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await c0(r,t,n,n==="getOobCode");return o(r,h)}else return o(r,t).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await c0(r,t,n,n==="getOobCode");return o(r,p)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(r,t){const n=Yp(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),h=n.getOptions();if(tl(h,t??{}))return l;Ur(l,"already-initialized")}return n.initialize({options:t})}function Cx(r,t){const n=t?.persistence||[],o=(Array.isArray(n)?n:[n]).map(ro);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(o,t?.popupRedirectResolver)}function Px(r,t,n){const o=fo(r);ae(/^https?:\/\//.test(t),o,"invalid-emulator-scheme");const l=!1,h=fE(t),{host:p,port:y}=Mx(t),v=y===null?"":`:${y}`,E={url:`${h}//${p}${v}/`},x=Object.freeze({host:p,port:y,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!o._canInitEmulator){ae(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),ae(tl(E,o.config.emulator)&&tl(x,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=E,o.emulatorConfig=x,o.settings.appVerificationDisabledForTesting=!0,du(p)?(UT(`${h}//${p}${v}`),jT("Auth",!0)):Ox()}function fE(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function Mx(r){const t=fE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const o=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(o);if(l){const h=l[1];return{host:h,port:h0(o.substr(h.length+1))}}else{const[h,p]=o.split(":");return{host:h,port:h0(p)}}}function h0(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function Ox(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return io("not implemented")}_getIdTokenResponse(t){return io("not implemented")}_linkToIdToken(t,n){return io("not implemented")}_getReauthenticationResolver(t){return io("not implemented")}}async function Dx(r,t){return Ta(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(r,t){return Zc(r,"POST","/v1/accounts:signInWithPassword",va(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nx(r,t){return Zc(r,"POST","/v1/accounts:signInWithEmailLink",va(r,t))}async function kx(r,t){return Zc(r,"POST","/v1/accounts:signInWithEmailLink",va(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends tg{constructor(t,n,o,l=null){super("password",o),this._email=t,this._password=n,this._tenantId=l}static _fromEmailAndPassword(t,n){return new Dc(t,n,"password")}static _fromEmailAndCode(t,n,o=null){return new Dc(t,n,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ep(t,n,"signInWithPassword",Lx);case"emailLink":return Nx(t,{email:this._email,oobCode:this._password});default:Ur(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const o={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ep(t,o,"signUpPassword",Dx);case"emailLink":return kx(t,{idToken:n,email:this._email,oobCode:this._password});default:Ur(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tu(r,t){return Zc(r,"POST","/v1/accounts:signInWithIdp",va(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="http://localhost";class nl extends tg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new nl(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Ur("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:o,signInMethod:l,...h}=n;if(!o||!l)return null;const p=new nl(o,l);return p.idToken=h.idToken||void 0,p.accessToken=h.accessToken||void 0,p.secret=h.secret,p.nonce=h.nonce,p.pendingToken=h.pendingToken||null,p}_getIdTokenResponse(t){const n=this.buildRequest();return tu(t,n)}_linkToIdToken(t,n){const o=this.buildRequest();return o.idToken=n,tu(t,o)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,tu(t,n)}buildRequest(){const t={requestUri:Vx,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Fc(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ux(r){const t=dc(mc(r)).link,n=t?dc(mc(t)).deep_link_id:null,o=dc(mc(r)).deep_link_id;return(o?dc(mc(o)).link:null)||o||n||t||r}class eg{constructor(t){const n=dc(mc(t)),o=n.apiKey??null,l=n.oobCode??null,h=zx(n.mode??null);ae(o&&l&&h,"argument-error"),this.apiKey=o,this.operation=h,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=Ux(t);try{return new eg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(){this.providerId=pu.PROVIDER_ID}static credential(t,n){return Dc._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const o=eg.parseLink(n);return ae(o,"argument-error"),Dc._fromEmailAndCode(t,o.code,o.tenantId)}}pu.PROVIDER_ID="password";pu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";pu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends Xf{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends Wc{constructor(){super("facebook.com")}static credential(t){return nl._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ia.credentialFromTaggedObject(t)}static credentialFromError(t){return ia.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ia.credential(t.oauthAccessToken)}catch{return null}}}ia.FACEBOOK_SIGN_IN_METHOD="facebook.com";ia.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends Wc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return nl._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return no.credentialFromTaggedObject(t)}static credentialFromError(t){return no.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:o}=t;if(!n&&!o)return null;try{return no.credential(n,o)}catch{return null}}}no.GOOGLE_SIGN_IN_METHOD="google.com";no.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends Wc{constructor(){super("github.com")}static credential(t){return nl._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ra.credentialFromTaggedObject(t)}static credentialFromError(t){return ra.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ra.credential(t.oauthAccessToken)}catch{return null}}}ra.GITHUB_SIGN_IN_METHOD="github.com";ra.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Wc{constructor(){super("twitter.com")}static credential(t,n){return nl._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return sa.credentialFromTaggedObject(t)}static credentialFromError(t){return sa.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:o}=t;if(!n||!o)return null;try{return sa.credential(n,o)}catch{return null}}}sa.TWITTER_SIGN_IN_METHOD="twitter.com";sa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(r,t){return Zc(r,"POST","/v1/accounts:signUp",va(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,o,l=!1){const h=await is._fromIdTokenResponse(t,o,l),p=f0(o);return new il({user:h,providerId:p,_tokenResponse:o,operationType:n})}static async _forOperation(t,n,o){await t._updateTokensIfNecessary(o,!0);const l=f0(o);return new il({user:t,providerId:l,_tokenResponse:o,operationType:n})}}function f0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends ho{constructor(t,n,o,l){super(n.code,n.message),this.operationType=o,this.user=l,Object.setPrototypeOf(this,If.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(t,n,o,l){return new If(t,n,o,l)}}function dE(r,t,n,o){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(h=>{throw h.code==="auth/multi-factor-auth-required"?If._fromErrorAndOperation(r,h,t,o):h})}async function Bx(r,t,n=!1){const o=await Oc(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return il._forOperation(r,"link",o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hx(r,t,n=!1){const{auth:o}=r;if(nr(o.app))return Promise.reject(As(o));const l="reauthenticate";try{const h=await Oc(r,dE(o,l,t,r),n);ae(h.idToken,o,"internal-error");const p=$p(h.idToken);ae(p,o,"internal-error");const{sub:y}=p;return ae(r.uid===y,o,"user-mismatch"),il._forOperation(r,l,h)}catch(h){throw h?.code==="auth/user-not-found"&&Ur(o,"user-mismatch"),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mE(r,t,n=!1){if(nr(r.app))return Promise.reject(As(r));const o="signIn",l=await dE(r,o,t),h=await il._fromIdTokenResponse(r,o,l);return n||await r._updateCurrentUser(h.user),h}async function qx(r,t){return mE(fo(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pE(r){const t=fo(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Fx(r,t,n){if(nr(r.app))return Promise.reject(As(r));const o=fo(r),p=await Ep(o,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jx).catch(v=>{throw v.code==="auth/password-does-not-meet-requirements"&&pE(r),v}),y=await il._fromIdTokenResponse(o,"signIn",p);return await o._updateCurrentUser(y.user),y}function Gx(r,t,n){return nr(r.app)?Promise.reject(As(r)):qx(Mn(r),pu.credential(t,n)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&pE(r),o})}function Zx(r,t,n,o){return Mn(r).onIdTokenChanged(t,n,o)}function Wx(r,t,n){return Mn(r).beforeAuthStateChanged(t,n)}function gu(r,t,n,o){return Mn(r).onAuthStateChanged(t,n,o)}function gE(r){return Mn(r).signOut()}const Cf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cf,"1"),this.storage.removeItem(Cf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=1e3,Qx=10;class yE extends _E{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const o=this.storage.getItem(n),l=this.localCache[n];o!==l&&t(n,l,o)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((p,y,v)=>{this.notifyListeners(p,v)});return}const o=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const p=this.storage.getItem(o);!n&&this.localCache[o]===p||this.notifyListeners(o,p)},h=this.storage.getItem(o);mx()&&h!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,Qx):l()}notifyListeners(t,n){this.localCache[t]=n;const o=this.listeners[t];if(o)for(const l of Array.from(o))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:o}),!0)})},Yx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}yE.type="LOCAL";const Kx=yE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE extends _E{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}vE.type="SESSION";const TE=vE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const o=new $f(t);return this.receivers.push(o),o}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:o,eventType:l,data:h}=n.data,p=this.handlersMap[l];if(!p?.size)return;n.ports[0].postMessage({status:"ack",eventId:o,eventType:l});const y=Array.from(p).map(async E=>E(n.origin,h)),v=await Xx(y);n.ports[0].postMessage({status:"done",eventId:o,eventType:l,response:v})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$f.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(r="",t=10){let n="";for(let o=0;o<t;o++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,o=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let h,p;return new Promise((y,v)=>{const E=ng("",20);l.port1.start();const x=setTimeout(()=>{v(new Error("unsupported_event"))},o);p={messageChannel:l,onMessage(P){const M=P;if(M.data.eventId===E)switch(M.data.status){case"ack":clearTimeout(x),h=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(h),y(M.data.response);break;default:clearTimeout(x),clearTimeout(h),v(new Error("invalid_response"));break}}},this.handlers.add(p),l.port1.addEventListener("message",p.onMessage),this.target.postMessage({eventType:t,eventId:E,data:n},[l.port2])}).finally(()=>{p&&this.removeMessageHandler(p)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(){return window}function Jx(r){xs().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(){return typeof xs().WorkerGlobalScope<"u"&&typeof xs().importScripts=="function"}async function tR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eR(){return navigator?.serviceWorker?.controller||null}function nR(){return EE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="firebaseLocalStorageDb",iR=1,Pf="firebaseLocalStorage",wE="fbase_key";class Yc{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jf(r,t){return r.transaction([Pf],t?"readwrite":"readonly").objectStore(Pf)}function rR(){const r=indexedDB.deleteDatabase(bE);return new Yc(r).toPromise()}function bp(){const r=indexedDB.open(bE,iR);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const o=r.result;try{o.createObjectStore(Pf,{keyPath:wE})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const o=r.result;o.objectStoreNames.contains(Pf)?t(o):(o.close(),await rR(),t(await bp()))})})}async function d0(r,t,n){const o=Jf(r,!0).put({[wE]:t,value:n});return new Yc(o).toPromise()}async function sR(r,t){const n=Jf(r,!1).get(t),o=await new Yc(n).toPromise();return o===void 0?null:o.value}function m0(r,t){const n=Jf(r,!0).delete(t);return new Yc(n).toPromise()}const oR=800,aR=3;class SE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bp(),this.db)}async _withRetries(t){let n=0;for(;;)try{const o=await this._openDb();return await t(o)}catch(o){if(n++>aR)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return EE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$f._getInstance(nR()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await tR(),!this.activeServiceWorker)return;this.sender=new $x(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||eR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await bp();return await d0(t,Cf,"1"),await m0(t,Cf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(o=>d0(o,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(o=>sR(o,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>m0(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const h=Jf(l,!1).getAll();return new Yc(h).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],o=new Set;if(t.length!==0)for(const{fbase_key:l,value:h}of t)o.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(h)&&(this.notifyListeners(l,h),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!o.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const o=this.listeners[t];if(o)for(const l of Array.from(o))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SE.type="LOCAL";const lR=SE;new Gc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(r,t){return t?ro(t):(ae(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg extends tg{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return tu(t,this._buildIdpRequest())}_linkToIdToken(t,n){return tu(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return tu(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function uR(r){return mE(r.auth,new rg(r),r.bypassAuthState)}function cR(r){const{auth:t,user:n}=r;return ae(n,t,"internal-error"),Hx(n,new rg(r),r.bypassAuthState)}async function hR(r){const{auth:t,user:n}=r;return ae(n,t,"internal-error"),Bx(n,new rg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(t,n,o,l,h=!1){this.auth=t,this.resolver=o,this.user=l,this.bypassAuthState=h,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:o,postBody:l,tenantId:h,error:p,type:y}=t;if(p){this.reject(p);return}const v={auth:this.auth,requestUri:n,sessionId:o,tenantId:h||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(v))}catch(E){this.reject(E)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return uR;case"linkViaPopup":case"linkViaRedirect":return hR;case"reauthViaPopup":case"reauthViaRedirect":return cR;default:Ur(this.auth,"internal-error")}}resolve(t){ao(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ao(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=new Gc(2e3,1e4);async function dR(r,t,n){if(nr(r.app))return Promise.reject(rs(r,"operation-not-supported-in-this-environment"));const o=fo(r);QT(r,t,Xf);const l=ig(o,n);return new Xa(o,"signInViaPopup",t,l).executeNotNull()}class Xa extends AE{constructor(t,n,o,l,h){super(t,n,l,h),this.provider=o,this.authWindow=null,this.pollId=null,Xa.currentPopupAction&&Xa.currentPopupAction.cancel(),Xa.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ae(t,this.auth,"internal-error"),t}async onExecution(){ao(this.filter.length===1,"Popup operations only handle one event");const t=ng();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(rs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(rs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xa.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,fR.get())};t()}}Xa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="pendingRedirect",gf=new Map;class pR extends AE{constructor(t,n,o=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,o),this.eventId=null}async execute(){let t=gf.get(this.auth._key());if(!t){try{const o=await gR(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(o)}catch(n){t=()=>Promise.reject(n)}gf.set(this.auth._key(),t)}return this.bypassAuthState||gf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gR(r,t){const n=RE(t),o=xE(r);if(!await o._isAvailable())return!1;const l=await o._get(n)==="true";return await o._remove(n),l}async function _R(r,t){return xE(r)._set(RE(t),"true")}function yR(r,t){gf.set(r._key(),t)}function xE(r){return ro(r._redirectPersistence)}function RE(r){return pf(mR,r.config.apiKey,r.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(r,t,n){return TR(r,t,n)}async function TR(r,t,n){if(nr(r.app))return Promise.reject(As(r));const o=fo(r);QT(r,t,Xf),await o._initializationPromise;const l=ig(o,n);return await _R(l,o),l._openRedirect(o,t,"signInViaRedirect")}async function ER(r,t,n=!1){if(nr(r.app))return Promise.reject(As(r));const o=fo(r),l=ig(o,t),p=await new pR(o,l,n).execute();return p&&!n&&(delete p.user._redirectEventId,await o._persistUserIfCurrent(p.user),await o._setRedirectUser(null,t)),p}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=600*1e3;class wR{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(t,o)&&(n=!0,this.sendToConsumer(t,o),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!SR(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!IE(t)){const o=t.error.code?.split("auth/")[1]||"internal-error";n.onError(rs(this.auth,o))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const o=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&o}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=bR&&this.cachedEventUids.clear(),this.cachedEventUids.has(p0(t))}saveEventToCache(t){this.cachedEventUids.add(p0(t)),this.lastProcessedEventTime=Date.now()}}function p0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function IE({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function SR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(r,t={}){return Ta(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RR=/^https?/;async function IR(r){if(r.config.emulator)return;const{authorizedDomains:t}=await AR(r);for(const n of t)try{if(CR(n))return}catch{}Ur(r,"unauthorized-domain")}function CR(r){const t=vp(),{protocol:n,hostname:o}=new URL(t);if(r.startsWith("chrome-extension://")){const p=new URL(r);return p.hostname===""&&o===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&p.hostname===o}if(!RR.test(n))return!1;if(xR.test(r))return o===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(o)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=new Gc(3e4,6e4);function g0(){const r=xs().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function MR(r){return new Promise((t,n)=>{function o(){g0(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{g0(),n(rs(r,"network-request-failed"))},timeout:PR.get()})}if(xs().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(xs().gapi?.load)o();else{const l=wx("iframefcb");return xs()[l]=()=>{gapi.load?o():n(rs(r,"network-request-failed"))},cE(`${bx()}?onload=${l}`).catch(h=>n(h))}}).catch(t=>{throw _f=null,t})}let _f=null;function OR(r){return _f=_f||MR(r),_f}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=new Gc(5e3,15e3),LR="__/auth/iframe",NR="emulator/auth/iframe",kR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zR(r){const t=r.config;ae(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?Xp(t,NR):`https://${r.config.authDomain}/${LR}`,o={apiKey:t.apiKey,appName:r.name,v:mu},l=VR.get(r.config.apiHost);l&&(o.eid=l);const h=r._getFrameworks();return h.length&&(o.fw=h.join(",")),`${n}?${Fc(o).slice(1)}`}async function UR(r){const t=await OR(r),n=xs().gapi;return ae(n,r,"internal-error"),t.open({where:document.body,url:zR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kR,dontclear:!0},o=>new Promise(async(l,h)=>{await o.restyle({setHideOnLeave:!1});const p=rs(r,"network-request-failed"),y=xs().setTimeout(()=>{h(p)},DR.get());function v(){xs().clearTimeout(y),l(o)}o.ping(v).then(v,()=>{h(p)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BR=500,HR=600,qR="_blank",FR="http://localhost";class _0{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GR(r,t,n,o=BR,l=HR){const h=Math.max((window.screen.availHeight-l)/2,0).toString(),p=Math.max((window.screen.availWidth-o)/2,0).toString();let y="";const v={...jR,width:o.toString(),height:l.toString(),top:h,left:p},E=Mi().toLowerCase();n&&(y=iE(E)?qR:n),eE(E)&&(t=t||FR,v.scrollbars="yes");const x=Object.entries(v).reduce((M,[q,Q])=>`${M}${q}=${Q},`,"");if(dx(E)&&y!=="_self")return ZR(t||"",y),new _0(null);const P=window.open(t||"",y,x);ae(P,r,"popup-blocked");try{P.focus()}catch{}return new _0(P)}function ZR(r,t){const n=document.createElement("a");n.href=r,n.target=t;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="__/auth/handler",YR="emulator/auth/handler",QR=encodeURIComponent("fac");async function y0(r,t,n,o,l,h){ae(r.config.authDomain,r,"auth-domain-config-required"),ae(r.config.apiKey,r,"invalid-api-key");const p={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:o,v:mu,eventId:l};if(t instanceof Xf){t.setDefaultLanguage(r.languageCode),p.providerId=t.providerId||"",DS(t.getCustomParameters())||(p.customParameters=JSON.stringify(t.getCustomParameters()));for(const[x,P]of Object.entries({}))p[x]=P}if(t instanceof Wc){const x=t.getScopes().filter(P=>P!=="");x.length>0&&(p.scopes=x.join(","))}r.tenantId&&(p.tid=r.tenantId);const y=p;for(const x of Object.keys(y))y[x]===void 0&&delete y[x];const v=await r._getAppCheckToken(),E=v?`#${QR}=${encodeURIComponent(v)}`:"";return`${KR(r)}?${Fc(y).slice(1)}${E}`}function KR({config:r}){return r.emulator?Xp(r,YR):`https://${r.authDomain}/${WR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="webStorageSupport";class XR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=TE,this._completeRedirectFn=ER,this._overrideRedirectResult=yR}async _openPopup(t,n,o,l){ao(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const h=await y0(t,n,o,vp(),l);return GR(t,h,ng())}async _openRedirect(t,n,o,l){await this._originValidation(t);const h=await y0(t,n,o,vp(),l);return Jx(h),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:h}=this.eventManagers[n];return l?Promise.resolve(l):(ao(h,"If manager is not set, promise should be"),h)}const o=this.initAndGetManager(t);return this.eventManagers[n]={promise:o},o.catch(()=>{delete this.eventManagers[n]}),o}async initAndGetManager(t){const n=await UR(t),o=new wR(t);return n.register("authEvent",l=>(ae(l?.authEvent,t,"invalid-auth-event"),{status:o.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:o},this.iframes[t._key()]=n,o}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(lp,{type:lp},l=>{const h=l?.[0]?.[lp];h!==void 0&&n(!!h),Ur(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=IR(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return lE()||nE()||Jp()}}const $R=XR;var v0="@firebase/auth",T0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(o=>{t(o?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eI(r){iu(new el("auth",(t,{options:n})=>{const o=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),h=t.getProvider("app-check-internal"),{apiKey:p,authDomain:y}=o.options;ae(p&&!p.includes(":"),"invalid-api-key",{appName:o.name});const v={apiKey:p,authDomain:y,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uE(r)},E=new vx(o,l,h,v);return Cx(E,n),E},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,o)=>{t.getProvider("auth-internal").initialize()})),iu(new el("auth-internal",t=>{const n=fo(t.getProvider("auth").getImmediate());return(o=>new JR(o))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ua(v0,T0,tI(r)),ua(v0,T0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=300,iI=zT("authIdTokenMaxAge")||nI;let E0=null;const rI=r=>async t=>{const n=t&&await t.getIdTokenResult(),o=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(o&&o>iI)return;const l=n?.token;E0!==l&&(E0=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function sI(r=FT()){const t=Yp(r,"auth");if(t.isInitialized())return t.getImmediate();const n=Ix(r,{popupRedirectResolver:$R,persistence:[lR,Kx,TE]}),o=zT("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const h=new URL(o,location.origin);if(location.origin===h.origin){const p=rI(h.toString());Wx(n,p,()=>p(n.currentUser)),Zx(n,y=>p(y))}}const l=kT("auth");return l&&Px(n,`http://${l}`),n}function oI(){return document.getElementsByTagName("head")?.[0]??document}Tx({loadJS(r){return new Promise((t,n)=>{const o=document.createElement("script");o.setAttribute("src",r),o.onload=t,o.onerror=l=>{const h=rs("internal-error");h.customData=l,n(h)},o.type="text/javascript",o.charset="UTF-8",oI().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eI("Browser");var b0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ca,CE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(V,O){function k(){}k.prototype=O.prototype,V.D=O.prototype,V.prototype=new k,V.prototype.constructor=V,V.C=function(j,B,H){for(var N=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)N[ce-2]=arguments[ce];return O.prototype[B].apply(j,N)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(o,n),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(V,O,k){k||(k=0);var j=Array(16);if(typeof O=="string")for(var B=0;16>B;++B)j[B]=O.charCodeAt(k++)|O.charCodeAt(k++)<<8|O.charCodeAt(k++)<<16|O.charCodeAt(k++)<<24;else for(B=0;16>B;++B)j[B]=O[k++]|O[k++]<<8|O[k++]<<16|O[k++]<<24;O=V.g[0],k=V.g[1],B=V.g[2];var H=V.g[3],N=O+(H^k&(B^H))+j[0]+3614090360&4294967295;O=k+(N<<7&4294967295|N>>>25),N=H+(B^O&(k^B))+j[1]+3905402710&4294967295,H=O+(N<<12&4294967295|N>>>20),N=B+(k^H&(O^k))+j[2]+606105819&4294967295,B=H+(N<<17&4294967295|N>>>15),N=k+(O^B&(H^O))+j[3]+3250441966&4294967295,k=B+(N<<22&4294967295|N>>>10),N=O+(H^k&(B^H))+j[4]+4118548399&4294967295,O=k+(N<<7&4294967295|N>>>25),N=H+(B^O&(k^B))+j[5]+1200080426&4294967295,H=O+(N<<12&4294967295|N>>>20),N=B+(k^H&(O^k))+j[6]+2821735955&4294967295,B=H+(N<<17&4294967295|N>>>15),N=k+(O^B&(H^O))+j[7]+4249261313&4294967295,k=B+(N<<22&4294967295|N>>>10),N=O+(H^k&(B^H))+j[8]+1770035416&4294967295,O=k+(N<<7&4294967295|N>>>25),N=H+(B^O&(k^B))+j[9]+2336552879&4294967295,H=O+(N<<12&4294967295|N>>>20),N=B+(k^H&(O^k))+j[10]+4294925233&4294967295,B=H+(N<<17&4294967295|N>>>15),N=k+(O^B&(H^O))+j[11]+2304563134&4294967295,k=B+(N<<22&4294967295|N>>>10),N=O+(H^k&(B^H))+j[12]+1804603682&4294967295,O=k+(N<<7&4294967295|N>>>25),N=H+(B^O&(k^B))+j[13]+4254626195&4294967295,H=O+(N<<12&4294967295|N>>>20),N=B+(k^H&(O^k))+j[14]+2792965006&4294967295,B=H+(N<<17&4294967295|N>>>15),N=k+(O^B&(H^O))+j[15]+1236535329&4294967295,k=B+(N<<22&4294967295|N>>>10),N=O+(B^H&(k^B))+j[1]+4129170786&4294967295,O=k+(N<<5&4294967295|N>>>27),N=H+(k^B&(O^k))+j[6]+3225465664&4294967295,H=O+(N<<9&4294967295|N>>>23),N=B+(O^k&(H^O))+j[11]+643717713&4294967295,B=H+(N<<14&4294967295|N>>>18),N=k+(H^O&(B^H))+j[0]+3921069994&4294967295,k=B+(N<<20&4294967295|N>>>12),N=O+(B^H&(k^B))+j[5]+3593408605&4294967295,O=k+(N<<5&4294967295|N>>>27),N=H+(k^B&(O^k))+j[10]+38016083&4294967295,H=O+(N<<9&4294967295|N>>>23),N=B+(O^k&(H^O))+j[15]+3634488961&4294967295,B=H+(N<<14&4294967295|N>>>18),N=k+(H^O&(B^H))+j[4]+3889429448&4294967295,k=B+(N<<20&4294967295|N>>>12),N=O+(B^H&(k^B))+j[9]+568446438&4294967295,O=k+(N<<5&4294967295|N>>>27),N=H+(k^B&(O^k))+j[14]+3275163606&4294967295,H=O+(N<<9&4294967295|N>>>23),N=B+(O^k&(H^O))+j[3]+4107603335&4294967295,B=H+(N<<14&4294967295|N>>>18),N=k+(H^O&(B^H))+j[8]+1163531501&4294967295,k=B+(N<<20&4294967295|N>>>12),N=O+(B^H&(k^B))+j[13]+2850285829&4294967295,O=k+(N<<5&4294967295|N>>>27),N=H+(k^B&(O^k))+j[2]+4243563512&4294967295,H=O+(N<<9&4294967295|N>>>23),N=B+(O^k&(H^O))+j[7]+1735328473&4294967295,B=H+(N<<14&4294967295|N>>>18),N=k+(H^O&(B^H))+j[12]+2368359562&4294967295,k=B+(N<<20&4294967295|N>>>12),N=O+(k^B^H)+j[5]+4294588738&4294967295,O=k+(N<<4&4294967295|N>>>28),N=H+(O^k^B)+j[8]+2272392833&4294967295,H=O+(N<<11&4294967295|N>>>21),N=B+(H^O^k)+j[11]+1839030562&4294967295,B=H+(N<<16&4294967295|N>>>16),N=k+(B^H^O)+j[14]+4259657740&4294967295,k=B+(N<<23&4294967295|N>>>9),N=O+(k^B^H)+j[1]+2763975236&4294967295,O=k+(N<<4&4294967295|N>>>28),N=H+(O^k^B)+j[4]+1272893353&4294967295,H=O+(N<<11&4294967295|N>>>21),N=B+(H^O^k)+j[7]+4139469664&4294967295,B=H+(N<<16&4294967295|N>>>16),N=k+(B^H^O)+j[10]+3200236656&4294967295,k=B+(N<<23&4294967295|N>>>9),N=O+(k^B^H)+j[13]+681279174&4294967295,O=k+(N<<4&4294967295|N>>>28),N=H+(O^k^B)+j[0]+3936430074&4294967295,H=O+(N<<11&4294967295|N>>>21),N=B+(H^O^k)+j[3]+3572445317&4294967295,B=H+(N<<16&4294967295|N>>>16),N=k+(B^H^O)+j[6]+76029189&4294967295,k=B+(N<<23&4294967295|N>>>9),N=O+(k^B^H)+j[9]+3654602809&4294967295,O=k+(N<<4&4294967295|N>>>28),N=H+(O^k^B)+j[12]+3873151461&4294967295,H=O+(N<<11&4294967295|N>>>21),N=B+(H^O^k)+j[15]+530742520&4294967295,B=H+(N<<16&4294967295|N>>>16),N=k+(B^H^O)+j[2]+3299628645&4294967295,k=B+(N<<23&4294967295|N>>>9),N=O+(B^(k|~H))+j[0]+4096336452&4294967295,O=k+(N<<6&4294967295|N>>>26),N=H+(k^(O|~B))+j[7]+1126891415&4294967295,H=O+(N<<10&4294967295|N>>>22),N=B+(O^(H|~k))+j[14]+2878612391&4294967295,B=H+(N<<15&4294967295|N>>>17),N=k+(H^(B|~O))+j[5]+4237533241&4294967295,k=B+(N<<21&4294967295|N>>>11),N=O+(B^(k|~H))+j[12]+1700485571&4294967295,O=k+(N<<6&4294967295|N>>>26),N=H+(k^(O|~B))+j[3]+2399980690&4294967295,H=O+(N<<10&4294967295|N>>>22),N=B+(O^(H|~k))+j[10]+4293915773&4294967295,B=H+(N<<15&4294967295|N>>>17),N=k+(H^(B|~O))+j[1]+2240044497&4294967295,k=B+(N<<21&4294967295|N>>>11),N=O+(B^(k|~H))+j[8]+1873313359&4294967295,O=k+(N<<6&4294967295|N>>>26),N=H+(k^(O|~B))+j[15]+4264355552&4294967295,H=O+(N<<10&4294967295|N>>>22),N=B+(O^(H|~k))+j[6]+2734768916&4294967295,B=H+(N<<15&4294967295|N>>>17),N=k+(H^(B|~O))+j[13]+1309151649&4294967295,k=B+(N<<21&4294967295|N>>>11),N=O+(B^(k|~H))+j[4]+4149444226&4294967295,O=k+(N<<6&4294967295|N>>>26),N=H+(k^(O|~B))+j[11]+3174756917&4294967295,H=O+(N<<10&4294967295|N>>>22),N=B+(O^(H|~k))+j[2]+718787259&4294967295,B=H+(N<<15&4294967295|N>>>17),N=k+(H^(B|~O))+j[9]+3951481745&4294967295,V.g[0]=V.g[0]+O&4294967295,V.g[1]=V.g[1]+(B+(N<<21&4294967295|N>>>11))&4294967295,V.g[2]=V.g[2]+B&4294967295,V.g[3]=V.g[3]+H&4294967295}o.prototype.u=function(V,O){O===void 0&&(O=V.length);for(var k=O-this.blockSize,j=this.B,B=this.h,H=0;H<O;){if(B==0)for(;H<=k;)l(this,V,H),H+=this.blockSize;if(typeof V=="string"){for(;H<O;)if(j[B++]=V.charCodeAt(H++),B==this.blockSize){l(this,j),B=0;break}}else for(;H<O;)if(j[B++]=V[H++],B==this.blockSize){l(this,j),B=0;break}}this.h=B,this.o+=O},o.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var O=1;O<V.length-8;++O)V[O]=0;var k=8*this.o;for(O=V.length-8;O<V.length;++O)V[O]=k&255,k/=256;for(this.u(V),V=Array(16),O=k=0;4>O;++O)for(var j=0;32>j;j+=8)V[k++]=this.g[O]>>>j&255;return V};function h(V,O){var k=y;return Object.prototype.hasOwnProperty.call(k,V)?k[V]:k[V]=O(V)}function p(V,O){this.h=O;for(var k=[],j=!0,B=V.length-1;0<=B;B--){var H=V[B]|0;j&&H==O||(k[B]=H,j=!1)}this.g=k}var y={};function v(V){return-128<=V&&128>V?h(V,function(O){return new p([O|0],0>O?-1:0)}):new p([V|0],0>V?-1:0)}function E(V){if(isNaN(V)||!isFinite(V))return P;if(0>V)return at(E(-V));for(var O=[],k=1,j=0;V>=k;j++)O[j]=V/k|0,k*=4294967296;return new p(O,0)}function x(V,O){if(V.length==0)throw Error("number format error: empty string");if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(V.charAt(0)=="-")return at(x(V.substring(1),O));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=E(Math.pow(O,8)),j=P,B=0;B<V.length;B+=8){var H=Math.min(8,V.length-B),N=parseInt(V.substring(B,B+H),O);8>H?(H=E(Math.pow(O,H)),j=j.j(H).add(E(N))):(j=j.j(k),j=j.add(E(N)))}return j}var P=v(0),M=v(1),q=v(16777216);r=p.prototype,r.m=function(){if(nt(this))return-at(this).m();for(var V=0,O=1,k=0;k<this.g.length;k++){var j=this.i(k);V+=(0<=j?j:4294967296+j)*O,O*=4294967296}return V},r.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(Q(this))return"0";if(nt(this))return"-"+at(this).toString(V);for(var O=E(Math.pow(V,6)),k=this,j="";;){var B=Bt(k,O).g;k=Tt(k,B.j(O));var H=((0<k.g.length?k.g[0]:k.h)>>>0).toString(V);if(k=B,Q(k))return H+j;for(;6>H.length;)H="0"+H;j=H+j}},r.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function Q(V){if(V.h!=0)return!1;for(var O=0;O<V.g.length;O++)if(V.g[O]!=0)return!1;return!0}function nt(V){return V.h==-1}r.l=function(V){return V=Tt(this,V),nt(V)?-1:Q(V)?0:1};function at(V){for(var O=V.g.length,k=[],j=0;j<O;j++)k[j]=~V.g[j];return new p(k,~V.h).add(M)}r.abs=function(){return nt(this)?at(this):this},r.add=function(V){for(var O=Math.max(this.g.length,V.g.length),k=[],j=0,B=0;B<=O;B++){var H=j+(this.i(B)&65535)+(V.i(B)&65535),N=(H>>>16)+(this.i(B)>>>16)+(V.i(B)>>>16);j=N>>>16,H&=65535,N&=65535,k[B]=N<<16|H}return new p(k,k[k.length-1]&-2147483648?-1:0)};function Tt(V,O){return V.add(at(O))}r.j=function(V){if(Q(this)||Q(V))return P;if(nt(this))return nt(V)?at(this).j(at(V)):at(at(this).j(V));if(nt(V))return at(this.j(at(V)));if(0>this.l(q)&&0>V.l(q))return E(this.m()*V.m());for(var O=this.g.length+V.g.length,k=[],j=0;j<2*O;j++)k[j]=0;for(j=0;j<this.g.length;j++)for(var B=0;B<V.g.length;B++){var H=this.i(j)>>>16,N=this.i(j)&65535,ce=V.i(B)>>>16,pe=V.i(B)&65535;k[2*j+2*B]+=N*pe,ut(k,2*j+2*B),k[2*j+2*B+1]+=H*pe,ut(k,2*j+2*B+1),k[2*j+2*B+1]+=N*ce,ut(k,2*j+2*B+1),k[2*j+2*B+2]+=H*ce,ut(k,2*j+2*B+2)}for(j=0;j<O;j++)k[j]=k[2*j+1]<<16|k[2*j];for(j=O;j<2*O;j++)k[j]=0;return new p(k,0)};function ut(V,O){for(;(V[O]&65535)!=V[O];)V[O+1]+=V[O]>>>16,V[O]&=65535,O++}function _t(V,O){this.g=V,this.h=O}function Bt(V,O){if(Q(O))throw Error("division by zero");if(Q(V))return new _t(P,P);if(nt(V))return O=Bt(at(V),O),new _t(at(O.g),at(O.h));if(nt(O))return O=Bt(V,at(O)),new _t(at(O.g),O.h);if(30<V.g.length){if(nt(V)||nt(O))throw Error("slowDivide_ only works with positive integers.");for(var k=M,j=O;0>=j.l(V);)k=Ct(k),j=Ct(j);var B=kt(k,1),H=kt(j,1);for(j=kt(j,2),k=kt(k,2);!Q(j);){var N=H.add(j);0>=N.l(V)&&(B=B.add(k),H=N),j=kt(j,1),k=kt(k,1)}return O=Tt(V,B.j(O)),new _t(B,O)}for(B=P;0<=V.l(O);){for(k=Math.max(1,Math.floor(V.m()/O.m())),j=Math.ceil(Math.log(k)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),H=E(k),N=H.j(O);nt(N)||0<N.l(V);)k-=j,H=E(k),N=H.j(O);Q(H)&&(H=M),B=B.add(H),V=Tt(V,N)}return new _t(B,V)}r.A=function(V){return Bt(this,V).h},r.and=function(V){for(var O=Math.max(this.g.length,V.g.length),k=[],j=0;j<O;j++)k[j]=this.i(j)&V.i(j);return new p(k,this.h&V.h)},r.or=function(V){for(var O=Math.max(this.g.length,V.g.length),k=[],j=0;j<O;j++)k[j]=this.i(j)|V.i(j);return new p(k,this.h|V.h)},r.xor=function(V){for(var O=Math.max(this.g.length,V.g.length),k=[],j=0;j<O;j++)k[j]=this.i(j)^V.i(j);return new p(k,this.h^V.h)};function Ct(V){for(var O=V.g.length+1,k=[],j=0;j<O;j++)k[j]=V.i(j)<<1|V.i(j-1)>>>31;return new p(k,V.h)}function kt(V,O){var k=O>>5;O%=32;for(var j=V.g.length-k,B=[],H=0;H<j;H++)B[H]=0<O?V.i(H+k)>>>O|V.i(H+k+1)<<32-O:V.i(H+k);return new p(B,V.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,CE=o,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.A,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=E,p.fromString=x,ca=p}).apply(typeof b0<"u"?b0:typeof self<"u"?self:typeof window<"u"?window:{});var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PE,pc,ME,yf,wp,OE,DE,LE;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,T,w){return f==Array.prototype||f==Object.prototype||(f[T]=w.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof uf=="object"&&uf];for(var T=0;T<f.length;++T){var w=f[T];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var o=n(this);function l(f,T){if(T)t:{var w=o;f=f.split(".");for(var C=0;C<f.length-1;C++){var K=f[C];if(!(K in w))break t;w=w[K]}f=f[f.length-1],C=w[f],T=T(C),T!=C&&T!=null&&t(w,f,{configurable:!0,writable:!0,value:T})}}function h(f,T){f instanceof String&&(f+="");var w=0,C=!1,K={next:function(){if(!C&&w<f.length){var ot=w++;return{value:T(ot,f[ot]),done:!1}}return C=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}l("Array.prototype.values",function(f){return f||function(){return h(this,function(T,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var p=p||{},y=this||self;function v(f){var T=typeof f;return T=T!="object"?T:f?Array.isArray(f)?"array":T:"null",T=="array"||T=="object"&&typeof f.length=="number"}function E(f){var T=typeof f;return T=="object"&&f!=null||T=="function"}function x(f,T,w){return f.call.apply(f.bind,arguments)}function P(f,T,w){if(!f)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,C),f.apply(T,K)}}return function(){return f.apply(T,arguments)}}function M(f,T,w){return M=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:P,M.apply(null,arguments)}function q(f,T){var w=Array.prototype.slice.call(arguments,1);return function(){var C=w.slice();return C.push.apply(C,arguments),f.apply(this,C)}}function Q(f,T){function w(){}w.prototype=T.prototype,f.aa=T.prototype,f.prototype=new w,f.prototype.constructor=f,f.Qb=function(C,K,ot){for(var It=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)It[xe-2]=arguments[xe];return T.prototype[K].apply(C,It)}}function nt(f){const T=f.length;if(0<T){const w=Array(T);for(let C=0;C<T;C++)w[C]=f[C];return w}return[]}function at(f,T){for(let w=1;w<arguments.length;w++){const C=arguments[w];if(v(C)){const K=f.length||0,ot=C.length||0;f.length=K+ot;for(let It=0;It<ot;It++)f[K+It]=C[It]}else f.push(C)}}class Tt{constructor(T,w){this.i=T,this.j=w,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function ut(f){return/^[\s\xa0]*$/.test(f)}function _t(){var f=y.navigator;return f&&(f=f.userAgent)?f:""}function Bt(f){return Bt[" "](f),f}Bt[" "]=function(){};var Ct=_t().indexOf("Gecko")!=-1&&!(_t().toLowerCase().indexOf("webkit")!=-1&&_t().indexOf("Edge")==-1)&&!(_t().indexOf("Trident")!=-1||_t().indexOf("MSIE")!=-1)&&_t().indexOf("Edge")==-1;function kt(f,T,w){for(const C in f)T.call(w,f[C],C,f)}function V(f,T){for(const w in f)T.call(void 0,f[w],w,f)}function O(f){const T={};for(const w in f)T[w]=f[w];return T}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(f,T){let w,C;for(let K=1;K<arguments.length;K++){C=arguments[K];for(w in C)f[w]=C[w];for(let ot=0;ot<k.length;ot++)w=k[ot],Object.prototype.hasOwnProperty.call(C,w)&&(f[w]=C[w])}}function B(f){var T=1;f=f.split(":");const w=[];for(;0<T&&f.length;)w.push(f.shift()),T--;return f.length&&w.push(f.join(":")),w}function H(f){y.setTimeout(()=>{throw f},0)}function N(){var f=ie;let T=null;return f.g&&(T=f.g,f.g=f.g.next,f.g||(f.h=null),T.next=null),T}class ce{constructor(){this.h=this.g=null}add(T,w){const C=pe.get();C.set(T,w),this.h?this.h.next=C:this.g=C,this.h=C}}var pe=new Tt(()=>new W,f=>f.reset());class W{constructor(){this.next=this.g=this.h=null}set(T,w){this.h=T,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let St,yt=!1,ie=new ce,D=()=>{const f=y.Promise.resolve(void 0);St=()=>{f.then(lt)}};var lt=()=>{for(var f;f=N();){try{f.h.call(f.g)}catch(w){H(w)}var T=pe;T.j(f),100>T.h&&(T.h++,f.next=T.g,T.g=f)}yt=!1};function bt(){this.s=this.s,this.C=this.C}bt.prototype.s=!1,bt.prototype.ma=function(){this.s||(this.s=!0,this.N())},bt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function st(f,T){this.type=f,this.g=this.target=T,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var Et=(function(){if(!y.addEventListener||!Object.defineProperty)return!1;var f=!1,T=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const w=()=>{};y.addEventListener("test",w,T),y.removeEventListener("test",w,T)}catch{}return f})();function xt(f,T){if(st.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var w=this.type=f.type,C=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=T,T=f.relatedTarget){if(Ct){t:{try{Bt(T.nodeName);var K=!0;break t}catch{}K=!1}K||(T=null)}}else w=="mouseover"?T=f.fromElement:w=="mouseout"&&(T=f.toElement);this.relatedTarget=T,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:At[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&xt.aa.h.call(this)}}Q(xt,st);var At={2:"touch",3:"pen",4:"mouse"};xt.prototype.h=function(){xt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ge="closure_listenable_"+(1e6*Math.random()|0),Zt=0;function ze(f,T,w,C,K){this.listener=f,this.proxy=null,this.src=T,this.type=w,this.capture=!!C,this.ha=K,this.key=++Zt,this.da=this.fa=!1}function Ue(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Xe(f){this.src=f,this.g={},this.h=0}Xe.prototype.add=function(f,T,w,C,K){var ot=f.toString();f=this.g[ot],f||(f=this.g[ot]=[],this.h++);var It=en(f,T,C,K);return-1<It?(T=f[It],w||(T.fa=!1)):(T=new ze(T,this.src,ot,!!C,K),T.fa=w,f.push(T)),T};function le(f,T){var w=T.type;if(w in f.g){var C=f.g[w],K=Array.prototype.indexOf.call(C,T,void 0),ot;(ot=0<=K)&&Array.prototype.splice.call(C,K,1),ot&&(Ue(T),f.g[w].length==0&&(delete f.g[w],f.h--))}}function en(f,T,w,C){for(var K=0;K<f.length;++K){var ot=f[K];if(!ot.da&&ot.listener==T&&ot.capture==!!w&&ot.ha==C)return K}return-1}var Un="closure_lm_"+(1e6*Math.random()|0),jn={};function xn(f,T,w,C,K){if(Array.isArray(T)){for(var ot=0;ot<T.length;ot++)xn(f,T[ot],w,C,K);return null}return w=Fi(w),f&&f[ge]?f.K(T,w,E(C)?!!C.capture:!1,K):nn(f,T,w,!1,C,K)}function nn(f,T,w,C,K,ot){if(!T)throw Error("Invalid event type");var It=E(K)?!!K.capture:!!K,xe=Me(f);if(xe||(f[Un]=xe=new Xe(f)),w=xe.add(T,w,C,It,ot),w.proxy)return w;if(C=yi(),w.proxy=C,C.src=f,C.listener=w,f.addEventListener)Et||(K=It),K===void 0&&(K=!1),f.addEventListener(T.toString(),C,K);else if(f.attachEvent)f.attachEvent(rn(T.toString()),C);else if(f.addListener&&f.removeListener)f.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return w}function yi(){function f(w){return T.call(f.src,f.listener,w)}const T=oi;return f}function Qn(f,T,w,C,K){if(Array.isArray(T))for(var ot=0;ot<T.length;ot++)Qn(f,T[ot],w,C,K);else C=E(C)?!!C.capture:!!C,w=Fi(w),f&&f[ge]?(f=f.i,T=String(T).toString(),T in f.g&&(ot=f.g[T],w=en(ot,w,C,K),-1<w&&(Ue(ot[w]),Array.prototype.splice.call(ot,w,1),ot.length==0&&(delete f.g[T],f.h--)))):f&&(f=Me(f))&&(T=f.g[T.toString()],f=-1,T&&(f=en(T,w,C,K)),(w=-1<f?T[f]:null)&&si(w))}function si(f){if(typeof f!="number"&&f&&!f.da){var T=f.src;if(T&&T[ge])le(T.i,f);else{var w=f.type,C=f.proxy;T.removeEventListener?T.removeEventListener(w,C,f.capture):T.detachEvent?T.detachEvent(rn(w),C):T.addListener&&T.removeListener&&T.removeListener(C),(w=Me(T))?(le(w,f),w.h==0&&(w.src=null,T[Un]=null)):Ue(f)}}}function rn(f){return f in jn?jn[f]:jn[f]="on"+f}function oi(f,T){if(f.da)f=!0;else{T=new xt(T,this);var w=f.listener,C=f.ha||f.src;f.fa&&si(f),f=w.call(C,T)}return f}function Me(f){return f=f[Un],f instanceof Xe?f:null}var Oi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fi(f){return typeof f=="function"?f:(f[Oi]||(f[Oi]=function(T){return f.handleEvent(T)}),f[Oi])}function he(){bt.call(this),this.i=new Xe(this),this.M=this,this.F=null}Q(he,bt),he.prototype[ge]=!0,he.prototype.removeEventListener=function(f,T,w,C){Qn(this,f,T,w,C)};function G(f,T){var w,C=f.F;if(C)for(w=[];C;C=C.F)w.push(C);if(f=f.M,C=T.type||T,typeof T=="string")T=new st(T,f);else if(T instanceof st)T.target=T.target||f;else{var K=T;T=new st(C,f),j(T,K)}if(K=!0,w)for(var ot=w.length-1;0<=ot;ot--){var It=T.g=w[ot];K=tt(It,C,!0,T)&&K}if(It=T.g=f,K=tt(It,C,!0,T)&&K,K=tt(It,C,!1,T)&&K,w)for(ot=0;ot<w.length;ot++)It=T.g=w[ot],K=tt(It,C,!1,T)&&K}he.prototype.N=function(){if(he.aa.N.call(this),this.i){var f=this.i,T;for(T in f.g){for(var w=f.g[T],C=0;C<w.length;C++)Ue(w[C]);delete f.g[T],f.h--}}this.F=null},he.prototype.K=function(f,T,w,C){return this.i.add(String(f),T,!1,w,C)},he.prototype.L=function(f,T,w,C){return this.i.add(String(f),T,!0,w,C)};function tt(f,T,w,C){if(T=f.i.g[String(T)],!T)return!0;T=T.concat();for(var K=!0,ot=0;ot<T.length;++ot){var It=T[ot];if(It&&!It.da&&It.capture==w){var xe=It.listener,Sn=It.ha||It.src;It.fa&&le(f.i,It),K=xe.call(Sn,C)!==!1&&K}}return K&&!C.defaultPrevented}function mt(f,T,w){if(typeof f=="function")w&&(f=M(f,w));else if(f&&typeof f.handleEvent=="function")f=M(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:y.setTimeout(f,T||0)}function Nt(f){f.g=mt(()=>{f.g=null,f.i&&(f.i=!1,Nt(f))},f.l);const T=f.h;f.h=null,f.m.apply(null,T)}class re extends bt{constructor(T,w){super(),this.m=T,this.l=w,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Nt(this)}N(){super.N(),this.g&&(y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mt(f){bt.call(this),this.h=f,this.g={}}Q(Mt,bt);var Ot=[];function Yt(f){kt(f.g,function(T,w){this.g.hasOwnProperty(w)&&si(T)},f),f.g={}}Mt.prototype.N=function(){Mt.aa.N.call(this),Yt(this)},Mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ae=y.JSON.stringify,hn=y.JSON.parse,Bn=class{stringify(f){return y.JSON.stringify(f,void 0)}parse(f){return y.JSON.parse(f,void 0)}};function ft(){}ft.prototype.h=null;function Rt(f){return f.h||(f.h=f.i())}function wt(){}var qt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wt(){st.call(this,"d")}Q(Wt,st);function Qt(){st.call(this,"c")}Q(Qt,st);var te={},$e=null;function Hn(){return $e=$e||new he}te.La="serverreachability";function Di(f){st.call(this,te.La,f)}Q(Di,st);function jr(f){const T=Hn();G(T,new Di(T))}te.STAT_EVENT="statevent";function os(f,T){st.call(this,te.STAT_EVENT,f),this.stat=T}Q(os,st);function He(f){const T=Hn();G(T,new os(T,f))}te.Ma="timingevent";function fn(f,T){st.call(this,te.Ma,f),this.size=T}Q(fn,st);function sn(f,T){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return y.setTimeout(function(){f()},T)}function vi(){this.g=!0}vi.prototype.xa=function(){this.g=!1};function qn(f,T,w,C,K,ot){f.info(function(){if(f.g)if(ot)for(var It="",xe=ot.split("&"),Sn=0;Sn<xe.length;Sn++){var Re=xe[Sn].split("=");if(1<Re.length){var Be=Re[0];Re=Re[1];var ln=Be.split("_");It=2<=ln.length&&ln[1]=="type"?It+(Be+"="+Re+"&"):It+(Be+"=redacted&")}}else It=null;else It=ot;return"XMLHTTP REQ ("+C+") [attempt "+K+"]: "+T+`
`+w+`
`+It})}function jt(f,T,w,C,K,ot,It){f.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+K+"]: "+T+`
`+w+`
`+ot+" "+It})}function Gi(f,T,w,C){f.info(function(){return"XMLHTTP TEXT ("+T+"): "+wr(f,w)+(C?" "+C:"")})}function Ds(f,T){f.info(function(){return"TIMEOUT: "+T})}vi.prototype.info=function(){};function wr(f,T){if(!f.g)return T;if(!T)return null;try{var w=JSON.parse(T);if(w){for(f=0;f<w.length;f++)if(Array.isArray(w[f])){var C=w[f];if(!(2>C.length)){var K=C[1];if(Array.isArray(K)&&!(1>K.length)){var ot=K[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(var It=1;It<K.length;It++)K[It]=""}}}}return Ae(w)}catch{return T}}var Zi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ai={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},li;function Te(){}Q(Te,ft),Te.prototype.g=function(){return new XMLHttpRequest},Te.prototype.i=function(){return{}},li=new Te;function bn(f,T,w,C){this.j=f,this.i=T,this.l=w,this.R=C||1,this.U=new Mt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new on}function on(){this.i=null,this.g="",this.h=!1}var wn={},Wi={};function ui(f,T,w){f.L=1,f.v=Li(an(T)),f.m=w,f.P=!0,Ti(f,null)}function Ti(f,T){f.F=Date.now(),Ls(f),f.A=an(f.v);var w=f.A,C=f.R;Array.isArray(C)||(C=[String(C)]),Aa(w.i,"t",C),f.C=0,w=f.j.J,f.h=new on,f.g=ml(f.j,w?T:null,!f.m),0<f.O&&(f.M=new re(M(f.Y,f,f.g),f.O)),T=f.U,w=f.g,C=f.ca;var K="readystatechange";Array.isArray(K)||(K&&(Ot[0]=K.toString()),K=Ot);for(var ot=0;ot<K.length;ot++){var It=xn(w,K[ot],C||T.handleEvent,!1,T.h||T);if(!It)break;T.g[It.key]=It}T=f.H?O(f.H):{},f.m?(f.u||(f.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,T)):(f.u="GET",f.g.ea(f.A,f.u,null,T)),jr(),qn(f.i,f.u,f.A,f.l,f.R,f.m)}bn.prototype.ca=function(f){f=f.target;const T=this.M;T&&$n(f)==3?T.j():this.Y(f)},bn.prototype.Y=function(f){try{if(f==this.g)t:{const ln=$n(this.g);var T=this.g.Ba();const Qr=this.g.Z();if(!(3>ln)&&(ln!=3||this.g&&(this.h.h||this.g.oa()||xa(this.g)))){this.J||ln!=4||T==7||(T==8||0>=Qr?jr(3):jr(2)),ls(this);var w=this.g.Z();this.X=w;e:if(as(this)){var C=xa(this.g);f="";var K=C.length,ot=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fn(this),Sr(this);var It="";break e}this.h.i=new y.TextDecoder}for(T=0;T<K;T++)this.h.h=!0,f+=this.h.i.decode(C[T],{stream:!(ot&&T==K-1)});C.length=0,this.h.g+=f,this.C=0,It=this.h.g}else It=this.g.oa();if(this.o=w==200,jt(this.i,this.u,this.A,this.l,this.R,ln,w),this.o){if(this.T&&!this.K){e:{if(this.g){var xe,Sn=this.g;if((xe=Sn.g?Sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ut(xe)){var Re=xe;break e}}Re=null}if(w=Re)Gi(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hr(this,w);else{this.o=!1,this.s=3,He(12),Fn(this),Sr(this);break t}}if(this.P){w=!0;let Je;for(;!this.J&&this.C<It.length;)if(Je=Br(this,It),Je==Wi){ln==4&&(this.s=4,He(14),w=!1),Gi(this.i,this.l,null,"[Incomplete Response]");break}else if(Je==wn){this.s=4,He(15),Gi(this.i,this.l,It,"[Invalid Chunk]"),w=!1;break}else Gi(this.i,this.l,Je,null),Hr(this,Je);if(as(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ln!=4||It.length!=0||this.h.h||(this.s=1,He(16),w=!1),this.o=this.o&&w,!w)Gi(this.i,this.l,It,"[Invalid Chunked Response]"),Fn(this),Sr(this);else if(0<It.length&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.ba&&!Be.M&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+It.length),ms(Be),Be.M=!0,He(11))}}else Gi(this.i,this.l,It,null),Hr(this,It);ln==4&&Fn(this),this.o&&!this.J&&(ln==4?Ia(this.j,this):(this.o=!1,Ls(this)))}else bu(this.g),w==400&&0<It.indexOf("Unknown SID")?(this.s=3,He(12)):(this.s=0,He(13)),Fn(this),Sr(this)}}}catch{}finally{}};function as(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Br(f,T){var w=f.C,C=T.indexOf(`
`,w);return C==-1?Wi:(w=Number(T.substring(w,C)),isNaN(w)?wn:(C+=1,C+w>T.length?Wi:(T=T.slice(C,C+w),f.C=C+w,T)))}bn.prototype.cancel=function(){this.J=!0,Fn(this)};function Ls(f){f.S=Date.now()+f.I,cl(f,f.I)}function cl(f,T){if(f.B!=null)throw Error("WatchDog timer not null");f.B=sn(M(f.ba,f),T)}function ls(f){f.B&&(y.clearTimeout(f.B),f.B=null)}bn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Ds(this.i,this.A),this.L!=2&&(jr(),He(17)),Fn(this),this.s=2,Sr(this)):cl(this,this.S-f)};function Sr(f){f.j.G==0||f.J||Ia(f.j,f)}function Fn(f){ls(f);var T=f.M;T&&typeof T.ma=="function"&&T.ma(),f.M=null,Yt(f.U),f.g&&(T=f.g,f.g=null,T.abort(),T.ma())}function Hr(f,T){try{var w=f.j;if(w.G!=0&&(w.g==f||Ee(w.h,f))){if(!f.K&&Ee(w.h,f)&&w.G==3){try{var C=w.Da.g.parse(T)}catch{C=null}if(Array.isArray(C)&&C.length==3){var K=C;if(K[0]==0){t:if(!w.u){if(w.g)if(w.g.F+3e3<f.F)wo(w),To(w);else break t;Eo(w),He(18)}}else w.za=K[1],0<w.za-w.T&&37500>K[2]&&w.F&&w.v==0&&!w.C&&(w.C=sn(M(w.Za,w),6e3));if(1>=xr(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Yr(w,11)}else if((f.K||w.g==f)&&wo(w),!ut(T))for(K=w.Da.g.parse(T),T=0;T<K.length;T++){let Re=K[T];if(w.T=Re[0],Re=Re[1],w.G==2)if(Re[0]=="c"){w.K=Re[1],w.ia=Re[2];const Be=Re[3];Be!=null&&(w.la=Be,w.j.info("VER="+w.la));const ln=Re[4];ln!=null&&(w.Aa=ln,w.j.info("SVER="+w.Aa));const Qr=Re[5];Qr!=null&&typeof Qr=="number"&&0<Qr&&(C=1.5*Qr,w.L=C,w.j.info("backChannelRequestTimeoutMs_="+C)),C=w;const Je=f.g;if(Je){const Mr=Je.g?Je.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mr){var ot=C.h;ot.g||Mr.indexOf("spdy")==-1&&Mr.indexOf("quic")==-1&&Mr.indexOf("h2")==-1||(ot.j=ot.l,ot.g=new Set,ot.h&&(je(ot,ot.h),ot.h=null))}if(C.D){const Or=Je.g?Je.g.getResponseHeader("X-HTTP-Session-Id"):null;Or&&(C.ya=Or,se(C.I,C.D,Or))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-f.F,w.j.info("Handshake RTT: "+w.R+"ms")),C=w;var It=f;if(C.qa=Ao(C,C.J?C.ia:null,C.W),It.K){On(C.h,It);var xe=It,Sn=C.L;Sn&&(xe.I=Sn),xe.B&&(ls(xe),Ls(xe)),C.g=It}else cr(C);0<w.i.length&&ds(w)}else Re[0]!="stop"&&Re[0]!="close"||Yr(w,7);else w.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?Yr(w,7):vo(w):Re[0]!="noop"&&w.l&&w.l.ta(Re),w.v=0)}}jr(4)}catch{}}var us=class{constructor(f,T){this.g=f,this.map=T}};function Ar(f){this.l=f||10,y.PerformanceNavigationTiming?(f=y.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(y.chrome&&y.chrome.loadTimes&&y.chrome.loadTimes()&&y.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ns(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function xr(f){return f.h?1:f.g?f.g.size:0}function Ee(f,T){return f.h?f.h==T:f.g?f.g.has(T):!1}function je(f,T){f.g?f.g.add(T):f.h=T}function On(f,T){f.h&&f.h==T?f.h=null:f.g&&f.g.has(T)&&f.g.delete(T)}Ar.prototype.cancel=function(){if(this.i=Rr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Rr(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let T=f.i;for(const w of f.g.values())T=T.concat(w.D);return T}return nt(f.i)}function cs(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(v(f)){for(var T=[],w=f.length,C=0;C<w;C++)T.push(f[C]);return T}T=[],w=0;for(C in f)T[w++]=f[C];return T}function hs(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(v(f)||typeof f=="string"){var T=[];f=f.length;for(var w=0;w<f;w++)T.push(w);return T}T=[],w=0;for(const C in f)T[w++]=C;return T}}}function de(f,T){if(f.forEach&&typeof f.forEach=="function")f.forEach(T,void 0);else if(v(f)||typeof f=="string")Array.prototype.forEach.call(f,T,void 0);else for(var w=hs(f),C=cs(f),K=C.length,ot=0;ot<K;ot++)T.call(void 0,C[ot],w&&w[ot],f)}var qe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wa(f,T){if(f){f=f.split("&");for(var w=0;w<f.length;w++){var C=f[w].indexOf("="),K=null;if(0<=C){var ot=f[w].substring(0,C);K=f[w].substring(C+1)}else ot=f[w];T(ot,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function dn(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof dn){this.h=f.h,ks(this,f.j),this.o=f.o,this.g=f.g,sr(this,f.s),this.l=f.l;var T=f.i,w=new ar;w.i=T.i,T.g&&(w.g=new Map(T.g),w.h=T.h),ci(this,w),this.m=f.m}else f&&(T=String(f).match(qe))?(this.h=!1,ks(this,T[1]||"",!0),this.o=Kn(T[2]||""),this.g=Kn(T[3]||"",!0),sr(this,T[4]),this.l=Kn(T[5]||"",!0),ci(this,T[6]||"",!0),this.m=Kn(T[7]||"")):(this.h=!1,this.i=new ar(null,this.h))}dn.prototype.toString=function(){var f=[],T=this.j;T&&f.push(or(T,qr,!0),":");var w=this.g;return(w||T=="file")&&(f.push("//"),(T=this.o)&&f.push(or(T,qr,!0),"@"),f.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&f.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&f.push("/"),f.push(or(w,w.charAt(0)=="/"?Sa:Vs,!0))),(w=this.i.toString())&&f.push("?",w),(w=this.m)&&f.push("#",or(w,fs)),f.join("")};function an(f){return new dn(f)}function ks(f,T,w){f.j=w?Kn(T,!0):T,f.j&&(f.j=f.j.replace(/:$/,""))}function sr(f,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);f.s=T}else f.s=null}function ci(f,T,w){T instanceof ar?(f.i=T,Ni(f.i,f.h)):(w||(T=or(T,go)),f.i=new ar(T,f.h))}function se(f,T,w){f.i.set(T,w)}function Li(f){return se(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Kn(f,T){return f?T?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function or(f,T,w){return typeof f=="string"?(f=encodeURI(f).replace(T,po),w&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function po(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var qr=/[#\/\?@]/g,Vs=/[#\?:]/g,Sa=/[#\?]/g,go=/[#\?@]/g,fs=/#/g;function ar(f,T){this.h=this.g=null,this.i=f||null,this.j=!!T}function hi(f){f.g||(f.g=new Map,f.h=0,f.i&&wa(f.i,function(T,w){f.add(decodeURIComponent(T.replace(/\+/g," ")),w)}))}r=ar.prototype,r.add=function(f,T){hi(this),this.i=null,f=Kt(this,f);var w=this.g.get(f);return w||this.g.set(f,w=[]),w.push(T),this.h+=1,this};function Ir(f,T){hi(f),T=Kt(f,T),f.g.has(T)&&(f.i=null,f.h-=f.g.get(T).length,f.g.delete(T))}function lr(f,T){return hi(f),T=Kt(f,T),f.g.has(T)}r.forEach=function(f,T){hi(this),this.g.forEach(function(w,C){w.forEach(function(K){f.call(T,K,C,this)},this)},this)},r.na=function(){hi(this);const f=Array.from(this.g.values()),T=Array.from(this.g.keys()),w=[];for(let C=0;C<T.length;C++){const K=f[C];for(let ot=0;ot<K.length;ot++)w.push(T[C])}return w},r.V=function(f){hi(this);let T=[];if(typeof f=="string")lr(this,f)&&(T=T.concat(this.g.get(Kt(this,f))));else{f=Array.from(this.g.values());for(let w=0;w<f.length;w++)T=T.concat(f[w])}return T},r.set=function(f,T){return hi(this),this.i=null,f=Kt(this,f),lr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[T]),this.h+=1,this},r.get=function(f,T){return f?(f=this.V(f),0<f.length?String(f[0]):T):T};function Aa(f,T,w){Ir(f,T),0<w.length&&(f.i=null,f.g.set(Kt(f,T),nt(w)),f.h+=w.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],T=Array.from(this.g.keys());for(var w=0;w<T.length;w++){var C=T[w];const ot=encodeURIComponent(String(C)),It=this.V(C);for(C=0;C<It.length;C++){var K=ot;It[C]!==""&&(K+="="+encodeURIComponent(String(It[C]))),f.push(K)}}return this.i=f.join("&")};function Kt(f,T){return T=String(T),f.j&&(T=T.toLowerCase()),T}function Ni(f,T){T&&!f.j&&(hi(f),f.i=null,f.g.forEach(function(w,C){var K=C.toLowerCase();C!=K&&(Ir(this,C),Aa(this,K,w))},f)),f.j=T}function Oe(f,T){const w=new vi;if(y.Image){const C=new Image;C.onload=q(Ei,w,"TestLoadImage: loaded",!0,T,C),C.onerror=q(Ei,w,"TestLoadImage: error",!1,T,C),C.onabort=q(Ei,w,"TestLoadImage: abort",!1,T,C),C.ontimeout=q(Ei,w,"TestLoadImage: timeout",!1,T,C),y.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=f}else T(!1)}function Yi(f,T){const w=new vi,C=new AbortController,K=setTimeout(()=>{C.abort(),Ei(w,"TestPingServer: timeout",!1,T)},1e4);fetch(f,{signal:C.signal}).then(ot=>{clearTimeout(K),ot.ok?Ei(w,"TestPingServer: ok",!0,T):Ei(w,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(K),Ei(w,"TestPingServer: error",!1,T)})}function Ei(f,T,w,C,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),C(w)}catch{}}function Fr(){this.g=new Bn}function Qi(f,T,w){const C=w||"";try{de(f,function(K,ot){let It=K;E(K)&&(It=Ae(K)),T.push(C+ot+"="+encodeURIComponent(It))})}catch(K){throw T.push(C+"type="+encodeURIComponent("_badmap")),K}}function bi(f){this.l=f.Ub||null,this.j=f.eb||!1}Q(bi,ft),bi.prototype.g=function(){return new ur(this.l,this.j)},bi.prototype.i=(function(f){return function(){return f}})({});function ur(f,T){he.call(this),this.D=f,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Q(ur,he),r=ur.prototype,r.open=function(f,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=T,this.readyState=1,Xn(this)},r.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(T.body=f),(this.D||y).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ze(this)),this.readyState=0},r.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof y.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gr(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gr(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}r.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var T=f.value?f.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!f.done}))&&(this.response=this.responseText+=T)}f.done?Ze(this):Xn(this),this.readyState==3&&Gr(this)}},r.Ra=function(f){this.g&&(this.response=this.responseText=f,Ze(this))},r.Qa=function(f){this.g&&(this.response=f,Ze(this))},r.ga=function(){this.g&&Ze(this)};function Ze(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Xn(f)}r.setRequestHeader=function(f,T){this.u.append(f,T)},r.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],T=this.h.entries();for(var w=T.next();!w.done;)w=w.value,f.push(w[0]+": "+w[1]),w=T.next();return f.join(`\r
`)};function Xn(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(ur.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function _o(f){let T="";return kt(f,function(w,C){T+=C,T+=":",T+=w,T+=`\r
`}),T}function Rn(f,T,w){t:{for(C in w){var C=!1;break t}C=!0}C||(w=_o(w),typeof f=="string"?w!=null&&encodeURIComponent(String(w)):se(f,T,w))}function ke(f){he.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Q(ke,he);var zs=/^https?$/i,Zr=["POST","PUT"];r=ke.prototype,r.Ha=function(f){this.J=f},r.ea=function(f,T,w,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);T=T?T.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():li.g(),this.v=this.o?Rt(this.o):Rt(li),this.g.onreadystatechange=M(this.Ea,this);try{this.B=!0,this.g.open(T,String(f),!0),this.B=!1}catch(ot){hl(this,ot);return}if(f=w||"",w=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var K in C)w.set(K,C[K]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const ot of C.keys())w.set(ot,C.get(ot));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(w.keys()).find(ot=>ot.toLowerCase()=="content-type"),K=y.FormData&&f instanceof y.FormData,!(0<=Array.prototype.indexOf.call(Zr,T,void 0))||C||K||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ot,It]of w)this.g.setRequestHeader(ot,It);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gn(this),this.u=!0,this.g.send(f),this.u=!1}catch(ot){hl(this,ot)}};function hl(f,T){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=T,f.m=5,Us(f),Cr(f)}function Us(f){f.A||(f.A=!0,G(f,"complete"),G(f,"error"))}r.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,G(this,"complete"),G(this,"abort"),Cr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cr(this,!0)),ke.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?_e(this):this.bb())},r.bb=function(){_e(this)};function _e(f){if(f.h&&typeof p<"u"&&(!f.v[1]||$n(f)!=4||f.Z()!=2)){if(f.u&&$n(f)==4)mt(f.Ea,0,f);else if(G(f,"readystatechange"),$n(f)==4){f.h=!1;try{const It=f.Z();t:switch(It){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break t;default:T=!1}var w;if(!(w=T)){var C;if(C=It===0){var K=String(f.D).match(qe)[1]||null;!K&&y.self&&y.self.location&&(K=y.self.location.protocol.slice(0,-1)),C=!zs.test(K?K.toLowerCase():"")}w=C}if(w)G(f,"complete"),G(f,"success");else{f.m=6;try{var ot=2<$n(f)?f.g.statusText:""}catch{ot=""}f.l=ot+" ["+f.Z()+"]",Us(f)}}finally{Cr(f)}}}}function Cr(f,T){if(f.g){Gn(f);const w=f.g,C=f.v[0]?()=>{}:null;f.g=null,f.v=null,T||G(f,"ready");try{w.onreadystatechange=C}catch{}}}function Gn(f){f.I&&(y.clearTimeout(f.I),f.I=null)}r.isActive=function(){return!!this.g};function $n(f){return f.g?f.g.readyState:0}r.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(f){if(this.g){var T=this.g.responseText;return f&&T.indexOf(f)==0&&(T=T.substring(f.length)),hn(T)}};function xa(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function bu(f){const T={};f=(f.g&&2<=$n(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<f.length;C++){if(ut(f[C]))continue;var w=B(f[C]);const K=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ot=T[K]||[];T[K]=ot,ot.push(w)}V(T,function(C){return C.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wr(f,T,w){return w&&w.internalChannelParams&&w.internalChannelParams[f]||T}function yo(f){this.Aa=0,this.i=[],this.j=new vi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wr("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wr("baseRetryDelayMs",5e3,f),this.cb=Wr("retryDelaySeedMs",1e4,f),this.Wa=Wr("forwardChannelMaxRetries",2,f),this.wa=Wr("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Ar(f&&f.concurrentRequestLimit),this.Da=new Fr,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=yo.prototype,r.la=8,r.G=1,r.connect=function(f,T,w,C){He(0),this.W=f,this.H=T||{},w&&C!==void 0&&(this.H.OSID=w,this.H.OAID=C),this.F=this.X,this.I=Ao(this,null,this.W),ds(this)};function vo(f){if(fl(f),f.G==3){var T=f.U++,w=an(f.I);if(se(w,"SID",f.K),se(w,"RID",T),se(w,"TYPE","terminate"),js(f,w),T=new bn(f,f.j,T),T.L=2,T.v=Li(an(w)),w=!1,y.navigator&&y.navigator.sendBeacon)try{w=y.navigator.sendBeacon(T.v.toString(),"")}catch{}!w&&y.Image&&(new Image().src=T.v,w=!0),w||(T.g=ml(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Ls(T)}dl(f)}function To(f){f.g&&(ms(f),f.g.cancel(),f.g=null)}function fl(f){To(f),f.u&&(y.clearTimeout(f.u),f.u=null),wo(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&y.clearTimeout(f.s),f.s=null)}function ds(f){if(!Ns(f.h)&&!f.s){f.s=!0;var T=f.Ga;St||D(),yt||(St(),yt=!0),ie.add(T,f),f.B=0}}function wu(f,T){return xr(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=T.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=sn(M(f.Ga,f,T),So(f,f.B)),f.B++,!0)}r.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const K=new bn(this,this.j,f);let ot=this.o;if(this.S&&(ot?(ot=O(ot),j(ot,this.S)):ot=this.S),this.m!==null||this.O||(K.H=ot,ot=null),this.P)t:{for(var T=0,w=0;w<this.i.length;w++){e:{var C=this.i[w];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break e}C=void 0}if(C===void 0)break;if(T+=C,4096<T){T=w;break t}if(T===4096||w===this.i.length-1){T=w+1;break t}}T=1e3}else T=1e3;T=Ra(this,K,T),w=an(this.I),se(w,"RID",f),se(w,"CVER",22),this.D&&se(w,"X-HTTP-Session-Id",this.D),js(this,w),ot&&(this.O?T="headers="+encodeURIComponent(String(_o(ot)))+"&"+T:this.m&&Rn(w,this.m,ot)),je(this.h,K),this.Ua&&se(w,"TYPE","init"),this.P?(se(w,"$req",T),se(w,"SID","null"),K.T=!0,ui(K,w,null)):ui(K,w,T),this.G=2}}else this.G==3&&(f?wi(this,f):this.i.length==0||Ns(this.h)||wi(this))};function wi(f,T){var w;T?w=T.l:w=f.U++;const C=an(f.I);se(C,"SID",f.K),se(C,"RID",w),se(C,"AID",f.T),js(f,C),f.m&&f.o&&Rn(C,f.m,f.o),w=new bn(f,f.j,w,f.B+1),f.m===null&&(w.H=f.o),T&&(f.i=T.D.concat(f.i)),T=Ra(f,w,1e3),w.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),je(f.h,w),ui(w,C,T)}function js(f,T){f.H&&kt(f.H,function(w,C){se(T,C,w)}),f.l&&de({},function(w,C){se(T,C,w)})}function Ra(f,T,w){w=Math.min(f.i.length,w);var C=f.l?M(f.l.Na,f.l,f):null;t:{var K=f.i;let ot=-1;for(;;){const It=["count="+w];ot==-1?0<w?(ot=K[0].g,It.push("ofs="+ot)):ot=0:It.push("ofs="+ot);let xe=!0;for(let Sn=0;Sn<w;Sn++){let Re=K[Sn].g;const Be=K[Sn].map;if(Re-=ot,0>Re)ot=Math.max(0,K[Sn].g-100),xe=!1;else try{Qi(Be,It,"req"+Re+"_")}catch{C&&C(Be)}}if(xe){C=It.join("&");break t}}}return f=f.i.splice(0,w),T.D=f,C}function cr(f){if(!f.g&&!f.u){f.Y=1;var T=f.Fa;St||D(),yt||(St(),yt=!0),ie.add(T,f),f.v=0}}function Eo(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=sn(M(f.Fa,f),So(f,f.v)),f.v++,!0)}r.Fa=function(){if(this.u=null,bo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=sn(M(this.ab,this),f)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,He(10),To(this),bo(this))};function ms(f){f.A!=null&&(y.clearTimeout(f.A),f.A=null)}function bo(f){f.g=new bn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var T=an(f.qa);se(T,"RID","rpc"),se(T,"SID",f.K),se(T,"AID",f.T),se(T,"CI",f.F?"0":"1"),!f.F&&f.ja&&se(T,"TO",f.ja),se(T,"TYPE","xmlhttp"),js(f,T),f.m&&f.o&&Rn(T,f.m,f.o),f.L&&(f.g.I=f.L);var w=f.g;f=f.ia,w.L=1,w.v=Li(an(T)),w.m=null,w.P=!0,Ti(w,f)}r.Za=function(){this.C!=null&&(this.C=null,To(this),Eo(this),He(19))};function wo(f){f.C!=null&&(y.clearTimeout(f.C),f.C=null)}function Ia(f,T){var w=null;if(f.g==T){wo(f),ms(f),f.g=null;var C=2}else if(Ee(f.h,T))w=T.D,On(f.h,T),C=1;else return;if(f.G!=0){if(T.o)if(C==1){w=T.m?T.m.length:0,T=Date.now()-T.F;var K=f.B;C=Hn(),G(C,new fn(C,w)),ds(f)}else cr(f);else if(K=T.s,K==3||K==0&&0<T.X||!(C==1&&wu(f,T)||C==2&&Eo(f)))switch(w&&0<w.length&&(T=f.h,T.i=T.i.concat(w)),K){case 1:Yr(f,5);break;case 4:Yr(f,10);break;case 3:Yr(f,6);break;default:Yr(f,2)}}}function So(f,T){let w=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(w*=2),w*T}function Yr(f,T){if(f.j.info("Error code "+T),T==2){var w=M(f.fb,f),C=f.Xa;const K=!C;C=new dn(C||"//www.google.com/images/cleardot.gif"),y.location&&y.location.protocol=="http"||ks(C,"https"),Li(C),K?Oe(C.toString(),w):Yi(C.toString(),w)}else He(2);f.G=0,f.l&&f.l.sa(T),dl(f),fl(f)}r.fb=function(f){f?(this.j.info("Successfully pinged google.com"),He(2)):(this.j.info("Failed to ping google.com"),He(1))};function dl(f){if(f.G=0,f.ka=[],f.l){const T=Rr(f.h);(T.length!=0||f.i.length!=0)&&(at(f.ka,T),at(f.ka,f.i),f.h.i.length=0,nt(f.i),f.i.length=0),f.l.ra()}}function Ao(f,T,w){var C=w instanceof dn?an(w):new dn(w);if(C.g!="")T&&(C.g=T+"."+C.g),sr(C,C.s);else{var K=y.location;C=K.protocol,T=T?T+"."+K.hostname:K.hostname,K=+K.port;var ot=new dn(null);C&&ks(ot,C),T&&(ot.g=T),K&&sr(ot,K),w&&(ot.l=w),C=ot}return w=f.D,T=f.ya,w&&T&&se(C,w,T),se(C,"VER",f.la),js(f,C),C}function ml(f,T,w){if(T&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=f.Ca&&!f.pa?new ke(new bi({eb:w})):new ke(f.pa),T.Ha(f.J),T}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ca(){}r=Ca.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Bs(){}Bs.prototype.g=function(f,T){return new Dn(f,T)};function Dn(f,T){he.call(this),this.g=new yo(T),this.l=f,this.h=T&&T.messageUrlParams||null,f=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(f?f["X-WebChannel-Content-Type"]=T.messageContentType:f={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(f?f["X-WebChannel-Client-Profile"]=T.va:f={"X-WebChannel-Client-Profile":T.va}),this.g.S=f,(f=T&&T.Sb)&&!ut(f)&&(this.g.m=f),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!ut(T)&&(this.g.D=T,f=this.h,f!==null&&T in f&&(f=this.h,T in f&&delete f[T])),this.j=new Si(this)}Q(Dn,he),Dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){vo(this.g)},Dn.prototype.o=function(f){var T=this.g;if(typeof f=="string"){var w={};w.__data__=f,f=w}else this.u&&(w={},w.__data__=Ae(f),f=w);T.i.push(new us(T.Ya++,f)),T.G==3&&ds(T)},Dn.prototype.N=function(){this.g.l=null,delete this.j,vo(this.g),delete this.g,Dn.aa.N.call(this)};function Pr(f){Wt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var T=f.__sm__;if(T){t:{for(const w in T){f=w;break t}f=void 0}(this.i=f)&&(f=this.i,T=T!==null&&f in T?T[f]:void 0),this.data=T}else this.data=f}Q(Pr,Wt);function pl(){Qt.call(this),this.status=1}Q(pl,Qt);function Si(f){this.g=f}Q(Si,Ca),Si.prototype.ua=function(){G(this.g,"a")},Si.prototype.ta=function(f){G(this.g,new Pr(f))},Si.prototype.sa=function(f){G(this.g,new pl)},Si.prototype.ra=function(){G(this.g,"b")},Bs.prototype.createWebChannel=Bs.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,LE=function(){return new Bs},DE=function(){return Hn()},OE=te,wp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zi.NO_ERROR=0,Zi.TIMEOUT=8,Zi.HTTP_ERROR=6,yf=Zi,ai.COMPLETE="complete",ME=ai,wt.EventType=qt,qt.OPEN="a",qt.CLOSE="b",qt.ERROR="c",qt.MESSAGE="d",he.prototype.listen=he.prototype.K,pc=wt,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,PE=ke}).apply(typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{});const w0="@firebase/firestore",S0="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ci.UNAUTHENTICATED=new Ci(null),Ci.GOOGLE_CREDENTIALS=new Ci("google-credentials-uid"),Ci.FIRST_PARTY=new Ci("first-party-uid"),Ci.MOCK_USER=new Ci("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _u="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=new Zp("@firebase/firestore");function Wl(){return rl.logLevel}function Vt(r,...t){if(rl.logLevel<=Ie.DEBUG){const n=t.map(sg);rl.debug(`Firestore (${_u}): ${r}`,...n)}}function lo(r,...t){if(rl.logLevel<=Ie.ERROR){const n=t.map(sg);rl.error(`Firestore (${_u}): ${r}`,...n)}}function ru(r,...t){if(rl.logLevel<=Ie.WARN){const n=t.map(sg);rl.warn(`Firestore (${_u}): ${r}`,...n)}}function sg(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(r,t,n){let o="Unexpected state";typeof t=="string"?o=t:n=t,NE(r,o,n)}function NE(r,t,n){let o=`FIRESTORE (${_u}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{o+=" CONTEXT: "+JSON.stringify(n)}catch{o+=" CONTEXT: "+n}throw lo(o),new Error(o)}function Ne(r,t,n,o){let l="Unexpected state";typeof n=="string"?l=n:o=n,r||NE(t,l,o)}function me(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pt extends ho{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class aI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Ci.UNAUTHENTICATED)))}shutdown(){}}class lI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class uI{constructor(t){this.t=t,this.currentUser=Ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ne(this.o===void 0,42304);let o=this.i;const l=v=>this.i!==o?(o=this.i,n(v)):Promise.resolve();let h=new Rs;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Rs,t.enqueueRetryable((()=>l(this.currentUser)))};const p=()=>{const v=h;t.enqueueRetryable((async()=>{await v.promise,await l(this.currentUser)}))},y=v=>{Vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((v=>y(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?y(v):(Vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Rs)}}),0),p()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==t?(Vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Ne(typeof o.accessToken=="string",31837,{l:o}),new kE(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ne(t===null||typeof t=="string",2055,{h:t}),new Ci(t)}}class cI{constructor(t,n,o){this.P=t,this.T=n,this.I=o,this.type="FirstParty",this.user=Ci.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class hI{constructor(t,n,o){this.P=t,this.T=n,this.I=o}getToken(){return Promise.resolve(new cI(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(Ci.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class A0{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fI{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nr(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ne(this.o===void 0,3512);const o=h=>{h.error!=null&&Vt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const p=h.token!==this.m;return this.m=h.token,Vt("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?n(h.token):Promise.resolve()};this.o=h=>{t.enqueueRetryable((()=>o(h)))};const l=h=>{Vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>l(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?l(h):Vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new A0(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new A0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let o=0;o<r;o++)n[o]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const l=dI(40);for(let h=0;h<l.length;++h)o.length<20&&l[h]<n&&(o+=t.charAt(l[h]%62))}return o}}function Ce(r,t){return r<t?-1:r>t?1:0}function Sp(r,t){const n=Math.min(r.length,t.length);for(let o=0;o<n;o++){const l=r.charAt(o),h=t.charAt(o);if(l!==h)return up(l)===up(h)?Ce(l,h):up(l)?1:-1}return Ce(r.length,t.length)}const mI=55296,pI=57343;function up(r){const t=r.charCodeAt(0);return t>=mI&&t<=pI}function su(r,t,n){return r.length===t.length&&r.every(((o,l)=>n(o,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="__name__";class Ss{constructor(t,n,o){n===void 0?n=0:n>t.length&&Xt(637,{offset:n,range:t.length}),o===void 0?o=t.length-n:o>t.length-n&&Xt(1746,{length:o,range:t.length-n}),this.segments=t,this.offset=n,this.len=o}get length(){return this.len}isEqual(t){return Ss.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Ss?t.forEach((o=>{n.push(o)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,o=this.limit();n<o;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const o=Math.min(t.length,n.length);for(let l=0;l<o;l++){const h=Ss.compareSegments(t.get(l),n.get(l));if(h!==0)return h}return Ce(t.length,n.length)}static compareSegments(t,n){const o=Ss.isNumericId(t),l=Ss.isNumericId(n);return o&&!l?-1:!o&&l?1:o&&l?Ss.extractNumericId(t).compare(Ss.extractNumericId(n)):Sp(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ca.fromString(t.substring(4,t.length-2))}}class Ke extends Ss{construct(t,n,o){return new Ke(t,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const o of t){if(o.indexOf("//")>=0)throw new Pt(ct.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((l=>l.length>0)))}return new Ke(n)}static emptyPath(){return new Ke([])}}const gI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gi extends Ss{construct(t,n,o){return new gi(t,n,o)}static isValidIdentifier(t){return gI.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gi.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===x0}static keyField(){return new gi([x0])}static fromServerFormat(t){const n=[];let o="",l=0;const h=()=>{if(o.length===0)throw new Pt(ct.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let p=!1;for(;l<t.length;){const y=t[l];if(y==="\\"){if(l+1===t.length)throw new Pt(ct.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const v=t[l+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new Pt(ct.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=v,l+=2}else y==="`"?(p=!p,l++):y!=="."||p?(o+=y,l++):(h(),l++)}if(h(),p)throw new Pt(ct.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new gi(n)}static emptyPath(){return new gi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t){this.path=t}static fromPath(t){return new Gt(Ke.fromString(t))}static fromName(t){return new Gt(Ke.fromString(t).popFirst(5))}static empty(){return new Gt(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ke.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ke.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Gt(new Ke(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(r,t,n){if(!n)throw new Pt(ct.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function _I(r,t,n,o){if(t===!0&&o===!0)throw new Pt(ct.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function R0(r){if(!Gt.isDocumentKey(r))throw new Pt(ct.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function I0(r){if(Gt.isDocumentKey(r))throw new Pt(ct.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function zE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function td(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(o){return o.constructor?o.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Xt(12329,{type:typeof r})}function ir(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new Pt(ct.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=td(r);throw new Pt(ct.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}function yI(r,t){if(t<=0)throw new Pt(ct.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(r,t){const n={typeString:r};return t&&(n.value=t),n}function Qc(r,t){if(!zE(r))throw new Pt(ct.INVALID_ARGUMENT,"JSON must be an object");let n;for(const o in t)if(t[o]){const l=t[o].typeString,h="value"in t[o]?{value:t[o].value}:void 0;if(!(o in r)){n=`JSON missing required field: '${o}'`;break}const p=r[o];if(l&&typeof p!==l){n=`JSON field '${o}' must be a ${l}.`;break}if(h!==void 0&&p!==h.value){n=`Expected '${o}' field to equal '${h.value}'`;break}}if(n)throw new Pt(ct.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=-62135596800,P0=1e6;class mn{static now(){return mn.fromMillis(Date.now())}static fromDate(t){return mn.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),o=Math.floor((t-1e3*n)*P0);return new mn(n,o)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Pt(ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Pt(ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<C0)throw new Pt(ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Pt(ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/P0}_compareTo(t){return this.seconds===t.seconds?Ce(this.nanoseconds,t.nanoseconds):Ce(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Qc(t,mn._jsonSchema))return new mn(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-C0;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mn._jsonSchemaVersion="firestore/timestamp/1.0",mn._jsonSchema={type:zn("string",mn._jsonSchemaVersion),seconds:zn("number"),nanoseconds:zn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{static fromTimestamp(t){return new oe(t)}static min(){return new oe(new mn(0,0))}static max(){return new oe(new mn(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=-1;function vI(r,t){const n=r.toTimestamp().seconds,o=r.toTimestamp().nanoseconds+1,l=oe.fromTimestamp(o===1e9?new mn(n+1,0):new mn(n,o));return new da(l,Gt.empty(),t)}function TI(r){return new da(r.readTime,r.key,Lc)}class da{constructor(t,n,o){this.readTime=t,this.documentKey=n,this.largestBatchId=o}static min(){return new da(oe.min(),Gt.empty(),Lc)}static max(){return new da(oe.max(),Gt.empty(),Lc)}}function EI(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=Gt.comparator(r.documentKey,t.documentKey),n!==0?n:Ce(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yu(r){if(r.code!==ct.FAILED_PRECONDITION||r.message!==bI)throw r;Vt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Xt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new gt(((o,l)=>{this.nextCallback=h=>{this.wrapSuccess(t,h).next(o,l)},this.catchCallback=h=>{this.wrapFailure(n,h).next(o,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof gt?n:gt.resolve(n)}catch(n){return gt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):gt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):gt.reject(n)}static resolve(t){return new gt(((n,o)=>{n(t)}))}static reject(t){return new gt(((n,o)=>{o(t)}))}static waitFor(t){return new gt(((n,o)=>{let l=0,h=0,p=!1;t.forEach((y=>{++l,y.next((()=>{++h,p&&h===l&&n()}),(v=>o(v)))})),p=!0,h===l&&n()}))}static or(t){let n=gt.resolve(!1);for(const o of t)n=n.next((l=>l?gt.resolve(l):o()));return n}static forEach(t,n){const o=[];return t.forEach(((l,h)=>{o.push(n.call(this,l,h))})),this.waitFor(o)}static mapArray(t,n){return new gt(((o,l)=>{const h=t.length,p=new Array(h);let y=0;for(let v=0;v<h;v++){const E=v;n(t[E]).next((x=>{p[E]=x,++y,y===h&&o(p)}),(x=>l(x)))}}))}static doWhile(t,n){return new gt(((o,l)=>{const h=()=>{t()===!0?n().next((()=>{h()}),l):o()};h()}))}}function SI(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vu(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>n.writeSequenceNumber(o))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}ed.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=-1;function Kc(r){return r==null}function Mf(r){return r===0&&1/r==-1/0}function AI(r){return typeof r=="number"&&Number.isInteger(r)&&!Mf(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="";function xI(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=M0(t)),t=RI(r.get(n),t);return M0(t)}function RI(r,t){let n=t;const o=r.length;for(let l=0;l<o;l++){const h=r.charAt(l);switch(h){case"\0":n+="";break;case UE:n+="";break;default:n+=h}}return n}function M0(r){return r+UE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function Ea(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function jE(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t,n){this.comparator=t,this.root=n||pi.EMPTY}insert(t,n){return new En(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,pi.BLACK,null,null))}remove(t){return new En(this.comparator,this.root.remove(t,this.comparator).copy(null,null,pi.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(t,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(t){let n=0,o=this.root;for(;!o.isEmpty();){const l=this.comparator(t,o.key);if(l===0)return n+o.left.size;l<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,o)=>(t(n,o),!1)))}toString(){const t=[];return this.inorderTraversal(((n,o)=>(t.push(`${n}:${o}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new cf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new cf(this.root,t,this.comparator,!1)}getReverseIterator(){return new cf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new cf(this.root,t,this.comparator,!0)}}class cf{constructor(t,n,o,l){this.isReverse=l,this.nodeStack=[];let h=1;for(;!t.isEmpty();)if(h=n?o(t.key,n):1,n&&l&&(h*=-1),h<0)t=this.isReverse?t.left:t.right;else{if(h===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class pi{constructor(t,n,o,l,h){this.key=t,this.value=n,this.color=o??pi.RED,this.left=l??pi.EMPTY,this.right=h??pi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,o,l,h){return new pi(t??this.key,n??this.value,o??this.color,l??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,o){let l=this;const h=o(t,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(t,n,o),null):h===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,o)),l.fixUp()}removeMin(){if(this.left.isEmpty())return pi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let o,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return pi.EMPTY;o=l.right.min(),l=l.copy(o.key,o.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Xt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Xt(27949);return t+(this.isRed()?0:1)}}pi.EMPTY=null,pi.RED=!0,pi.BLACK=!1;pi.EMPTY=new class{constructor(){this.size=0}get key(){throw Xt(57766)}get value(){throw Xt(16141)}get color(){throw Xt(16727)}get left(){throw Xt(29726)}get right(){throw Xt(36894)}copy(t,n,o,l,h){return this}insert(t,n,o){return new pi(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(t){this.comparator=t,this.data=new En(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,o)=>(t(n),!1)))}forEachInRange(t,n){const o=this.data.getIteratorFrom(t[0]);for(;o.hasNext();){const l=o.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new D0(this.data.getIterator())}getIteratorFrom(t){return new D0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((o=>{n=n.add(o)})),n}isEqual(t){if(!(t instanceof Yn)||this.size!==t.size)return!1;const n=this.data.getIterator(),o=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,h=o.getNext().key;if(this.comparator(l,h)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Yn(this.comparator);return n.data=t,n}}class D0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(t){this.fields=t,t.sort(gi.comparator)}static empty(){return new Er([])}unionWith(t){let n=new Yn(gi.comparator);for(const o of this.fields)n=n.add(o);for(const o of t)n=n.add(o);return new Er(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return su(this.fields,t.fields,((n,o)=>n.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new BE("Invalid base64 string: "+h):h}})(t);return new _i(n)}static fromUint8Array(t){const n=(function(l){let h="";for(let p=0;p<l.length;++p)h+=String.fromCharCode(l[p]);return h})(t);return new _i(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let l=0;l<n.length;l++)o[l]=n.charCodeAt(l);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ce(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}_i.EMPTY_BYTE_STRING=new _i("");const II=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ma(r){if(Ne(!!r,39018),typeof r=="string"){let t=0;const n=II.exec(r);if(Ne(!!n,46558,{timestamp:r}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const o=new Date(r);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:Pn(r.seconds),nanos:Pn(r.nanos)}}function Pn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function pa(r){return typeof r=="string"?_i.fromBase64String(r):_i.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="server_timestamp",qE="__type__",FE="__previous_value__",GE="__local_write_time__";function lg(r){return(r?.mapValue?.fields||{})[qE]?.stringValue===HE}function nd(r){const t=r.mapValue.fields[FE];return lg(t)?nd(t):t}function Nc(r){const t=ma(r.mapValue.fields[GE].timestampValue);return new mn(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(t,n,o,l,h,p,y,v,E,x){this.databaseId=t,this.appId=n,this.persistenceKey=o,this.host=l,this.ssl=h,this.forceLongPolling=p,this.autoDetectLongPolling=y,this.longPollingOptions=v,this.useFetchStreams=E,this.isUsingEmulator=x}}const Of="(default)";class kc{constructor(t,n){this.projectId=t,this.database=n||Of}static empty(){return new kc("","")}get isDefaultDatabase(){return this.database===Of}isEqual(t){return t instanceof kc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="__type__",PI="__max__",hf={mapValue:{}},WE="__vector__",Df="value";function ga(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?lg(r)?4:OI(r)?9007199254740991:MI(r)?10:11:Xt(28295,{value:r})}function Ms(r,t){if(r===t)return!0;const n=ga(r);if(n!==ga(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Nc(r).isEqual(Nc(t));case 3:return(function(l,h){if(typeof l.timestampValue=="string"&&typeof h.timestampValue=="string"&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const p=ma(l.timestampValue),y=ma(h.timestampValue);return p.seconds===y.seconds&&p.nanos===y.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,h){return pa(l.bytesValue).isEqual(pa(h.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,h){return Pn(l.geoPointValue.latitude)===Pn(h.geoPointValue.latitude)&&Pn(l.geoPointValue.longitude)===Pn(h.geoPointValue.longitude)})(r,t);case 2:return(function(l,h){if("integerValue"in l&&"integerValue"in h)return Pn(l.integerValue)===Pn(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const p=Pn(l.doubleValue),y=Pn(h.doubleValue);return p===y?Mf(p)===Mf(y):isNaN(p)&&isNaN(y)}return!1})(r,t);case 9:return su(r.arrayValue.values||[],t.arrayValue.values||[],Ms);case 10:case 11:return(function(l,h){const p=l.mapValue.fields||{},y=h.mapValue.fields||{};if(O0(p)!==O0(y))return!1;for(const v in p)if(p.hasOwnProperty(v)&&(y[v]===void 0||!Ms(p[v],y[v])))return!1;return!0})(r,t);default:return Xt(52216,{left:r})}}function Vc(r,t){return(r.values||[]).find((n=>Ms(n,t)))!==void 0}function ou(r,t){if(r===t)return 0;const n=ga(r),o=ga(t);if(n!==o)return Ce(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(r.booleanValue,t.booleanValue);case 2:return(function(h,p){const y=Pn(h.integerValue||h.doubleValue),v=Pn(p.integerValue||p.doubleValue);return y<v?-1:y>v?1:y===v?0:isNaN(y)?isNaN(v)?0:-1:1})(r,t);case 3:return L0(r.timestampValue,t.timestampValue);case 4:return L0(Nc(r),Nc(t));case 5:return Sp(r.stringValue,t.stringValue);case 6:return(function(h,p){const y=pa(h),v=pa(p);return y.compareTo(v)})(r.bytesValue,t.bytesValue);case 7:return(function(h,p){const y=h.split("/"),v=p.split("/");for(let E=0;E<y.length&&E<v.length;E++){const x=Ce(y[E],v[E]);if(x!==0)return x}return Ce(y.length,v.length)})(r.referenceValue,t.referenceValue);case 8:return(function(h,p){const y=Ce(Pn(h.latitude),Pn(p.latitude));return y!==0?y:Ce(Pn(h.longitude),Pn(p.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return N0(r.arrayValue,t.arrayValue);case 10:return(function(h,p){const y=h.fields||{},v=p.fields||{},E=y[Df]?.arrayValue,x=v[Df]?.arrayValue,P=Ce(E?.values?.length||0,x?.values?.length||0);return P!==0?P:N0(E,x)})(r.mapValue,t.mapValue);case 11:return(function(h,p){if(h===hf.mapValue&&p===hf.mapValue)return 0;if(h===hf.mapValue)return 1;if(p===hf.mapValue)return-1;const y=h.fields||{},v=Object.keys(y),E=p.fields||{},x=Object.keys(E);v.sort(),x.sort();for(let P=0;P<v.length&&P<x.length;++P){const M=Sp(v[P],x[P]);if(M!==0)return M;const q=ou(y[v[P]],E[x[P]]);if(q!==0)return q}return Ce(v.length,x.length)})(r.mapValue,t.mapValue);default:throw Xt(23264,{he:n})}}function L0(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Ce(r,t);const n=ma(r),o=ma(t),l=Ce(n.seconds,o.seconds);return l!==0?l:Ce(n.nanos,o.nanos)}function N0(r,t){const n=r.values||[],o=t.values||[];for(let l=0;l<n.length&&l<o.length;++l){const h=ou(n[l],o[l]);if(h)return h}return Ce(n.length,o.length)}function au(r){return Ap(r)}function Ap(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const o=ma(n);return`time(${o.seconds},${o.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return pa(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Gt.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let o="[",l=!0;for(const h of n.values||[])l?l=!1:o+=",",o+=Ap(h);return o+"]"})(r.arrayValue):"mapValue"in r?(function(n){const o=Object.keys(n.fields||{}).sort();let l="{",h=!0;for(const p of o)h?h=!1:l+=",",l+=`${p}:${Ap(n.fields[p])}`;return l+"}"})(r.mapValue):Xt(61005,{value:r})}function vf(r){switch(ga(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=nd(r);return t?16+vf(t):16;case 5:return 2*r.stringValue.length;case 6:return pa(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((l,h)=>l+vf(h)),0)})(r.arrayValue);case 10:case 11:return(function(o){let l=0;return Ea(o.fields,((h,p)=>{l+=h.length+vf(p)})),l})(r.mapValue);default:throw Xt(13486,{value:r})}}function k0(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function xp(r){return!!r&&"integerValue"in r}function ug(r){return!!r&&"arrayValue"in r}function V0(r){return!!r&&"nullValue"in r}function z0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Tf(r){return!!r&&"mapValue"in r}function MI(r){return(r?.mapValue?.fields||{})[ZE]?.stringValue===WE}function Ec(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return Ea(r.mapValue.fields,((n,o)=>t.mapValue.fields[n]=Ec(o))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ec(r.arrayValue.values[n]);return t}return{...r}}function OI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===PI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(t){this.value=t}static empty(){return new Hi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let o=0;o<t.length-1;++o)if(n=(n.mapValue.fields||{})[t.get(o)],!Tf(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ec(n)}setAll(t){let n=gi.emptyPath(),o={},l=[];t.forEach(((p,y)=>{if(!n.isImmediateParentOf(y)){const v=this.getFieldsMap(n);this.applyChanges(v,o,l),o={},l=[],n=y.popLast()}p?o[y.lastSegment()]=Ec(p):l.push(y.lastSegment())}));const h=this.getFieldsMap(n);this.applyChanges(h,o,l)}delete(t){const n=this.field(t.popLast());Tf(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ms(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<t.length;++o){let l=n.mapValue.fields[t.get(o)];Tf(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(o)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,o){Ea(n,((l,h)=>t[l]=h));for(const l of o)delete t[l]}clone(){return new Hi(Ec(this.value))}}function YE(r){const t=[];return Ea(r.fields,((n,o)=>{const l=new gi([n]);if(Tf(o)){const h=YE(o.mapValue).fields;if(h.length===0)t.push(l);else for(const p of h)t.push(l.child(p))}else t.push(l)})),new Er(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(t,n,o,l,h,p,y){this.key=t,this.documentType=n,this.version=o,this.readTime=l,this.createTime=h,this.data=p,this.documentState=y}static newInvalidDocument(t){return new ri(t,0,oe.min(),oe.min(),oe.min(),Hi.empty(),0)}static newFoundDocument(t,n,o,l){return new ri(t,1,n,oe.min(),o,l,0)}static newNoDocument(t,n){return new ri(t,2,n,oe.min(),oe.min(),Hi.empty(),0)}static newUnknownDocument(t,n){return new ri(t,3,n,oe.min(),oe.min(),Hi.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Hi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ri&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ri(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(t,n){this.position=t,this.inclusive=n}}function U0(r,t,n){let o=0;for(let l=0;l<r.position.length;l++){const h=t[l],p=r.position[l];if(h.field.isKeyField()?o=Gt.comparator(Gt.fromName(p.referenceValue),n.key):o=ou(p,n.data.field(h.field)),h.dir==="desc"&&(o*=-1),o!==0)break}return o}function j0(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Ms(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(t,n="asc"){this.field=t,this.dir=n}}function DI(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{}class Vn extends QE{constructor(t,n,o){super(),this.field=t,this.op=n,this.value=o}static create(t,n,o){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,o):new NI(t,n,o):n==="array-contains"?new zI(t,o):n==="in"?new UI(t,o):n==="not-in"?new jI(t,o):n==="array-contains-any"?new BI(t,o):new Vn(t,n,o)}static createKeyFieldInFilter(t,n,o){return n==="in"?new kI(t,o):new VI(t,o)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ou(n,this.value)):n!==null&&ga(this.value)===ga(n)&&this.matchesComparison(ou(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Xt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ss extends QE{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new ss(t,n)}matches(t){return KE(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function KE(r){return r.op==="and"}function XE(r){return LI(r)&&KE(r)}function LI(r){for(const t of r.filters)if(t instanceof ss)return!1;return!0}function Rp(r){if(r instanceof Vn)return r.field.canonicalString()+r.op.toString()+au(r.value);if(XE(r))return r.filters.map((t=>Rp(t))).join(",");{const t=r.filters.map((n=>Rp(n))).join(",");return`${r.op}(${t})`}}function $E(r,t){return r instanceof Vn?(function(o,l){return l instanceof Vn&&o.op===l.op&&o.field.isEqual(l.field)&&Ms(o.value,l.value)})(r,t):r instanceof ss?(function(o,l){return l instanceof ss&&o.op===l.op&&o.filters.length===l.filters.length?o.filters.reduce(((h,p,y)=>h&&$E(p,l.filters[y])),!0):!1})(r,t):void Xt(19439)}function JE(r){return r instanceof Vn?(function(n){return`${n.field.canonicalString()} ${n.op} ${au(n.value)}`})(r):r instanceof ss?(function(n){return n.op.toString()+" {"+n.getFilters().map(JE).join(" ,")+"}"})(r):"Filter"}class NI extends Vn{constructor(t,n,o){super(t,n,o),this.key=Gt.fromName(o.referenceValue)}matches(t){const n=Gt.comparator(t.key,this.key);return this.matchesComparison(n)}}class kI extends Vn{constructor(t,n){super(t,"in",n),this.keys=tb("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class VI extends Vn{constructor(t,n){super(t,"not-in",n),this.keys=tb("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function tb(r,t){return(t.arrayValue?.values||[]).map((n=>Gt.fromName(n.referenceValue)))}class zI extends Vn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return ug(n)&&Vc(n.arrayValue,this.value)}}class UI extends Vn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Vc(this.value.arrayValue,n)}}class jI extends Vn{constructor(t,n){super(t,"not-in",n)}matches(t){if(Vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Vc(this.value.arrayValue,n)}}class BI extends Vn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!ug(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>Vc(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(t,n=null,o=[],l=[],h=null,p=null,y=null){this.path=t,this.collectionGroup=n,this.orderBy=o,this.filters=l,this.limit=h,this.startAt=p,this.endAt=y,this.Te=null}}function B0(r,t=null,n=[],o=[],l=null,h=null,p=null){return new HI(r,t,n,o,l,h,p)}function cg(r){const t=me(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((o=>Rp(o))).join(","),n+="|ob:",n+=t.orderBy.map((o=>(function(h){return h.field.canonicalString()+h.dir})(o))).join(","),Kc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((o=>au(o))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((o=>au(o))).join(",")),t.Te=n}return t.Te}function hg(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!DI(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!$E(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!j0(r.startAt,t.startAt)&&j0(r.endAt,t.endAt)}function Ip(r){return Gt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(t,n=null,o=[],l=[],h=null,p="F",y=null,v=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=l,this.limit=h,this.limitType=p,this.startAt=y,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function qI(r,t,n,o,l,h,p,y){return new Tu(r,t,n,o,l,h,p,y)}function id(r){return new Tu(r)}function H0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function eb(r){return r.collectionGroup!==null}function bc(r){const t=me(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const h of t.explicitOrderBy)t.Ie.push(h),n.add(h.field.canonicalString());const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(p){let y=new Yn(gi.comparator);return p.filters.forEach((v=>{v.getFlattenedFilters().forEach((E=>{E.isInequality()&&(y=y.add(E.field))}))})),y})(t).forEach((h=>{n.has(h.canonicalString())||h.isKeyField()||t.Ie.push(new zc(h,o))})),n.has(gi.keyField().canonicalString())||t.Ie.push(new zc(gi.keyField(),o))}return t.Ie}function Is(r){const t=me(r);return t.Ee||(t.Ee=FI(t,bc(r))),t.Ee}function FI(r,t){if(r.limitType==="F")return B0(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const h=l.dir==="desc"?"asc":"desc";return new zc(l.field,h)}));const n=r.endAt?new Lf(r.endAt.position,r.endAt.inclusive):null,o=r.startAt?new Lf(r.startAt.position,r.startAt.inclusive):null;return B0(r.path,r.collectionGroup,t,r.filters,r.limit,n,o)}}function Cp(r,t){const n=r.filters.concat([t]);return new Tu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Nf(r,t,n){return new Tu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function rd(r,t){return hg(Is(r),Is(t))&&r.limitType===t.limitType}function nb(r){return`${cg(Is(r))}|lt:${r.limitType}`}function Yl(r){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((l=>JE(l))).join(", ")}]`),Kc(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((l=>(function(p){return`${p.field.canonicalString()} (${p.dir})`})(l))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((l=>au(l))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((l=>au(l))).join(",")),`Target(${o})`})(Is(r))}; limitType=${r.limitType})`}function sd(r,t){return t.isFoundDocument()&&(function(o,l){const h=l.key.path;return o.collectionGroup!==null?l.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(h):Gt.isDocumentKey(o.path)?o.path.isEqual(h):o.path.isImmediateParentOf(h)})(r,t)&&(function(o,l){for(const h of bc(o))if(!h.field.isKeyField()&&l.data.field(h.field)===null)return!1;return!0})(r,t)&&(function(o,l){for(const h of o.filters)if(!h.matches(l))return!1;return!0})(r,t)&&(function(o,l){return!(o.startAt&&!(function(p,y,v){const E=U0(p,y,v);return p.inclusive?E<=0:E<0})(o.startAt,bc(o),l)||o.endAt&&!(function(p,y,v){const E=U0(p,y,v);return p.inclusive?E>=0:E>0})(o.endAt,bc(o),l))})(r,t)}function GI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ib(r){return(t,n)=>{let o=!1;for(const l of bc(r)){const h=ZI(l,t,n);if(h!==0)return h;o=o||l.field.isKeyField()}return 0}}function ZI(r,t,n){const o=r.field.isKeyField()?Gt.comparator(t.key,n.key):(function(h,p,y){const v=p.data.field(h),E=y.data.field(h);return v!==null&&E!==null?ou(v,E):Xt(42886)})(r.field,t,n);switch(r.dir){case"asc":return o;case"desc":return-1*o;default:return Xt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),o=this.inner[n];if(o!==void 0){for(const[l,h]of o)if(this.equalsFn(l,t))return h}}has(t){return this.get(t)!==void 0}set(t,n){const o=this.mapKeyFn(t),l=this.inner[o];if(l===void 0)return this.inner[o]=[[t,n]],void this.innerSize++;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],t))return void(l[h]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),o=this.inner[n];if(o===void 0)return!1;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],t))return o.length===1?delete this.inner[n]:o.splice(l,1),this.innerSize--,!0;return!1}forEach(t){Ea(this.inner,((n,o)=>{for(const[l,h]of o)t(l,h)}))}isEmpty(){return jE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=new En(Gt.comparator);function uo(){return WI}const rb=new En(Gt.comparator);function gc(...r){let t=rb;for(const n of r)t=t.insert(n.key,n);return t}function sb(r){let t=rb;return r.forEach(((n,o)=>t=t.insert(n,o.overlayedDocument))),t}function $a(){return wc()}function ob(){return wc()}function wc(){return new al((r=>r.toString()),((r,t)=>r.isEqual(t)))}const YI=new En(Gt.comparator),QI=new Yn(Gt.comparator);function Pe(...r){let t=QI;for(const n of r)t=t.add(n);return t}const KI=new Yn(Ce);function XI(){return KI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mf(t)?"-0":t}}function ab(r){return{integerValue:""+r}}function $I(r,t){return AI(t)?ab(t):fg(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(){this._=void 0}}function JI(r,t,n){return r instanceof Uc?(function(l,h){const p={fields:{[qE]:{stringValue:HE},[GE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&lg(h)&&(h=nd(h)),h&&(p.fields[FE]=h),{mapValue:p}})(n,t):r instanceof jc?ub(r,t):r instanceof Bc?cb(r,t):(function(l,h){const p=lb(l,h),y=q0(p)+q0(l.Ae);return xp(p)&&xp(l.Ae)?ab(y):fg(l.serializer,y)})(r,t)}function tC(r,t,n){return r instanceof jc?ub(r,t):r instanceof Bc?cb(r,t):n}function lb(r,t){return r instanceof kf?(function(o){return xp(o)||(function(h){return!!h&&"doubleValue"in h})(o)})(t)?t:{integerValue:0}:null}class Uc extends od{}class jc extends od{constructor(t){super(),this.elements=t}}function ub(r,t){const n=hb(t);for(const o of r.elements)n.some((l=>Ms(l,o)))||n.push(o);return{arrayValue:{values:n}}}class Bc extends od{constructor(t){super(),this.elements=t}}function cb(r,t){let n=hb(t);for(const o of r.elements)n=n.filter((l=>!Ms(l,o)));return{arrayValue:{values:n}}}class kf extends od{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function q0(r){return Pn(r.integerValue||r.doubleValue)}function hb(r){return ug(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(t,n){this.field=t,this.transform=n}}function nC(r,t){return r.field.isEqual(t.field)&&(function(o,l){return o instanceof jc&&l instanceof jc||o instanceof Bc&&l instanceof Bc?su(o.elements,l.elements,Ms):o instanceof kf&&l instanceof kf?Ms(o.Ae,l.Ae):o instanceof Uc&&l instanceof Uc})(r.transform,t.transform)}class iC{constructor(t,n){this.version=t,this.transformResults=n}}class Pi{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Pi}static exists(t){return new Pi(void 0,t)}static updateTime(t){return new Pi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ef(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class ad{}function fb(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new ld(r.key,Pi.none()):new Xc(r.key,r.data,Pi.none());{const n=r.data,o=Hi.empty();let l=new Yn(gi.comparator);for(let h of t.fields)if(!l.has(h)){let p=n.field(h);p===null&&h.length>1&&(h=h.popLast(),p=n.field(h)),p===null?o.delete(h):o.set(h,p),l=l.add(h)}return new ba(r.key,o,new Er(l.toArray()),Pi.none())}}function rC(r,t,n){r instanceof Xc?(function(l,h,p){const y=l.value.clone(),v=G0(l.fieldTransforms,h,p.transformResults);y.setAll(v),h.convertToFoundDocument(p.version,y).setHasCommittedMutations()})(r,t,n):r instanceof ba?(function(l,h,p){if(!Ef(l.precondition,h))return void h.convertToUnknownDocument(p.version);const y=G0(l.fieldTransforms,h,p.transformResults),v=h.data;v.setAll(db(l)),v.setAll(y),h.convertToFoundDocument(p.version,v).setHasCommittedMutations()})(r,t,n):(function(l,h,p){h.convertToNoDocument(p.version).setHasCommittedMutations()})(0,t,n)}function Sc(r,t,n,o){return r instanceof Xc?(function(h,p,y,v){if(!Ef(h.precondition,p))return y;const E=h.value.clone(),x=Z0(h.fieldTransforms,v,p);return E.setAll(x),p.convertToFoundDocument(p.version,E).setHasLocalMutations(),null})(r,t,n,o):r instanceof ba?(function(h,p,y,v){if(!Ef(h.precondition,p))return y;const E=Z0(h.fieldTransforms,v,p),x=p.data;return x.setAll(db(h)),x.setAll(E),p.convertToFoundDocument(p.version,x).setHasLocalMutations(),y===null?null:y.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((P=>P.field)))})(r,t,n,o):(function(h,p,y){return Ef(h.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):y})(r,t,n)}function sC(r,t){let n=null;for(const o of r.fieldTransforms){const l=t.data.field(o.field),h=lb(o.transform,l||null);h!=null&&(n===null&&(n=Hi.empty()),n.set(o.field,h))}return n||null}function F0(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(o,l){return o===void 0&&l===void 0||!(!o||!l)&&su(o,l,((h,p)=>nC(h,p)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Xc extends ad{constructor(t,n,o,l=[]){super(),this.key=t,this.value=n,this.precondition=o,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ba extends ad{constructor(t,n,o,l,h=[]){super(),this.key=t,this.data=n,this.fieldMask=o,this.precondition=l,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function db(r){const t=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=r.data.field(n);t.set(n,o)}})),t}function G0(r,t,n){const o=new Map;Ne(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let l=0;l<n.length;l++){const h=r[l],p=h.transform,y=t.data.field(h.field);o.set(h.field,tC(p,y,n[l]))}return o}function Z0(r,t,n){const o=new Map;for(const l of r){const h=l.transform,p=n.data.field(l.field);o.set(l.field,JI(h,p,t))}return o}class ld extends ad{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mb extends ad{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(t,n,o,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=o,this.mutations=l}applyToRemoteDocument(t,n){const o=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const h=this.mutations[l];h.key.isEqual(t.key)&&rC(h,t,o[l])}}applyToLocalView(t,n){for(const o of this.baseMutations)o.key.isEqual(t.key)&&(n=Sc(o,t,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(t.key)&&(n=Sc(o,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const o=ob();return this.mutations.forEach((l=>{const h=t.get(l.key),p=h.overlayedDocument;let y=this.applyToLocalView(p,h.mutatedFields);y=n.has(l.key)?null:y;const v=fb(p,y);v!==null&&o.set(l.key,v),p.isValidDocument()||p.convertToNoDocument(oe.min())})),o}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Pe())}isEqual(t){return this.batchId===t.batchId&&su(this.mutations,t.mutations,((n,o)=>F0(n,o)))&&su(this.baseMutations,t.baseMutations,((n,o)=>F0(n,o)))}}class dg{constructor(t,n,o,l){this.batch=t,this.commitVersion=n,this.mutationResults=o,this.docVersions=l}static from(t,n,o){Ne(t.mutations.length===o.length,58842,{me:t.mutations.length,fe:o.length});let l=(function(){return YI})();const h=t.mutations;for(let p=0;p<h.length;p++)l=l.insert(h[p].key,o[p].version);return new dg(t,n,o,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kn,Le;function pb(r){switch(r){case ct.OK:return Xt(64938);case ct.CANCELLED:case ct.UNKNOWN:case ct.DEADLINE_EXCEEDED:case ct.RESOURCE_EXHAUSTED:case ct.INTERNAL:case ct.UNAVAILABLE:case ct.UNAUTHENTICATED:return!1;case ct.INVALID_ARGUMENT:case ct.NOT_FOUND:case ct.ALREADY_EXISTS:case ct.PERMISSION_DENIED:case ct.FAILED_PRECONDITION:case ct.ABORTED:case ct.OUT_OF_RANGE:case ct.UNIMPLEMENTED:case ct.DATA_LOSS:return!0;default:return Xt(15467,{code:r})}}function gb(r){if(r===void 0)return lo("GRPC error has no .code"),ct.UNKNOWN;switch(r){case kn.OK:return ct.OK;case kn.CANCELLED:return ct.CANCELLED;case kn.UNKNOWN:return ct.UNKNOWN;case kn.DEADLINE_EXCEEDED:return ct.DEADLINE_EXCEEDED;case kn.RESOURCE_EXHAUSTED:return ct.RESOURCE_EXHAUSTED;case kn.INTERNAL:return ct.INTERNAL;case kn.UNAVAILABLE:return ct.UNAVAILABLE;case kn.UNAUTHENTICATED:return ct.UNAUTHENTICATED;case kn.INVALID_ARGUMENT:return ct.INVALID_ARGUMENT;case kn.NOT_FOUND:return ct.NOT_FOUND;case kn.ALREADY_EXISTS:return ct.ALREADY_EXISTS;case kn.PERMISSION_DENIED:return ct.PERMISSION_DENIED;case kn.FAILED_PRECONDITION:return ct.FAILED_PRECONDITION;case kn.ABORTED:return ct.ABORTED;case kn.OUT_OF_RANGE:return ct.OUT_OF_RANGE;case kn.UNIMPLEMENTED:return ct.UNIMPLEMENTED;case kn.DATA_LOSS:return ct.DATA_LOSS;default:return Xt(39323,{code:r})}}(Le=kn||(kn={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new ca([4294967295,4294967295],0);function W0(r){const t=uC().encode(r),n=new CE;return n.update(t),new Uint8Array(n.digest())}function Y0(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),o=t.getUint32(4,!0),l=t.getUint32(8,!0),h=t.getUint32(12,!0);return[new ca([n,o],0),new ca([l,h],0)]}class mg{constructor(t,n,o){if(this.bitmap=t,this.padding=n,this.hashCount=o,n<0||n>=8)throw new _c(`Invalid padding: ${n}`);if(o<0)throw new _c(`Invalid hash count: ${o}`);if(t.length>0&&this.hashCount===0)throw new _c(`Invalid hash count: ${o}`);if(t.length===0&&n!==0)throw new _c(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=ca.fromNumber(this.ge)}ye(t,n,o){let l=t.add(n.multiply(ca.fromNumber(o)));return l.compare(cC)===1&&(l=new ca([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=W0(t),[o,l]=Y0(n);for(let h=0;h<this.hashCount;h++){const p=this.ye(o,l,h);if(!this.we(p))return!1}return!0}static create(t,n,o){const l=t%8==0?0:8-t%8,h=new Uint8Array(Math.ceil(t/8)),p=new mg(h,l,n);return o.forEach((y=>p.insert(y))),p}insert(t){if(this.ge===0)return;const n=W0(t),[o,l]=Y0(n);for(let h=0;h<this.hashCount;h++){const p=this.ye(o,l,h);this.Se(p)}}Se(t){const n=Math.floor(t/8),o=t%8;this.bitmap[n]|=1<<o}}class _c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(t,n,o,l,h){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=l,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(t,n,o){const l=new Map;return l.set(t,$c.createSynthesizedTargetChangeForCurrentChange(t,n,o)),new ud(oe.min(),l,new En(Ce),uo(),Pe())}}class $c{constructor(t,n,o,l,h){this.resumeToken=t,this.current=n,this.addedDocuments=o,this.modifiedDocuments=l,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(t,n,o){return new $c(o,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(t,n,o,l){this.be=t,this.removedTargetIds=n,this.key=o,this.De=l}}class _b{constructor(t,n){this.targetId=t,this.Ce=n}}class yb{constructor(t,n,o=_i.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=o,this.cause=l}}class Q0{constructor(){this.ve=0,this.Fe=K0(),this.Me=_i.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Pe(),n=Pe(),o=Pe();return this.Fe.forEach(((l,h)=>{switch(h){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:o=o.add(l);break;default:Xt(38017,{changeType:h})}})),new $c(this.Me,this.xe,t,n,o)}qe(){this.Oe=!1,this.Fe=K0()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ne(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class hC{constructor(t){this.Ge=t,this.ze=new Map,this.je=uo(),this.Je=ff(),this.He=ff(),this.Ye=new En(Ce)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const o=this.nt(n);switch(t.state){case 0:this.rt(n)&&o.Le(t.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(t.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(o.We(),o.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),o.Le(t.resumeToken));break;default:Xt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((o,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,o=t.Ce.count,l=this.ot(n);if(l){const h=l.target;if(Ip(h))if(o===0){const p=new Gt(h.path);this.et(n,p,ri.newNoDocument(p,oe.min()))}else Ne(o===1,20013,{expectedCount:o});else{const p=this._t(n);if(p!==o){const y=this.ut(t),v=y?this.ct(y,t,p):1;if(v!==0){this.it(n);const E=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,E)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:l=0},hashCount:h=0}=n;let p,y;try{p=pa(o).toUint8Array()}catch(v){if(v instanceof BE)return ru("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{y=new mg(p,l,h)}catch(v){return ru(v instanceof _c?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return y.ge===0?null:y}ct(t,n,o){return n.Ce.count===o-this.Pt(t,n.targetId)?0:2}Pt(t,n){const o=this.Ge.getRemoteKeysForTarget(n);let l=0;return o.forEach((h=>{const p=this.Ge.ht(),y=`projects/${p.projectId}/databases/${p.database}/documents/${h.path.canonicalString()}`;t.mightContain(y)||(this.et(n,h,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((h,p)=>{const y=this.ot(p);if(y){if(h.current&&Ip(y.target)){const v=new Gt(y.target.path);this.It(v).has(p)||this.Et(p,v)||this.et(p,v,ri.newNoDocument(v,t))}h.Be&&(n.set(p,h.ke()),h.qe())}}));let o=Pe();this.He.forEach(((h,p)=>{let y=!0;p.forEachWhile((v=>{const E=this.ot(v);return!E||E.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(o=o.add(h))})),this.je.forEach(((h,p)=>p.setReadTime(t)));const l=new ud(t,n,this.Ye,this.je,o);return this.je=uo(),this.Je=ff(),this.He=ff(),this.Ye=new En(Ce),l}Xe(t,n){if(!this.rt(t))return;const o=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,o),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,o){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),o&&(this.je=this.je.insert(n,o))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Q0,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Yn(Ce),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Yn(Ce),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||Vt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Q0),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function ff(){return new En(Gt.comparator)}function K0(){return new En(Gt.comparator)}const fC={asc:"ASCENDING",desc:"DESCENDING"},dC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mC={and:"AND",or:"OR"};class pC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Pp(r,t){return r.useProto3Json||Kc(t)?t:{value:t}}function Vf(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function vb(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function gC(r,t){return Vf(r,t.toTimestamp())}function br(r){return Ne(!!r,49232),oe.fromTimestamp((function(n){const o=ma(n);return new mn(o.seconds,o.nanos)})(r))}function pg(r,t){return Mp(r,t).canonicalString()}function Mp(r,t){const n=(function(l){return new Ke(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?n:n.child(t)}function Tb(r){const t=Ke.fromString(r);return Ne(xb(t),10190,{key:t.toString()}),t}function zf(r,t){return pg(r.databaseId,t.path)}function Ac(r,t){const n=Tb(t);if(n.get(1)!==r.databaseId.projectId)throw new Pt(ct.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new Pt(ct.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Gt(bb(n))}function Eb(r,t){return pg(r.databaseId,t)}function _C(r){const t=Tb(r);return t.length===4?Ke.emptyPath():bb(t)}function Op(r){return new Ke(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function bb(r){return Ne(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function X0(r,t,n){return{name:zf(r,t),fields:n.value.mapValue.fields}}function yC(r,t){return"found"in t?(function(o,l){Ne(!!l.found,43571),l.found.name,l.found.updateTime;const h=Ac(o,l.found.name),p=br(l.found.updateTime),y=l.found.createTime?br(l.found.createTime):oe.min(),v=new Hi({mapValue:{fields:l.found.fields}});return ri.newFoundDocument(h,p,y,v)})(r,t):"missing"in t?(function(o,l){Ne(!!l.missing,3894),Ne(!!l.readTime,22933);const h=Ac(o,l.missing),p=br(l.readTime);return ri.newNoDocument(h,p)})(r,t):Xt(7234,{result:t})}function vC(r,t){let n;if("targetChange"in t){t.targetChange;const o=(function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:Xt(39313,{state:E})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],h=(function(E,x){return E.useProto3Json?(Ne(x===void 0||typeof x=="string",58123),_i.fromBase64String(x||"")):(Ne(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),_i.fromUint8Array(x||new Uint8Array))})(r,t.targetChange.resumeToken),p=t.targetChange.cause,y=p&&(function(E){const x=E.code===void 0?ct.UNKNOWN:gb(E.code);return new Pt(x,E.message||"")})(p);n=new yb(o,l,h,y||null)}else if("documentChange"in t){t.documentChange;const o=t.documentChange;o.document,o.document.name,o.document.updateTime;const l=Ac(r,o.document.name),h=br(o.document.updateTime),p=o.document.createTime?br(o.document.createTime):oe.min(),y=new Hi({mapValue:{fields:o.document.fields}}),v=ri.newFoundDocument(l,h,p,y),E=o.targetIds||[],x=o.removedTargetIds||[];n=new bf(E,x,v.key,v)}else if("documentDelete"in t){t.documentDelete;const o=t.documentDelete;o.document;const l=Ac(r,o.document),h=o.readTime?br(o.readTime):oe.min(),p=ri.newNoDocument(l,h),y=o.removedTargetIds||[];n=new bf([],y,p.key,p)}else if("documentRemove"in t){t.documentRemove;const o=t.documentRemove;o.document;const l=Ac(r,o.document),h=o.removedTargetIds||[];n=new bf([],h,l,null)}else{if(!("filter"in t))return Xt(11601,{Rt:t});{t.filter;const o=t.filter;o.targetId;const{count:l=0,unchangedNames:h}=o,p=new lC(l,h),y=o.targetId;n=new _b(y,p)}}return n}function wb(r,t){let n;if(t instanceof Xc)n={update:X0(r,t.key,t.value)};else if(t instanceof ld)n={delete:zf(r,t.key)};else if(t instanceof ba)n={update:X0(r,t.key,t.data),updateMask:IC(t.fieldMask)};else{if(!(t instanceof mb))return Xt(16599,{Vt:t.type});n={verify:zf(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((o=>(function(h,p){const y=p.transform;if(y instanceof Uc)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof jc)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Bc)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof kf)return{fieldPath:p.field.canonicalString(),increment:y.Ae};throw Xt(20930,{transform:p.transform})})(0,o)))),t.precondition.isNone||(n.currentDocument=(function(l,h){return h.updateTime!==void 0?{updateTime:gC(l,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:Xt(27497)})(r,t.precondition)),n}function TC(r,t){return r&&r.length>0?(Ne(t!==void 0,14353),r.map((n=>(function(l,h){let p=l.updateTime?br(l.updateTime):br(h);return p.isEqual(oe.min())&&(p=br(h)),new iC(p,l.transformResults||[])})(n,t)))):[]}function EC(r,t){return{documents:[Eb(r,t.path)]}}function bC(r,t){const n={structuredQuery:{}},o=t.path;let l;t.collectionGroup!==null?(l=o,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=Eb(r,l);const h=(function(E){if(E.length!==0)return Ab(ss.create(E,"and"))})(t.filters);h&&(n.structuredQuery.where=h);const p=(function(E){if(E.length!==0)return E.map((x=>(function(M){return{field:Ql(M.field),direction:AC(M.dir)}})(x)))})(t.orderBy);p&&(n.structuredQuery.orderBy=p);const y=Pp(r,t.limit);return y!==null&&(n.structuredQuery.limit=y),t.startAt&&(n.structuredQuery.startAt=(function(E){return{before:E.inclusive,values:E.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(E){return{before:!E.inclusive,values:E.position}})(t.endAt)),{ft:n,parent:l}}function wC(r){let t=_C(r.parent);const n=r.structuredQuery,o=n.from?n.from.length:0;let l=null;if(o>0){Ne(o===1,65062);const x=n.from[0];x.allDescendants?l=x.collectionId:t=t.child(x.collectionId)}let h=[];n.where&&(h=(function(P){const M=Sb(P);return M instanceof ss&&XE(M)?M.getFilters():[M]})(n.where));let p=[];n.orderBy&&(p=(function(P){return P.map((M=>(function(Q){return new zc(Kl(Q.field),(function(at){switch(at){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(M)))})(n.orderBy));let y=null;n.limit&&(y=(function(P){let M;return M=typeof P=="object"?P.value:P,Kc(M)?null:M})(n.limit));let v=null;n.startAt&&(v=(function(P){const M=!!P.before,q=P.values||[];return new Lf(q,M)})(n.startAt));let E=null;return n.endAt&&(E=(function(P){const M=!P.before,q=P.values||[];return new Lf(q,M)})(n.endAt)),qI(t,l,p,h,y,"F",v,E)}function SC(r,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xt(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Sb(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Kl(n.unaryFilter.field);return Vn.create(o,"==",{doubleValue:NaN});case"IS_NULL":const l=Kl(n.unaryFilter.field);return Vn.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=Kl(n.unaryFilter.field);return Vn.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=Kl(n.unaryFilter.field);return Vn.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Xt(61313);default:return Xt(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Vn.create(Kl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Xt(58110);default:return Xt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return ss.create(n.compositeFilter.filters.map((o=>Sb(o))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Xt(1026)}})(n.compositeFilter.op))})(r):Xt(30097,{filter:r})}function AC(r){return fC[r]}function xC(r){return dC[r]}function RC(r){return mC[r]}function Ql(r){return{fieldPath:r.canonicalString()}}function Kl(r){return gi.fromServerFormat(r.fieldPath)}function Ab(r){return r instanceof Vn?(function(n){if(n.op==="=="){if(z0(n.value))return{unaryFilter:{field:Ql(n.field),op:"IS_NAN"}};if(V0(n.value))return{unaryFilter:{field:Ql(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(z0(n.value))return{unaryFilter:{field:Ql(n.field),op:"IS_NOT_NAN"}};if(V0(n.value))return{unaryFilter:{field:Ql(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ql(n.field),op:xC(n.op),value:n.value}}})(r):r instanceof ss?(function(n){const o=n.getFilters().map((l=>Ab(l)));return o.length===1?o[0]:{compositeFilter:{op:RC(n.op),filters:o}}})(r):Xt(54877,{filter:r})}function IC(r){const t=[];return r.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function xb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(t,n,o,l,h=oe.min(),p=oe.min(),y=_i.EMPTY_BYTE_STRING,v=null){this.target=t,this.targetId=n,this.purpose=o,this.sequenceNumber=l,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=y,this.expectedCount=v}withSequenceNumber(t){return new oa(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(t){this.yt=t}}function PC(r){const t=wC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Nf(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(){this.Cn=new OC}addToCollectionParentIndex(t,n){return this.Cn.add(n),gt.resolve()}getCollectionParents(t,n){return gt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return gt.resolve()}deleteFieldIndex(t,n){return gt.resolve()}deleteAllFieldIndexes(t){return gt.resolve()}createTargetIndexes(t,n){return gt.resolve()}getDocumentsMatchingTarget(t,n){return gt.resolve(null)}getIndexType(t,n){return gt.resolve(0)}getFieldIndexes(t,n){return gt.resolve([])}getNextCollectionGroupToUpdate(t){return gt.resolve(null)}getMinOffset(t,n){return gt.resolve(da.min())}getMinOffsetFromCollectionGroup(t,n){return gt.resolve(da.min())}updateCollectionGroup(t,n,o){return gt.resolve()}updateIndexEntries(t,n){return gt.resolve()}}class OC{constructor(){this.index={}}add(t){const n=t.lastSegment(),o=t.popLast(),l=this.index[n]||new Yn(Ke.comparator),h=!l.has(o);return this.index[n]=l.add(o),h}has(t){const n=t.lastSegment(),o=t.popLast(),l=this.index[n];return l&&l.has(o)}getEntries(t){return(this.index[t]||new Yn(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rb=41943040;class tr{static withCacheSize(t){return new tr(t,tr.DEFAULT_COLLECTION_PERCENTILE,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,o){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tr.DEFAULT_COLLECTION_PERCENTILE=10,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tr.DEFAULT=new tr(Rb,tr.DEFAULT_COLLECTION_PERCENTILE,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tr.DISABLED=new tr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new lu(0)}static cr(){return new lu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="LruGarbageCollector",DC=1048576;function tT([r,t],[n,o]){const l=Ce(r,n);return l===0?Ce(t,o):l}class LC{constructor(t){this.Ir=t,this.buffer=new Yn(tT),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();tT(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class NC{constructor(t,n,o){this.garbageCollector=t,this.asyncQueue=n,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){Vt(J0,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){vu(n)?Vt(J0,"Ignoring IndexedDB error during garbage collection: ",n):await yu(n)}await this.Vr(3e5)}))}}class kC{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((o=>Math.floor(n/100*o)))}nthSequenceNumber(t,n){if(n===0)return gt.resolve(ed.ce);const o=new LC(n);return this.mr.forEachTarget(t,(l=>o.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>o.Ar(l))))).next((()=>o.maxValue))}removeTargets(t,n,o){return this.mr.removeTargets(t,n,o)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Vt("LruGarbageCollector","Garbage collection skipped; disabled"),gt.resolve($0)):this.getCacheSize(t).next((o=>o<this.params.cacheSizeCollectionThreshold?(Vt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$0):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let o,l,h,p,y,v,E;const x=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((P=>(P>this.params.maximumSequenceNumbersToCollect?(Vt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),l=this.params.maximumSequenceNumbersToCollect):l=P,p=Date.now(),this.nthSequenceNumber(t,l)))).next((P=>(o=P,y=Date.now(),this.removeTargets(t,o,n)))).next((P=>(h=P,v=Date.now(),this.removeOrphanedDocuments(t,o)))).next((P=>(E=Date.now(),Wl()<=Ie.DEBUG&&Vt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-x}ms
	Determined least recently used ${l} in `+(y-p)+`ms
	Removed ${h} targets in `+(v-y)+`ms
	Removed ${P} documents in `+(E-v)+`ms
Total Duration: ${E-x}ms`),gt.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:h,documentsRemoved:P}))))}}function VC(r,t){return new kC(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.changes=new al((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ri.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?gt.resolve(o):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(t,n,o,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=l}getDocument(t,n){let o=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(o=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(o!==null&&Sc(o.mutation,l,Er.empty(),mn.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((o=>this.getLocalViewOfDocuments(t,o,Pe()).next((()=>o))))}getLocalViewOfDocuments(t,n,o=Pe()){const l=$a();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,o).next((h=>{let p=gc();return h.forEach(((y,v)=>{p=p.insert(y,v.overlayedDocument)})),p}))))}getOverlayedDocuments(t,n){const o=$a();return this.populateOverlays(t,o,n).next((()=>this.computeViews(t,n,o,Pe())))}populateOverlays(t,n,o){const l=[];return o.forEach((h=>{n.has(h)||l.push(h)})),this.documentOverlayCache.getOverlays(t,l).next((h=>{h.forEach(((p,y)=>{n.set(p,y)}))}))}computeViews(t,n,o,l){let h=uo();const p=wc(),y=(function(){return wc()})();return n.forEach(((v,E)=>{const x=o.get(E.key);l.has(E.key)&&(x===void 0||x.mutation instanceof ba)?h=h.insert(E.key,E):x!==void 0?(p.set(E.key,x.mutation.getFieldMask()),Sc(x.mutation,E,x.mutation.getFieldMask(),mn.now())):p.set(E.key,Er.empty())})),this.recalculateAndSaveOverlays(t,h).next((v=>(v.forEach(((E,x)=>p.set(E,x))),n.forEach(((E,x)=>y.set(E,new UC(x,p.get(E)??null)))),y)))}recalculateAndSaveOverlays(t,n){const o=wc();let l=new En(((p,y)=>p-y)),h=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((p=>{for(const y of p)y.keys().forEach((v=>{const E=n.get(v);if(E===null)return;let x=o.get(v)||Er.empty();x=y.applyToLocalView(E,x),o.set(v,x);const P=(l.get(y.batchId)||Pe()).add(v);l=l.insert(y.batchId,P)}))})).next((()=>{const p=[],y=l.getReverseIterator();for(;y.hasNext();){const v=y.getNext(),E=v.key,x=v.value,P=ob();x.forEach((M=>{if(!h.has(M)){const q=fb(n.get(M),o.get(M));q!==null&&P.set(M,q),h=h.add(M)}})),p.push(this.documentOverlayCache.saveOverlays(t,E,P))}return gt.waitFor(p)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((o=>this.recalculateAndSaveOverlays(t,o)))}getDocumentsMatchingQuery(t,n,o,l){return(function(p){return Gt.isDocumentKey(p.path)&&p.collectionGroup===null&&p.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):eb(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,o,l):this.getDocumentsMatchingCollectionQuery(t,n,o,l)}getNextDocuments(t,n,o,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,o,l).next((h=>{const p=l-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,o.largestBatchId,l-h.size):gt.resolve($a());let y=Lc,v=h;return p.next((E=>gt.forEach(E,((x,P)=>(y<P.largestBatchId&&(y=P.largestBatchId),h.get(x)?gt.resolve():this.remoteDocumentCache.getEntry(t,x).next((M=>{v=v.insert(x,M)}))))).next((()=>this.populateOverlays(t,E,h))).next((()=>this.computeViews(t,v,E,Pe()))).next((x=>({batchId:y,changes:sb(x)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Gt(n)).next((o=>{let l=gc();return o.isFoundDocument()&&(l=l.insert(o.key,o)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,o,l){const h=n.collectionGroup;let p=gc();return this.indexManager.getCollectionParents(t,h).next((y=>gt.forEach(y,(v=>{const E=(function(P,M){return new Tu(M,null,P.explicitOrderBy.slice(),P.filters.slice(),P.limit,P.limitType,P.startAt,P.endAt)})(n,v.child(h));return this.getDocumentsMatchingCollectionQuery(t,E,o,l).next((x=>{x.forEach(((P,M)=>{p=p.insert(P,M)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(t,n,o,l){let h;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,o.largestBatchId).next((p=>(h=p,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,o,h,l)))).next((p=>{h.forEach(((v,E)=>{const x=E.getKey();p.get(x)===null&&(p=p.insert(x,ri.newInvalidDocument(x)))}));let y=gc();return p.forEach(((v,E)=>{const x=h.get(v);x!==void 0&&Sc(x.mutation,E,Er.empty(),mn.now()),sd(n,E)&&(y=y.insert(v,E))})),y}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return gt.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:br(l.createTime)}})(n)),gt.resolve()}getNamedQuery(t,n){return gt.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:PC(l.bundledQuery),readTime:br(l.readTime)}})(n)),gt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.overlays=new En(Gt.comparator),this.qr=new Map}getOverlay(t,n){return gt.resolve(this.overlays.get(n))}getOverlays(t,n){const o=$a();return gt.forEach(n,(l=>this.getOverlay(t,l).next((h=>{h!==null&&o.set(l,h)})))).next((()=>o))}saveOverlays(t,n,o){return o.forEach(((l,h)=>{this.St(t,n,h)})),gt.resolve()}removeOverlaysForBatchId(t,n,o){const l=this.qr.get(o);return l!==void 0&&(l.forEach((h=>this.overlays=this.overlays.remove(h))),this.qr.delete(o)),gt.resolve()}getOverlaysForCollection(t,n,o){const l=$a(),h=n.length+1,p=new Gt(n.child("")),y=this.overlays.getIteratorFrom(p);for(;y.hasNext();){const v=y.getNext().value,E=v.getKey();if(!n.isPrefixOf(E.path))break;E.path.length===h&&v.largestBatchId>o&&l.set(v.getKey(),v)}return gt.resolve(l)}getOverlaysForCollectionGroup(t,n,o,l){let h=new En(((E,x)=>E-x));const p=this.overlays.getIterator();for(;p.hasNext();){const E=p.getNext().value;if(E.getKey().getCollectionGroup()===n&&E.largestBatchId>o){let x=h.get(E.largestBatchId);x===null&&(x=$a(),h=h.insert(E.largestBatchId,x)),x.set(E.getKey(),E)}}const y=$a(),v=h.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((E,x)=>y.set(E,x))),!(y.size()>=l)););return gt.resolve(y)}St(t,n,o){const l=this.overlays.get(o.key);if(l!==null){const p=this.qr.get(l.largestBatchId).delete(o.key);this.qr.set(l.largestBatchId,p)}this.overlays=this.overlays.insert(o.key,new aC(n,o));let h=this.qr.get(n);h===void 0&&(h=Pe(),this.qr.set(n,h)),this.qr.set(n,h.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.sessionToken=_i.EMPTY_BYTE_STRING}getSessionToken(t){return gt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,gt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(){this.Qr=new Yn(ii.$r),this.Ur=new Yn(ii.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const o=new ii(t,n);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(t,n){t.forEach((o=>this.addReference(o,n)))}removeReference(t,n){this.Gr(new ii(t,n))}zr(t,n){t.forEach((o=>this.removeReference(o,n)))}jr(t){const n=new Gt(new Ke([])),o=new ii(n,t),l=new ii(n,t+1),h=[];return this.Ur.forEachInRange([o,l],(p=>{this.Gr(p),h.push(p.key)})),h}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Gt(new Ke([])),o=new ii(n,t),l=new ii(n,t+1);let h=Pe();return this.Ur.forEachInRange([o,l],(p=>{h=h.add(p.key)})),h}containsKey(t){const n=new ii(t,0),o=this.Qr.firstAfterOrEqual(n);return o!==null&&t.isEqual(o.key)}}class ii{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Gt.comparator(t.key,n.key)||Ce(t.Yr,n.Yr)}static Kr(t,n){return Ce(t.Yr,n.Yr)||Gt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Yn(ii.$r)}checkEmpty(t){return gt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,o,l){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new oC(h,n,o,l);this.mutationQueue.push(p);for(const y of l)this.Zr=this.Zr.add(new ii(y.key,h)),this.indexManager.addToCollectionParentIndex(t,y.key.path.popLast());return gt.resolve(p)}lookupMutationBatch(t,n){return gt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const o=n+1,l=this.ei(o),h=l<0?0:l;return gt.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return gt.resolve(this.mutationQueue.length===0?ag:this.tr-1)}getAllMutationBatches(t){return gt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const o=new ii(n,0),l=new ii(n,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([o,l],(p=>{const y=this.Xr(p.Yr);h.push(y)})),gt.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(t,n){let o=new Yn(Ce);return n.forEach((l=>{const h=new ii(l,0),p=new ii(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,p],(y=>{o=o.add(y.Yr)}))})),gt.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(t,n){const o=n.path,l=o.length+1;let h=o;Gt.isDocumentKey(h)||(h=h.child(""));const p=new ii(new Gt(h),0);let y=new Yn(Ce);return this.Zr.forEachWhile((v=>{const E=v.key.path;return!!o.isPrefixOf(E)&&(E.length===l&&(y=y.add(v.Yr)),!0)}),p),gt.resolve(this.ti(y))}ti(t){const n=[];return t.forEach((o=>{const l=this.Xr(o);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){Ne(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return gt.forEach(n.mutations,(l=>{const h=new ii(l.key,n.batchId);return o=o.delete(h),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=o}))}ir(t){}containsKey(t,n){const o=new ii(n,0),l=this.Zr.firstAfterOrEqual(o);return gt.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,gt.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(t){this.ri=t,this.docs=(function(){return new En(Gt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const o=n.key,l=this.docs.get(o),h=l?l.size:0,p=this.ri(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:p}),this.size+=p-h,this.indexManager.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const o=this.docs.get(n);return gt.resolve(o?o.document.mutableCopy():ri.newInvalidDocument(n))}getEntries(t,n){let o=uo();return n.forEach((l=>{const h=this.docs.get(l);o=o.insert(l,h?h.document.mutableCopy():ri.newInvalidDocument(l))})),gt.resolve(o)}getDocumentsMatchingQuery(t,n,o,l){let h=uo();const p=n.path,y=new Gt(p.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(y);for(;v.hasNext();){const{key:E,value:{document:x}}=v.getNext();if(!p.isPrefixOf(E.path))break;E.path.length>p.length+1||EI(TI(x),o)<=0||(l.has(x.key)||sd(n,x))&&(h=h.insert(x.key,x.mutableCopy()))}return gt.resolve(h)}getAllFromCollectionGroup(t,n,o,l){Xt(9500)}ii(t,n){return gt.forEach(this.docs,(o=>n(o)))}newChangeBuffer(t){return new ZC(this)}getSize(t){return gt.resolve(this.size)}}class ZC extends zC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((o,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(o)})),gt.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(t){this.persistence=t,this.si=new al((n=>cg(n)),hg),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.oi=0,this._i=new gg,this.targetCount=0,this.ai=lu.ur()}forEachTarget(t,n){return this.si.forEach(((o,l)=>n(l))),gt.resolve()}getLastRemoteSnapshotVersion(t){return gt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return gt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),gt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.oi&&(this.oi=n),gt.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new lu(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,gt.resolve()}updateTargetData(t,n){return this.Pr(n),gt.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,gt.resolve()}removeTargets(t,n,o){let l=0;const h=[];return this.si.forEach(((p,y)=>{y.sequenceNumber<=n&&o.get(y.targetId)===null&&(this.si.delete(p),h.push(this.removeMatchingKeysForTargetId(t,y.targetId)),l++)})),gt.waitFor(h).next((()=>l))}getTargetCount(t){return gt.resolve(this.targetCount)}getTargetData(t,n){const o=this.si.get(n)||null;return gt.resolve(o)}addMatchingKeys(t,n,o){return this._i.Wr(n,o),gt.resolve()}removeMatchingKeys(t,n,o){this._i.zr(n,o);const l=this.persistence.referenceDelegate,h=[];return l&&n.forEach((p=>{h.push(l.markPotentiallyOrphaned(t,p))})),gt.waitFor(h)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),gt.resolve()}getMatchingKeysForTargetId(t,n){const o=this._i.Hr(n);return gt.resolve(o)}containsKey(t,n){return gt.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(t,n){this.ui={},this.overlays={},this.ci=new ed(0),this.li=!1,this.li=!0,this.hi=new qC,this.referenceDelegate=t(this),this.Pi=new WC(this),this.indexManager=new MC,this.remoteDocumentCache=(function(l){return new GC(l)})((o=>this.referenceDelegate.Ti(o))),this.serializer=new CC(n),this.Ii=new BC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new HC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let o=this.ui[t.toKey()];return o||(o=new FC(n,this.referenceDelegate),this.ui[t.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,o){Vt("MemoryPersistence","Starting transaction:",t);const l=new YC(this.ci.next());return this.referenceDelegate.Ei(),o(l).next((h=>this.referenceDelegate.di(l).next((()=>h)))).toPromise().then((h=>(l.raiseOnCommittedEvent(),h)))}Ai(t,n){return gt.or(Object.values(this.ui).map((o=>()=>o.containsKey(t,n))))}}class YC extends wI{constructor(t){super(),this.currentSequenceNumber=t}}class _g{constructor(t){this.persistence=t,this.Ri=new gg,this.Vi=null}static mi(t){return new _g(t)}get fi(){if(this.Vi)return this.Vi;throw Xt(60996)}addReference(t,n,o){return this.Ri.addReference(o,n),this.fi.delete(o.toString()),gt.resolve()}removeReference(t,n,o){return this.Ri.removeReference(o,n),this.fi.add(o.toString()),gt.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),gt.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((h=>this.fi.add(h.toString())))})).next((()=>o.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gt.forEach(this.fi,(o=>{const l=Gt.fromPath(o);return this.gi(t,l).next((h=>{h||n.removeEntry(l,oe.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((o=>{o?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return gt.or([()=>gt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Uf{constructor(t,n){this.persistence=t,this.pi=new al((o=>xI(o.path)),((o,l)=>o.isEqual(l))),this.garbageCollector=VC(this,n)}static mi(t,n){return new Uf(t,n)}Ei(){}di(t){return gt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((o=>n.next((l=>o+l))))}wr(t){let n=0;return this.pr(t,(o=>{n++})).next((()=>n))}pr(t,n){return gt.forEach(this.pi,((o,l)=>this.br(t,o,l).next((h=>h?gt.resolve():n(l)))))}removeTargets(t,n,o){return this.persistence.getTargetCache().removeTargets(t,n,o)}removeOrphanedDocuments(t,n){let o=0;const l=this.persistence.getRemoteDocumentCache(),h=l.newChangeBuffer();return l.ii(t,(p=>this.br(t,p,n).next((y=>{y||(o++,h.removeEntry(p,oe.min()))})))).next((()=>h.apply(t))).next((()=>o))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),gt.resolve()}removeTarget(t,n){const o=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,o)}addReference(t,n,o){return this.pi.set(o,t.currentSequenceNumber),gt.resolve()}removeReference(t,n,o){return this.pi.set(o,t.currentSequenceNumber),gt.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),gt.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=vf(t.data.value)),n}br(t,n,o){return gt.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return gt.resolve(l!==void 0&&l>o)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(t,n,o,l){this.targetId=t,this.fromCache=n,this.Es=o,this.ds=l}static As(t,n){let o=Pe(),l=Pe();for(const h of n.docChanges)switch(h.type){case 0:o=o.add(h.doc.key);break;case 1:l=l.add(h.doc.key)}return new yg(t,n.fromCache,o,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return RS()?8:SI(Mi())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,o,l){const h={result:null};return this.ys(t,n).next((p=>{h.result=p})).next((()=>{if(!h.result)return this.ws(t,n,l,o).next((p=>{h.result=p}))})).next((()=>{if(h.result)return;const p=new QC;return this.Ss(t,n,p).next((y=>{if(h.result=y,this.Vs)return this.bs(t,n,p,y.size)}))})).next((()=>h.result))}bs(t,n,o,l){return o.documentReadCount<this.fs?(Wl()<=Ie.DEBUG&&Vt("QueryEngine","SDK will not create cache indexes for query:",Yl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),gt.resolve()):(Wl()<=Ie.DEBUG&&Vt("QueryEngine","Query:",Yl(n),"scans",o.documentReadCount,"local documents and returns",l,"documents as results."),o.documentReadCount>this.gs*l?(Wl()<=Ie.DEBUG&&Vt("QueryEngine","The SDK decides to create cache indexes for query:",Yl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Is(n))):gt.resolve())}ys(t,n){if(H0(n))return gt.resolve(null);let o=Is(n);return this.indexManager.getIndexType(t,o).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Nf(n,null,"F"),o=Is(n)),this.indexManager.getDocumentsMatchingTarget(t,o).next((h=>{const p=Pe(...h);return this.ps.getDocuments(t,p).next((y=>this.indexManager.getMinOffset(t,o).next((v=>{const E=this.Ds(n,y);return this.Cs(n,E,p,v.readTime)?this.ys(t,Nf(n,null,"F")):this.vs(t,E,n,v)}))))})))))}ws(t,n,o,l){return H0(n)||l.isEqual(oe.min())?gt.resolve(null):this.ps.getDocuments(t,o).next((h=>{const p=this.Ds(n,h);return this.Cs(n,p,o,l)?gt.resolve(null):(Wl()<=Ie.DEBUG&&Vt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Yl(n)),this.vs(t,p,n,vI(l,Lc)).next((y=>y)))}))}Ds(t,n){let o=new Yn(ib(t));return n.forEach(((l,h)=>{sd(t,h)&&(o=o.add(h))})),o}Cs(t,n,o,l){if(t.limit===null)return!1;if(o.size!==n.size)return!0;const h=t.limitType==="F"?n.last():n.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(l)>0)}Ss(t,n,o){return Wl()<=Ie.DEBUG&&Vt("QueryEngine","Using full collection scan to execute query:",Yl(n)),this.ps.getDocumentsMatchingQuery(t,n,da.min(),o)}vs(t,n,o,l){return this.ps.getDocumentsMatchingQuery(t,o,l).next((h=>(n.forEach((p=>{h=h.insert(p.key,p)})),h)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="LocalStore",XC=3e8;class $C{constructor(t,n,o,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new En(Ce),this.xs=new al((h=>cg(h)),hg),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(o)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new jC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function JC(r,t,n,o){return new $C(r,t,n,o)}async function Cb(r,t){const n=me(r);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let l;return n.mutationQueue.getAllMutationBatches(o).next((h=>(l=h,n.Bs(t),n.mutationQueue.getAllMutationBatches(o)))).next((h=>{const p=[],y=[];let v=Pe();for(const E of l){p.push(E.batchId);for(const x of E.mutations)v=v.add(x.key)}for(const E of h){y.push(E.batchId);for(const x of E.mutations)v=v.add(x.key)}return n.localDocuments.getDocuments(o,v).next((E=>({Ls:E,removedBatchIds:p,addedBatchIds:y})))}))}))}function t2(r,t){const n=me(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const l=t.batch.keys(),h=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,v,E,x){const P=E.batch,M=P.keys();let q=gt.resolve();return M.forEach((Q=>{q=q.next((()=>x.getEntry(v,Q))).next((nt=>{const at=E.docVersions.get(Q);Ne(at!==null,48541),nt.version.compareTo(at)<0&&(P.applyToRemoteDocument(nt,E),nt.isValidDocument()&&(nt.setReadTime(E.commitVersion),x.addEntry(nt)))}))})),q.next((()=>y.mutationQueue.removeMutationBatch(v,P)))})(n,o,t,h).next((()=>h.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(y){let v=Pe();for(let E=0;E<y.mutationResults.length;++E)y.mutationResults[E].transformResults.length>0&&(v=v.add(y.batch.mutations[E].key));return v})(t)))).next((()=>n.localDocuments.getDocuments(o,l)))}))}function Pb(r){const t=me(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function e2(r,t){const n=me(r),o=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const p=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const y=[];t.targetChanges.forEach(((x,P)=>{const M=l.get(P);if(!M)return;y.push(n.Pi.removeMatchingKeys(h,x.removedDocuments,P).next((()=>n.Pi.addMatchingKeys(h,x.addedDocuments,P))));let q=M.withSequenceNumber(h.currentSequenceNumber);t.targetMismatches.get(P)!==null?q=q.withResumeToken(_i.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):x.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(x.resumeToken,o)),l=l.insert(P,q),(function(nt,at,Tt){return nt.resumeToken.approximateByteSize()===0||at.snapshotVersion.toMicroseconds()-nt.snapshotVersion.toMicroseconds()>=XC?!0:Tt.addedDocuments.size+Tt.modifiedDocuments.size+Tt.removedDocuments.size>0})(M,q,x)&&y.push(n.Pi.updateTargetData(h,q))}));let v=uo(),E=Pe();if(t.documentUpdates.forEach((x=>{t.resolvedLimboDocuments.has(x)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(h,x))})),y.push(n2(h,p,t.documentUpdates).next((x=>{v=x.ks,E=x.qs}))),!o.isEqual(oe.min())){const x=n.Pi.getLastRemoteSnapshotVersion(h).next((P=>n.Pi.setTargetsMetadata(h,h.currentSequenceNumber,o)));y.push(x)}return gt.waitFor(y).next((()=>p.apply(h))).next((()=>n.localDocuments.getLocalViewOfDocuments(h,v,E))).next((()=>v))})).then((h=>(n.Ms=l,h)))}function n2(r,t,n){let o=Pe(),l=Pe();return n.forEach((h=>o=o.add(h))),t.getEntries(r,o).next((h=>{let p=uo();return n.forEach(((y,v)=>{const E=h.get(y);v.isFoundDocument()!==E.isFoundDocument()&&(l=l.add(y)),v.isNoDocument()&&v.version.isEqual(oe.min())?(t.removeEntry(y,v.readTime),p=p.insert(y,v)):!E.isValidDocument()||v.version.compareTo(E.version)>0||v.version.compareTo(E.version)===0&&E.hasPendingWrites?(t.addEntry(v),p=p.insert(y,v)):Vt(vg,"Ignoring outdated watch update for ",y,". Current version:",E.version," Watch version:",v.version)})),{ks:p,qs:l}}))}function i2(r,t){const n=me(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(t===void 0&&(t=ag),n.mutationQueue.getNextMutationBatchAfterBatchId(o,t))))}function r2(r,t){const n=me(r);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let l;return n.Pi.getTargetData(o,t).next((h=>h?(l=h,gt.resolve(l)):n.Pi.allocateTargetId(o).next((p=>(l=new oa(t,p,"TargetPurposeListen",o.currentSequenceNumber),n.Pi.addTargetData(o,l).next((()=>l)))))))})).then((o=>{const l=n.Ms.get(o.targetId);return(l===null||o.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(o.targetId,o),n.xs.set(t,o.targetId)),o}))}async function Dp(r,t,n){const o=me(r),l=o.Ms.get(t),h=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",h,(p=>o.persistence.referenceDelegate.removeTarget(p,l)))}catch(p){if(!vu(p))throw p;Vt(vg,`Failed to update sequence numbers for target ${t}: ${p}`)}o.Ms=o.Ms.remove(t),o.xs.delete(l.target)}function eT(r,t,n){const o=me(r);let l=oe.min(),h=Pe();return o.persistence.runTransaction("Execute query","readwrite",(p=>(function(v,E,x){const P=me(v),M=P.xs.get(x);return M!==void 0?gt.resolve(P.Ms.get(M)):P.Pi.getTargetData(E,x)})(o,p,Is(t)).next((y=>{if(y)return l=y.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(p,y.targetId).next((v=>{h=v}))})).next((()=>o.Fs.getDocumentsMatchingQuery(p,t,n?l:oe.min(),n?h:Pe()))).next((y=>(s2(o,GI(t),y),{documents:y,Qs:h})))))}function s2(r,t,n){let o=r.Os.get(t)||oe.min();n.forEach(((l,h)=>{h.readTime.compareTo(o)>0&&(o=h.readTime)})),r.Os.set(t,o)}class nT{constructor(){this.activeTargetIds=XI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class o2{constructor(){this.Mo=new nT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,o){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,o){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new nT,Promise.resolve()}handleUserChange(t,n,o){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="ConnectivityMonitor";class rT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Vt(iT,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){Vt(iT,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df=null;function Lp(){return df===null?df=(function(){return 268435456+Math.round(2147483648*Math.random())})():df++,"0x"+df.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="RestConnection",l2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class u2{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${o}/databases/${l}`,this.Wo=this.databaseId.database===Of?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Go(t,n,o,l,h){const p=Lp(),y=this.zo(t,n.toUriEncodedString());Vt(cp,`Sending RPC '${t}' ${p}:`,y,o);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,l,h);const{host:E}=new URL(y),x=du(E);return this.Jo(t,y,v,o,x).then((P=>(Vt(cp,`Received RPC '${t}' ${p}: `,P),P)),(P=>{throw ru(cp,`RPC '${t}' ${p} failed with error: `,P,"url: ",y,"request:",o),P}))}Ho(t,n,o,l,h,p){return this.Go(t,n,o,l,h)}jo(t,n,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_u})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,h)=>t[h]=l)),o&&o.headers.forEach(((l,h)=>t[h]=l))}zo(t,n){const o=l2[t];return`${this.Uo}/v1/${n}:${o}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri="WebChannelConnection";class h2 extends u2{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,o,l,h){const p=Lp();return new Promise(((y,v)=>{const E=new PE;E.setWithCredentials(!0),E.listenOnce(ME.COMPLETE,(()=>{try{switch(E.getLastErrorCode()){case yf.NO_ERROR:const P=E.getResponseJson();Vt(Ri,`XHR for RPC '${t}' ${p} received:`,JSON.stringify(P)),y(P);break;case yf.TIMEOUT:Vt(Ri,`RPC '${t}' ${p} timed out`),v(new Pt(ct.DEADLINE_EXCEEDED,"Request time out"));break;case yf.HTTP_ERROR:const M=E.getStatus();if(Vt(Ri,`RPC '${t}' ${p} failed with status:`,M,"response text:",E.getResponseText()),M>0){let q=E.getResponseJson();Array.isArray(q)&&(q=q[0]);const Q=q?.error;if(Q&&Q.status&&Q.message){const nt=(function(Tt){const ut=Tt.toLowerCase().replace(/_/g,"-");return Object.values(ct).indexOf(ut)>=0?ut:ct.UNKNOWN})(Q.status);v(new Pt(nt,Q.message))}else v(new Pt(ct.UNKNOWN,"Server responded with status "+E.getStatus()))}else v(new Pt(ct.UNAVAILABLE,"Connection failed."));break;default:Xt(9055,{l_:t,streamId:p,h_:E.getLastErrorCode(),P_:E.getLastError()})}}finally{Vt(Ri,`RPC '${t}' ${p} completed.`)}}));const x=JSON.stringify(l);Vt(Ri,`RPC '${t}' ${p} sending request:`,l),E.send(n,"POST",x,o,15)}))}T_(t,n,o){const l=Lp(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],p=LE(),y=DE(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(v.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,n,o),v.encodeInitMessageHeaders=!0;const x=h.join("");Vt(Ri,`Creating RPC '${t}' stream ${l}: ${x}`,v);const P=p.createWebChannel(x,v);this.I_(P);let M=!1,q=!1;const Q=new c2({Yo:at=>{q?Vt(Ri,`Not sending because RPC '${t}' stream ${l} is closed:`,at):(M||(Vt(Ri,`Opening RPC '${t}' stream ${l} transport.`),P.open(),M=!0),Vt(Ri,`RPC '${t}' stream ${l} sending:`,at),P.send(at))},Zo:()=>P.close()}),nt=(at,Tt,ut)=>{at.listen(Tt,(_t=>{try{ut(_t)}catch(Bt){setTimeout((()=>{throw Bt}),0)}}))};return nt(P,pc.EventType.OPEN,(()=>{q||(Vt(Ri,`RPC '${t}' stream ${l} transport opened.`),Q.o_())})),nt(P,pc.EventType.CLOSE,(()=>{q||(q=!0,Vt(Ri,`RPC '${t}' stream ${l} transport closed`),Q.a_(),this.E_(P))})),nt(P,pc.EventType.ERROR,(at=>{q||(q=!0,ru(Ri,`RPC '${t}' stream ${l} transport errored. Name:`,at.name,"Message:",at.message),Q.a_(new Pt(ct.UNAVAILABLE,"The operation could not be completed")))})),nt(P,pc.EventType.MESSAGE,(at=>{if(!q){const Tt=at.data[0];Ne(!!Tt,16349);const ut=Tt,_t=ut?.error||ut[0]?.error;if(_t){Vt(Ri,`RPC '${t}' stream ${l} received error:`,_t);const Bt=_t.status;let Ct=(function(O){const k=kn[O];if(k!==void 0)return gb(k)})(Bt),kt=_t.message;Ct===void 0&&(Ct=ct.INTERNAL,kt="Unknown error status: "+Bt+" with message "+_t.message),q=!0,Q.a_(new Pt(Ct,kt)),P.close()}else Vt(Ri,`RPC '${t}' stream ${l} received:`,Tt),Q.u_(Tt)}})),nt(y,OE.STAT_EVENT,(at=>{at.stat===wp.PROXY?Vt(Ri,`RPC '${t}' stream ${l} detected buffering proxy`):at.stat===wp.NOPROXY&&Vt(Ri,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{Q.__()}),0),Q}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function hp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(r){return new pC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(t,n,o=1e3,l=1.5,h=6e4){this.Mi=t,this.timerId=n,this.d_=o,this.A_=l,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-o);l>0&&Vt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="PersistentStream";class Mb{constructor(t,n,o,l,h,p,y,v){this.Mi=t,this.S_=o,this.b_=l,this.connection=h,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=y,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Tg(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===ct.RESOURCE_EXHAUSTED?(lo(n.toString()),lo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ct.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,l])=>{this.D_===n&&this.G_(o,l)}),(o=>{t((()=>{const l=new Pt(ct.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(l)}))}))}G_(t,n){const o=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{o((()=>this.listener.Xo()))})),this.stream.t_((()=>{o((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{o((()=>this.z_(l)))})),this.stream.onMessage((l=>{o((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return Vt(sT,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(Vt(sT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class f2 extends Mb{constructor(t,n,o,l,h,p){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,l,p),this.serializer=h}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=vC(this.serializer,t),o=(function(h){if(!("targetChange"in h))return oe.min();const p=h.targetChange;return p.targetIds&&p.targetIds.length?oe.min():p.readTime?br(p.readTime):oe.min()})(t);return this.listener.H_(n,o)}Y_(t){const n={};n.database=Op(this.serializer),n.addTarget=(function(h,p){let y;const v=p.target;if(y=Ip(v)?{documents:EC(h,v)}:{query:bC(h,v).ft},y.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){y.resumeToken=vb(h,p.resumeToken);const E=Pp(h,p.expectedCount);E!==null&&(y.expectedCount=E)}else if(p.snapshotVersion.compareTo(oe.min())>0){y.readTime=Vf(h,p.snapshotVersion.toTimestamp());const E=Pp(h,p.expectedCount);E!==null&&(y.expectedCount=E)}return y})(this.serializer,t);const o=SC(this.serializer,t);o&&(n.labels=o),this.q_(n)}Z_(t){const n={};n.database=Op(this.serializer),n.removeTarget=t,this.q_(n)}}class d2 extends Mb{constructor(t,n,o,l,h,p){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,l,p),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Ne(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ne(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Ne(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=TC(t.writeResults,t.commitTime),o=br(t.commitTime);return this.listener.na(o,n)}ra(){const t={};t.database=Op(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((o=>wb(this.serializer,o)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{}class p2 extends m2{constructor(t,n,o,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=o,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Pt(ct.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Go(t,Mp(n,o),l,h,p))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Pt(ct.UNKNOWN,h.toString())}))}Ho(t,n,o,l,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,y])=>this.connection.Ho(t,Mp(n,o),l,p,y,h))).catch((p=>{throw p.name==="FirebaseError"?(p.code===ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new Pt(ct.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class g2{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(lo(n),this.aa=!1):Vt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl="RemoteStore";class _2{constructor(t,n,o,l,h){this.localStore=t,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo((p=>{o.enqueueAndForget((async()=>{ll(this)&&(Vt(sl,"Restarting streams for network reachability change."),await(async function(v){const E=me(v);E.Ea.add(4),await Jc(E),E.Ra.set("Unknown"),E.Ea.delete(4),await hd(E)})(this))}))})),this.Ra=new g2(o,l)}}async function hd(r){if(ll(r))for(const t of r.da)await t(!0)}async function Jc(r){for(const t of r.da)await t(!1)}function Ob(r,t){const n=me(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Sg(n)?wg(n):Eu(n).O_()&&bg(n,t))}function Eg(r,t){const n=me(r),o=Eu(n);n.Ia.delete(t),o.O_()&&Db(n,t),n.Ia.size===0&&(o.O_()?o.L_():ll(n)&&n.Ra.set("Unknown"))}function bg(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(oe.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Eu(r).Y_(t)}function Db(r,t){r.Va.Ue(t),Eu(r).Z_(t)}function wg(r){r.Va=new hC({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),Eu(r).start(),r.Ra.ua()}function Sg(r){return ll(r)&&!Eu(r).x_()&&r.Ia.size>0}function ll(r){return me(r).Ea.size===0}function Lb(r){r.Va=void 0}async function y2(r){r.Ra.set("Online")}async function v2(r){r.Ia.forEach(((t,n)=>{bg(r,t)}))}async function T2(r,t){Lb(r),Sg(r)?(r.Ra.ha(t),wg(r)):r.Ra.set("Unknown")}async function E2(r,t,n){if(r.Ra.set("Online"),t instanceof yb&&t.state===2&&t.cause)try{await(async function(l,h){const p=h.cause;for(const y of h.targetIds)l.Ia.has(y)&&(await l.remoteSyncer.rejectListen(y,p),l.Ia.delete(y),l.Va.removeTarget(y))})(r,t)}catch(o){Vt(sl,"Failed to remove targets %s: %s ",t.targetIds.join(","),o),await jf(r,o)}else if(t instanceof bf?r.Va.Ze(t):t instanceof _b?r.Va.st(t):r.Va.tt(t),!n.isEqual(oe.min()))try{const o=await Pb(r.localStore);n.compareTo(o)>=0&&await(function(h,p){const y=h.Va.Tt(p);return y.targetChanges.forEach(((v,E)=>{if(v.resumeToken.approximateByteSize()>0){const x=h.Ia.get(E);x&&h.Ia.set(E,x.withResumeToken(v.resumeToken,p))}})),y.targetMismatches.forEach(((v,E)=>{const x=h.Ia.get(v);if(!x)return;h.Ia.set(v,x.withResumeToken(_i.EMPTY_BYTE_STRING,x.snapshotVersion)),Db(h,v);const P=new oa(x.target,v,E,x.sequenceNumber);bg(h,P)})),h.remoteSyncer.applyRemoteEvent(y)})(r,n)}catch(o){Vt(sl,"Failed to raise snapshot:",o),await jf(r,o)}}async function jf(r,t,n){if(!vu(t))throw t;r.Ea.add(1),await Jc(r),r.Ra.set("Offline"),n||(n=()=>Pb(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Vt(sl,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await hd(r)}))}function Nb(r,t){return t().catch((n=>jf(r,n,t)))}async function fd(r){const t=me(r),n=_a(t);let o=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ag;for(;b2(t);)try{const l=await i2(t.localStore,o);if(l===null){t.Ta.length===0&&n.L_();break}o=l.batchId,w2(t,l)}catch(l){await jf(t,l)}kb(t)&&Vb(t)}function b2(r){return ll(r)&&r.Ta.length<10}function w2(r,t){r.Ta.push(t);const n=_a(r);n.O_()&&n.X_&&n.ea(t.mutations)}function kb(r){return ll(r)&&!_a(r).x_()&&r.Ta.length>0}function Vb(r){_a(r).start()}async function S2(r){_a(r).ra()}async function A2(r){const t=_a(r);for(const n of r.Ta)t.ea(n.mutations)}async function x2(r,t,n){const o=r.Ta.shift(),l=dg.from(o,t,n);await Nb(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await fd(r)}async function R2(r,t){t&&_a(r).X_&&await(async function(o,l){if((function(p){return pb(p)&&p!==ct.ABORTED})(l.code)){const h=o.Ta.shift();_a(o).B_(),await Nb(o,(()=>o.remoteSyncer.rejectFailedWrite(h.batchId,l))),await fd(o)}})(r,t),kb(r)&&Vb(r)}async function oT(r,t){const n=me(r);n.asyncQueue.verifyOperationInProgress(),Vt(sl,"RemoteStore received new credentials");const o=ll(n);n.Ea.add(3),await Jc(n),o&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await hd(n)}async function I2(r,t){const n=me(r);t?(n.Ea.delete(2),await hd(n)):t||(n.Ea.add(2),await Jc(n),n.Ra.set("Unknown"))}function Eu(r){return r.ma||(r.ma=(function(n,o,l){const h=me(n);return h.sa(),new f2(o,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)})(r.datastore,r.asyncQueue,{Xo:y2.bind(null,r),t_:v2.bind(null,r),r_:T2.bind(null,r),H_:E2.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),Sg(r)?wg(r):r.Ra.set("Unknown")):(await r.ma.stop(),Lb(r))}))),r.ma}function _a(r){return r.fa||(r.fa=(function(n,o,l){const h=me(n);return h.sa(),new d2(o,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:S2.bind(null,r),r_:R2.bind(null,r),ta:A2.bind(null,r),na:x2.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await fd(r)):(await r.fa.stop(),r.Ta.length>0&&(Vt(sl,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(t,n,o,l,h){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=o,this.op=l,this.removalCallback=h,this.deferred=new Rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,o,l,h){const p=Date.now()+o,y=new Ag(t,n,p,l,h);return y.start(o),y}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Pt(ct.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xg(r,t){if(lo("AsyncQueue",`${t}: ${r}`),vu(r))return new Pt(ct.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{static emptySet(t){return new eu(t.comparator)}constructor(t){this.comparator=t?(n,o)=>t(n,o)||Gt.comparator(n.key,o.key):(n,o)=>Gt.comparator(n.key,o.key),this.keyedMap=gc(),this.sortedSet=new En(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,o)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof eu)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),o=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,h=o.getNext().key;if(!l.isEqual(h))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const o=new eu;return o.comparator=this.comparator,o.keyedMap=t,o.sortedSet=n,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(){this.ga=new En(Gt.comparator)}track(t){const n=t.doc.key,o=this.ga.get(n);o?t.type!==0&&o.type===3?this.ga=this.ga.insert(n,t):t.type===3&&o.type!==1?this.ga=this.ga.insert(n,{type:o.type,doc:t.doc}):t.type===2&&o.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&o.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&o.type===0?this.ga=this.ga.remove(n):t.type===1&&o.type===2?this.ga=this.ga.insert(n,{type:1,doc:o.doc}):t.type===0&&o.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Xt(63341,{Rt:t,pa:o}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,o)=>{t.push(o)})),t}}class uu{constructor(t,n,o,l,h,p,y,v,E){this.query=t,this.docs=n,this.oldDocs=o,this.docChanges=l,this.mutatedKeys=h,this.fromCache=p,this.syncStateChanged=y,this.excludesMetadataChanges=v,this.hasCachedResults=E}static fromInitialDocuments(t,n,o,l,h){const p=[];return n.forEach((y=>{p.push({type:0,doc:y})})),new uu(t,n,eu.emptySet(n),p,o,l,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&rd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,o=t.docChanges;if(n.length!==o.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==o[l].type||!n[l].doc.isEqual(o[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class P2{constructor(){this.queries=lT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,o){const l=me(n),h=l.queries;l.queries=lT(),h.forEach(((p,y)=>{for(const v of y.Sa)v.onError(o)}))})(this,new Pt(ct.ABORTED,"Firestore shutting down"))}}function lT(){return new al((r=>nb(r)),rd)}async function Rg(r,t){const n=me(r);let o=3;const l=t.query;let h=n.queries.get(l);h?!h.ba()&&t.Da()&&(o=2):(h=new C2,o=t.Da()?0:1);try{switch(o){case 0:h.wa=await n.onListen(l,!0);break;case 1:h.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(p){const y=xg(p,`Initialization of query '${Yl(t.query)}' failed`);return void t.onError(y)}n.queries.set(l,h),h.Sa.push(t),t.va(n.onlineState),h.wa&&t.Fa(h.wa)&&Cg(n)}async function Ig(r,t){const n=me(r),o=t.query;let l=3;const h=n.queries.get(o);if(h){const p=h.Sa.indexOf(t);p>=0&&(h.Sa.splice(p,1),h.Sa.length===0?l=t.Da()?0:1:!h.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function M2(r,t){const n=me(r);let o=!1;for(const l of t){const h=l.query,p=n.queries.get(h);if(p){for(const y of p.Sa)y.Fa(l)&&(o=!0);p.wa=l}}o&&Cg(n)}function O2(r,t,n){const o=me(r),l=o.queries.get(t);if(l)for(const h of l.Sa)h.onError(n);o.queries.delete(t)}function Cg(r){r.Ca.forEach((t=>{t.next()}))}var Np,uT;(uT=Np||(Np={})).Ma="default",uT.Cache="cache";class Pg{constructor(t,n,o){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(t){if(!this.options.includeMetadataChanges){const o=[];for(const l of t.docChanges)l.type!==3&&o.push(l);t=new uu(t.query,t.docs,t.oldDocs,o,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const o=n!=="Offline";return(!this.options.qa||!o)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=uu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Np.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(t){this.key=t}}class Ub{constructor(t){this.key=t}}class D2{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=ib(t),this.tu=new eu(this.eu)}get nu(){return this.Ya}ru(t,n){const o=n?n.iu:new aT,l=n?n.tu:this.tu;let h=n?n.mutatedKeys:this.mutatedKeys,p=l,y=!1;const v=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,E=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((x,P)=>{const M=l.get(x),q=sd(this.query,P)?P:null,Q=!!M&&this.mutatedKeys.has(M.key),nt=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let at=!1;M&&q?M.data.isEqual(q.data)?Q!==nt&&(o.track({type:3,doc:q}),at=!0):this.su(M,q)||(o.track({type:2,doc:q}),at=!0,(v&&this.eu(q,v)>0||E&&this.eu(q,E)<0)&&(y=!0)):!M&&q?(o.track({type:0,doc:q}),at=!0):M&&!q&&(o.track({type:1,doc:M}),at=!0,(v||E)&&(y=!0)),at&&(q?(p=p.add(q),h=nt?h.add(x):h.delete(x)):(p=p.delete(x),h=h.delete(x)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const x=this.query.limitType==="F"?p.last():p.first();p=p.delete(x.key),h=h.delete(x.key),o.track({type:1,doc:x})}return{tu:p,iu:o,Cs:y,mutatedKeys:h}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,o,l){const h=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const p=t.iu.ya();p.sort(((x,P)=>(function(q,Q){const nt=at=>{switch(at){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xt(20277,{Rt:at})}};return nt(q)-nt(Q)})(x.type,P.type)||this.eu(x.doc,P.doc))),this.ou(o),l=l??!1;const y=n&&!l?this._u():[],v=this.Xa.size===0&&this.current&&!l?1:0,E=v!==this.Za;return this.Za=v,p.length!==0||E?{snapshot:new uu(this.query,t.tu,h,p,t.mutatedKeys,v===0,E,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new aT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Pe(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))}));const n=[];return t.forEach((o=>{this.Xa.has(o)||n.push(new Ub(o))})),this.Xa.forEach((o=>{t.has(o)||n.push(new zb(o))})),n}cu(t){this.Ya=t.Qs,this.Xa=Pe();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return uu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Mg="SyncEngine";class L2{constructor(t,n,o){this.query=t,this.targetId=n,this.view=o}}class N2{constructor(t){this.key=t,this.hu=!1}}class k2{constructor(t,n,o,l,h,p){this.localStore=t,this.remoteStore=n,this.eventManager=o,this.sharedClientState=l,this.currentUser=h,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new al((y=>nb(y)),rd),this.Iu=new Map,this.Eu=new Set,this.du=new En(Gt.comparator),this.Au=new Map,this.Ru=new gg,this.Vu={},this.mu=new Map,this.fu=lu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function V2(r,t,n=!0){const o=Gb(r);let l;const h=o.Tu.get(t);return h?(o.sharedClientState.addLocalQueryTarget(h.targetId),l=h.view.lu()):l=await jb(o,t,n,!0),l}async function z2(r,t){const n=Gb(r);await jb(n,t,!0,!1)}async function jb(r,t,n,o){const l=await r2(r.localStore,Is(t)),h=l.targetId,p=r.sharedClientState.addLocalQueryTarget(h,n);let y;return o&&(y=await U2(r,t,h,p==="current",l.resumeToken)),r.isPrimaryClient&&n&&Ob(r.remoteStore,l),y}async function U2(r,t,n,o,l){r.pu=(P,M,q)=>(async function(nt,at,Tt,ut){let _t=at.view.ru(Tt);_t.Cs&&(_t=await eT(nt.localStore,at.query,!1).then((({documents:V})=>at.view.ru(V,_t))));const Bt=ut&&ut.targetChanges.get(at.targetId),Ct=ut&&ut.targetMismatches.get(at.targetId)!=null,kt=at.view.applyChanges(_t,nt.isPrimaryClient,Bt,Ct);return hT(nt,at.targetId,kt.au),kt.snapshot})(r,P,M,q);const h=await eT(r.localStore,t,!0),p=new D2(t,h.Qs),y=p.ru(h.documents),v=$c.createSynthesizedTargetChangeForCurrentChange(n,o&&r.onlineState!=="Offline",l),E=p.applyChanges(y,r.isPrimaryClient,v);hT(r,n,E.au);const x=new L2(t,n,p);return r.Tu.set(t,x),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),E.snapshot}async function j2(r,t,n){const o=me(r),l=o.Tu.get(t),h=o.Iu.get(l.targetId);if(h.length>1)return o.Iu.set(l.targetId,h.filter((p=>!rd(p,t)))),void o.Tu.delete(t);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(l.targetId),o.sharedClientState.isActiveQueryTarget(l.targetId)||await Dp(o.localStore,l.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(l.targetId),n&&Eg(o.remoteStore,l.targetId),kp(o,l.targetId)})).catch(yu)):(kp(o,l.targetId),await Dp(o.localStore,l.targetId,!0))}async function B2(r,t){const n=me(r),o=n.Tu.get(t),l=n.Iu.get(o.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),Eg(n.remoteStore,o.targetId))}async function H2(r,t,n){const o=Q2(r);try{const l=await(function(p,y){const v=me(p),E=mn.now(),x=y.reduce(((q,Q)=>q.add(Q.key)),Pe());let P,M;return v.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let Q=uo(),nt=Pe();return v.Ns.getEntries(q,x).next((at=>{Q=at,Q.forEach(((Tt,ut)=>{ut.isValidDocument()||(nt=nt.add(Tt))}))})).next((()=>v.localDocuments.getOverlayedDocuments(q,Q))).next((at=>{P=at;const Tt=[];for(const ut of y){const _t=sC(ut,P.get(ut.key).overlayedDocument);_t!=null&&Tt.push(new ba(ut.key,_t,YE(_t.value.mapValue),Pi.exists(!0)))}return v.mutationQueue.addMutationBatch(q,E,Tt,y)})).next((at=>{M=at;const Tt=at.applyToLocalDocumentSet(P,nt);return v.documentOverlayCache.saveOverlays(q,at.batchId,Tt)}))})).then((()=>({batchId:M.batchId,changes:sb(P)})))})(o.localStore,t);o.sharedClientState.addPendingMutation(l.batchId),(function(p,y,v){let E=p.Vu[p.currentUser.toKey()];E||(E=new En(Ce)),E=E.insert(y,v),p.Vu[p.currentUser.toKey()]=E})(o,l.batchId,n),await th(o,l.changes),await fd(o.remoteStore)}catch(l){const h=xg(l,"Failed to persist write");n.reject(h)}}async function Bb(r,t){const n=me(r);try{const o=await e2(n.localStore,t);t.targetChanges.forEach(((l,h)=>{const p=n.Au.get(h);p&&(Ne(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?p.hu=!0:l.modifiedDocuments.size>0?Ne(p.hu,14607):l.removedDocuments.size>0&&(Ne(p.hu,42227),p.hu=!1))})),await th(n,o,t)}catch(o){await yu(o)}}function cT(r,t,n){const o=me(r);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const l=[];o.Tu.forEach(((h,p)=>{const y=p.view.va(t);y.snapshot&&l.push(y.snapshot)})),(function(p,y){const v=me(p);v.onlineState=y;let E=!1;v.queries.forEach(((x,P)=>{for(const M of P.Sa)M.va(y)&&(E=!0)})),E&&Cg(v)})(o.eventManager,t),l.length&&o.Pu.H_(l),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}async function q2(r,t,n){const o=me(r);o.sharedClientState.updateQueryState(t,"rejected",n);const l=o.Au.get(t),h=l&&l.key;if(h){let p=new En(Gt.comparator);p=p.insert(h,ri.newNoDocument(h,oe.min()));const y=Pe().add(h),v=new ud(oe.min(),new Map,new En(Ce),p,y);await Bb(o,v),o.du=o.du.remove(h),o.Au.delete(t),Og(o)}else await Dp(o.localStore,t,!1).then((()=>kp(o,t,n))).catch(yu)}async function F2(r,t){const n=me(r),o=t.batch.batchId;try{const l=await t2(n.localStore,t);qb(n,o,null),Hb(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await th(n,l)}catch(l){await yu(l)}}async function G2(r,t,n){const o=me(r);try{const l=await(function(p,y){const v=me(p);return v.persistence.runTransaction("Reject batch","readwrite-primary",(E=>{let x;return v.mutationQueue.lookupMutationBatch(E,y).next((P=>(Ne(P!==null,37113),x=P.keys(),v.mutationQueue.removeMutationBatch(E,P)))).next((()=>v.mutationQueue.performConsistencyCheck(E))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(E,x,y))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,x))).next((()=>v.localDocuments.getDocuments(E,x)))}))})(o.localStore,t);qb(o,t,n),Hb(o,t),o.sharedClientState.updateMutationState(t,"rejected",n),await th(o,l)}catch(l){await yu(l)}}function Hb(r,t){(r.mu.get(t)||[]).forEach((n=>{n.resolve()})),r.mu.delete(t)}function qb(r,t,n){const o=me(r);let l=o.Vu[o.currentUser.toKey()];if(l){const h=l.get(t);h&&(n?h.reject(n):h.resolve(),l=l.remove(t)),o.Vu[o.currentUser.toKey()]=l}}function kp(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const o of r.Iu.get(t))r.Tu.delete(o),n&&r.Pu.yu(o,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((o=>{r.Ru.containsKey(o)||Fb(r,o)}))}function Fb(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(Eg(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),Og(r))}function hT(r,t,n){for(const o of n)o instanceof zb?(r.Ru.addReference(o.key,t),Z2(r,o)):o instanceof Ub?(Vt(Mg,"Document no longer in limbo: "+o.key),r.Ru.removeReference(o.key,t),r.Ru.containsKey(o.key)||Fb(r,o.key)):Xt(19791,{wu:o})}function Z2(r,t){const n=t.key,o=n.path.canonicalString();r.du.get(n)||r.Eu.has(o)||(Vt(Mg,"New document in limbo: "+n),r.Eu.add(o),Og(r))}function Og(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new Gt(Ke.fromString(t)),o=r.fu.next();r.Au.set(o,new N2(n)),r.du=r.du.insert(n,o),Ob(r.remoteStore,new oa(Is(id(n.path)),o,"TargetPurposeLimboResolution",ed.ce))}}async function th(r,t,n){const o=me(r),l=[],h=[],p=[];o.Tu.isEmpty()||(o.Tu.forEach(((y,v)=>{p.push(o.pu(v,t,n).then((E=>{if((E||n)&&o.isPrimaryClient){const x=E?!E.fromCache:n?.targetChanges.get(v.targetId)?.current;o.sharedClientState.updateQueryState(v.targetId,x?"current":"not-current")}if(E){l.push(E);const x=yg.As(v.targetId,E);h.push(x)}})))})),await Promise.all(p),o.Pu.H_(l),await(async function(v,E){const x=me(v);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(P=>gt.forEach(E,(M=>gt.forEach(M.Es,(q=>x.persistence.referenceDelegate.addReference(P,M.targetId,q))).next((()=>gt.forEach(M.ds,(q=>x.persistence.referenceDelegate.removeReference(P,M.targetId,q)))))))))}catch(P){if(!vu(P))throw P;Vt(vg,"Failed to update sequence numbers: "+P)}for(const P of E){const M=P.targetId;if(!P.fromCache){const q=x.Ms.get(M),Q=q.snapshotVersion,nt=q.withLastLimboFreeSnapshotVersion(Q);x.Ms=x.Ms.insert(M,nt)}}})(o.localStore,h))}async function W2(r,t){const n=me(r);if(!n.currentUser.isEqual(t)){Vt(Mg,"User change. New user:",t.toKey());const o=await Cb(n.localStore,t);n.currentUser=t,(function(h,p){h.mu.forEach((y=>{y.forEach((v=>{v.reject(new Pt(ct.CANCELLED,p))}))})),h.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),await th(n,o.Ls)}}function Y2(r,t){const n=me(r),o=n.Au.get(t);if(o&&o.hu)return Pe().add(o.key);{let l=Pe();const h=n.Iu.get(t);if(!h)return l;for(const p of h){const y=n.Tu.get(p);l=l.unionWith(y.view.nu)}return l}}function Gb(r){const t=me(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y2.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=q2.bind(null,t),t.Pu.H_=M2.bind(null,t.eventManager),t.Pu.yu=O2.bind(null,t.eventManager),t}function Q2(r){const t=me(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=F2.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=G2.bind(null,t),t}class Bf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=cd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return JC(this.persistence,new KC,t.initialUser,this.serializer)}Cu(t){return new Ib(_g.mi,this.serializer)}Du(t){return new o2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bf.provider={build:()=>new Bf};class K2 extends Bf{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Ne(this.persistence.referenceDelegate instanceof Uf,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new NC(o,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?tr.withCacheSize(this.cacheSizeBytes):tr.DEFAULT;return new Ib((o=>Uf.mi(o,n)),this.serializer)}}class Vp{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>cT(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=W2.bind(null,this.syncEngine),await I2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new P2})()}createDatastore(t){const n=cd(t.databaseInfo.databaseId),o=(function(h){return new h2(h)})(t.databaseInfo);return(function(h,p,y,v){return new p2(h,p,y,v)})(t.authCredentials,t.appCheckCredentials,o,n)}createRemoteStore(t){return(function(o,l,h,p,y){return new _2(o,l,h,p,y)})(this.localStore,this.datastore,t.asyncQueue,(n=>cT(this.syncEngine,n,0)),(function(){return rT.v()?new rT:new a2})())}createSyncEngine(t,n){return(function(l,h,p,y,v,E,x){const P=new k2(l,h,p,y,v,E);return x&&(P.gu=!0),P})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const o=me(n);Vt(sl,"RemoteStore shutting down."),o.Ea.add(5),await Jc(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Vp.provider={build:()=>new Vp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):lo("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Pt(ct.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(l,h){const p=me(l),y={documents:h.map((P=>zf(p.serializer,P)))},v=await p.Ho("BatchGetDocuments",p.serializer.databaseId,Ke.emptyPath(),y,h.length),E=new Map;v.forEach((P=>{const M=yC(p.serializer,P);E.set(M.key.toString(),M)}));const x=[];return h.forEach((P=>{const M=E.get(P.toString());Ne(!!M,55234,{key:P}),x.push(M)})),x})(this.datastore,t);return n.forEach((o=>this.recordVersion(o))),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(t.toString())}delete(t){this.write(new ld(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((n=>{t.delete(n.key.toString())})),t.forEach(((n,o)=>{const l=Gt.fromPath(o);this.mutations.push(new mb(l,this.precondition(l)))})),await(async function(o,l){const h=me(o),p={writes:l.map((y=>wb(h.serializer,y)))};await h.Go("Commit",h.serializer.databaseId,Ke.emptyPath(),p)})(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Xt(50498,{Gu:t.constructor.name});n=oe.min()}const o=this.readVersions.get(t.key.toString());if(o){if(!n.isEqual(o))throw new Pt(ct.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(oe.min())?Pi.exists(!1):Pi.updateTime(n):Pi.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(oe.min()))throw new Pt(ct.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pi.updateTime(n)}return Pi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(t,n,o,l,h){this.asyncQueue=t,this.datastore=n,this.options=o,this.updateFunction=l,this.deferred=h,this.zu=o.maxAttempts,this.M_=new Tg(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const t=new X2(this.datastore),n=this.Hu(t);n&&n.then((o=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(o)})).catch((l=>{this.Yu(l)}))))})).catch((o=>{this.Yu(o)}))}))}Hu(t){try{const n=this.updateFunction(t);return!Kc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(t){this.zu>0&&this.Zu(t)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(t)}Zu(t){if(t?.name==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!pb(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="FirestoreClient";class J2{constructor(t,n,o,l,h){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=l,this.user=Ci.UNAUTHENTICATED,this.clientId=og.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(o,(async p=>{Vt(ya,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(o,(p=>(Vt(ya,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const o=xg(n,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}async function fp(r,t){r.asyncQueue.verifyOperationInProgress(),Vt(ya,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let o=n.initialUser;r.setCredentialChangeListener((async l=>{o.isEqual(l)||(await Cb(t.localStore,l),o=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function fT(r,t){r.asyncQueue.verifyOperationInProgress();const n=await tP(r);Vt(ya,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener((o=>oT(t.remoteStore,o))),r.setAppCheckTokenChangeListener(((o,l)=>oT(t.remoteStore,l))),r._onlineComponents=t}async function tP(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Vt(ya,"Using user provided OfflineComponentProvider");try{await fp(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===ct.FAILED_PRECONDITION||l.code===ct.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;ru("Error using user provided cache. Falling back to memory cache: "+n),await fp(r,new Bf)}}else Vt(ya,"Using default OfflineComponentProvider"),await fp(r,new K2(void 0));return r._offlineComponents}async function Lg(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Vt(ya,"Using user provided OnlineComponentProvider"),await fT(r,r._uninitializedComponentsProvider._online)):(Vt(ya,"Using default OnlineComponentProvider"),await fT(r,new Vp))),r._onlineComponents}function eP(r){return Lg(r).then((t=>t.syncEngine))}function nP(r){return Lg(r).then((t=>t.datastore))}async function Hf(r){const t=await Lg(r),n=t.eventManager;return n.onListen=V2.bind(null,t.syncEngine),n.onUnlisten=j2.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=z2.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=B2.bind(null,t.syncEngine),n}function iP(r,t,n={}){const o=new Rs;return r.asyncQueue.enqueueAndForget((async()=>(function(h,p,y,v,E){const x=new Dg({next:M=>{x.Nu(),p.enqueueAndForget((()=>Ig(h,P)));const q=M.docs.has(y);!q&&M.fromCache?E.reject(new Pt(ct.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&M.fromCache&&v&&v.source==="server"?E.reject(new Pt(ct.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(M)},error:M=>E.reject(M)}),P=new Pg(id(y.path),x,{includeMetadataChanges:!0,qa:!0});return Rg(h,P)})(await Hf(r),r.asyncQueue,t,n,o))),o.promise}function rP(r,t,n={}){const o=new Rs;return r.asyncQueue.enqueueAndForget((async()=>(function(h,p,y,v,E){const x=new Dg({next:M=>{x.Nu(),p.enqueueAndForget((()=>Ig(h,P))),M.fromCache&&v.source==="server"?E.reject(new Pt(ct.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(M)},error:M=>E.reject(M)}),P=new Pg(y,x,{includeMetadataChanges:!0,qa:!0});return Rg(h,P)})(await Hf(r),r.asyncQueue,t,n,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="firestore.googleapis.com",mT=!0;class pT{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Pt(ct.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Wb,this.ssl=mT}else this.host=t.host,this.ssl=t.ssl??mT;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Rb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<DC)throw new Pt(ct.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}_I("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zb(t.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Pt(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Pt(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Pt(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(o,l){return o.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class dd{constructor(t,n,o,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=o,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pt(ct.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Pt(ct.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pT(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new aI;switch(o.type){case"firstParty":return new hI(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Pt(ct.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=dT.get(n);o&&(Vt("ComponentProvider","Removing Datastore"),dT.delete(n),o.terminate())})(this),Promise.resolve()}}function sP(r,t,n,o={}){r=ir(r,dd);const l=du(t),h=r._getSettings(),p={...h,emulatorOptions:r._getEmulatorOptions()},y=`${t}:${n}`;l&&(UT(`https://${y}`),jT("Firestore",!0)),h.host!==Wb&&h.host!==y&&ru("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...h,host:y,ssl:l,emulatorOptions:o};if(!tl(v,p)&&(r._setSettings(v),o.mockUserToken)){let E,x;if(typeof o.mockUserToken=="string")E=o.mockUserToken,x=Ci.MOCK_USER;else{E=yS(o.mockUserToken,r._app?.options.projectId);const P=o.mockUserToken.sub||o.mockUserToken.user_id;if(!P)throw new Pt(ct.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Ci(P)}r._authCredentials=new lI(new kE(E,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(t,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=t}withConverter(t){return new mo(this.firestore,t,this._query)}}class Tn{constructor(t,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ha(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Tn(this.firestore,t,this._key)}toJSON(){return{type:Tn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,o){if(Qc(n,Tn._jsonSchema))return new Tn(t,o||null,new Gt(Ke.fromString(n.referencePath)))}}Tn._jsonSchemaVersion="firestore/documentReference/1.0",Tn._jsonSchema={type:zn("string",Tn._jsonSchemaVersion),referencePath:zn("string")};class ha extends mo{constructor(t,n,o){super(t,n,id(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Tn(this.firestore,null,new Gt(t))}withConverter(t){return new ha(this.firestore,t,this._path)}}function rr(r,t,...n){if(r=Mn(r),VE("collection","path",t),r instanceof dd){const o=Ke.fromString(t,...n);return I0(o),new ha(r,null,o)}{if(!(r instanceof Tn||r instanceof ha))throw new Pt(ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(Ke.fromString(t,...n));return I0(o),new ha(r.firestore,null,o)}}function Jt(r,t,...n){if(r=Mn(r),arguments.length===1&&(t=og.newId()),VE("doc","path",t),r instanceof dd){const o=Ke.fromString(t,...n);return R0(o),new Tn(r,null,new Gt(o))}{if(!(r instanceof Tn||r instanceof ha))throw new Pt(ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(Ke.fromString(t,...n));return R0(o),new Tn(r.firestore,r instanceof ha?r.converter:null,new Gt(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="AsyncQueue";class _T{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Tg(this,"async_queue_retry"),this._c=()=>{const o=hp();o&&Vt(gT,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=t;const n=hp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=hp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Rs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!vu(t))throw t;Vt(gT,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((o=>{throw this.nc=o,this.rc=!1,lo("INTERNAL UNHANDLED ERROR: ",yT(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=n,n}enqueueAfterDelay(t,n,o){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=Ag.createAndSchedule(this,t,n,o,(h=>this.hc(h)));return this.tc.push(l),l}uc(){this.nc&&Xt(47125,{Pc:yT(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function yT(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(r){return(function(n,o){if(typeof n!="object"||n===null)return!1;const l=n;for(const h of o)if(h in l&&typeof l[h]=="function")return!0;return!1})(r,["next","error","complete"])}class co extends dd{constructor(t,n,o,l){super(t,n,o,l),this.type="firestore",this._queue=new _T,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new _T(t),this._firestoreClient=void 0,await t}}}function oP(r,t){const n=typeof r=="object"?r:FT(),o=typeof r=="string"?r:Of,l=Yp(n,"firestore").getImmediate({identifier:o});if(!l._initialized){const h=gS("firestore");h&&sP(l,...h)}return l}function eh(r){if(r._terminated)throw new Pt(ct.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||aP(r),r._firestoreClient}function aP(r){const t=r._freezeSettings(),n=(function(l,h,p,y){return new CI(l,h,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,Zb(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new J2(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(l){const h=l?._online.build();return{_offline:l?._offline.build(h),_online:h}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Tr(_i.fromBase64String(t))}catch(n){throw new Pt(ct.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Tr(_i.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Tr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Qc(t,Tr._jsonSchema))return Tr.fromBase64String(t.bytes)}}Tr._jsonSchemaVersion="firestore/bytes/1.0",Tr._jsonSchema={type:zn("string",Tr._jsonSchemaVersion),bytes:zn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Pt(ct.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Pt(ct.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Pt(ct.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ce(this._lat,t._lat)||Ce(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cs._jsonSchemaVersion}}static fromJSON(t){if(Qc(t,Cs._jsonSchema))return new Cs(t.latitude,t.longitude)}}Cs._jsonSchemaVersion="firestore/geoPoint/1.0",Cs._jsonSchema={type:zn("string",Cs._jsonSchemaVersion),latitude:zn("number"),longitude:zn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(o,l){if(o.length!==l.length)return!1;for(let h=0;h<o.length;++h)if(o[h]!==l[h])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Ps._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Qc(t,Ps._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Ps(t.vectorValues);throw new Pt(ct.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ps._jsonSchemaVersion="firestore/vectorValue/1.0",Ps._jsonSchema={type:zn("string",Ps._jsonSchemaVersion),vectorValues:zn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=/^__.*__$/;class uP{constructor(t,n,o){this.data=t,this.fieldMask=n,this.fieldTransforms=o}toMutation(t,n){return this.fieldMask!==null?new ba(t,this.data,this.fieldMask,n,this.fieldTransforms):new Xc(t,this.data,n,this.fieldTransforms)}}class Yb{constructor(t,n,o){this.data=t,this.fieldMask=n,this.fieldTransforms=o}toMutation(t,n){return new ba(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Qb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xt(40011,{Ac:r})}}class Ng{constructor(t,n,o,l,h,p){this.settings=t,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=l,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Ng({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),o=this.Vc({path:n,fc:!1});return o.gc(t),o}yc(t){const n=this.path?.child(t),o=this.Vc({path:n,fc:!1});return o.Rc(),o}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return qf(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Qb(this.Ac)&&lP.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class cP{constructor(t,n,o){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=o||cd(t)}Cc(t,n,o,l=!1){return new Ng({Ac:t,methodName:n,Dc:o,path:gi.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pd(r){const t=r._freezeSettings(),n=cd(r._databaseId);return new cP(r._databaseId,!!t.ignoreUndefinedProperties,n)}function Kb(r,t,n,o,l,h={}){const p=r.Cc(h.merge||h.mergeFields?2:0,t,n,l);Vg("Data must be an object, but it was:",p,o);const y=Jb(o,p);let v,E;if(h.merge)v=new Er(p.fieldMask),E=p.fieldTransforms;else if(h.mergeFields){const x=[];for(const P of h.mergeFields){const M=zp(t,P,n);if(!p.contains(M))throw new Pt(ct.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);ew(x,M)||x.push(M)}v=new Er(x),E=p.fieldTransforms.filter((P=>v.covers(P.field)))}else v=null,E=p.fieldTransforms;return new uP(new Hi(y),v,E)}class gd extends md{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof gd}}class kg extends md{_toFieldTransform(t){return new eC(t.path,new Uc)}isEqual(t){return t instanceof kg}}function Xb(r,t,n,o){const l=r.Cc(1,t,n);Vg("Data must be an object, but it was:",l,o);const h=[],p=Hi.empty();Ea(o,((v,E)=>{const x=zg(t,v,n);E=Mn(E);const P=l.yc(x);if(E instanceof gd)h.push(x);else{const M=ih(E,P);M!=null&&(h.push(x),p.set(x,M))}}));const y=new Er(h);return new Yb(p,y,l.fieldTransforms)}function $b(r,t,n,o,l,h){const p=r.Cc(1,t,n),y=[zp(t,o,n)],v=[l];if(h.length%2!=0)throw new Pt(ct.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<h.length;M+=2)y.push(zp(t,h[M])),v.push(h[M+1]);const E=[],x=Hi.empty();for(let M=y.length-1;M>=0;--M)if(!ew(E,y[M])){const q=y[M];let Q=v[M];Q=Mn(Q);const nt=p.yc(q);if(Q instanceof gd)E.push(q);else{const at=ih(Q,nt);at!=null&&(E.push(q),x.set(q,at))}}const P=new Er(E);return new Yb(x,P,p.fieldTransforms)}function hP(r,t,n,o=!1){return ih(n,r.Cc(o?4:3,t))}function ih(r,t){if(tw(r=Mn(r)))return Vg("Unsupported field value:",t,r),Jb(r,t);if(r instanceof md)return(function(o,l){if(!Qb(l.Ac))throw l.Sc(`${o._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${o._methodName}() is not currently supported inside arrays`);const h=o._toFieldTransform(l);h&&l.fieldTransforms.push(h)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(o,l){const h=[];let p=0;for(const y of o){let v=ih(y,l.wc(p));v==null&&(v={nullValue:"NULL_VALUE"}),h.push(v),p++}return{arrayValue:{values:h}}})(r,t)}return(function(o,l){if((o=Mn(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return $I(l.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const h=mn.fromDate(o);return{timestampValue:Vf(l.serializer,h)}}if(o instanceof mn){const h=new mn(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Vf(l.serializer,h)}}if(o instanceof Cs)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Tr)return{bytesValue:vb(l.serializer,o._byteString)};if(o instanceof Tn){const h=l.databaseId,p=o.firestore._databaseId;if(!p.isEqual(h))throw l.Sc(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:pg(o.firestore._databaseId||l.databaseId,o._key.path)}}if(o instanceof Ps)return(function(p,y){return{mapValue:{fields:{[ZE]:{stringValue:WE},[Df]:{arrayValue:{values:p.toArray().map((E=>{if(typeof E!="number")throw y.Sc("VectorValues must only contain numeric values.");return fg(y.serializer,E)}))}}}}}})(o,l);throw l.Sc(`Unsupported field value: ${td(o)}`)})(r,t)}function Jb(r,t){const n={};return jE(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ea(r,((o,l)=>{const h=ih(l,t.mc(o));h!=null&&(n[o]=h)})),{mapValue:{fields:n}}}function tw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof mn||r instanceof Cs||r instanceof Tr||r instanceof Tn||r instanceof md||r instanceof Ps)}function Vg(r,t,n){if(!tw(n)||!zE(n)){const o=td(n);throw o==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+o)}}function zp(r,t,n){if((t=Mn(t))instanceof nh)return t._internalPath;if(typeof t=="string")return zg(r,t);throw qf("Field path arguments must be of type string or ",r,!1,void 0,n)}const fP=new RegExp("[~\\*/\\[\\]]");function zg(r,t,n){if(t.search(fP)>=0)throw qf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new nh(...t.split("."))._internalPath}catch{throw qf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function qf(r,t,n,o,l){const h=o&&!o.isEmpty(),p=l!==void 0;let y=`Function ${t}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let v="";return(h||p)&&(v+=" (found",h&&(v+=` in field ${o}`),p&&(v+=` in document ${l}`),v+=")"),new Pt(ct.INVALID_ARGUMENT,y+r+v)}function ew(r,t){return r.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(t,n,o,l,h){this._firestore=t,this._userDataWriter=n,this._key=o,this._document=l,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new dP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(_d("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dP extends Ff{data(){return super.data()}}function _d(r,t){return typeof t=="string"?zg(r,t):t instanceof nh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Pt(ct.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ug{}class jg extends Ug{}function ul(r,t,...n){let o=[];t instanceof Ug&&o.push(t),o=o.concat(n),(function(h){const p=h.filter((v=>v instanceof Bg)).length,y=h.filter((v=>v instanceof yd)).length;if(p>1||p>0&&y>0)throw new Pt(ct.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const l of o)r=l._apply(r);return r}class yd extends jg{constructor(t,n,o){super(),this._field=t,this._op=n,this._value=o,this.type="where"}static _create(t,n,o){return new yd(t,n,o)}_apply(t){const n=this._parse(t);return sw(t._query,n),new mo(t.firestore,t.converter,Cp(t._query,n))}_parse(t){const n=pd(t.firestore);return(function(h,p,y,v,E,x,P){let M;if(E.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new Pt(ct.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){ET(P,x);const Q=[];for(const nt of P)Q.push(TT(v,h,nt));M={arrayValue:{values:Q}}}else M=TT(v,h,P)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||ET(P,x),M=hP(y,p,P,x==="in"||x==="not-in");return Vn.create(E,x,M)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function cu(r,t,n){const o=t,l=_d("where",r);return yd._create(l,o,n)}class Bg extends Ug{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Bg(t,n)}_parse(t){const n=this._queryConstraints.map((o=>o._parse(t))).filter((o=>o.getFilters().length>0));return n.length===1?n[0]:ss.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(l,h){let p=l;const y=h.getFlattenedFilters();for(const v of y)sw(p,v),p=Cp(p,v)})(t._query,n),new mo(t.firestore,t.converter,Cp(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hg extends jg{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Hg(t,n)}_apply(t){const n=(function(l,h,p){if(l.startAt!==null)throw new Pt(ct.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Pt(ct.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zc(h,p)})(t._query,this._field,this._direction);return new mo(t.firestore,t.converter,(function(l,h){const p=l.explicitOrderBy.concat([h]);return new Tu(l.path,l.collectionGroup,p,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(t._query,n))}}function iw(r,t="asc"){const n=t,o=_d("orderBy",r);return Hg._create(o,n)}class qg extends jg{constructor(t,n,o){super(),this.type=t,this._limit=n,this._limitType=o}static _create(t,n,o){return new qg(t,n,o)}_apply(t){return new mo(t.firestore,t.converter,Nf(t._query,this._limit,this._limitType))}}function rw(r){return yI("limit",r),qg._create("limit",r,"F")}function TT(r,t,n){if(typeof(n=Mn(n))=="string"){if(n==="")throw new Pt(ct.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eb(t)&&n.indexOf("/")!==-1)throw new Pt(ct.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=t.path.child(Ke.fromString(n));if(!Gt.isDocumentKey(o))throw new Pt(ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return k0(r,new Gt(o))}if(n instanceof Tn)return k0(r,n._key);throw new Pt(ct.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${td(n)}.`)}function ET(r,t){if(!Array.isArray(r)||r.length===0)throw new Pt(ct.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function sw(r,t){const n=(function(l,h){for(const p of l)for(const y of p.getFlattenedFilters())if(h.indexOf(y.op)>=0)return y.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new Pt(ct.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Pt(ct.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class ow{convertValue(t,n="none"){switch(ga(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Pn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(pa(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Xt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const o={};return Ea(t,((l,h)=>{o[l]=this.convertValue(h,n)})),o}convertVectorValue(t){const n=t.fields?.[Df].arrayValue?.values?.map((o=>Pn(o.doubleValue)));return new Ps(n)}convertGeoPoint(t){return new Cs(Pn(t.latitude),Pn(t.longitude))}convertArray(t,n){return(t.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const o=nd(t);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Nc(t));default:return null}}convertTimestamp(t){const n=ma(t);return new mn(n.seconds,n.nanos)}convertDocumentKey(t,n){const o=Ke.fromString(t);Ne(xb(o),9688,{name:t});const l=new kc(o.get(1),o.get(3)),h=new Gt(o.popFirst(5));return l.isEqual(n)||lo(`Document ${h} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(r,t,n){let o;return o=r?n&&(n.merge||n.mergeFields)?r.toFirestore(t,n):r.toFirestore(t):t,o}class mP extends ow{constructor(t){super(),this.firestore=t}convertBytes(t){return new Tr(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Tn(this.firestore,null,n)}}class Xl{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class fa extends Ff{constructor(t,n,o,l,h,p){super(t,n,o,l,p),this._firestore=t,this._firestoreImpl=t,this.metadata=h}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const o=this._document.data.field(_d("DocumentSnapshot.get",t));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Pt(ct.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=fa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fa._jsonSchemaVersion="firestore/documentSnapshot/1.0",fa._jsonSchema={type:zn("string",fa._jsonSchemaVersion),bundleSource:zn("string","DocumentSnapshot"),bundleName:zn("string"),bundle:zn("string")};class wf extends fa{data(t={}){return super.data(t)}}class Ja{constructor(t,n,o,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new Xl(l.hasPendingWrites,l.fromCache),this.query=o}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((o=>{t.call(n,new wf(this._firestore,this._userDataWriter,o.key,o,new Xl(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Pt(ct.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,h){if(l._snapshot.oldDocs.isEmpty()){let p=0;return l._snapshot.docChanges.map((y=>{const v=new wf(l._firestore,l._userDataWriter,y.doc.key,y.doc,new Xl(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);return y.doc,{type:"added",doc:v,oldIndex:-1,newIndex:p++}}))}{let p=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((y=>h||y.type!==3)).map((y=>{const v=new wf(l._firestore,l._userDataWriter,y.doc.key,y.doc,new Xl(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);let E=-1,x=-1;return y.type!==0&&(E=p.indexOf(y.doc.key),p=p.delete(y.doc.key)),y.type!==1&&(p=p.add(y.doc),x=p.indexOf(y.doc.key)),{type:pP(y.type),doc:v,oldIndex:E,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Pt(ct.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ja._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=og.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],o=[],l=[];return this.docs.forEach((h=>{h._document!==null&&(n.push(h._document),o.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),l.push(h.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function pP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(r){r=ir(r,Tn);const t=ir(r.firestore,co);return iP(eh(t),r._key).then((n=>lw(t,r,n)))}Ja._jsonSchemaVersion="firestore/querySnapshot/1.0",Ja._jsonSchema={type:zn("string",Ja._jsonSchemaVersion),bundleSource:zn("string","QuerySnapshot"),bundleName:zn("string"),bundle:zn("string")};class vd extends ow{constructor(t){super(),this.firestore=t}convertBytes(t){return new Tr(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Tn(this.firestore,null,n)}}function rh(r){r=ir(r,mo);const t=ir(r.firestore,co),n=eh(t),o=new vd(t);return nw(r._query),rP(n,r._query).then((l=>new Ja(t,o,r,l)))}function ol(r,t,n){r=ir(r,Tn);const o=ir(r.firestore,co),l=aw(r.converter,t,n);return Fg(o,[Kb(pd(o),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,Pi.none())])}function hu(r,t,n,...o){r=ir(r,Tn);const l=ir(r.firestore,co),h=pd(l);let p;return p=typeof(t=Mn(t))=="string"||t instanceof nh?$b(h,"updateDoc",r._key,t,n,o):Xb(h,"updateDoc",r._key,t),Fg(l,[p.toMutation(r._key,Pi.exists(!0))])}function nu(r){return Fg(ir(r.firestore,co),[new ld(r._key,Pi.none())])}function Os(r,...t){r=Mn(r);let n={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||vT(t[o])||(n=t[o++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(vT(t[o])){const v=t[o];t[o]=v.next?.bind(v),t[o+1]=v.error?.bind(v),t[o+2]=v.complete?.bind(v)}let h,p,y;if(r instanceof Tn)p=ir(r.firestore,co),y=id(r._key.path),h={next:v=>{t[o]&&t[o](lw(p,r,v))},error:t[o+1],complete:t[o+2]};else{const v=ir(r,mo);p=ir(v.firestore,co),y=v._query;const E=new vd(p);h={next:x=>{t[o]&&t[o](new Ja(p,E,v,x))},error:t[o+1],complete:t[o+2]},nw(r._query)}return(function(E,x,P,M){const q=new Dg(M),Q=new Pg(x,q,P);return E.asyncQueue.enqueueAndForget((async()=>Rg(await Hf(E),Q))),()=>{q.Nu(),E.asyncQueue.enqueueAndForget((async()=>Ig(await Hf(E),Q)))}})(eh(p),y,l,h)}function Fg(r,t){return(function(o,l){const h=new Rs;return o.asyncQueue.enqueueAndForget((async()=>H2(await eP(o),l,h))),h.promise})(eh(r),t)}function lw(r,t,n){const o=n.docs.get(t._key),l=new vd(r);return new fa(r,l,t._key,o,new Xl(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP={maxAttempts:5};function yc(r,t){if((r=Mn(r)).firestore!==t)throw new Pt(ct.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=pd(t)}get(t){const n=yc(t,this._firestore),o=new mP(this._firestore);return this._transaction.lookup([n._key]).then((l=>{if(!l||l.length!==1)return Xt(24041);const h=l[0];if(h.isFoundDocument())return new Ff(this._firestore,o,h.key,h,n.converter);if(h.isNoDocument())return new Ff(this._firestore,o,n._key,null,n.converter);throw Xt(18433,{doc:h})}))}set(t,n,o){const l=yc(t,this._firestore),h=aw(l.converter,n,o),p=Kb(this._dataReader,"Transaction.set",l._key,h,l.converter!==null,o);return this._transaction.set(l._key,p),this}update(t,n,o,...l){const h=yc(t,this._firestore);let p;return p=typeof(n=Mn(n))=="string"||n instanceof nh?$b(this._dataReader,"Transaction.update",h._key,n,o,l):Xb(this._dataReader,"Transaction.update",h._key,n),this._transaction.update(h._key,p),this}delete(t){const n=yc(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP extends _P{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=yc(t,this._firestore),o=new vd(this._firestore);return super.get(t).then((l=>new fa(this._firestore,o,n._key,l._document,new Xl(!1,!1),n.converter)))}}function er(r,t,n){r=ir(r,co);const o={...gP,...n};return(function(h){if(h.maxAttempts<1)throw new Pt(ct.INVALID_ARGUMENT,"Max attempts must be at least 1")})(o),(function(h,p,y){const v=new Rs;return h.asyncQueue.enqueueAndForget((async()=>{const E=await nP(h);new $2(h.asyncQueue,E,y,p,v).ju()})),v.promise})(eh(r),(l=>t(new yP(r,l))),o)}function qi(){return new kg("serverTimestamp")}(function(t,n=!0){(function(l){_u=l})(mu),iu(new el("firestore",((o,{instanceIdentifier:l,options:h})=>{const p=o.getProvider("app").getImmediate(),y=new co(new uI(o.getProvider("auth-internal")),new fI(p,o.getProvider("app-check-internal")),(function(E,x){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new Pt(ct.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kc(E.options.projectId,x)})(p,l),p);return h={useFetchStreams:n,...h},y._setSettings(h),y}),"PUBLIC").setMultipleInstances(!0)),ua(w0,S0,t),ua(w0,S0,"esm2020")})();const vP={VITE_FIREBASE_API_KEY:"AIzaSyDdhwKgyCUPZoa-jxv4t_NnNpQTt_FLTjw",VITE_FIREBASE_APP_ID:"1:81737066531:web:c2d2470cc856443defe996",VITE_FIREBASE_AUTH_DOMAIN:"birdersplace.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"8173706653",VITE_FIREBASE_PROJECT_ID:"birdersplace",VITE_FIREBASE_STORAGE_BUCKET:"birdersplace.firebasestorage.app"},Zl=vP||{},uw={apiKey:Zl.VITE_FIREBASE_API_KEY,authDomain:Zl.VITE_FIREBASE_AUTH_DOMAIN,projectId:Zl.VITE_FIREBASE_PROJECT_ID,appId:Zl.VITE_FIREBASE_APP_ID,messagingSenderId:Zl.VITE_FIREBASE_MESSAGING_SENDER_ID,storageBucket:Zl.VITE_FIREBASE_STORAGE_BUCKET};function TP(r){const t=Object.entries(r).filter(([n,o])=>!o).map(([n])=>n);if(t.length)throw new Error(`Firebase config incompleta. Falta(n): ${t.join(", ")}. Revisa .env.local (prefijo VITE_) y reinicia el dev server.`)}TP(uw);const cw=Jv().length?Jv()[0]:qT(uw),vn=sI(cw),Lt=oP(cw),bT=new no;function EP({children:r}){const[t,n]=Z.useState(null),[o,l]=Z.useState(!0),[h,p]=Z.useState(""),[y,v]=Z.useState(""),[E,x]=Z.useState(""),[P,M]=Z.useState(!1),[q,Q]=Z.useState(!1);if(Z.useEffect(()=>{const Tt=gu(vn,ut=>{n(ut||null),l(!1)});return()=>Tt()},[]),o)return A.jsx("div",{style:{padding:16,textAlign:"center"},children:"Loading..."});async function nt(){p("");try{await dR(vn,bT)}catch(Tt){const ut=Tt?.code||"unknown";if(console.error("Auth error:",ut,Tt?.message),ut==="auth/popup-blocked"||ut==="auth/popup-closed-by-user"){await vR(vn,bT);return}p(ut)}}async function at(){if(!y||!E){p("Please complete all fields");return}p(""),Q(!0);try{P?await Fx(vn,y,E):await Gx(vn,y,E)}catch(Tt){const ut=Tt?.code||"unknown";console.error("Email auth error:",ut,Tt?.message),p({"auth/email-already-in-use":"This email is already registered","auth/weak-password":"Password must be at least 6 characters","auth/invalid-email":"Invalid email","auth/user-not-found":"No account exists with this email","auth/wrong-password":"Incorrect password","auth/too-many-requests":"Too many failed attempts. Try again later"}[ut]||ut)}finally{Q(!1)}}return t?A.jsxs("div",{children:[A.jsxs("div",{style:{position:"fixed",right:12,top:12,display:"flex",gap:8,alignItems:"center",zIndex:1e3},children:[A.jsx("span",{style:{color:"#fff",background:"#1f2937",padding:"4px 8px",borderRadius:8},children:t.displayName||t.email}),A.jsx("button",{onClick:()=>gE(vn),style:{padding:"6px 10px",borderRadius:8,border:"none",background:"#374151",color:"#fff",cursor:"pointer"},children:"Sign Out"})]}),r]}):A.jsxs("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:[A.jsx("div",{style:{position:"fixed",left:12,top:12,zIndex:1e3},children:A.jsx("button",{onClick:()=>window.location.href="?view=menu",style:{padding:"6px 10px",borderRadius:8,border:"none",background:"#374151",color:"#fff",cursor:"pointer"},children:"Back"})}),A.jsxs("div",{style:{background:"#111827",padding:24,borderRadius:12,color:"#fff",width:400,textAlign:"center"},children:[A.jsx("h2",{style:{marginTop:0},children:"Birders Place"}),A.jsx("p",{style:{opacity:.85,marginBottom:20},children:"Sign in to play"}),A.jsxs("div",{style:{marginBottom:20},children:[A.jsx("input",{type:"email",placeholder:"Email",value:y,onChange:Tt=>v(Tt.target.value),style:{width:"100%",padding:"0.6rem",marginBottom:10,borderRadius:8,border:"1px solid #374151",background:"#0b1220",color:"#fff",fontSize:14}}),A.jsx("input",{type:"password",placeholder:"Password",value:E,onChange:Tt=>x(Tt.target.value),style:{width:"100%",padding:"0.6rem",marginBottom:10,borderRadius:8,border:"1px solid #374151",background:"#0b1220",color:"#fff",fontSize:14}}),A.jsx("button",{onClick:at,disabled:q,style:{width:"100%",padding:"0.6rem",marginBottom:10,background:q?"#6b7280":"#10b981",color:"#fff",border:"none",borderRadius:8,cursor:q?"not-allowed":"pointer",fontSize:14,fontWeight:600},children:q?"Loading...":P?"Sign Up":"Sign In"}),A.jsx("button",{onClick:()=>M(!P),style:{background:"transparent",color:"#9ca3af",border:"none",cursor:"pointer",fontSize:12,textDecoration:"underline"},children:P?"Already have an account? Sign In":"Don't have an account? Sign Up"})]}),A.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"20px 0",color:"#6b7280",fontSize:12},children:[A.jsx("div",{style:{flex:1,height:1,background:"#374151"}}),A.jsx("span",{style:{margin:"0 10px"},children:"o"}),A.jsx("div",{style:{flex:1,height:1,background:"#374151"}})]}),A.jsx("button",{onClick:nt,style:{width:"100%",padding:"0.6rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontSize:14,fontWeight:600},children:"Continue with Google"}),h&&A.jsx("div",{style:{marginTop:15,color:"#fca5a5",fontSize:12},children:h}),A.jsxs("div",{style:{marginTop:15,fontSize:11,opacity:.65},children:["Current domain: ",window.location.hostname]})]})]})}const bP=/^[A-Za-z0-9_\.\-]{3,20}$/;function wP({onDone:r}){const[t,n]=Z.useState(null),[o,l]=Z.useState(!0),[h,p]=Z.useState(""),[y,v]=Z.useState(!1),[E,x]=Z.useState("");Z.useEffect(()=>{const M=gu(vn,async q=>{if(n(q||null),!q){l(!1);return}try{const Q=Jt(Lt,"users",q.uid),nt=await Bi(Q);nt.exists()&&nt.data()?.nickname?(l(!1),r?.()):l(!1)}catch(Q){console.error("Error reading profile:",Q),x("Could not check profile. Review Firestore rules."),l(!1)}});return()=>M()},[r]);async function P(){x("");const M=h.trim();if(!bP.test(M)){x("Nickname must be 3-20 characters (letters, numbers, _ . -)");return}v(!0);try{const q=M.toLowerCase(),Q=Jt(Lt,"nicknames",q),nt=Jt(Lt,"users",t.uid);await er(Lt,async at=>{if((await at.get(Q)).exists())throw new Error("That nickname is already in use");at.set(Q,{uid:t.uid,createdAt:qi()}),at.set(nt,{uid:t.uid,nickname:M,nickname_lc:q,displayName:t.displayName||null,photoURL:t.photoURL||null,createdAt:qi(),updatedAt:qi()},{merge:!0})}),r?.()}catch(q){x(q.message||"Could not save")}finally{v(!1)}}return o?A.jsx("div",{style:{padding:16,textAlign:"center",color:"#fff"},children:"Checking profile..."}):A.jsxs("div",{style:{background:"#111827",padding:24,borderRadius:12,color:"#fff",width:420,textAlign:"center"},children:[A.jsx("h2",{style:{marginTop:0},children:"Choose your nickname"}),A.jsx("p",{style:{opacity:.85,marginTop:6},children:"You will use it in multiplayer. You cannot change it ever."}),A.jsx("input",{value:h,onChange:M=>p(M.target.value),placeholder:"tu_nick",maxLength:20,style:{width:"100%",marginTop:10,padding:"0.6rem 0.8rem",borderRadius:8,border:"1px solid #374151",background:"#0b1220",color:"#fff",outline:"none"}}),A.jsx("button",{disabled:y,onClick:P,style:{marginTop:12,padding:"0.6rem 1rem",background:y?"#6b7280":"#10b981",color:"#fff",border:"none",borderRadius:8,cursor:y?"not-allowed":"pointer",fontWeight:600},children:"Save"}),E&&A.jsx("div",{style:{marginTop:10,color:"#fca5a5",fontSize:12},children:E})]})}function Qa(){const[r,t]=Z.useState(null),[n,o]=Z.useState("");return Z.useEffect(()=>{const l=gu(vn,async h=>{if(t(h||null),h)try{const p=Jt(Lt,"users",h.uid),y=await Bi(p),v=y.exists()&&y.data()?.nickname||"";o(v)}catch{o("")}else o("")});return()=>l()},[]),r?A.jsxs("div",{style:{position:"fixed",right:12,top:12,display:"flex",gap:8,alignItems:"center",zIndex:1e3},children:[A.jsx("span",{style:{color:"#fff",background:"#1f2937",padding:"4px 8px",borderRadius:8},children:n||r.displayName||r.email}),A.jsx("button",{onClick:()=>gE(vn),style:{padding:"6px 10px",borderRadius:8,border:"none",background:"#374151",color:"#fff",cursor:"pointer"},children:"Sign Out"})]}):null}async function SP(r){const t=vn.currentUser;if(!t)throw new Error("No auth");console.log("🚀 enqueueForDuel iniciado para usuario:",t.uid,"nickname:",r);const n=Jt(Lt,"duel_queue",t.uid);try{return await ol(n,{uid:t.uid,nickname:r||null,createdAt:qi(),status:"waiting"}),console.log("✅ Usuario agregado a la cola individual"),{matchId:null,matched:!1}}catch(o){throw console.error("❌ Error agregando a la cola:",o),o}}async function AP(){const r=vn.currentUser;if(!r)throw new Error("No auth");console.log("🔍 Intentando matchmaking para usuario:",r.uid);try{const t=await er(Lt,async n=>{const o=ul(rr(Lt,"duel_queue"),cu("status","==","waiting")),h=(await rh(o)).docs.map(Tt=>({id:Tt.id,...Tt.data()})).filter(Tt=>Tt.uid!==r.uid).sort((Tt,ut)=>(Tt.createdAt?.seconds||0)-(ut.createdAt?.seconds||0));console.log("👥 Candidatos encontrados:",h.length);const p=h[0];if(!p)return console.log("❌ No hay candidatos disponibles"),null;console.log("🎯 Candidato seleccionado:",p.uid);const y=p,v=Jt(Lt,"duel_queue",y.uid),E=await n.get(v);if(!E.exists()||E.data().status!=="waiting")return console.log("❌ Opponent no longer available"),null;const x=Jt(Lt,"duel_queue",r.uid),P=await n.get(x);if(!P.exists()||P.data().status!=="waiting")return console.log("❌ Ya no estamos en waiting"),null;const M=Jt(rr(Lt,"duel_matches")),q=M.id;console.log("✅ Creando match real en Firestore:",q);const Q=Jt(Lt,"users",r.uid),nt=await Bi(Q),at=nt.exists()?nt.data().nickname:null;return n.set(M,{createdAt:qi(),state:"playing",round:1,hostUid:r.uid,players:{[r.uid]:{hp:6e3,nickname:at},[y.uid]:{hp:6e3,nickname:y.nickname||"Player"}},rounds:{},guesses:{},matchmaking:!0}),n.update(x,{status:"matched",matchId:q,opponentUid:y.uid,opponentNickname:y.nickname||null}),q});return t&&console.log("✅ Match creado exitosamente en Firestore:",t),t}catch(t){return console.log("❌ Error en matchmaking:",t),null}}async function xP(r,t,n){const o=vn.currentUser;if(!o)throw new Error("No auth");console.log("🤝 Joining match as opponent:",r);try{const l=Jt(Lt,"duel_queue",o.uid);return await hu(l,{status:"matched",matchId:r,opponentUid:t,opponentNickname:n}),console.log("✅ Oponente unido al match exitosamente"),!0}catch(l){return console.log("❌ Error joining match:",l),!1}}async function RP(){const r=vn.currentUser;if(!r)return;const t=Jt(Lt,"duel_queue",r.uid);try{await hu(t,{lastSeen:qi()})}catch(n){console.log("Error actualizando heartbeat:",n)}}function IP(r){const t=vn.currentUser;if(!t)return()=>{};const n=ul(rr(Lt,"duel_queue"),cu("status","==","waiting"));return Os(n,o=>{const l=o.docs.map(p=>({id:p.id,...p.data()})),h=l.findIndex(p=>p.uid===t.uid);console.log("📊 Queue updated:",l.length,"players, my position:",h+1),r({waitingPlayers:l.length,myPosition:h>=0?h+1:-1,players:l})})}function CP(r){const t=vn.currentUser;if(!t)return()=>{};const n=ul(rr(Lt,"duel_queue"),cu("opponentUid","==",t.uid),cu("status","==","matched"));return Os(n,async o=>{if(!o.empty){const l=o.docs[0].data();console.log("🎯 Oponente fue emparejado con nosotros:",l);const h=Jt(Lt,"duel_queue",t.uid),p=await Bi(h);if(!p.exists()||p.data().status!=="waiting"){console.log("❌ No estamos en waiting, ignorando match de oponente");return}await xP(l.matchId,l.uid,l.nickname),r({...l,matchId:l.matchId,opponentUid:l.uid,opponentNickname:l.nickname})}})}async function ws(){const r=vn.currentUser;if(!r)return;const t=Jt(Lt,"duel_queue",r.uid);try{await nu(t),console.log("✅ Usuario removido de la cola")}catch(n){console.error("Error cancelando cola:",n)}}function PP(r){const t=vn.currentUser;if(!t)return()=>{};const n=Jt(Lt,"duel_queue",t.uid);return Os(n,o=>r(o.exists()?o.data():null))}function MP(r,t){const n=Jt(Lt,"duel_matches",r);return Os(n,o=>{if(!o.exists()){t(null);return}const l=o.data();if(l.state==="matched"&&l.host){const h=new Date,p=l.players?.[l.host]?.lastActivity?.toDate();if(p&&h-p>9e4){console.log("🏠 Match appears abandoned - host disconnected for too long"),t(null);return}}t({id:r,...l})})}async function OP(){try{const r=ul(rr(Lt,"duel_matches"),cu("state","==","playing")),t=await rh(r),n=new Date,o=3e5;for(const l of t.docs){const p=l.data().players||{};let y=!1;for(const[v,E]of Object.entries(p)){const x=E.lastActivity?.toDate();if(x&&n-x>o){y=!0;break}}y&&(await nu(l.ref),console.log(`🧹 Cleaned abandoned match: ${l.id}`))}}catch(r){console.error("❌ Error cleaning abandoned matches:",r)}}typeof window<"u"&&setInterval(OP,3e5);async function hw(r){const t=vn.currentUser;if(!t)throw new Error("No auth");const n=Math.random().toString(36).slice(2,8).toUpperCase(),o=Jt(rr(Lt,"rooms"));await ol(o,{code:n,hostUid:t.uid,createdAt:qi(),state:"lobby"});const l=Jt(Lt,"rooms",o.id,"players",t.uid);return await ol(l,{uid:t.uid,nickname:r||null,joinedAt:qi()}),{roomId:o.id,code:n}}async function fw(r,t){const n=vn.currentUser;if(!n)throw new Error("No auth");const o=ul(rr(Lt,"rooms"),cu("code","==",r),rw(1)),l=await rh(o);if(l.empty)throw new Error("Invalid code");const h=l.docs[0],p=Jt(Lt,"rooms",h.id,"players",n.uid);return await ol(p,{uid:n.uid,nickname:t||null,joinedAt:qi()}),h.id}function dw(r,t){const n=Jt(Lt,"rooms",r);return Os(n,o=>t({id:r,...o.data()||{}}))}function mw(r,t){const n=rr(Lt,"rooms",r,"players"),o=ul(n,iw("joinedAt","asc"));return Os(o,l=>t(l.docs.map(h=>({id:h.id,...h.data()}))))}function DP(r,t,n){const o=Jt(Lt,"rooms",r,"players",t,"notifications","game_ready");return Os(o,l=>{if(l.exists()){const h=l.data();console.log("🎮 Notificación de juego listo recibida:",h),n(h)}})}async function pw(r){const t=vn.currentUser;if(!t)return;const n=Jt(Lt,"rooms",r,"players",t.uid);(await Bi(n)).exists()&&await nu(n)}async function LP(r){const t=Jt(Lt,"rooms",r),n=await Bi(t),o=rr(Lt,"rooms",r,"players"),h=(await rh(o)).docs.map(E=>({uid:E.id,...E.data()||{}}));if(h.length<2)throw new Error("Se necesitan 2 jugadores");const[p,y]=h.slice(0,2),v=Jt(rr(Lt,"duel_matches"));return await ol(v,{createdAt:qi(),state:"playing",round:1,hostUid:n.exists()&&n.data()?.hostUid||p.uid,players:{[p.uid]:{hp:6e3,nickname:p.nickname||null},[y.uid]:{hp:6e3,nickname:y.nickname||null}},rounds:{},guesses:{},matchmaking:!1}),await hu(t,{duelMatchId:v.id}),v.id}async function NP(r,t,n){const o=Jt(Lt,"duel_matches",r);await er(Lt,async l=>{const h=await l.get(o);if(!h.exists())return;const p=h.data();if(p.rounds&&p.rounds[t]||null)return;const v={...p.rounds||{}};v[t]=n,l.update(o,{rounds:v})})}function Up(r,t=14916.862){if(r<=100)return 5e3;const n=5e3*Math.exp(-4*r/t);return Math.min(5e3,Math.max(0,Math.round(n)))}async function kP(r,t,n,o){const l=Jt(Lt,"duel_matches",r);await er(Lt,async h=>{const p=await h.get(l);if(!p.exists())return;const y=p.data(),v=y.round||1,E=y.players||{},x=Object.keys(E).find(Q=>Q!==t),P={...y.rounds||{}},M={...P[v]||{}},q={...M.guesses||{}};if(q[t]={dist:n,guess:o,distance:n},M.guesses=q,P[v]=M,q[x]&&typeof q[x].dist=="number"){const Q=q[t].dist,nt=q[x].dist,at=Up(Q),Tt=Up(nt),ut=at>Tt?t:x,_t=at>Tt?x:t,Bt=at>Tt?at:Tt,Ct=at>Tt?Tt:at;let kt=Bt-Ct;if(v>=4){const N=1.5+(v-4)*.5;kt=Math.round(kt*N),console.log(`🔥 Multiplicador de daño ronda ${v}: x${N} (daño: ${kt})`)}const V=E[ut]||{},O=E[_t]||{hp:6e3},k=Math.max(0,(O.hp??6e3)-kt),j={...E,[_t]:{...O,hp:k}},B=(y.round||1)+1,H=k<=0?"finished":"playing";M.damage={winner:V.nickname||`Jugador ${ut.slice(0,6)}`,loser:O.nickname||`Jugador ${_t.slice(0,6)}`,amount:kt,winnerUid:ut,loserUid:_t,winnerPoints:Bt,loserPoints:Ct,multiplier:v>=4?1.5+(v-4)*.5:1,round:v,distances:{[t]:Q,[x]:nt}},P[v]=M,h.update(l,{players:j,rounds:P,round:B,state:H})}else h.update(l,{rounds:P})})}async function gw(r){const t=Jt(Lt,"rooms",r),n=await Bi(t),o=rr(Lt,"rooms",r,"players"),h=(await rh(o)).docs.map(x=>({uid:x.id,...x.data()||{}}));if(console.log(`🎮 Creando juego multijugador con ${h.length} jugadores:`,h.map(x=>x.nickname||x.uid.slice(0,6))),h.length<2)throw new Error("Se necesitan al menos 2 jugadores");if(h.length>10)throw new Error("Maximum 10 players");const p={},y=qi();h.forEach(x=>{p[x.uid]={nickname:x.nickname||null,totalScore:0,lastSeen:y,connected:!0}});const v=Jt(rr(Lt,"multiplayer_games")),E=v.id;try{return await ol(v,{createdAt:qi(),state:"playing",round:1,hostUid:n.exists()&&n.data()?.hostUid||h[0].uid,players:p,rounds:{},maxRounds:5,roomId:r}),console.log(`✅ Juego multijugador creado: ${E} con ${Object.keys(p).length} jugadores`),await hu(t,{gameId:E}),await VP(r,E,h.map(x=>x.uid)),E}catch(x){throw console.error("❌ Error creando juego multijugador:",x),x}}async function VP(r,t,n){try{const o=[],l=rr(Lt,"rooms",r,"players");n.forEach(h=>{const p=Jt(l,h,"notifications","game_ready");o.push(ol(p,{gameId:t,timestamp:qi(),type:"game_ready"}))}),await Promise.all(o),console.log(`📢 Notificaciones de juego listo enviadas a ${n.length} jugadores`)}catch(o){console.error("Error enviando notificaciones:",o)}}async function zP(r,t,n){const o=Jt(Lt,"multiplayer_games",r);await er(Lt,async l=>{const h=await l.get(o);if(!h.exists())return;const p=h.data();if(p.rounds&&p.rounds[t]||null)return;const v={...p.rounds||{}};v[t]=n,l.update(o,{rounds:v})})}async function UP(r,t,n,o){const l=Jt(Lt,"multiplayer_games",r);await er(Lt,async h=>{const p=await h.get(l);if(!p.exists())return;const y=p.data(),v=y.round||1,E=y.rounds||{},x=E[v]||{guesses:{}},P=x.guesses||{};P[t]={guess:o,dist:n,points:Up(n),timestamp:new Date},x.guesses=P,E[v]=x;const M=y.players||{},q=Object.keys(M);if(Object.keys(P).length===q.length){const nt=jP(P,M);x.results=nt;const at={...M};Object.entries(nt.scores).forEach(([Bt,Ct])=>{at[Bt]={...at[Bt],totalScore:(at[Bt].totalScore||0)+Ct}});const Tt=v+1,ut=y.maxRounds||5;if(Tt>ut){const Bt=Object.entries(at).reduce((Ct,kt)=>at[Ct[0]].totalScore>at[kt[0]].totalScore?Ct:kt)[0];h.update(l,{players:at,rounds:E,round:Tt,state:"finished",winner:Bt})}else h.update(l,{players:at,rounds:E,round:Tt})}else h.update(l,{rounds:E})})}function jP(r,t){const n={scores:{},rankings:[]};return Object.entries(r).forEach(([o,l])=>{n.scores[o]=l.points}),n.rankings=Object.entries(n.scores).map(([o,l])=>({uid:o,nickname:t[o]?.nickname||"Player",points:l,distance:r[o].dist})).sort((o,l)=>l.points-o.points),n}const wT=async(r,t,n)=>{try{const o=Jt(Lt,"user_stats",r);await er(Lt,async l=>{const h=await l.get(o);if(h.exists()){const p=h.data();if(n)l.update(o,{duelCups:(p.duelCups||0)+5,duelWins:(p.duelWins||0)+1,lastDuelWin:new Date});else{const y=Math.max(0,(p.duelCups||0)-5);l.update(o,{duelCups:y,duelLosses:(p.duelLosses||0)+1,lastDuelLoss:new Date})}}else n?l.set(o,{uid:r,nickname:t,duelCups:5,duelWins:1,duelLosses:0,firstDuelWin:new Date,lastDuelWin:new Date}):l.set(o,{uid:r,nickname:t,duelCups:0,duelWins:0,duelLosses:1,firstDuelLoss:new Date,lastDuelLoss:new Date})}),console.log(`✅ Stats updated for ${n?"winner":"loser"}:`,t)}catch(o){console.error("❌ Error updating player stats:",o)}},Ii={INITIAL_HP:6e3,ROUND_TIMER:90,RESULTS_COUNTDOWN:10,HEARTBEAT_INTERVAL:1e4,MAX_OBSERVATION_ATTEMPTS:15,RATE_LIMIT_DELAY:500,TIMEOUT_DISTANCE:2e4},ST=[{name:"North America",bbox:[-170,5,-50,75],weight:.5},{name:"South America",bbox:[-82,-56,-34,12],weight:1},{name:"Europe",bbox:[-31,34,45,72],weight:.5},{name:"Africa",bbox:[-20,-35,52,37],weight:1},{name:"Asia",bbox:[25,-10,180,55],weight:1},{name:"Oceania",bbox:[110,-50,180,0],weight:.5}],ne={IDLE:"idle",WAITING:"waiting",MATCHED:"matched",FINISHED:"finished"};function BP(r,t,n,o){const h=E=>E*Math.PI/180,p=h(n-r),y=h(o-t),v=Math.sin(p/2)**2+Math.cos(h(r))*Math.cos(h(n))*Math.sin(y/2)**2;return 6371*2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v))}function HP(r){return r==null||isNaN(r)?"":r<1?`${Math.round(r*1e3).toLocaleString()} m`:`${Math.round(r).toLocaleString()} km`}function qP(){return ST[Math.floor(Math.random()*ST.length)]}function FP(r,t=0){const[n,o,l,h]=r.bbox;return`https://api.inaturalist.org/v1/observations?photos=true&quality_grade=research&order=desc&per_page=100&geo=true&geoprivacy=open&page=${t}&swlat=${o}&swlng=${n}&nelat=${h}&nelng=${l}&taxon_id=3&captive=false`}function GP(r,t){return`https://api.inaturalist.org/v1/observations?photos=true&quality_grade=research&order=desc&per_page=100&geo=true&geoprivacy=open&coordinates_obscured=false&lat=${r}&lng=${t}&radius=50&taxon_id=3&captive=false`}function AT(r){return(r||[]).filter(t=>t.photos&&t.photos.length&&t.geojson?.coordinates&&t.geojson.type==="Point")}function ZP(r){return r.map(t=>({id:t.id,photo:t.photos[0].url.replace("square","large"),lat:t.geojson.coordinates[1],lon:t.geojson.coordinates[0],species:t.taxon?.preferred_common_name||t.taxon?.name}))}function WP(){const[r,t]=Z.useState(!1),n=Z.useCallback(async(o,l,h)=>{if(r)return;console.log("Starting loadObservationForMatch, isLoading:",r,"matchData:",l),t(!0);const p=Ii.MAX_OBSERVATION_ATTEMPTS;let y=0;for(await new Promise(v=>setTimeout(v,1e3));y<p;){y++,console.log(`Attempt ${y}/${p}`);try{const v=qP(),E=Math.floor(Math.random()*100),x=FP(v,E),P=await fetch(x);if(P.status===429){console.log("💤 Rate limit, waiting 500ms..."),await new Promise(Ct=>setTimeout(Ct,Ii.RATE_LIMIT_DELAY));continue}const M=await P.json(),q=AT(M.results);if(!q.length){console.log("No valid observations found");continue}const Q=q[Math.floor(Math.random()*q.length)],nt=Q.geojson.coordinates[1],at=Q.geojson.coordinates[0],Tt=GP(nt,at),ut=await fetch(Tt);if(ut.status===429){console.log("💤 Cluster rate limit, waiting 500ms..."),await new Promise(Ct=>setTimeout(Ct,Ii.RATE_LIMIT_DELAY));continue}const _t=await ut.json();if(!_t.results||_t.results.length<8)continue;const Bt=AT(_t.results);if(Bt.length>=8){const kt=[...Bt].sort(()=>Math.random()-.5).slice(0,8),V=ZP(kt);console.log("Found 8 items, saving to match:",V.length),o&&l?.round?(console.log("💾 Saving round data to Firestore - MatchId:",o,"Round:",l.round),await NP(o,l.round,{items:V,index:0}),console.log("✅ Saved round data to match successfully")):console.log("❌ Cannot save round data - MatchId:",o,"Round:",l?.round),t(!1);return}await new Promise(Ct=>setTimeout(Ct,200))}catch(v){console.error(`Error in attempt ${y}:`,v),await new Promise(E=>setTimeout(E,200))}}console.error("❌ No valid cluster found after several attempts"),t(!1)},[r]);return{isLoading:r,loadObservations:n}}function YP(){const[r,t]=Z.useState(Ii.ROUND_TIMER),n=Z.useRef(!1),o=Z.useRef(null),l=Z.useRef(0),h=Z.useRef(!1),p=Z.useCallback((E,x)=>{o.current&&(clearInterval(o.current),o.current=null),n.current=!0,l.current=E,t(Ii.ROUND_TIMER),o.current=setInterval(()=>{t(P=>P<=1?(console.log("⏰ Timer reached 0, checking for automatic elimination"),o.current&&(clearInterval(o.current),o.current=null),x(),0):P-1)},1e3)},[]),y=Z.useCallback(()=>{o.current&&(clearInterval(o.current),o.current=null),n.current=!1,h.current=!1},[]),v=Z.useCallback(()=>{t(Ii.ROUND_TIMER),n.current=!1,h.current=!1},[]);return{gameCountdown:r,startTimer:p,stopTimer:y,resetTimer:v,timeoutProcessingRef:h,countdownStartedRef:n,currentRoundRef:l}}function QP(){const[r,t]=Z.useState(null),[n,o]=Z.useState(""),[l,h]=Z.useState(ne.IDLE),[p,y]=Z.useState(null),[v,E]=Z.useState(null),[x,P]=Z.useState(null),[M,q]=Z.useState(0),[Q,nt]=Z.useState(null),[at,Tt]=Z.useState([]),[ut,_t]=Z.useState(null),[Bt,Ct]=Z.useState(null),[kt,V]=Z.useState(!1),[O,k]=Z.useState(null),[j,B]=Z.useState(!1),[H,N]=Z.useState(!1),[ce,pe]=Z.useState(!1),[W,St]=Z.useState(null),[yt,ie]=Z.useState(Ii.RESULTS_COUNTDOWN),[D,lt]=Z.useState(new Set),[bt,st]=Z.useState([]),[Et,xt]=Z.useState("Activo"),[At,ge]=Z.useState(0),Zt=Z.useRef(0),ze=Z.useRef(null),{isLoading:Ue,loadObservations:Xe}=WP(),{gameCountdown:le,startTimer:en,stopTimer:Un,resetTimer:jn,timeoutProcessingRef:xn,countdownStartedRef:nn,currentRoundRef:yi}=YP();console.log("🎮 Duels component render - status:",l,"matchId:",p,"user:",r?.uid);const Qn=Z.useCallback(()=>{try{const G=rr(Lt,"user_stats"),tt=ul(G,iw("duelCups","desc"),rw(10));return Os(tt,Nt=>{const re=Nt.docs.filter(Mt=>{const Ot=Mt.data();return Ot.duelCups&&Ot.duelCups>0}).map((Mt,Ot)=>({id:Mt.id,rank:Ot+1,nickname:Mt.data().nickname||"Player",cups:Mt.data().duelCups||0,wins:Mt.data().duelWins||0,losses:Mt.data().duelLosses||0}));st(re),console.log("📊 Leaderboard loaded:",re)},Nt=>{console.error("❌ Error loading leaderboard:",Nt),st([{id:"1",rank:1,nickname:"Champion",cups:75,wins:15,losses:2},{id:"2",rank:2,nickname:"ProPlayer",cups:60,wins:12,losses:3},{id:"3",rank:3,nickname:"Winner",cups:50,wins:10,losses:5},{id:"4",rank:4,nickname:"Master",cups:40,wins:8,losses:4},{id:"5",rank:5,nickname:"Expert",cups:30,wins:6,losses:3}])})}catch(G){return console.error("❌ Error setting up leaderboard:",G),st([]),null}},[]),si=Z.useCallback(async()=>{if(console.log("🔍 handleTimeout called - matchId:",p,"user:",r?.uid,"confirmed:",kt,"guess:",ut),!p||!r||kt||xn.current||ut||l===ne.FINISHED){console.log("❌ handleTimeout cancelled - matchId:",!!p,"user:",!!r,"confirmed:",kt,"processing:",xn.current,"hasGuess:",!!ut,"status:",l);return}if(!v||!v.rounds||!v.rounds[v.round]||!v.rounds[v.round].items){console.log("❌ handleTimeout cancelled - Match has no round data loaded");return}if(ut){console.log("❌ handleTimeout cancelled - player already clicked:",r?.uid);return}xn.current=!0,console.log("⏰ TIMEOUT: Player automatically eliminated for not clicking or verifying"),console.log("🔍 Current state - guess:",ut,"matchId:",p,"user:",r.uid,"confirmed:",kt);try{const G=Jt(Lt,"duel_matches",p);await er(Lt,async tt=>{const mt=await tt.get(G);if(!mt.exists()){console.log("❌ Match doesn't exist, cancelling automatic elimination");return}const Nt=mt.data();if(Nt.state===ne.FINISHED){console.log("❌ Game already finished, cancelling automatic elimination");return}console.log("🔍 Applying automatic elimination - Match state:",Nt.state,"Round:",Nt.round);const re=Nt.players||{},Mt=re[r.uid]||{},Ot=Nt.round||1,Yt={...Nt.rounds||{}},Ae={...Yt[Ot]||{}},hn={...Ae.guesses||{}};if(hn[r.uid]){console.log("❌ Player already confirmed this round, cancelling elimination:",r.uid);return}console.log("🔍 Eliminating player by timeout:",r.uid,"Current HP:",Mt.hp);const ft=Object.keys(re).find(Qt=>Qt!==r.uid),Rt=ft&&hn[ft],wt=hn[r.uid],qt=!wt&&!Rt;console.log("🔍 Timeout analysis - Current player has guess:",!!wt,"Other player has guess:",!!Rt,"Is double timeout:",qt);const Wt={...re,[r.uid]:{...Mt,hp:0}};qt&&ft&&(console.log("🔍 Double timeout detected - eliminating both players"),Wt[ft]={...re[ft],hp:0},hn[ft]={dist:Ii.TIMEOUT_DISTANCE,guess:{lat:0,lng:0},distance:Ii.TIMEOUT_DISTANCE,points:0,timestamp:new Date,timeout:!0,eliminated:!0}),hn[r.uid]={dist:Ii.TIMEOUT_DISTANCE,guess:ut||{lat:0,lng:0},distance:Ii.TIMEOUT_DISTANCE,points:0,timestamp:new Date,timeout:!0,eliminated:!0},Ae.guesses=hn,Yt[Ot]=Ae,tt.update(G,{players:Wt,rounds:Yt,state:ne.FINISHED,finishedAt:new Date,timeoutElimination:!0,eliminatedPlayer:r.uid,doubleTimeout:qt}),console.log("✅ Player automatically eliminated by timeout - Match ended. Double timeout:",qt)}),V(!0),N(!0),console.log("✅ AUTOMATIC ELIMINATION applied - Rival wins the match")}catch(G){console.error("❌ Error applying automatic elimination:",G)}finally{xn.current=!1}},[p,r,kt,ut,l,v,xn]),rn=Z.useCallback(async()=>{if(!(!p||!v||l!==ne.MATCHED))try{const G=Jt(Lt,"duel_matches",p),tt=await Bi(G);if(!tt.exists())return;const mt=tt.data();if(mt.state===ne.FINISHED)return;const Nt=mt.players||{},re=new Date,Mt=9e4;for(const[Ot,Yt]of Object.entries(Nt)){if(Yt.hp<=0)continue;const Ae=Yt.lastActivity?.toDate();if(Ae&&re-Ae>Mt){console.log("🔍 Player appears disconnected:",Ot,"Last activity:",Ae);const hn=Ot===mt.host,Bn=mt.round||1;if(hn&&Bn>1){console.log("🏠 Host disconnected in round",Bn,"- ending match"),await er(Lt,async qt=>{const Wt=await qt.get(G);if(!Wt.exists())return;const Qt=Wt.data();if(Qt.state===ne.FINISHED)return;const te=Object.keys(Qt.players).find($e=>$e!==Ot);qt.update(G,{state:ne.FINISHED,finishedAt:new Date,hostDisconnected:!0,winner:te,disconnectionElimination:!0})});return}const ft=mt.round||1;(mt.rounds?.[ft]?.guesses||{})[Ot]||(console.log("⏰ Eliminating disconnected player:",Ot),await er(Lt,async qt=>{const Wt=await qt.get(G);if(!Wt.exists())return;const Qt=Wt.data();if(Qt.state===ne.FINISHED)return;const te={...Qt.players,[Ot]:{...Qt.players[Ot],hp:0}},$e={...Qt.rounds||{}},Hn={...$e[ft]||{}},Di={...Hn.guesses||{}};Di[Ot]={dist:Ii.TIMEOUT_DISTANCE,guess:{lat:0,lng:0},distance:Ii.TIMEOUT_DISTANCE,points:0,timestamp:new Date,timeout:!0,eliminated:!0,disconnected:!0},Hn.guesses=Di,$e[ft]=Hn,qt.update(G,{players:te,rounds:$e,state:ne.FINISHED,finishedAt:new Date,timeoutElimination:!0,eliminatedPlayer:Ot,disconnectionElimination:!0})}))}}}catch(G){console.error("❌ Error checking disconnected players:",G)}},[p,v,l]);Z.useCallback(async G=>{if(p)try{const tt=Jt(Lt,"duel_matches",p);await er(Lt,async mt=>{const Nt=await mt.get(tt);if(!Nt.exists()||Nt.data().state==="finished")return;const re=Nt.data(),Mt=Object.keys(re.players).find(Ot=>Ot!==G);Mt&&mt.update(tt,{state:"finished",finishedAt:qi(),winner:Mt,disconnectionElimination:!0,eliminatedPlayer:G,statsProcessed:!0})}),console.log("✅ Match ended due to disconnection")}catch(tt){console.error("❌ Error handling disconnection:",tt)}},[p]);const oi=Z.useCallback(async()=>{if(r)try{console.log("🧹 Cleaning player state after match end");const G=Jt(Lt,"duel_queue",r.uid);await nu(G).catch(()=>{}),console.log("✅ Player state cleaned successfully")}catch(G){console.error("❌ Error cleaning player state:",G)}},[r]),Me=Z.useCallback(()=>(qp({click(G){if(!(j||kt)&&(_t(G.latlng),p&&r)){const tt=Jt(Lt,"duel_matches",p);er(Lt,async mt=>{const Nt=await mt.get(tt);if(!Nt.exists())return;const Mt={...Nt.data().players};Mt[r.uid]&&(Mt[r.uid]={...Mt[r.uid],lastActivity:new Date}),mt.update(tt,{players:Mt})}).catch(mt=>{console.log("⚠️ Error updating activity on map click:",mt)})}}}),null),[j,kt,p,r]),Oi=Z.useCallback(()=>{const G=Hc(),tt=Z.useRef(!1);return Z.useEffect(()=>{if(!(!W||!W.observation)&&!tt.current){const mt=[W.observation.lat,W.observation.lon];G.setView(mt,G.getZoom(),{animate:!1}),tt.current=!0}},[W,G]),Z.useEffect(()=>{tt.current=!1},[W]),null},[W]);Z.useEffect(()=>{const G=gu(vn,async tt=>{if(t(tt||null),tt){const mt=await Bi(Jt(Lt,"users",tt.uid));o(mt.exists()&&mt.data()?.nickname||"")}});return()=>G()},[]),Z.useEffect(()=>{if(!r)return;const G=new URLSearchParams(window.location.search),tt=G.get("view"),mt=G.get("match");console.log("🔍 URL params check - view:",tt,"matchParam:",mt,"user:",r?.uid),tt==="duels"&&mt?(console.log("🎯 Navigating to existing duel:",mt),y(mt),h(ne.MATCHED)):console.log("ℹ️ Navigating to normal duel, no matchId")},[r]),Z.useEffect(()=>{if(!r)return;if(new URLSearchParams(window.location.search).get("match")){console.log("🎯 Coming from private room, skipping cleanup");return}console.log("🧹 Cleaning previous user queue"),(async()=>{try{await ws(),console.log("✅ Previous queue cleaned")}catch(Nt){console.log("⚠️ Error cleaning previous queue:",Nt)}h(ne.IDLE),y(null),E(null),P(null),nt(null),Tt([]),_t(null),Ct(null),V(!1),B(!1),N(!1),pe(!1),St(null),ie(Ii.RESULTS_COUNTDOWN),lt(new Set),ge(0),Zt.current=0,ze.current=null,yi.current=0,console.log("✅ State completely reset")})()},[r]),Z.useEffect(()=>{if(!r||p)return;console.log("🎧 Starting matchmaking queue listener");const G=IP(tt=>{console.log("📊 Queue data received:",tt),q(tt.waitingPlayers),tt.myPosition>0?(console.log("✅ User found in queue, position:",tt.myPosition),h(ne.WAITING),tt.waitingPlayers>=2&&(console.log("🎯 Enough players, trying matchmaking..."),AP().then(mt=>{mt?(console.log("✅ Match created successfully:",mt),y(mt),h(ne.MATCHED)):console.log("❌ Could not create match (matchId is null) - probably already created by another user")}).catch(mt=>{console.log("❌ Error in matchmaking:",mt)}))):(console.log("❌ User NOT found in queue, myPosition:",tt.myPosition),console.log("🔍 Complete queue data:",tt),console.log("🔍 Current user:",r?.uid))});return()=>G()},[r,p]),Z.useEffect(()=>{if(!r||l!==ne.WAITING)return;const G=setInterval(()=>{RP()},Ii.HEARTBEAT_INTERVAL);return()=>clearInterval(G)},[r,l]),Z.useEffect(()=>{if(!r)return;const G=PP(async tt=>{if(tt&&(console.log("📋 User queue status:",tt),tt.status===ne.MATCHED&&tt.matchId)){if(console.log("🎯 Match found for user:",tt.matchId),console.log("🔍 Verifying if user is really in queue before processing match"),p){console.log("⚠️ Already in a match, ignoring pairing:",p);return}try{const mt=Jt(Lt,"duel_matches",tt.matchId),Nt=await Bi(mt);if(console.log("🔍 Verifying match state before joining user"),!Nt.exists()){console.log("❌ Match doesn't exist, cleaning queue"),await ws();return}const re=Jt(Lt,"duel_queue",r.uid),Mt=await Bi(re);if(!Mt.exists()||Mt.data().status!==ne.MATCHED){console.log("❌ User is not really in queue or not matched, ignoring match");return}if(Nt.data().state===ne.FINISHED){console.log("❌ Match already finished, cleaning queue and state"),await ws(),h(ne.IDLE),y(null);return}console.log("✅ Valid and active match, joining user"),y(tt.matchId),h(ne.MATCHED)}catch(mt){console.log("❌ Error verifying match:",mt),await ws(),h(ne.IDLE),y(null)}}});return()=>G()},[r,p]),Z.useEffect(()=>{if(!r||l!==ne.WAITING)return;const G=CP(async tt=>{if(console.log("🎯 Opponent was matched with us:",tt),p){console.log("⚠️ Already in a match, ignoring pairing:",p);return}try{const mt=Jt(Lt,"duel_matches",tt.matchId);let Nt,re=3;for(;re>0&&(Nt=await Bi(mt),!Nt.exists());)console.log(`⏳ Match not found, retrying... (${4-re}/3)`),await new Promise(Ae=>setTimeout(Ae,1e3)),re--;if(!Nt.exists()){console.log("❌ Match doesn't exist after retries, cleaning queue"),await ws();return}const Mt=Nt.data();console.log("🔍 Verifying match state (opponent):",{matchId:tt.matchId,state:Mt.state,round:Mt.round,players:Object.keys(Mt.players||{}),hostUid:Mt.hostUid});const Ot=Jt(Lt,"duel_queue",r.uid),Yt=await Bi(Ot);if(!Yt.exists()||Yt.data().status!==ne.MATCHED){console.log("❌ User is not really in queue or not matched, ignoring match (opponent)");return}if(Mt.state===ne.FINISHED){console.log("❌ Match already finished, cleaning queue and state"),await ws(),h(ne.IDLE),y(null);return}console.log("✅ Valid and active match, joining user"),y(tt.matchId),h(ne.MATCHED)}catch(mt){console.log("❌ Error verifying match:",mt),await ws(),h(ne.IDLE),y(null)}});return()=>G()},[r,l,p]),Z.useEffect(()=>{if(!p)return;const G=MP(p,tt=>{if(console.log("Match update:",tt),E(tt),tt.id!==ze.current&&(Zt.current=0,ze.current=tt.id,ge(0),_t(null),Ct(null),V(!1),B(!1),N(!1),lt(new Set),r&&tt.players&&tt.players[r.uid])){const re=Jt(Lt,"duel_matches",p);er(Lt,async Mt=>{const Ot=await Mt.get(re);if(!Ot.exists())return;const Ae={...Ot.data().players};Ae[r.uid]&&(Ae[r.uid]={...Ae[r.uid],lastActivity:new Date}),Mt.update(re,{players:Ae})}).catch(Mt=>{console.log("⚠️ Error initializing player activity:",Mt)})}if(tt.state===ne.FINISHED){console.log("Game finished, players data:",tt.players),h(ne.FINISHED);const re=tt.players||{},Mt=Object.entries(re).map(([Ot,Yt])=>({uid:Ot,...Yt}));if(tt.doubleTimeout)console.log("🎯 Double timeout detected - both players lose"),P(null);else{const Ot=Mt.find(Yt=>Yt.hp>0)||Mt[0];if(console.log("Players HP:",Object.entries(re).map(([Yt,Ae])=>`${Yt}: ${Ae.hp}`)),console.log("Winner detected:",Ot),console.log("Current user UID:",r?.uid),P(Ot),!tt.statsProcessed&&tt.matchmaking===!0){console.log("📊 Processing match stats for matchmaking duel"),Ot&&Ot.uid&&wT(Ot.uid,Ot.nickname||"Player",!0);const Yt=Mt.find(hn=>hn.uid!==Ot.uid);Yt&&Yt.uid&&wT(Yt.uid,Yt.nickname||"Player",!1);const Ae=Jt(Lt,"duel_matches",p);hu(Ae,{statsProcessed:!0}).catch(hn=>{console.error("❌ Error marking stats as processed:",hn)})}else tt.matchmaking!==!0?console.log("📊 Private room match - stats not updated (only matchmaking duels count for leaderboard)"):console.log("📊 Stats already processed for this match, skipping")}if(oi(),tt.timeoutElimination&&tt.eliminatedPlayer){console.log("🎯 Timeout elimination detected - showing special results");const Ot=tt.round||1,Yt=tt.rounds?.[Ot];Yt&&Yt.items&&Yt.index!==void 0&&(console.log("📊 Showing timeout results for round",Ot),St({round:Ot,observation:Yt.items[Yt.index]||null,guesses:Yt.guesses||{},damage:null,players:tt.players,timeoutElimination:!0,eliminatedPlayer:tt.eliminatedPlayer,doubleTimeout:tt.doubleTimeout||!1}),pe(!0))}else{const Ot=tt.round-1,Yt=tt.rounds?.[Ot];Yt&&Yt.guesses&&Object.keys(Yt.guesses).length===2&&!ce&&(console.log("Game finished, showing final round results for round",Ot),St({round:Ot,observation:Yt.items?.[Yt.index]||null,guesses:Yt.guesses,damage:Yt.damage,players:tt.players}),pe(!0))}return}const mt=tt.round,Nt=tt.rounds?.[mt];if(console.log("Match update - Round:",mt,"Round data:",Nt,"User:",r?.uid,"Host:",tt.hostUid),console.log("All rounds:",tt.rounds),mt!==Zt.current&&!H){if(console.log("Round change detected, resetting state from round",Zt.current,"to round",mt),Zt.current>0){const re=Zt.current,Mt=tt.rounds?.[re];console.log("Showing results for completed round:",re,"Data:",Mt),console.log("Round data checks:",{hasRoundData:!!Mt,hasGuesses:!!Mt?.guesses,guessesCount:Mt?.guesses?Object.keys(Mt.guesses).length:0,hasDamage:!!Mt?.damage,showResults:ce,processedRounds:Array.from(D),isProcessed:D.has(re)}),Mt&&Mt.guesses&&Object.keys(Mt.guesses).length===2&&Mt.damage&&!ce&&!D.has(re)&&(console.log("Both players finished round, showing results for round",re),St({round:re,observation:Mt.items?.[Mt.index]||null,guesses:Mt.guesses,damage:Mt.damage,players:tt.players}),pe(!0),lt(Ot=>new Set([...Ot,re])))}_t(null),Ct(null),V(!1),B(!1),N(!1),ge(mt),Zt.current=mt}if(Nt&&Nt.items&&typeof Nt.index=="number"){console.log("✅ Loading round data from match - Items:",Nt.items.length,"Index:",Nt.index),Tt(Nt.items);const re=Nt.items[Nt.index];nt(re)}else r&&tt.hostUid===r.uid&&!Nt?(console.log("🎯 Host loading first round - User:",r.uid,"Host:",tt.hostUid,"Round:",tt.round),Xe(p,tt,r.uid)):Nt||console.log("⏳ Non-host waiting for host to load round data - User:",r.uid,"Host:",tt.hostUid,"Round data:",Nt)});return()=>G()},[p,r,Xe,oi]),Z.useEffect(()=>{if(ce&&W){ie(Ii.RESULTS_COUNTDOWN);const G=setInterval(()=>{ie(tt=>tt<=1?(clearInterval(G),pe(!1),St(null),l!==ne.FINISHED&&(_t(null),Ct(null),V(!1),B(!1),N(!1),console.log("🔄 Resetting timer state for new round"),jn()),0):tt-1)},1e3);return()=>clearInterval(G)}},[ce,W,l,jn]),Z.useEffect(()=>{if(ce){console.log("⏰ Not starting timer - results are being shown");return}if(l===ne.MATCHED&&v&&v.state!==ne.FINISHED&&!ce&&!j&&Q&&(!nn.current||v.round!==yi.current)&&v.rounds&&v.rounds[v.round]&&v.rounds[v.round].items){console.log("⏰ Starting 90 second timer for round",v.round),console.log("🔍 Timer state - started:",nn.current,"currentRound:",yi.current,"newRound:",v.round),console.log("🔍 Conditions - status:",l,"match:",!!v,"showResults:",ce,"roundLocked:",j,"observation:",!!Q),console.log("🔍 Match data:",{id:v.id,state:v.state,round:v.round,players:v.players}),console.log("🔍 Round data:",{hasRounds:!!v.rounds,currentRound:v.round,hasItems:!!(v.rounds&&v.rounds[v.round]&&v.rounds[v.round].items)});const G=()=>{!kt&&!xn.current&&!ut&&l!==ne.FINISHED&&v&&v.rounds&&v.rounds[v.round]&&v.rounds[v.round].items?(console.log("⏰ AUTOMATIC ELIMINATION: Player didn't click or verify in time:",r?.uid),si()):console.log("⏰ Player already confirmed, clicked, elimination in process, game finished or match without data, skipping:",{confirmed:kt,hasGuess:!!ut,processing:xn.current,status:l,userId:r?.uid,hasMatchData:!!(v&&v.rounds&&v.rounds[v.round]&&v.rounds[v.round].items)})};en(v.round,G)}},[Q,v?.round,ce,l,v,j,kt,ut,r?.uid,si,en]),Z.useEffect(()=>{(l===ne.FINISHED||ce)&&(Un(),console.log("🧹 Timer cleaned - game finished or showing results"))},[l,ce,Un]),Z.useEffect(()=>{if(l!==ne.MATCHED||!p||!r)return;const G=async()=>{try{const mt=Jt(Lt,"duel_matches",p);await hu(mt,{[`players.${r.uid}.lastActivity`]:qi()}),console.log("💓 Heartbeat sent")}catch(mt){console.error("❌ Error sending heartbeat:",mt)}};G();const tt=setInterval(G,1e4);return()=>clearInterval(tt)},[l,p,r]),Z.useEffect(()=>{if(l!==ne.MATCHED||!p)return;const G=setInterval(()=>{rn()},1e4);return()=>clearInterval(G)},[l,p,rn]),Z.useEffect(()=>{if(!p||!v||!r)return;const G=Object.keys(v.players||{}).find(Nt=>Nt!==r.uid);if(!G)return;const tt=Jt(Lt,"duel_matches",p),mt=Os(tt,Nt=>{if(!Nt.exists())return;const Mt=Nt.data().players?.[G];if(!Mt)return;const Ot=Mt.lastActivity?.toDate(),hn=Ot&&new Date-Ot>9e4;xt(hn?"Desconectado":"Activo")});return()=>mt()},[p,v,r]),Z.useEffect(()=>{const G=Qn();return()=>{G&&typeof G=="function"&&G()}},[Qn]);const Fi=Z.useCallback(async()=>{if(r){if(l===ne.WAITING||l===ne.MATCHED){console.log("⚠️ Already in queue or in a match, ignoring search");return}console.log("🔍 Starting match search...");try{console.log("🧹 Cleaning any existing queue state before new search"),await ws().catch(tt=>{console.log("⚠️ Error cleaning previous queue:",tt)});try{const tt=Jt(Lt,"duel_queue",r.uid);await nu(tt),console.log("✅ Queue document deleted completely")}catch(tt){console.log("⚠️ Error deleting queue document:",tt)}h(ne.WAITING),console.log("✅ Status changed to waiting");const G=await SP(n);console.log("📝 enqueueForDuel result:",G),G.matched&&G.matchId?(console.log("🎯 Match found immediately:",G.matchId),y(G.matchId),h(ne.MATCHED)):(console.log("⏳ User added to queue, waiting for matchmaking..."),setTimeout(()=>{console.log("⏳ User added to queue, waiting for matchmaking...")},100))}catch(G){console.error("❌ Error searching for match:",G),h(ne.IDLE)}}},[r,l,n]),he=Z.useCallback(async()=>{await ws(),h(ne.IDLE),y(null)},[]);return A.jsxs("div",{className:"container-narrow",style:{padding:"1rem",textAlign:"center"},children:[A.jsx("div",{style:{position:"fixed",left:12,top:12,zIndex:1e3},children:A.jsx("button",{onClick:async()=>{if(console.log("🔙 Back button pressed - clearing state"),l===ne.WAITING)try{await ws(),console.log("✅ Cola cancelada")}catch(G){console.log("⚠️ Error cancelando cola:",G)}h(ne.IDLE),y(null),E(null),P(null),nt(null),Tt([]),_t(null),Ct(null),V(!1),B(!1),N(!1),pe(!1),St(null),ie(10),lt(new Set),ge(0),Zt.current=0,ze.current=null,console.log("✅ State completely cleared by Back button"),console.log("🔍 Volviendo al menú principal"),window.location.href="?view=menu"},style:{padding:"6px 10px",borderRadius:8,border:"none",background:"#374151",color:"#fff",cursor:"pointer"},children:"Back"})}),A.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold"},children:"Birders Place - Duels"}),!r&&A.jsxs("div",{style:{padding:"2rem",color:"#fff",textAlign:"center"},children:[A.jsx("h2",{style:{marginTop:0},children:"1v1 Duels"}),A.jsx("p",{style:{opacity:.85,marginBottom:20},children:"Sign in to play."}),A.jsx("button",{onClick:()=>window.location.href="?view=login",style:{padding:"0.6rem 1rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600},children:"Sign In"})]}),r&&l===ne.IDLE&&A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",alignItems:"center"},children:[A.jsx("button",{onClick:Fi,disabled:Ue,style:{padding:"0.5rem 1rem",backgroundColor:Ue?"#95a5a6":"#3498db",color:"white",border:"none",borderRadius:"8px",cursor:Ue?"not-allowed":"pointer"},children:Ue?"Loading...":"Search 1v1 Match"}),A.jsxs("div",{style:{marginTop:"1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",padding:"1rem",maxWidth:"400px",width:"100%"},children:[A.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#fff",textAlign:"center"},children:"🏆 Top 10 Players"}),bt.length===0?A.jsx("div",{style:{color:"#ecf0f1",textAlign:"center",padding:"1rem"},children:"No data yet. Be the first to win!"}):A.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:bt.map((G,tt)=>A.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",borderRadius:"8px",padding:"0.75rem",border:tt<3?"2px solid #fbbf24":"1px solid rgba(255,255,255,0.2)"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"0.5rem"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[A.jsxs("span",{style:{color:tt<3?"#fbbf24":"#ecf0f1",fontWeight:"bold",minWidth:"25px",fontSize:"16px"},children:["#",G.rank]}),A.jsx("span",{style:{color:"#fff",fontWeight:"bold",fontSize:"16px"},children:G.nickname||"Player"})]}),A.jsxs("div",{style:{color:"#fbbf24",fontWeight:"bold",fontSize:"16px"},children:["🏆 ",G.cups||0]})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"14px",color:"#ecf0f1"},children:[A.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[A.jsxs("span",{style:{color:"#10b981"},children:["✅ ",G.wins||0," wins"]}),A.jsxs("span",{style:{color:"#ef4444"},children:["❌ ",G.losses||0," losses"]})]}),A.jsx("div",{style:{color:"#9ca3af"},children:G.wins+G.losses>0?`${Math.round(G.wins/(G.wins+G.losses)*100)}% WR`:"0% WR"})]})]},G.id))})]})]}),r&&l===ne.WAITING&&A.jsxs(A.Fragment,{children:[A.jsx("div",{style:{marginTop:"1rem",color:"#fff"},children:"🔍 Searching for opponent..."}),A.jsx("div",{style:{fontSize:"14px",marginTop:"0.5rem",opacity:.8},children:M>0?`👥 ${M} player${M>1?"s":""} waiting...`:"⏳ Waiting for another player to join..."}),A.jsx("button",{onClick:he,style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"#e74c3c",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Cancel"})]}),ce&&W&&A.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",zIndex:2e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem"},children:A.jsxs("div",{style:{background:"#1f2937",borderRadius:"12px",padding:"2rem",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflow:"auto"},children:[A.jsxs("h2",{style:{color:"#f1c40f",margin:"0 0 1rem 0",textAlign:"center"},children:["Round ",W.round," - Results"]}),A.jsxs("div",{style:{background:"#374151",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",textAlign:"center"},children:[A.jsxs("div",{style:{color:"#d1d5db",fontSize:"16px",marginBottom:"8px"},children:["🥊 Duel: ",Object.entries(W.players).map(([G,tt])=>{const mt=G===r?.uid;return A.jsx("span",{style:{color:mt?"#8b5cf6":"#10b981",fontWeight:"bold",margin:"0 4px"},children:mt?"You":tt?.nickname||"Player"},G)}).reduce((G,tt,mt)=>[G,mt===1?" vs ":"",tt])]}),A.jsxs("div",{style:{color:"#9ca3af",fontSize:"14px"},children:["Rounds played: ",W.round," | Remaining points: ",Object.entries(W.players).map(([G,tt])=>{const mt=G===r?.uid,Nt=tt?.hp??6e3;return A.jsxs("span",{style:{color:mt?"#8b5cf6":"#10b981",fontWeight:"bold",margin:"0 8px"},children:[mt?"You":tt?.nickname||"Player",": ",Nt.toLocaleString()]},G)}).reduce((G,tt,mt)=>[G,mt===1?" | ":"",tt])]})]}),A.jsx("div",{style:{height:"300px",marginBottom:"1rem",borderRadius:"8px",overflow:"hidden"},children:A.jsxs(xc,{center:[20,0],zoom:2,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,style:{height:"100%",width:"100%"},children:[A.jsx(Rc,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OSM</a> © <a href="https://carto.com/">CARTO</a>',noWrap:!0}),A.jsx(Cc,{}),A.jsx(Oi,{}),W.observation&&A.jsx(ns,{position:[W.observation.lat,W.observation.lon],icon:Gp,children:A.jsx(Ic,{permanent:!0,direction:"top",offset:[-20,-25],className:"distance-tooltip",style:{background:"transparent",border:"none",boxShadow:"none",color:"#dc2626",fontWeight:"bold",fontSize:"14px",textAlign:"center",width:"40px",marginLeft:"-20px"},children:"📍 REAL LOCATION"})}),Object.entries(W.guesses).map(([G,tt],mt)=>{const Nt=G===r?.uid,re=W.players[G],Mt=W.timeoutElimination&&G===W.eliminatedPlayer,Ot=["#3b82f6","#10b981"],Yt=Mt?"#ef4444":Ot[mt%Ot.length];return!tt?.guess?.lat||!tt?.guess?.lng?null:A.jsx(ns,{position:[tt.guess.lat,tt.guess.lng],children:A.jsx(Ic,{permanent:!0,direction:"top",offset:[-20,-25],className:"distance-tooltip",style:{background:"transparent",border:"none",boxShadow:"none",color:Yt,fontWeight:"bold",fontSize:"14px",textAlign:"center",width:"40px",marginLeft:"-20px"},children:Mt?"❌":Nt?"YOU":re?.nickname||"Opponent"})},G)})]})}),W.timeoutElimination?A.jsxs("div",{style:{background:"#dc2626",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",textAlign:"center"},children:[A.jsx("div",{style:{color:"#fff",fontWeight:"bold",fontSize:"18px"},children:"⏰ Timeout Elimination!"}),A.jsx("div",{style:{color:"#fecaca",marginTop:"4px"},children:W.doubleTimeout?"Neither player clicked in time - both eliminated":"The opponent didn't click in time and was automatically eliminated"}),A.jsx("div",{style:{color:"#fecaca",marginTop:"8px",fontSize:"14px"},children:W.doubleTimeout?A.jsx("div",{style:{color:"#ef4444",fontWeight:"bold"},children:"⏰ Both players: ❌ Didn't click"}):Object.entries(W.guesses).map(([G,tt])=>{const mt=W.players[G],Nt=G===r?.uid;return G===W.eliminatedPlayer?A.jsxs("span",{style:{margin:"0 8px",color:"#ef4444"},children:[Nt?"You":mt?.nickname||"Player",": ❌ Didn't click"]},G):A.jsxs("span",{style:{margin:"0 8px",color:"#10b981"},children:[Nt?"You":mt?.nickname||"Player",": ✅ Clicked"]},G)})})]}):W.damage&&A.jsxs("div",{style:{background:"#dc2626",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",textAlign:"center"},children:[A.jsxs("div",{style:{color:"#fff",fontWeight:"bold",fontSize:"18px"},children:["⚔️ ",W.damage.winner," won this round!"]}),A.jsxs("div",{style:{color:"#fecaca",marginTop:"4px"},children:[W.damage.loser," lost ",W.damage.amount.toLocaleString()," points",W.damage.multiplier&&W.damage.multiplier>1&&A.jsxs("span",{style:{color:"#fbbf24",fontWeight:"bold",marginLeft:"8px"},children:["(x",W.damage.multiplier,")"]})]}),W.damage.distances&&A.jsxs("div",{style:{color:"#fecaca",marginTop:"8px",fontSize:"14px"},children:["Distances: ",Object.entries(W.damage.distances).map(([G,tt])=>{const mt=W.players[G],Nt=G===r?.uid;return A.jsxs("span",{style:{margin:"0 8px"},children:[Nt?"You":mt?.nickname||"Player",": ",HP(tt)]},G)})]})]}),A.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginBottom:"1rem"},children:Object.entries(W.players).map(([G,tt])=>{const mt=G===r?.uid,Nt=tt?.hp??6e3;return A.jsxs("div",{style:{background:mt?"#374151":"#111827",padding:"1rem",borderRadius:"8px",border:mt?"2px solid #8b5cf6":"1px solid #374151",minWidth:"150px",textAlign:"center"},children:[A.jsx("div",{style:{fontWeight:"bold",color:mt?"#8b5cf6":"#d1d5db"},children:mt?"You":tt?.nickname||"Opponent"}),A.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",color:Nt<=0?"#ef4444":"#10b981",marginTop:"4px"},children:[Nt.toLocaleString()," pts"]})]},G)})}),A.jsxs("div",{style:{textAlign:"center",color:"#9ca3af"},children:[A.jsx("div",{style:{fontSize:"18px",marginBottom:"8px"},children:l==="finished"?"Showing final results...":"Next round in:"}),A.jsx("div",{style:{fontSize:"48px",fontWeight:"bold",color:yt<=3?"#ef4444":"#f1c40f",textShadow:"0 0 10px rgba(241, 196, 15, 0.5)"},children:yt})]})]})}),r&&l===ne.MATCHED&&v&&!ce&&A.jsxs("div",{style:{marginBottom:"1rem"},children:[Et==="Desconectado"&&A.jsx("div",{style:{background:"#ef4444",color:"#fff",padding:"8px 16px",borderRadius:"8px",textAlign:"center",fontSize:"14px",fontWeight:"bold"},children:"⚠️ Oponente desconectado - Partida terminará automáticamente"}),Et==="Activo"&&A.jsx("div",{style:{background:"#10b981",color:"#fff",padding:"8px 16px",borderRadius:"8px",textAlign:"center",fontSize:"14px",fontWeight:"bold"},children:"✅ Oponente conectado"})]}),r&&l===ne.MATCHED&&v&&!ce&&A.jsxs("div",{style:{marginTop:"1rem"},children:[A.jsxs("div",{style:{marginBottom:"1rem",color:"#fff"},children:[A.jsxs("h3",{style:{margin:0},children:["Match found! Round ",v.round||1]}),v.round>=4&&A.jsxs("div",{style:{marginTop:8,padding:"4px 8px",backgroundColor:"#dc2626",color:"#fff",borderRadius:"6px",fontSize:"14px",fontWeight:"bold",display:"inline-block"},children:["🔥 Multiplicador de daño: x",(1.5+(v.round-4)*.5).toFixed(1)]}),A.jsxs("div",{style:{textAlign:"center",marginTop:"1rem",marginBottom:"1rem"},children:[A.jsx("div",{style:{fontSize:"18px",color:"#9ca3af",marginBottom:"8px"},children:"Tiempo restante:"}),A.jsx("div",{style:{fontSize:"48px",fontWeight:"bold",color:le<=10?"#ef4444":le<=30?"#f59e0b":"#10b981",textShadow:"0 0 10px rgba(16, 185, 129, 0.5)"},children:le}),le<=10&&!kt&&A.jsx("div",{style:{fontSize:"14px",color:"#ffffff",fontWeight:"bold",marginTop:"8px",textShadow:"0 0 5px rgba(0, 0, 0, 0.8)"},children:"⚠️ Automatic elimination if you don't verify!"}),le<=10&&kt&&A.jsx("div",{style:{fontSize:"14px",color:"#10b981",fontWeight:"bold",marginTop:"8px",textShadow:"0 0 5px rgba(16, 185, 129, 0.5)"},children:"✅ You already clicked - Waiting for opponent..."})]}),A.jsx("div",{style:{display:"flex",gap:16,justifyContent:"center",marginTop:12},children:Object.entries(v.players||{}).map(([G,tt])=>A.jsxs("div",{style:{background:"#2c3e50",padding:"12px 16px",borderRadius:"8px",border:G===r.uid?"2px solid #3498db":"2px solid transparent"},children:[A.jsx("div",{style:{fontWeight:700,color:"#fff"},children:tt.nickname||(G===r.uid?n||"You":"Opponent")}),A.jsxs("div",{style:{color:"#ecf0f1"},children:["Points: ",(tt.hp??6e3).toLocaleString()]})]},G))})]}),!Q&&A.jsx("div",{style:{marginTop:"1rem",color:"#fbbf24"},children:Ue?"Loading round...":"Waiting for round..."}),at.length>0&&A.jsx("div",{className:"gallery",children:at.map(G=>A.jsx("div",{className:`gallery-item ${Q?.id===G.id?"active":""}`,onClick:()=>{nt(G),k(G.photo)},children:A.jsx("img",{src:G.photo})},G.id))}),Q&&A.jsx("div",{className:"map-wrapper",children:A.jsxs(xc,{center:[20,0],zoom:2,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,style:{height:"100%",width:"100%"},children:[A.jsx(Rc,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OSM</a> © <a href="https://carto.com/">CARTO</a>',noWrap:!0}),A.jsx(Cc,{}),A.jsx(Me,{}),ut&&A.jsx(ns,{position:[ut.lat,ut.lng]}),kt&&!ce&&A.jsx(A.Fragment,{children:ut&&A.jsx(ns,{position:[ut.lat,ut.lng]})})]})}),Q&&!kt&&ut&&!j&&A.jsx("div",{style:{marginTop:"12px",color:"#d1d5db",fontSize:"14px"},children:"Haz click en el mapa para cambiar la posición"}),Q&&!kt&&ut&&!j&&A.jsx("button",{onClick:async()=>{if(!(!Q||!ut||j)){B(!0);try{const G=BP(Q.lat,Q.lon,ut.lat,ut.lng);Ct(G),V(!0),N(!0);const tt=Jt(Lt,"duel_matches",p);await er(Lt,async mt=>{const Nt=await mt.get(tt);if(!Nt.exists())return;const Mt={...Nt.data().players};Mt[r.uid]&&(Mt[r.uid]={...Mt[r.uid],lastActivity:new Date}),mt.update(tt,{players:Mt})}),await kP(p,r.uid,G,{lat:ut.lat,lng:ut.lng})}catch(G){console.error("Error enviando guess:",G),B(!1)}}},style:{marginTop:"18px",padding:"0.6rem 1.2rem",backgroundColor:"#27ae60",color:"white",border:"none",borderRadius:"10px",cursor:"pointer"},children:"Verify"}),j&&A.jsx("div",{style:{marginTop:"18px",padding:"0.6rem 1.2rem",backgroundColor:"#95a5a6",color:"white",borderRadius:"10px",textAlign:"center"},children:"Procesando..."}),kt&&!ce&&A.jsxs("div",{className:"result-panel",children:[A.jsxs("h3",{style:{margin:0},children:["Round ",v.round||1]}),v.round>=4&&A.jsxs("div",{style:{marginTop:8,padding:"4px 8px",backgroundColor:"#dc2626",color:"#fff",borderRadius:"6px",fontSize:"14px",fontWeight:"bold",display:"inline-block"},children:["🔥 Multiplicador de daño: x",(1.5+(v.round-4)*.5).toFixed(1)]}),A.jsx("div",{style:{marginTop:16,color:"#fbbf24",fontSize:"18px",fontWeight:"bold"},children:"⏳ Waiting for opponent..."})]})]}),l===ne.FINISHED&&v&&A.jsxs("div",{className:"result-panel",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[A.jsx("h2",{style:{margin:0,color:"#fff"},children:"🎉 Game finished!"}),console.log("Game Over screen - match.players:",v.players),A.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",borderRadius:"8px",padding:"1rem",margin:"1rem 0",textAlign:"center"},children:[A.jsxs("div",{style:{color:"#fff",fontSize:"18px",marginBottom:"8px"},children:["🥊 Duel: ",Object.entries(v.players||{}).map(([G,tt])=>{const mt=G===r?.uid;return A.jsx("span",{style:{color:mt?"#fbbf24":"#ecf0f1",fontWeight:"bold",margin:"0 4px"},children:mt?"You":tt?.nickname||"Player"},G)}).reduce((G,tt,mt)=>[G,mt===1?" vs ":"",tt])]}),A.jsxs("div",{style:{color:"#ecf0f1",fontSize:"16px",marginBottom:"8px"},children:["Rounds played: ",v.round||1]}),A.jsxs("div",{style:{color:"#ecf0f1",fontSize:"16px"},children:["Final points: ",Object.entries(v.players||{}).map(([G,tt])=>{const mt=G===r?.uid;return A.jsxs("span",{style:{color:mt?"#fbbf24":"#ecf0f1",fontWeight:"bold",margin:"0 8px"},children:[mt?"You":tt?.nickname||"Player",": ",(tt?.hp??0).toLocaleString()]},G)}).reduce((G,tt,mt)=>[G,mt===1?" | ":"",tt])]})]}),v.doubleTimeout?A.jsx("div",{style:{marginTop:12,fontSize:"24px",fontWeight:"bold",color:"#e74c3c"},children:"⏰ Both players lost due to timeout!"}):x?A.jsxs("div",{style:{marginTop:12,fontSize:"24px",fontWeight:"bold",color:"#fbbf24"},children:["Winner: ",x.nickname||"Opponent"]}):null,A.jsx("div",{style:{marginTop:8,color:"#ecf0f1"},children:(()=>{if(v.doubleTimeout)return"⏰ Neither player verified in time. Both lost!";if(x){const G=x.uid===r?.uid;return console.log("Message check - Winner UID:",x?.uid,"User UID:",r?.uid,"Is winner:",G),G?"Congratulations on the victory! 🎉":"Better luck next time! 💪"}return""})()}),A.jsx("button",{onClick:async()=>{console.log("🔄 Reiniciando juego - limpiando todo el estado"),await oi();try{const G=Jt(Lt,"duel_queue",r.uid);await nu(G),console.log("✅ Queue document deleted completely")}catch(G){console.log("⚠️ Error deleting queue document:",G)}h(ne.IDLE),y(null),E(null),P(null),nt(null),Tt([]),_t(null),Ct(null),V(!1),B(!1),N(!1),pe(!1),St(null),ie(10),lt(new Set),ge(0),Zt.current=0,ze.current=null,console.log("✅ Estado completamente limpiado"),console.log("🔍 Volviendo a la vista de duels para buscar nueva partida"),window.location.href="?view=duels"},style:{marginTop:16,padding:"0.7rem 1.2rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"10px",cursor:"pointer",boxShadow:"0 6px 14px rgba(239,68,68,0.25)"},children:"Play again"})]}),O&&A.jsxs("div",{className:"lightbox-backdrop",onClick:()=>k(null),children:[A.jsx("button",{className:"lightbox-close",onClick:()=>k(null),children:"Cerrar"}),A.jsx("img",{className:"lightbox-img",src:O,alt:"Foto"})]}),A.jsxs("div",{style:{position:"fixed",bottom:10,right:10,fontSize:"10px",color:"#666",background:"rgba(255,255,255,0.9)",padding:"4px 8px",borderRadius:"4px",zIndex:1e3},children:["Images: ",A.jsx("a",{href:"https://inaturalist.org",target:"_blank",rel:"noopener noreferrer",style:{color:"#10b981"},children:"iNaturalist"})]})]})}function KP(){const[r,t]=Z.useState(null),[n,o]=Z.useState(""),[l,h]=Z.useState(null),[p,y]=Z.useState(null),[v,E]=Z.useState([]),[x,P]=Z.useState(""),[M,q]=Z.useState(""),[Q,nt]=Z.useState(!1),[at,Tt]=Z.useState(null),[ut,_t]=Z.useState(null);Z.useEffect(()=>{const V=gu(vn,async O=>{if(t(O||null),O){const k=await Bi(Jt(Lt,"users",O.uid));o(k.exists()&&k.data()?.nickname||"")}});return()=>V()},[]),Z.useEffect(()=>{if(!l||!r)return;const V=dw(l,j=>{y(j),j?.duelMatchId&&(Tt(j.duelMatchId),window.location.href=`?view=duels&match=${j.duelMatchId}`),j?.gameId&&(_t(j.gameId),window.location.href=`?view=multiplayer&game=${j.gameId}`)}),O=mw(l,E),k=DP(l,r.uid,j=>{j?.gameId&&(console.log("🎮 Game ready notification received, navigating..."),_t(j.gameId),window.location.href=`?view=multiplayer&game=${j.gameId}`)});return()=>{V(),O(),k()}},[l,r]);async function Bt(){q(""),nt(!0);try{const V=await hw(n);h(V.roomId)}catch(V){console.error("createRoom error",V),q(V?.message||"No se pudo crear la sala")}finally{nt(!1)}}async function Ct(){q(""),nt(!0);try{const V=await fw(x.trim().toUpperCase(),n);h(V)}catch(V){console.error("joinRoom error",V),q(V?.message||"No se pudo unir")}finally{nt(!1)}}async function kt(){l&&await pw(l),h(null),y(null),E([]),Tt(null)}return r?l?A.jsx("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:A.jsxs("div",{style:{background:"#111827",padding:24,borderRadius:12,color:"#fff",width:560,textAlign:"center"},children:[A.jsxs("h2",{style:{marginTop:0},children:["Room: ",p?.code||""]}),A.jsx("div",{style:{display:"flex",gap:8,justifyContent:"center",flexWrap:"wrap"},children:v.map(V=>A.jsx("div",{style:{background:"#0b1220",padding:10,borderRadius:8},children:A.jsx("div",{style:{fontWeight:700},children:V.nickname||V.id})},V.id))}),at?A.jsx("div",{style:{marginTop:12},children:A.jsx("div",{style:{color:"#10b981",fontWeight:600},children:"¡Redirigiendo al duelo..."})}):ut?A.jsx("div",{style:{marginTop:12},children:A.jsx("div",{style:{color:"#10b981",fontWeight:600},children:"¡Redirigiendo al juego multijugador..."})}):p?.hostUid===r.uid&&v.length>=2?A.jsxs("div",{style:{marginTop:12,display:"flex",gap:"8px",justifyContent:"center",flexWrap:"wrap"},children:[A.jsx("button",{onClick:async()=>{q(""),nt(!0);try{const V=await LP(l);Tt(V),window.location.href=`?view=duels&match=${V}`}catch(V){console.error("create duel from room",V),q(V?.message||"No se pudo iniciar el duelo")}finally{nt(!1)}},disabled:Q,style:{padding:"0.6rem 1rem",background:Q?"#6b7280":"#8b5cf6",color:"#fff",border:"none",borderRadius:8,cursor:Q?"not-allowed":"pointer",fontWeight:600},children:Q?"Iniciando...":"Iniciar duelo (1v1)"}),A.jsx("button",{onClick:async()=>{q(""),nt(!0);try{const V=await gw(l);_t(V),console.log("🎮 Juego multijugador creado:",V)}catch(V){console.error("create multiplayer game from room",V),q(V?.message||"No se pudo iniciar el juego multijugador")}finally{nt(!1)}},disabled:Q,style:{padding:"0.6rem 1rem",background:Q?"#6b7280":"#f59e0b",color:"#fff",border:"none",borderRadius:8,cursor:Q?"not-allowed":"pointer",fontWeight:600},children:Q?"Starting...":`Start multiplayer (${v.length} players)`})]}):v.length<2&&A.jsx("div",{style:{marginTop:12,color:"#fbbf24"},children:"Waiting for more players... (2/2)"}),M&&A.jsx("div",{style:{marginTop:10,color:"#fca5a5",fontSize:12},children:M}),A.jsx("div",{style:{marginTop:12},children:A.jsx("button",{onClick:kt,style:{padding:"0.6rem 1rem",background:"#ef4444",color:"#fff",border:"none",borderRadius:8,cursor:"pointer"},children:"Leave room"})})]})}):A.jsx("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:A.jsxs("div",{style:{background:"#111827",padding:24,borderRadius:12,color:"#fff",width:520,textAlign:"center"},children:[A.jsx("h2",{style:{marginTop:0},children:"Private rooms"}),A.jsxs("div",{children:["Tu nick: ",A.jsx("b",{children:n||r.email})]}),A.jsx("div",{style:{display:"flex",gap:10,justifyContent:"center",marginTop:12},children:A.jsx("button",{onClick:Bt,disabled:Q,style:{padding:"0.6rem 1rem",background:Q?"#6b7280":"#10b981",color:"#fff",border:"none",borderRadius:8,cursor:Q?"not-allowed":"pointer",fontWeight:600},children:Q?"Creando...":"Crear sala"})}),A.jsxs("div",{style:{marginTop:14},children:[A.jsx("input",{value:x,onChange:V=>P(V.target.value),placeholder:"CÓDIGO",style:{padding:"0.5rem 0.8rem",borderRadius:8,border:"1px solid #374151",background:"#0b1220",color:"#fff"}}),A.jsx("button",{onClick:Ct,disabled:Q,style:{marginLeft:8,padding:"0.6rem 1rem",background:Q?"#6b7280":"#8b5cf6",color:"#fff",border:"none",borderRadius:8,cursor:Q?"not-allowed":"pointer"},children:"Unirse"})]}),M&&A.jsx("div",{style:{marginTop:10,color:"#fca5a5",fontSize:12},children:M})]})}):A.jsx("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:A.jsxs("div",{style:{background:"#111827",padding:24,borderRadius:12,color:"#fff",width:480,textAlign:"center"},children:[A.jsx("h2",{style:{marginTop:0},children:"Private rooms"}),A.jsx("p",{style:{opacity:.85,marginBottom:20},children:"Inicia sesión para crear o unirte a una sala."}),A.jsx("button",{onClick:()=>window.location.href="?view=login",style:{padding:"0.6rem 1rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600},children:"Iniciar sesión"})]})})}function XP(){const[r,t]=Z.useState(null),[n,o]=Z.useState(""),[l,h]=Z.useState(null),[p,y]=Z.useState(null),[v,E]=Z.useState([]),[x,P]=Z.useState(""),[M,q]=Z.useState(""),[Q,nt]=Z.useState(!1),[at,Tt]=Z.useState(null),[ut,_t]=Z.useState(null),[Bt,Ct]=Z.useState("lobby"),[kt,V]=Z.useState(null),[O,k]=Z.useState(null),[j,B]=Z.useState([]),[H,N]=Z.useState(null),[ce,pe]=Z.useState(null),[W,St]=Z.useState(null),[yt,ie]=Z.useState(!1),[D,lt]=Z.useState(1),[bt,st]=Z.useState(0),[Et,xt]=Z.useState(!1),[At,ge]=Z.useState(null),[Zt,ze]=Z.useState(!1),[Ue,Xe]=Z.useState(!1),[le,en]=Z.useState(null),[Un,jn]=Z.useState(10),[xn,nn]=Z.useState(new Set),[yi,Qn]=Z.useState(!1),si=5,rn=Z.useRef(0),oi=Z.useRef(null);function Me(ft,Rt,wt,qt){const Qt=Di=>Di*Math.PI/180,te=Qt(wt-ft),$e=Qt(qt-Rt),Hn=Math.sin(te/2)**2+Math.cos(Qt(ft))*Math.cos(Qt(wt))*Math.sin($e/2)**2;return 6371*2*Math.atan2(Math.sqrt(Hn),Math.sqrt(1-Hn))}function Oi(ft){return ft==null||isNaN(ft)?"":ft<1?`${Math.round(ft*1e3).toLocaleString()} m`:`${Math.round(ft).toLocaleString()} km`}function Fi(ft,Rt){const wt=ft>=0?"N":"S",qt=Rt>=0?"E":"W",Wt=Math.abs(ft).toFixed(1),Qt=Math.abs(Rt).toFixed(1);return`${Wt}°${wt}, ${Qt}°${qt}`}const he=[{name:"North America",bbox:[-170,5,-50,75],weight:.5},{name:"South America",bbox:[-82,-56,-34,12],weight:1},{name:"Europe",bbox:[-31,34,45,72],weight:.5},{name:"Africa",bbox:[-20,-35,52,37],weight:1},{name:"Asia",bbox:[25,-10,180,55],weight:1},{name:"Oceania",bbox:[110,-50,180,0],weight:.5}];function G(){const ft=he.reduce((wt,qt)=>wt+qt.weight,0);let Rt=Math.random()*ft;for(const wt of he)if(Rt-=wt.weight,Rt<=0)return wt;return he[he.length-1]}function tt(ft){let Rt=0;for(let wt=0;wt<ft.length;wt++){const qt=ft.charCodeAt(wt);Rt=(Rt<<5)-Rt+qt,Rt=Rt&Rt}return Math.abs(Rt)/2147483647}async function mt(ft,Rt){if(Et)return;console.log("Starting loadObservationForGame, isLoading:",Et,"gameData:",ft),xt(!0),N(null),pe(null),ie(!1),console.log("Host loading observation for round:",ft.round);const wt=`${ft.id||ft.gameId}_${ft.round}`;console.log("🎲 Using deterministic seed:",wt);const qt=15;let Wt=0;for(await new Promise(Qt=>setTimeout(Qt,1e3));Wt<qt;){Wt++,console.log(`Attempt ${Wt}/${qt}`);try{const Qt=G(),[te,$e,Hn,Di]=Qt.bbox,os=`https://api.inaturalist.org/v1/observations?photos=true&quality_grade=research&order=desc&per_page=100&geo=true&geoprivacy=open&page=${Math.floor(Math.random()*100)}&swlat=${$e}&swlng=${te}&nelat=${Di}&nelng=${Hn}&taxon_id=3&captive=false`,He=await fetch(os);if(He.status===429){console.log("💤 Request limit, waiting 500ms..."),await new Promise(Te=>setTimeout(Te,500));continue}const fn=await He.json();if(!fn.results||fn.results.length===0)continue;const sn=(fn.results||[]).filter(Te=>Te.photos&&Te.photos.length&&Te.geojson?.coordinates&&Te.geojson.type==="Point");if(!sn.length){console.log("No valid observations found");continue}const vi=Math.floor(tt(wt+"_base")*sn.length),qn=sn[vi],jt=qn.geojson.coordinates[1],Gi=qn.geojson.coordinates[0],Ds=Fi(jt,Gi),wr=`https://api.inaturalist.org/v1/observations?photos=true&quality_grade=research&order=desc&per_page=100&geo=true&geoprivacy=open&coordinates_obscured=false&lat=${jt}&lng=${Gi}&radius=50&taxon_id=3&captive=false`,Zi=await fetch(wr);if(Zi.status===429){console.log("💤 Cluster request limit, waiting 500ms..."),await new Promise(Te=>setTimeout(Te,500));continue}const ai=await Zi.json();if(!ai.results||ai.results.length<8)continue;const li=ai.results.filter(Te=>Te.photos&&Te.photos.length&&Te.geojson?.coordinates&&Te.geojson.type==="Point");if(li.length>=8){const Te=new Map;li.forEach(wn=>{const Wi=wn.taxon?.preferred_common_name||wn.taxon?.name||"Unknown";Te.has(Wi)||Te.set(Wi,wn)});let bn;Te.size>=8?bn=[...Array.from(Te.values())].sort((ui,Ti)=>{const as=tt(wt+"_shuffle_"+ui.id),Br=tt(wt+"_shuffle_"+Ti.id);return as-Br}).slice(0,8):bn=[...li].sort((Wi,ui)=>{const Ti=tt(wt+"_shuffle_"+Wi.id),as=tt(wt+"_shuffle_"+ui.id);return Ti-as}).slice(0,8);const on=bn.map(wn=>({id:wn.id,photo:wn.photos[0].url.replace("square","large"),lat:wn.geojson.coordinates[1],lon:wn.geojson.coordinates[0],species:wn.taxon?.preferred_common_name||wn.taxon?.name,hotspot:Ds}));if(console.log("Found 8 items, saving to game:",on.length),at&&ft?.round){console.log("💾 Saving round data to Firestore - GameId:",at,"Round:",ft.round);try{await zP(at,ft.round,{items:on,index:0}),console.log("✅ Saved round data to game successfully")}catch(wn){console.error("❌ Error saving round data:",wn)}}else console.log("❌ Cannot save round data - GameId:",at,"Round:",ft?.round);xt(!1);return}await new Promise(Te=>setTimeout(Te,200))}catch(Qt){console.error(`Error en intento ${Wt}:`,Qt),await new Promise(te=>setTimeout(te,500))}}console.error("❌ No valid cluster found after several attempts"),q("Error loading observations. The iNaturalist API is experiencing problems. Try again in a few minutes."),xt(!1)}function Nt(){return qp({click(ft){Zt||yt||N(ft.latlng)}}),null}function re(){const ft=Hc(),Rt=Z.useRef(!1);return Z.useEffect(()=>{if(!(!le||!le.observation)&&!Rt.current){const wt=[le.observation.lat,le.observation.lon];ft.setView(wt,ft.getZoom(),{animate:!1}),Rt.current=!0}},[le]),Z.useEffect(()=>{Rt.current=!1},[le]),null}async function Mt(){if(!(!O||!H||Zt)){ze(!0);try{const ft=Me(O.lat,O.lon,H.lat,H.lng);pe(ft),ie(!0),Qn(!0),await UP(at,r.uid,ft,{lat:H.lat,lng:H.lng})}catch(ft){console.error("Error enviando guess:",ft),ze(!1)}}}Z.useEffect(()=>{const ft=gu(vn,async Rt=>{if(t(Rt||null),Rt){const wt=await Bi(Jt(Lt,"users",Rt.uid));o(wt.exists()&&wt.data()?.nickname||"")}});return()=>ft()},[]),Z.useEffect(()=>{if(!l)return;const ft=dw(l,wt=>{console.log("🏠 Room update:",wt),y(wt),wt?.gameId&&(console.log("🎮 Game ID detected in room:",wt.gameId),Tt(wt.gameId),Ct("playing"))}),Rt=mw(l,wt=>{console.log("👥 Players update:",wt),E(wt)});return()=>{ft(),Rt()}},[l]),Z.useEffect(()=>{if(!at)return;const ft=Os(Jt(Lt,"multiplayer_games",at),Rt=>{if(Rt.exists()){const wt={id:Rt.id,...Rt.data()};_t(wt),wt.state==="finished"&&Bt!=="finished"&&console.log("🎯 Game finished in Firestore, but waiting to show last round results first");const qt=wt.round||1,Wt=wt.rounds?.[qt];if(console.log("🎮 Game update - Round:",qt,"Round data:",Wt,"User:",r?.uid,"Host:",wt.hostUid),qt!==rn.current&&!yi){if(console.log("Round change detected, resetting state from round",rn.current,"to round",qt),rn.current>0){const Qt=rn.current,te=wt.rounds?.[Qt];console.log("Showing results for completed round:",Qt,"Data:",te),te&&te.guesses&&te.results&&!Ue&&!xn.has(Qt)?(console.log("🎯 All players finished round, showing results for round",Qt),console.log("📊 Round data:",{guesses:Object.keys(te.guesses).length,results:te.results,players:Object.keys(wt.players).length}),en({round:Qt,observation:te.items?.[te.index],guesses:te.guesses,results:te.results,players:wt.players}),Xe(!0),nn($e=>new Set([...$e,Qt]))):console.log("❌ Not showing results:",{hasRoundData:!!te,hasGuesses:!!te?.guesses,hasResults:!!te?.results,showResults:Ue,isProcessed:xn.has(Qt)})}N(null),pe(null),ie(!1),ze(!1),Qn(!1),rn.current=qt}if(Wt&&Wt.items&&typeof Wt.index=="number"){console.log("✅ Loading round data for all players"),B(Wt.items);const Qt=Wt.items[Wt.index];k(Qt)}else r&&wt.hostUid===r.uid&&!Wt?(console.log("🎯 Host loading observation for round:",qt),mt(wt,r.uid)):Wt||console.log("⏳ Non-host waiting for host to load round data")}});return()=>ft()},[at,r]);const Ot=Z.useRef(null);Z.useEffect(()=>()=>{Ot.current&&(clearInterval(Ot.current),Ot.current=null)},[]),Z.useEffect(()=>{if(Ue&&le)return Ot.current&&clearInterval(Ot.current),jn(10),Ot.current=setInterval(()=>{jn(ft=>{if(ft<=1){Ot.current&&(clearInterval(Ot.current),Ot.current=null),Xe(!1),en(null);const Rt=ut?.maxRounds||5,wt=le?.round||0;if(wt>=5||wt>=Rt){if(console.log("🏁 Last round completed, transitioning to finished state"),Ct("finished"),ut?.players){const qt=Object.entries(ut.players).reduce((Wt,[Qt,te])=>(te.totalScore||0)>(Wt.totalScore||0)?{uid:Qt,...te}:Wt,{totalScore:0});V(qt.uid),console.log("🏆 Winner calculated:",qt.uid,"with score:",qt.totalScore)}}else Bt!=="finished"&&(N(null),pe(null),ie(!1),ze(!1),Qn(!1));return 0}return ft-1})},1e3),()=>{Ot.current&&(clearInterval(Ot.current),Ot.current=null)}},[Ue,le]);async function Yt(){q(""),nt(!0);try{const ft=await hw(n);h(ft.roomId)}catch(ft){console.error("createRoom error",ft),q(ft?.message||"No se pudo crear la sala")}finally{nt(!1)}}async function Ae(){q(""),nt(!0);try{const ft=await fw(x.trim().toUpperCase(),n);h(ft)}catch(ft){console.error("joinRoom error",ft),q(ft?.message||"No se pudo unir")}finally{nt(!1)}}async function hn(){l&&await pw(l),h(null),y(null),E([]),Tt(null),_t(null),Ct("lobby")}async function Bn(){q(""),nt(!0);try{const ft=await gw(l);Tt(ft),Ct("playing")}catch(ft){console.error("create multiplayer game error",ft),q(ft?.message||"No se pudo iniciar el juego")}finally{nt(!1)}}if(!r)return A.jsx("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:A.jsxs("div",{style:{background:"#111827",padding:24,borderRadius:12,color:"#fff",width:480,textAlign:"center"},children:[A.jsx("h2",{style:{marginTop:0},children:"Multiplayer Game"}),A.jsx("p",{style:{opacity:.85,marginBottom:20},children:"Sign in to play."}),A.jsx("button",{onClick:()=>window.location.href="?view=login",style:{padding:"0.6rem 1rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600},children:"Sign In"})]})});if(Bt==="lobby")return l?A.jsx("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:A.jsxs("div",{style:{background:"#111827",padding:24,borderRadius:12,color:"#fff",width:560,textAlign:"center"},children:[A.jsxs("h2",{style:{marginTop:0},children:["Room: ",p?.code||""]}),A.jsx("div",{style:{display:"flex",gap:8,justifyContent:"center",flexWrap:"wrap"},children:v.map(ft=>A.jsx("div",{style:{background:"#0b1220",padding:10,borderRadius:8},children:A.jsx("div",{style:{fontWeight:700},children:ft.nickname||ft.id})},ft.id))}),at?A.jsx("div",{style:{marginTop:12},children:A.jsx("div",{style:{color:"#10b981",fontWeight:600},children:"¡Redirigiendo al juego..."})}):p?.hostUid===r.uid&&v.length>=2&&v.length<=10?A.jsx("div",{style:{marginTop:12},children:A.jsx("button",{onClick:Bn,disabled:Q,style:{padding:"0.6rem 1rem",background:Q?"#6b7280":"#8b5cf6",color:"#fff",border:"none",borderRadius:8,cursor:Q?"not-allowed":"pointer",fontWeight:600},children:Q?"Starting...":"Start multiplayer game"})}):v.length<2?A.jsxs("div",{style:{marginTop:12,color:"#fbbf24"},children:["Waiting for more players... (",v.length,"/2-10)"]}):v.length>10?A.jsxs("div",{style:{marginTop:12,color:"#fca5a5"},children:["Too many players (",v.length,"/10 maximum)"]}):null,M&&A.jsx("div",{style:{marginTop:10,color:"#fca5a5",fontSize:12},children:M}),A.jsx("div",{style:{marginTop:12},children:A.jsx("button",{onClick:hn,style:{padding:"0.6rem 1rem",background:"#ef4444",color:"#fff",border:"none",borderRadius:8,cursor:"pointer"},children:"Leave room"})})]})}):A.jsx("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:A.jsxs("div",{style:{background:"#111827",padding:24,borderRadius:12,color:"#fff",width:520,textAlign:"center"},children:[A.jsx("h2",{style:{marginTop:0},children:"Multiplayer Game (2-10 players)"}),A.jsxs("div",{children:["Your nick: ",A.jsx("b",{children:n||r.email})]}),A.jsx("div",{style:{display:"flex",gap:10,justifyContent:"center",marginTop:12},children:A.jsx("button",{onClick:Yt,disabled:Q,style:{padding:"0.6rem 1rem",background:Q?"#6b7280":"#10b981",color:"#fff",border:"none",borderRadius:8,cursor:Q?"not-allowed":"pointer",fontWeight:600},children:Q?"Creating...":"Create room"})}),A.jsxs("div",{style:{marginTop:14},children:[A.jsx("input",{value:x,onChange:ft=>P(ft.target.value),placeholder:"CODE",style:{padding:"0.5rem 0.8rem",borderRadius:8,border:"1px solid #374151",background:"#0b1220",color:"#fff"}}),A.jsx("button",{onClick:Ae,disabled:Q,style:{marginLeft:8,padding:"0.6rem 1rem",background:Q?"#6b7280":"#8b5cf6",color:"#fff",border:"none",borderRadius:8,cursor:Q?"not-allowed":"pointer"},children:"Join"})]}),M&&A.jsx("div",{style:{marginTop:10,color:"#fca5a5",fontSize:12},children:M})]})});if(Bt==="playing")return A.jsxs("div",{className:"container-narrow",style:{padding:"1rem",textAlign:"center"},children:[A.jsx("div",{style:{position:"fixed",left:12,top:12,zIndex:1e3},children:A.jsx("button",{onClick:()=>window.location.href="?view=menu",style:{padding:"6px 10px",borderRadius:8,border:"none",background:"#374151",color:"#fff",cursor:"pointer"},children:"Back"})}),A.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold"},children:"Birders Place - Multiplayer"}),ut&&A.jsxs("div",{style:{marginBottom:"1rem",color:"#fff"},children:[A.jsxs("h3",{style:{margin:0},children:["Round ",ut.round||1," / ",si]}),A.jsxs("div",{style:{fontSize:"12px",color:"#9ca3af",marginTop:"4px"},children:["Host: ",ut.hostUid===r?.uid?"You":"Other player"," | State: ",ut.state||"playing"]}),A.jsx("div",{style:{display:"flex",gap:8,justifyContent:"center",flexWrap:"wrap",marginTop:12},children:Object.entries(ut.players||{}).map(([ft,Rt])=>A.jsxs("div",{style:{background:"#2c3e50",padding:"8px 12px",borderRadius:"8px",border:ft===r.uid?"2px solid #3498db":"2px solid transparent"},children:[A.jsx("div",{style:{fontWeight:700,color:"#fff",fontSize:"14px"},children:Rt.nickname||(ft===r.uid?n||"You":"Player")}),A.jsxs("div",{style:{color:"#ecf0f1",fontSize:"12px"},children:["Points: ",(Rt.totalScore||0).toLocaleString()]})]},ft))})]}),!O&&A.jsx("div",{style:{marginTop:"1rem",color:"#fbbf24"},children:Et?A.jsxs("div",{children:[A.jsx("div",{children:"Loading round..."}),A.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",marginTop:"4px"},children:ut?.hostUid===r?.uid?"Searching for observations...":"Waiting for host to load the round..."})]}):M?A.jsxs("div",{children:[A.jsx("div",{style:{color:"#ef4444",marginBottom:"8px"},children:M}),ut?.hostUid===r?.uid&&A.jsx("button",{onClick:()=>{q(""),mt(ut,r.uid)},style:{padding:"0.5rem 1rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px"},children:"Reintentar"})]}):"Waiting for round..."}),j.length>0&&A.jsx("div",{className:"gallery",children:j.map(ft=>A.jsx("div",{className:`gallery-item ${O?.id===ft.id?"active":""}`,onClick:()=>{k(ft),ge(ft.photo)},children:A.jsx("img",{src:ft.photo})},ft.id))}),O&&A.jsx("div",{className:"map-wrapper",children:A.jsxs(xc,{center:[20,0],zoom:2,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,style:{height:"100%",width:"100%"},children:[A.jsx(Rc,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OSM</a> © <a href="https://carto.com/">CARTO</a>',noWrap:!0}),A.jsx(Cc,{}),A.jsx(Nt,{}),H&&A.jsx(ns,{position:[H.lat,H.lng]}),yt&&!Ue&&A.jsx(A.Fragment,{children:H&&A.jsx(ns,{position:[H.lat,H.lng]})})]})}),O&&!yt&&H&&!Zt&&A.jsx("div",{style:{marginTop:"12px",color:"#d1d5db",fontSize:"14px"},children:"Haz click en el mapa para cambiar la posición"}),O&&!yt&&H&&!Zt&&A.jsx("button",{onClick:Mt,style:{marginTop:"18px",padding:"0.6rem 1.2rem",backgroundColor:"#27ae60",color:"white",border:"none",borderRadius:"10px",cursor:"pointer"},children:"Verify"}),Zt&&A.jsx("div",{style:{marginTop:"18px",padding:"0.6rem 1.2rem",backgroundColor:"#95a5a6",color:"white",borderRadius:"10px",textAlign:"center"},children:"Procesando..."}),yt&&!Ue&&A.jsxs("div",{className:"result-panel",children:[A.jsxs("h3",{style:{margin:0},children:["Round ",ut?.round||1]}),A.jsx("div",{style:{marginTop:16,color:"#fbbf24",fontSize:"18px",fontWeight:"bold"},children:"⏳ Waiting for other players..."})]}),Ue&&le&&A.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",zIndex:2e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem"},children:A.jsxs("div",{style:{background:"#1f2937",borderRadius:"12px",padding:"2rem",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflow:"auto"},children:[A.jsxs("h2",{style:{color:"#f1c40f",margin:"0 0 1rem 0",textAlign:"center"},children:["Round ",le.round," - Results"]}),A.jsxs("div",{style:{background:"#374151",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",textAlign:"center"},children:[A.jsxs("div",{style:{color:"#d1d5db",fontSize:"16px",marginBottom:"8px"},children:["🎮 Juego Multijugador: ",Object.entries(le.players).map(([ft,Rt])=>{const wt=ft===r?.uid;return A.jsx("span",{style:{color:wt?"#8b5cf6":"#10b981",fontWeight:"bold",margin:"0 4px"},children:wt?"You":Rt?.nickname||"Player"},ft)}).reduce((ft,Rt,wt)=>[ft,wt===1?" vs ":"",Rt])]}),A.jsxs("div",{style:{color:"#9ca3af",fontSize:"14px"},children:["Rounds played: ",le.round," | Total score: ",Object.entries(le.players).map(([ft,Rt])=>{const wt=ft===r?.uid,qt=Rt?.totalScore??0;return A.jsxs("span",{style:{color:wt?"#8b5cf6":"#10b981",fontWeight:"bold",margin:"0 8px"},children:[wt?"You":Rt?.nickname||"Player",": ",qt.toLocaleString()]},ft)}).reduce((ft,Rt,wt)=>[ft,wt===1?" | ":"",Rt])]})]}),A.jsx("div",{style:{height:"300px",marginBottom:"1rem",borderRadius:"8px",overflow:"hidden"},children:A.jsxs(xc,{center:[20,0],zoom:2,maxBounds:[[-90,-180],[90,180]],maxBoundsViscosity:1,style:{height:"100%",width:"100%"},children:[A.jsx(Rc,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OSM</a> © <a href="https://carto.com/">CARTO</a>',noWrap:!0}),A.jsx(Cc,{}),A.jsx(re,{}),A.jsx(ns,{position:[le.observation.lat,le.observation.lon],icon:Gp,children:A.jsx(Ic,{permanent:!0,direction:"top",offset:[-20,-25],className:"distance-tooltip",style:{background:"transparent",border:"none",boxShadow:"none",color:"#dc2626",fontWeight:"bold",fontSize:"14px",textAlign:"center",width:"40px",marginLeft:"-20px"},children:"📍 REAL LOCATION"})}),Object.entries(le.guesses).map(([ft,Rt],wt)=>{const qt=ft===r?.uid,Wt=le.players[ft],Qt=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f97316","#ec4899","#6366f1"],te=Qt[wt%Qt.length];return A.jsx(ns,{position:[Rt.guess.lat,Rt.guess.lng],children:A.jsx(Ic,{permanent:!0,direction:"top",offset:[-20,-25],className:"distance-tooltip",style:{background:"transparent",border:"none",boxShadow:"none",color:te,fontWeight:"bold",fontSize:"14px",textAlign:"center",width:"40px",marginLeft:"-20px"},children:qt?"YOU":Wt?.nickname||"Player"})},ft)})]})}),le.results&&le.results.rankings&&A.jsxs("div",{style:{background:"#374151",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:[A.jsx("h3",{style:{color:"#f1c40f",margin:"0 0 1rem 0",textAlign:"center"},children:"Total Ranking"}),A.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:le.results.rankings.map((ft,Rt)=>{const wt=ft.uid===r?.uid,qt=Rt===0?"🥇":Rt===1?"🥈":Rt===2?"🥉":`${Rt+1}.`,Wt=le.players[ft.uid]?.totalScore||0;return A.jsxs("div",{style:{background:wt?"#1f2937":"#111827",padding:"12px",borderRadius:"8px",border:wt?"2px solid #8b5cf6":"1px solid #374151",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[A.jsx("span",{style:{fontSize:"18px"},children:qt}),A.jsx("span",{style:{fontWeight:"bold",color:wt?"#8b5cf6":"#d1d5db"},children:wt?"You":ft.nickname})]}),A.jsxs("div",{style:{textAlign:"right"},children:[A.jsxs("div",{style:{color:"#f1c40f",fontWeight:"bold",fontSize:"16px"},children:[Wt.toLocaleString()," pts"]}),A.jsxs("div",{style:{color:"#10b981",fontSize:"12px"},children:["+",ft.points.toLocaleString()," esta ronda"]}),A.jsx("div",{style:{color:"#9ca3af",fontSize:"11px"},children:Oi(ft.distance)})]})]},ft.uid)})})]}),A.jsx("div",{style:{textAlign:"center",color:"#9ca3af"},children:(()=>{const ft=ut?.maxRounds||5,Rt=le?.round||0,wt=Rt>=5||Rt>=ft;return console.log("🔍 Round detection:",{maxRounds:ft,currentRound:Rt,isLastRound:wt,status:Bt,gameMaxRounds:ut?.maxRounds}),A.jsxs(A.Fragment,{children:[A.jsx("div",{style:{fontSize:"18px",marginBottom:"8px"},children:Bt==="finished"?"Mostrando resultados finales...":wt?"View final results in:":"Next round in:"}),A.jsx("div",{style:{fontSize:"48px",fontWeight:"bold",color:Un<=3?"#ef4444":"#f1c40f",textShadow:"0 0 10px rgba(241, 196, 15, 0.5)"},children:Un}),wt&&Bt!=="finished"&&A.jsx("button",{onClick:()=>{if(Xe(!1),en(null),Ct("finished"),ut?.players){const qt=Object.entries(ut.players).reduce((Wt,[Qt,te])=>(te.totalScore||0)>(Wt.totalScore||0)?{uid:Qt,...te}:Wt,{totalScore:0});V(qt.uid)}},style:{marginTop:"20px",padding:"12px 24px",fontSize:"16px",fontWeight:"bold",color:"#fff",background:"linear-gradient(135deg, #f39c12 0%, #e67e22 100%)",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 8px rgba(243, 156, 18, 0.3)"},children:"🏆 Ver resultados finales ahora"})]})})()})]})}),At&&A.jsxs("div",{className:"lightbox-backdrop",onClick:()=>ge(null),children:[A.jsx("button",{className:"lightbox-close",onClick:()=>ge(null),children:"Cerrar"}),A.jsx("img",{className:"lightbox-img",src:At,alt:"Foto"})]})]});if(Bt==="finished"){const ft=ut?.players?Object.entries(ut.players).map(([Rt,wt])=>({uid:Rt,nickname:wt.nickname||"Player",totalScore:wt.totalScore||0})).sort((Rt,wt)=>wt.totalScore-Rt.totalScore):[];return A.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",position:"relative",overflow:"hidden"},children:[A.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%)",pointerEvents:"none"}}),A.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",borderRadius:"20px",padding:"40px",maxWidth:"600px",width:"100%",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)",position:"relative",zIndex:1},children:[A.jsxs("div",{style:{marginBottom:"30px"},children:[A.jsx("h1",{style:{margin:0,color:"#fff",fontSize:"36px",fontWeight:"bold",textShadow:"0 4px 8px rgba(0, 0, 0, 0.3)",marginBottom:"10px"},children:"🎉 ¡Juego Terminado! 🎉"}),A.jsxs("div",{style:{fontSize:"18px",color:"#a0a0a0",marginBottom:"20px"},children:[ut?.maxRounds||5," rondas completadas"]})]}),A.jsxs("div",{style:{background:"linear-gradient(135deg, #ffd700 0%, #ffed4e 100%)",borderRadius:"15px",padding:"20px",marginBottom:"30px",border:"3px solid #ffd700",boxShadow:"0 10px 20px rgba(255, 215, 0, 0.3)",position:"relative"},children:[A.jsx("div",{style:{fontSize:"24px",marginBottom:"10px"},children:"🏆"}),A.jsx("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#1a1a2e",marginBottom:"5px"},children:ut?.players?.[kt]?.nickname||"Player"}),A.jsx("div",{style:{fontSize:"18px",color:"#1a1a2e",opacity:.8},children:"¡Felicidades por la victoria!"}),A.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#1a1a2e",marginTop:"10px"},children:[ut?.players?.[kt]?.totalScore?.toLocaleString()||0," points"]})]}),A.jsxs("div",{style:{marginBottom:"30px"},children:[A.jsx("h3",{style:{color:"#fff",fontSize:"24px",marginBottom:"20px",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)"},children:"Clasificación Final"}),A.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:ft.map((Rt,wt)=>{const qt=Rt.uid===r?.uid,Wt=wt<3;let Qt,te,$e;return wt===0?(Qt="linear-gradient(135deg, #ffd700 0%, #ffed4e 100%)",te="#ffd700",$e="#1a1a2e"):wt===1?(Qt="linear-gradient(135deg, #c0c0c0 0%, #e8e8e8 100%)",te="#c0c0c0",$e="#1a1a2e"):wt===2?(Qt="linear-gradient(135deg, #cd7f32 0%, #daa520 100%)",te="#cd7f32",$e="#1a1a2e"):(Qt=qt?"rgba(139, 92, 246, 0.3)":"rgba(255, 255, 255, 0.1)",te=qt?"#8b5cf6":"rgba(255, 255, 255, 0.2)",$e="#fff"),A.jsxs("div",{style:{background:Qt,borderRadius:"12px",padding:"16px",border:`2px solid ${te}`,display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:Wt?"0 8px 16px rgba(0, 0, 0, 0.2)":"0 4px 8px rgba(0, 0, 0, 0.1)",transform:Wt?"scale(1.02)":"scale(1)",transition:"all 0.3s ease"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[A.jsx("div",{style:{fontSize:"24px",minWidth:"30px",textAlign:"center"},children:wt===0?"🥇":wt===1?"🥈":wt===2?"🥉":`${wt+1}.`}),A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:"bold",fontSize:"18px",color:$e,textShadow:Wt?"0 1px 2px rgba(0, 0, 0, 0.1)":"none"},children:qt?"You":Rt.nickname}),qt&&A.jsx("div",{style:{fontSize:"12px",color:$e,opacity:.8},children:"(Jugador actual)"})]})]}),A.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:$e,textShadow:Wt?"0 1px 2px rgba(0, 0, 0, 0.1)":"none"},children:[Rt.totalScore.toLocaleString()," pts"]})]},Rt.uid)})})]}),A.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center",flexWrap:"wrap"},children:[A.jsx("button",{onClick:()=>{Ct("lobby"),Tt(null),_t(null),V(null),k(null),B([]),N(null),pe(null),ie(!1),ze(!1),Xe(!1),en(null),jn(10),nn(new Set),Qn(!1),q(null),nt(!1),rn.current=0,oi.current=null},style:{padding:"15px 30px",fontSize:"16px",fontWeight:"bold",color:"#fff",background:"linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)",border:"none",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 8px rgba(231, 76, 60, 0.3)",minWidth:"140px"},onMouseOver:Rt=>{Rt.target.style.transform="translateY(-2px)",Rt.target.style.boxShadow="0 6px 12px rgba(231, 76, 60, 0.4)"},onMouseOut:Rt=>{Rt.target.style.transform="translateY(0)",Rt.target.style.boxShadow="0 4px 8px rgba(231, 76, 60, 0.3)"},children:"🎮 Jugar de nuevo"}),A.jsx("button",{onClick:()=>{Ct("lobby"),Tt(null),_t(null),V(null),k(null),B([]),N(null),pe(null),ie(!1),ze(!1),Xe(!1),en(null),jn(10),nn(new Set),Qn(!1),q(null),nt(!1),rn.current=0,oi.current=null},style:{padding:"15px 30px",fontSize:"16px",fontWeight:"bold",color:"#1a1a2e",background:"linear-gradient(135deg, #f39c12 0%, #e67e22 100%)",border:"none",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 8px rgba(243, 156, 18, 0.3)",minWidth:"140px"},onMouseOver:Rt=>{Rt.target.style.transform="translateY(-2px)",Rt.target.style.boxShadow="0 6px 12px rgba(243, 156, 18, 0.4)"},onMouseOut:Rt=>{Rt.target.style.transform="translateY(0)",Rt.target.style.boxShadow="0 4px 8px rgba(243, 156, 18, 0.3)"},children:"🏠 Volver al menú"})]})]})]})}return null}function $P(){const[r,t]=Z.useState("menu");return Z.useEffect(()=>{const o=new URLSearchParams(window.location.search).get("view");o&&["menu","single","multi","login","duels","rooms","multiplayer"].includes(o)&&t(o)},[]),r==="single"?A.jsxs(A.Fragment,{children:[A.jsx(Qa,{}),A.jsx(aS,{onBack:()=>t("menu")})]}):r==="login"?A.jsxs(EP,{children:[A.jsx(Qa,{}),A.jsx("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:A.jsx(wP,{onDone:()=>t("menu")})})]}):r==="multi"?A.jsxs("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:[A.jsx(Qa,{}),A.jsxs("div",{style:{background:"#111827",padding:24,borderRadius:12,color:"#fff",width:420,textAlign:"center"},children:[A.jsx("h2",{style:{marginTop:0},children:"Multiplayer"}),A.jsx("p",{style:{opacity:.85},children:"Choose a mode"}),A.jsxs("div",{style:{display:"grid",gap:10,marginTop:8},children:[A.jsx("button",{onClick:()=>t("duels"),style:{padding:"0.6rem 1rem",background:"#10b981",color:"#fff",border:"none",borderRadius:8,cursor:"pointer"},children:"1v1 Duels"}),A.jsx("button",{onClick:()=>t("rooms"),style:{padding:"0.6rem 1rem",background:"#8b5cf6",color:"#fff",border:"none",borderRadius:8,cursor:"pointer"},children:"Duel rooms"}),A.jsx("button",{onClick:()=>t("multiplayer"),style:{padding:"0.6rem 1rem",background:"#f59e0b",color:"#fff",border:"none",borderRadius:8,cursor:"pointer"},children:"Multiplayer rooms (2-10)"}),A.jsx("button",{onClick:()=>t("menu"),style:{padding:"0.6rem 1rem",background:"#374151",color:"#fff",border:"none",borderRadius:8,cursor:"pointer"},children:"Back"})]})]})]}):r==="duels"?A.jsxs(A.Fragment,{children:[A.jsx(Qa,{}),A.jsx(QP,{}),A.jsx("div",{style:{position:"fixed",left:12,top:12},children:A.jsx("button",{onClick:()=>t("menu"),style:{padding:"6px 10px",borderRadius:8,border:"none",background:"#374151",color:"#fff",cursor:"pointer"},children:"Back"})})]}):r==="rooms"?A.jsxs(A.Fragment,{children:[A.jsx(Qa,{}),A.jsx(KP,{}),A.jsx("div",{style:{position:"fixed",left:12,top:12},children:A.jsx("button",{onClick:()=>t("menu"),style:{padding:"6px 10px",borderRadius:8,border:"none",background:"#374151",color:"#fff",cursor:"pointer"},children:"Back"})})]}):r==="multiplayer"?A.jsxs(A.Fragment,{children:[A.jsx(Qa,{}),A.jsx(XP,{}),A.jsx("div",{style:{position:"fixed",left:12,top:12},children:A.jsx("button",{onClick:()=>t("menu"),style:{padding:"6px 10px",borderRadius:8,border:"none",background:"#374151",color:"#fff",cursor:"pointer"},children:"Back"})})]}):A.jsxs("div",{style:{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center"},children:[A.jsx(Qa,{}),A.jsxs("div",{style:{background:"#0f172a",padding:28,borderRadius:16,width:460,textAlign:"center",color:"#fff",boxShadow:"0 8px 24px rgba(0,0,0,0.35)"},children:[A.jsx("h1",{style:{marginTop:0},children:"Birders Place"}),A.jsx("p",{style:{opacity:.9,marginTop:6},children:"Choose your battle mode"}),A.jsxs("div",{style:{marginTop:"20px",padding:"12px",background:"rgba(255,255,255,0.1)",borderRadius:"8px",fontSize:"12px",color:"#9ca3af",textAlign:"center"},children:[A.jsxs("div",{style:{marginBottom:"8px"},children:["🐦 Images provided by ",A.jsx("a",{href:"https://inaturalist.org",target:"_blank",rel:"noopener noreferrer",style:{color:"#10b981",textDecoration:"none"},children:"iNaturalist"})]}),A.jsx("div",{children:"💚 Educational bird identification game"})]}),A.jsxs("div",{style:{display:"grid",gap:12,marginTop:16},children:[A.jsxs("div",{style:{position:"relative"},children:[A.jsx("button",{onClick:()=>t("duels"),style:{padding:"1rem 1.2rem",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",border:"none",borderRadius:12,cursor:"pointer",fontWeight:700,fontSize:"16px",boxShadow:"0 4px 14px rgba(16, 185, 129, 0.3)",transform:"scale(1.02)",transition:"all 0.2s ease"},children:"⚔️ 1v1 Duels"}),A.jsx("div",{style:{position:"absolute",top:"-8px",right:"-8px",background:"#f59e0b",color:"#000",padding:"2px 6px",borderRadius:"12px",fontSize:"10px",fontWeight:"bold"},children:"COMPETITIVE"}),A.jsx("div",{style:{fontSize:"12px",color:"#9ca3af",marginTop:"4px",textAlign:"center"},children:"🏆 Rank up & climb the leaderboard"})]}),A.jsxs("div",{style:{marginTop:"20px",padding:"12px",background:"rgba(255,255,255,0.05)",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)"},children:[A.jsx("div",{style:{fontSize:"14px",color:"#9ca3af",marginBottom:"12px",fontWeight:"600"},children:"👥 Play with Friends"}),A.jsxs("div",{style:{display:"grid",gap:8},children:[A.jsx("button",{onClick:()=>t("rooms"),style:{padding:"0.7rem 1rem",background:"#8b5cf6",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600,fontSize:"14px"},children:"🏠 Duel rooms"}),A.jsx("button",{onClick:()=>t("multiplayer"),style:{padding:"0.7rem 1rem",background:"#f59e0b",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600,fontSize:"14px"},children:"🎮 Multiplayer rooms (2-10)"})]})]}),A.jsxs("div",{style:{display:"grid",gap:8,marginTop:"16px"},children:[A.jsx("button",{onClick:()=>t("single"),style:{padding:"0.6rem 1rem",background:"#374151",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600,fontSize:"14px"},children:"🎯 Single Player"}),A.jsx("button",{onClick:()=>t("login"),style:{padding:"0.6rem 1rem",background:"#2563eb",color:"#fff",border:"none",borderRadius:8,cursor:"pointer",fontWeight:600,fontSize:"14px"},children:"🔐 Login"})]})]})]})]})}U1.createRoot(document.getElementById("root")).render(A.jsx(Z.StrictMode,{children:A.jsx($P,{})}));
